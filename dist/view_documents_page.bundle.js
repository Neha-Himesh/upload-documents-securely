/*! For license information please see view_documents_page.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={36:(t,e,n)=>{n.d(e,{Ao:()=>ur,Bx:()=>lr,Jh:()=>dr,O4:()=>hr,ZS:()=>gr,_L:()=>pr,fF:()=>cr,iO:()=>mr,ro:()=>fr});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},a=a||{},c=o||self;function u(){}function h(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),f=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function v(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function w(){this.s=this.s,this.o=this.o}var _={};w.prototype.s=!1,w.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++f)}(this);delete _[t]}},w.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var b=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function E(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var k,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function C(t,e){return t<e?-1:t>e?1:0}t:{var R=c.navigator;if(R){var O=R.userAgent;if(O){k=O;break t}}k=""}function D(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function P(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<L.length;s++)n=L[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function M(t){return M[" "](t),t}M[" "]=u;var U,F,V=N(k,"Opera"),j=N(k,"Trident")||N(k,"MSIE"),B=N(k,"Edge"),q=B||j,z=N(k,"Gecko")&&!(N(k.toLowerCase(),"webkit")&&!N(k,"Edge"))&&!(N(k,"Trident")||N(k,"MSIE"))&&!N(k,"Edge"),K=N(k.toLowerCase(),"webkit")&&!N(k,"Edge");function H(){var t=c.document;return t?t.documentMode:void 0}t:{var $="",G=(F=k,z?/rv:([^\);]+)(\)|;)/.exec(F):B?/Edge\/([\d\.]+)/.exec(F):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(F):K?/WebKit\/(\S+)/.exec(F):V?/(?:Version)[ \/]?(\S+)/.exec(F):void 0);if(G&&($=G?G[1]:""),j){var W=H();if(null!=W&&W>parseFloat($)){U=String(W);break t}}U=$}var J,Q={};function X(){return t=Q,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=A(String(U)).split("."),n=A("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=C(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||C(0==s[2].length,0==o[2].length)||C(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}c.document&&j?J=H()||parseInt(U,10)||void 0:J=void 0;var Y=J,Z=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",u,e),c.removeEventListener("test",u,e)}catch(t){}return t}();function tt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function et(t,e){if(tt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z){t:{try{M(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:nt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&et.Z.h.call(this)}}tt.prototype.h=function(){this.defaultPrevented=!0},v(et,tt);var nt={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),it=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++it,this.ca=this.fa=!1}function ot(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function at(t){this.src=t,this.g={},this.h=0}function ct(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=b(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ot(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ut(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}at.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ut(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new st(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),lt={};function dt(t,e,n,r,i){if(r&&r.once)return pt(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)dt(t,e[s],n,r,i);return null}return n=bt(n),t&&t[rt]?t.N(e,n,l(r)?!!r.capture:!!r,i):ft(t,e,n,!1,r,i)}function ft(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=l(i)?!!i.capture:!!i,a=wt(t);if(a||(t[ht]=a=new at(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=vt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Z||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pt(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)pt(t,e[s],n,r,i);return null}return n=bt(n),t&&t[rt]?t.O(e,n,l(r)?!!r.capture:!!r,i):ft(t,e,n,!0,r,i)}function mt(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)mt(t,e[s],n,r,i);else r=l(r)?!!r.capture:!!r,n=bt(n),t&&t[rt]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ut(s=t.g[e],n,r,i))&&(ot(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=wt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ut(e,n,r,i)),(n=-1<t?e[t]:null)&&gt(n))}function gt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[rt])ct(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wt(e))?(ct(n,t),0==n.h&&(n.src=null,e[ht]=null)):ot(t)}}}function yt(t){return t in lt?lt[t]:lt[t]="on"+t}function vt(t,e){if(t.ca)t=!0;else{e=new et(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&gt(t),t=n.call(r,e)}return t}function wt(t){return(t=t[ht])instanceof at?t:null}var _t="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(t){return"function"==typeof t?t:(t[_t]||(t[_t]=function(e){return t.handleEvent(e)}),t[_t])}function It(){w.call(this),this.i=new at(this),this.P=this,this.I=null}function Tt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new tt(e,t);else if(e instanceof tt)e.target=e.target||t;else{var i=e;x(e=new tt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Et(o,r,!0,e)&&i}if(i=Et(o=e.g=t,r,!0,e)&&i,i=Et(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Et(o=e.g=n[s],r,!1,e)&&i}function Et(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ct(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}v(It,w),It.prototype[rt]=!0,It.prototype.removeEventListener=function(t,e,n,r){mt(this,t,e,n,r)},It.prototype.M=function(){if(It.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ot(n[r]);delete e.g[t],e.h--}}this.I=null},It.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},It.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var St=c.JSON.stringify;function kt(){var t=Lt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var At,Nt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ct.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ct=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Rt}),(function(t){return t.reset()})),Rt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ot(t){c.setTimeout((function(){throw t}),0)}function Dt(t,e){At||function(){var t=c.Promise.resolve(void 0);At=function(){t.then(xt)}}(),Pt||(At(),Pt=!0),Lt.add(t,e)}var Pt=!1,Lt=new Nt;function xt(){for(var t;t=kt();){try{t.h.call(t.g)}catch(t){Ot(t)}var e=Ct;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pt=!1}function Mt(t,e){It.call(this),this.h=t||1,this.g=e||c,this.j=g(this.kb,this),this.l=Date.now()}function Ut(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ft(t,e,n){if("function"==typeof t)n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Vt(t){t.g=Ft((function(){t.g=null,t.i&&(t.i=!1,Vt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}v(Mt,It),(s=Mt.prototype).da=!1,s.S=null,s.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Tt(this,"tick"),this.da&&(Ut(this),this.start()))}},s.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},s.M=function(){Mt.Z.M.call(this),Ut(this),delete this.g};var jt=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Vt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(w);function Bt(t){w.call(this),this.h=t,this.g={}}v(Bt,w);var qt=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(qt[0]=n.toString()),n=qt);for(var i=0;i<n.length;i++){var s=dt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Kt(t){D(t.g,(function(t,e){this.g.hasOwnProperty(e)&&gt(t)}),t),t.g={}}function Ht(){this.g=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return St(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Bt.prototype.M=function(){Bt.Z.M.call(this),Kt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ht.prototype.Aa=function(){this.g=!1},Ht.prototype.info=function(){};var Gt={},Wt=null;function Jt(){return Wt=Wt||new It}function Qt(t){tt.call(this,Gt.Ma,t)}function Xt(t){var e=Jt();Tt(e,new Qt(e,t))}function Yt(t,e){tt.call(this,Gt.STAT_EVENT,t),this.stat=e}function Zt(t){var e=Jt();Tt(e,new Yt(e,t))}function te(t,e){tt.call(this,Gt.Na,t),this.size=e}function ee(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){t()}),e)}Gt.Ma="serverreachability",v(Qt,tt),Gt.STAT_EVENT="statevent",v(Yt,tt),Gt.Na="timingevent",v(te,tt);var ne={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},re={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ie(){}function se(t){return t.h||(t.h=t.i())}function oe(){}ie.prototype.h=null;var ae,ce={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ue(){tt.call(this,"d")}function he(){tt.call(this,"c")}function le(){}function de(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Bt(this),this.P=pe,t=q?125:void 0,this.W=new Mt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fe}function fe(){this.i=null,this.g="",this.h=!1}v(ue,tt),v(he,tt),v(le,ie),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},ae=new le;var pe=45e3,me={},ge={};function ye(t,e,n){t.K=1,t.v=je(Le(e)),t.s=n,t.U=!0,ve(t,null)}function ve(t,e){t.F=Date.now(),Ie(t),t.A=Le(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ze(n.h,"t",r),t.C=0,n=t.l.H,t.h=new fe,t.g=er(t.l,n?e:null,!t.s),0<t.O&&(t.L=new jt(g(t.Ia,t,t.g),t.O)),zt(t.V,t.g,"readystatechange",t.gb),e=t.H?P(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Xt(1),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function we(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function _e(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=be(t,n))==ge){4==e&&(t.o=4,Zt(14),i=!1),$t(t.j,t.m,null,"[Incomplete Response]");break}if(r==me){t.o=4,Zt(15),$t(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}$t(t.j,t.m,r,null),Ae(t,r)}we(t)&&r!=ge&&r!=me&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Zt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.L=!0,Zt(11))):($t(t.j,t.m,n,"[Invalid Chunked Response]"),ke(t),Se(t))}function be(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?me:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.C=r+n,e))}function Ie(t){t.Y=Date.now()+t.P,Te(t,t.P)}function Te(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ee(g(t.eb,t),e)}function Ee(t){t.B&&(c.clearTimeout(t.B),t.B=null)}function Se(t){0==t.l.G||t.I||Qn(t.l,t)}function ke(t){Ee(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ut(t.W),Kt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ae(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||an(n.i,t)))if(n.I=t.N,!t.J&&an(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Jn(n),Fn(n)}$n(n),Zt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ee(g(n.ab,n),6e3));if(1>=on(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else Yn(n,11)}else if((t.J||n.g==t)&&Jn(n),!S(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var c=s[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=t.g;if(u){var h=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(N(h,"spdy")||N(h,"quic")||N(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(cn(l,l.h),l.h=null))}if(r.D){var d=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Ve(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=tr(r,r.H?r.la:null,r.W),f.J){un(r.i,f);var p=f,m=r.K;m&&p.setTimeout(m),p.B&&(Ee(p),Ie(p)),r.g=f}else Hn(r);0<n.l.length&&Bn(n)}else"stop"!=s[0]&&"close"!=s[0]||Yn(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Yn(n,7):Un(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Xt(4)}catch(s){}}function Ne(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)I(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ce(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ce)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Re(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Oe(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Oe(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(s=de.prototype).setTimeout=function(t){this.P=t},s.gb=function(t){t=t.target;var e=this.L;e&&3==Dn(t)?e.l():this.Ia(t)},s.Ia=function(t){try{if(t==this.g)t:{var e=Dn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||q||this.g&&(this.h.h||this.g.ga()||Pn(this.g)))){this.I||4!=e||7==n||Xt(8==n||0>=r?3:2),Ee(this);var i=this.g.ba();this.N=i;e:if(we(this)){var s=Pn(this.g);t="";var o=s.length,a=4==Dn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ke(this),Se(this);var u="";break e}this.h.i=new c.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var h,l=this.g;if((h=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(h)){var d=h;break e}}d=null}if(!(i=d)){this.i=!1,this.o=3,Zt(12),ke(this),Se(this);break t}$t(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ae(this,i)}this.U?(_e(this,e,u),q&&this.i&&3==e&&(zt(this.V,this.W,"tick",this.fb),this.W.start())):($t(this.j,this.m,u,null),Ae(this,u)),4==e&&ke(this),this.i&&!this.I&&(4==e?Qn(this.l,this):(this.i=!1,Ie(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),ke(this),Se(this)}}}catch(e){}},s.fb=function(){if(this.g){var t=Dn(this.g),e=this.g.ga();this.C<e.length&&(Ee(this),_e(this,t,e),this.i&&4!=t&&Ie(this))}},s.cancel=function(){this.I=!0,ke(this)},s.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Xt(3),Zt(17)),ke(this),this.o=2,Se(this)):Te(this,this.Y-t)},(s=Ce.prototype).R=function(){Re(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},s.T=function(){return Re(this),this.g.concat()},s.get=function(t,e){return Oe(this.h,t)?this.h[t]:e},s.set=function(t,e){Oe(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},s.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pe(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Pe){this.g=void 0!==e?e:t.g,xe(this,t.j),this.s=t.s,Me(this,t.i),Ue(this,t.m),this.l=t.l,e=t.h;var n=new Je;n.i=e.i,e.g&&(n.g=new Ce(e.g),n.h=e.h),Fe(this,n),this.o=t.o}else t&&(n=String(t).match(De))?(this.g=!!e,xe(this,n[1]||"",!0),this.s=Be(n[2]||""),Me(this,n[3]||"",!0),Ue(this,n[4]),this.l=Be(n[5]||"",!0),Fe(this,n[6]||"",!0),this.o=Be(n[7]||"")):(this.g=!!e,this.h=new Je(null,this.g))}function Le(t){return new Pe(t)}function xe(t,e,n){t.j=n?Be(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Me(t,e,n){t.i=n?Be(e,!0):e}function Ue(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Fe(t,e,n){e instanceof Je?(t.h=e,function(t,e){e&&!t.j&&(Qe(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Ze(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=qe(e,Ge)),t.h=new Je(e,t.g))}function Ve(t,e,n){t.h.set(e,n)}function je(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Be(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qe(e,Ke,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qe(e,Ke,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(qe(n,"/"==n.charAt(0)?$e:He,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qe(n,We)),t.join("")};var Ke=/[#\/\?@]/g,He=/[#\?:]/g,$e=/[#\?]/g,Ge=/[#\?@]/g,We=/#/g;function Je(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qe(t){t.g||(t.g=new Ce,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Qe(t),e=tn(t,e),Oe(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Oe((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Re(t)))}function Ye(t,e){return Qe(t),e=tn(t,e),Oe(t.g.h,e)}function Ze(t,e,n){Xe(t,e),0<n.length&&(t.i=null,t.g.set(tn(t,e),E(n)),t.h+=n.length)}function tn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(s=Je.prototype).add=function(t,e){Qe(this),this.i=null,t=tn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},s.forEach=function(t,e){Qe(this),this.g.forEach((function(n,r){I(n,(function(n){t.call(e,n,r,this)}),this)}),this)},s.T=function(){Qe(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},s.R=function(t){Qe(this);var e=[];if("string"==typeof t)Ye(this,t)&&(e=T(e,this.g.get(tn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},s.set=function(t,e){return Qe(this),this.i=null,Ye(this,t=tn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},s.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},s.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var en=function(t,e){this.h=t,this.g=e};function nn(t){this.l=t||rn,t=c.PerformanceNavigationTiming?0<(t=c.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(c.g&&c.g.Ea&&c.g.Ea()&&c.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rn=10;function sn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function on(t){return t.h?1:t.g?t.g.size:0}function an(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function cn(t,e){t.g?t.g.add(e):t.h=e}function un(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function hn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var s=i(t.g.values()),o=s.next();!o.done;o=s.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}return E(t.i)}function ln(){}function dn(){this.g=new ln}function fn(t,e,n){var r=n||"";try{Ne(t,(function(t,n){var i=t;l(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function mn(t){this.l=t.$b||null,this.j=t.ib||!1}function gn(t,e){It.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=yn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nn.prototype.cancel=function(){var t,e;if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=i(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},ln.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},ln.prototype.parse=function(t){return c.JSON.parse(t,void 0)},v(mn,ie),mn.prototype.g=function(){return new gn(this.l,this.j)},mn.prototype.i=function(t){return function(){return t}}({}),v(gn,It);var yn=0;function vn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function wn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,_n(t)}function _n(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(s=gn.prototype).open=function(t,e){if(this.readyState!=yn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,_n(this)},s.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||c).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},s.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wn(this)),this.readyState=yn},s.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==c.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},s.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?wn(this):_n(this),3==this.readyState&&vn(this)}},s.Ua=function(t){this.g&&(this.response=this.responseText=t,wn(this))},s.Ta=function(t){this.g&&(this.response=t,wn(this))},s.ha=function(){this.g&&wn(this)},s.setRequestHeader=function(t,e){this.v.append(t,e)},s.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var bn=c.JSON.parse;function In(t){It.call(this),this.headers=new Ce,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tn,this.K=this.L=!1}v(In,It);var Tn="",En=/^https?$/i,Sn=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Nn(t),Rn(t)}function Nn(t){t.D||(t.D=!0,Tt(t,"complete"),Tt(t,"error"))}function Cn(t){if(t.h&&void 0!==a&&(!t.C[1]||4!=Dn(t)||2!=t.ba()))if(t.v&&4==Dn(t))Ft(t.Fa,0,t);else if(Tt(t,"readystatechange"),4==Dn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(De)[1]||null;if(!s&&c.self&&c.self.location){var o=c.self.location.protocol;s=o.substr(0,o.length-1)}i=!En.test(s?s.toLowerCase():"")}e=i}if(e)Tt(t,"complete"),Tt(t,"success");else{t.m=6;try{var u=2<Dn(t)?t.g.statusText:""}catch(t){u=""}t.j=u+" ["+t.ba()+"]",Nn(t)}}finally{Rn(t)}}}function Rn(t,e){if(t.g){On(t);var n=t.g,r=t.C[0]?u:null;t.g=null,t.C=null,e||Tt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function On(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(c.clearTimeout(t.A),t.A=null)}function Dn(t){return t.g?t.g.readyState:0}function Pn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Tn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return D(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ve(t,e,n))}function xn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Mn(t){this.za=0,this.l=[],this.h=new Ht,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xn("baseRetryDelayMs",5e3,t),this.$a=xn("retryDelaySeedMs",1e4,t),this.Ya=xn("forwardChannelMaxRetries",2,t),this.ra=xn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new nn(t&&t.concurrentRequestLimit),this.Ca=new dn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Un(t){if(Vn(t),3==t.G){var e=t.V++,n=Le(t.F);Ve(n,"SID",t.J),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),zn(t,n),(e=new de(t,t.h,e,void 0)).K=2,e.v=je(Le(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.v.toString(),"")),!n&&c.Image&&((new Image).src=e.v,n=!0),n||(e.g=er(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ie(e)}Zn(t)}function Fn(t){t.g&&(Gn(t),t.g.cancel(),t.g=null)}function Vn(t){Fn(t),t.u&&(c.clearTimeout(t.u),t.u=null),Jn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&c.clearTimeout(t.m),t.m=null)}function jn(t,e){t.l.push(new en(t.Za++,e)),3==t.G&&Bn(t)}function Bn(t){sn(t.i)||t.m||(t.m=!0,Dt(t.Ha,t),t.C=0)}function qn(t,e){var n;n=e?e.m:t.V++;var r=Le(t.F);Ve(r,"SID",t.J),Ve(r,"RID",n),Ve(r,"AID",t.U),zn(t,r),t.o&&t.s&&Ln(r,t.o,t.s),n=new de(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Kn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),cn(t.i,n),ye(n,r,e)}function zn(t,e){t.j&&Ne({},(function(t,n){Ve(e,n,t)}))}function Kn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?g(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var u=i[c].h,h=i[c].g;if(0>(u-=s))s=Math.max(0,i[c].h-100),a=!1;else try{fn(h,o,"req"+u+"_")}catch(t){r&&r(h)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Hn(t){t.g||t.u||(t.Y=1,Dt(t.Ga,t),t.A=0)}function $n(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=ee(g(t.Ga,t),Xn(t,t.A)),t.A++,0))}function Gn(t){null!=t.B&&(c.clearTimeout(t.B),t.B=null)}function Wn(t){t.g=new de(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Le(t.oa);Ve(e,"RID","rpc"),Ve(e,"SID",t.J),Ve(e,"CI",t.N?"0":"1"),Ve(e,"AID",t.U),zn(t,e),Ve(e,"TYPE","xmlhttp"),t.o&&t.s&&Ln(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=je(Le(e)),n.s=null,n.U=!0,ve(n,t)}function Jn(t){null!=t.v&&(c.clearTimeout(t.v),t.v=null)}function Qn(t,e){var n=null;if(t.g==e){Jn(t),Gn(t),t.g=null;var r=2}else{if(!an(t.i,e))return;n=e.D,un(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Tt(r=Jt(),new te(r,n,e,i)),Bn(t)}else Hn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(on(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ee(g(t.Ha,t,e),Xn(t,t.C)),t.C++,0)))}(t,e)||2==r&&$n(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Yn(t,5);break;case 4:Yn(t,10);break;case 3:Yn(t,6);break;default:Yn(t,2)}}function Xn(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Yn(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=g(t.jb,t);n||(n=new Pe("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||xe(n,"https"),je(n)),function(t,e){var n=new Ht;if(c.Image){var r=new Image;r.onload=y(pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=y(pn,n,r,"TestLoadImage: error",!1,e),r.onabort=y(pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=y(pn,n,r,"TestLoadImage: timeout",!1,e),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.G=0,t.j&&t.j.va(e),Zn(t),Vn(t)}function Zn(t){t.G=0,t.I=-1,t.j&&(0==hn(t.i).length&&0==t.l.length||(t.i.i.length=0,E(t.l),t.l.length=0),t.j.ua())}function tr(t,e,n){var r=function(t){return t instanceof Pe?Le(t):new Pe(t,void 0)}(n);if(""!=r.i)e&&Me(r,e+"."+r.i),Ue(r,r.m);else{var i=c.location;r=function(t,e,n,r){var i=new Pe(null,void 0);return t&&xe(i,t),e&&Me(i,e),n&&Ue(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&D(t.aa,(function(t,e){Ve(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ve(r,e,n),Ve(r,"VER",t.ma),zn(t,r),r}function er(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new In(new mn({ib:!0})):new In(t.qa)).L=t.H,e}function nr(){}function rr(){if(j&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function ir(t,e){It.call(this),this.g=new Mn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ar(this)}function sr(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function or(){he.call(this),this.status=1}function ar(t){this.g=t}(s=In.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ae.g(),this.C=this.u?se(this.u):se(ae),this.g.onreadystatechange=g(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void An(this,t)}t=n||"";var i=new Ce(this.headers);r&&Ne(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=kn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=c.FormData&&t instanceof c.FormData,!(0<=b(Sn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{On(this),0<this.B&&((this.K=function(t){return j&&X()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=g(this.pa,this)):this.A=Ft(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){An(this,t)}},s.pa=function(){void 0!==a&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tt(this,"timeout"),this.abort(8))},s.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tt(this,"complete"),Tt(this,"abort"),Rn(this))},s.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),In.Z.M.call(this)},s.Fa=function(){this.s||(this.F||this.v||this.l?Cn(this):this.cb())},s.cb=function(){Cn(this)},s.ba=function(){try{return 2<Dn(this)?this.g.status:-1}catch(t){return-1}},s.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},s.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},s.Da=function(){return this.m},s.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(s=Mn.prototype).ma=8,s.G=1,s.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},s.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new de(this,this.h,t,void 0),n=this.s;if(this.P&&(n?x(n=P(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Kn(this,e,r),Ve(i=Le(this.F),"RID",t),Ve(i,"CVER",22),this.D&&Ve(i,"X-HTTP-Session-Id",this.D),zn(this,i),this.o&&n&&Ln(i,this.o,n),cn(this.i,e),this.Ra&&Ve(i,"TYPE","init"),this.ja?(Ve(i,"$req",r),Ve(i,"SID","null"),e.$=!0,ye(e,i,null)):ye(e,i,r),this.G=2}}else 3==this.G&&(t?qn(this,t):0==this.l.length||sn(this.i)||qn(this))},s.Ga=function(){if(this.u=null,Wn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ee(g(this.bb,this),t)}},s.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zt(10),Fn(this),Wn(this))},s.ab=function(){null!=this.v&&(this.v=null,Fn(this),$n(this),Zt(19))},s.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Zt(2)):(this.h.info("Failed to ping google.com"),Zt(1))},(s=nr.prototype).xa=function(){},s.wa=function(){},s.va=function(){},s.ua=function(){},s.Oa=function(){},rr.prototype.g=function(t,e){return new ir(t,e)},v(ir,It),ir.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Dt(g(t.hb,t,e))),Zt(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=tr(t,null,t.W),Bn(t)},ir.prototype.close=function(){Un(this.g)},ir.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,jn(this.g,e)}else this.v?((e={}).__data__=St(t),jn(this.g,e)):jn(this.g,t)},ir.prototype.M=function(){this.g.j=null,delete this.j,Un(this.g),delete this.g,ir.Z.M.call(this)},v(sr,ue),v(or,he),v(ar,nr),ar.prototype.xa=function(){Tt(this.g,"a")},ar.prototype.wa=function(t){Tt(this.g,new sr(t))},ar.prototype.va=function(t){Tt(this.g,new or(t))},ar.prototype.ua=function(){Tt(this.g,"b")},rr.prototype.createWebChannel=rr.prototype.g,ir.prototype.send=ir.prototype.u,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",It.prototype.listen=It.prototype.N,In.prototype.listenOnce=In.prototype.O,In.prototype.getLastError=In.prototype.La,In.prototype.getLastErrorCode=In.prototype.Da,In.prototype.getStatus=In.prototype.ba,In.prototype.getResponseJson=In.prototype.Qa,In.prototype.getResponseText=In.prototype.ga,In.prototype.send=In.prototype.ea;var cr=function(){return new rr},ur=function(){return Jt()},hr=ne,lr=re,dr=Gt,fr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pr=mn,mr=oe,gr=In},134:(t,e,n)=>{n.d(e,{h1:()=>c,uA:()=>s});var r=n(635),i=n(625),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.cY;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}try{for(var i=(0,r.Ju)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.zs)(s.value,2),c=a[0],u=a[1],h=this.normalizeInstanceIdentifier(c);try{var l=this.getOrInitializeService({instanceIdentifier:h});u.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.sH)(this,void 0,void 0,(function(){var t;return(0,r.YH)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fX)((0,r.fX)([],(0,r.zs)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.zs)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=o),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var c=(0,r.Ju)(this.instancesDeferred.entries()),u=c.next();!u.done;u=c.next()){var h=(0,r.zs)(u.value,2),l=h[0],d=h[1];o===this.normalizeInstanceIdentifier(l)&&d.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.Ju)(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},137:(t,e,n)=>{n.d(e,{n:()=>ke});var r=n(625),i=n(468),s=n(635),o=n(477),a=n(134);const c=new r.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new o.Vy("@firebase/auth");function h(t,...e){u.logLevel<=o.$b.ERROR&&u.error(`Auth (${i.MF}): ${t}`,...e)}function l(t,...e){throw f(t,...e)}function d(t,...e){return f(t,...e)}function f(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return c.create(t,...e)}function p(t,e,...n){if(!t)throw f(e,...n)}function m(t){const e="INTERNAL ASSERTION FAILED: "+t;throw h(e),new Error(e)}function g(t,e){t||m(e)}const y=new Map;function v(t){g(t instanceof Function,"Expected a class definition");let e=y.get(t);return e?(g(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,y.set(t,e),e)}function w(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function _(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class b{constructor(t,e){this.shortDelay=t,this.longDelay=e,g(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,r.jZ)()||(0,r.lV)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===_()||"https:"===_()||(0,r.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function I(t,e){g(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class T{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void m("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void m("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void m("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const E={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},S=new b(3e4,6e4);function k(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function A(t,e,n,i,s={}){return N(t,s,(()=>{let s={},o={};i&&("GET"===e?o=i:s={body:JSON.stringify(i)});const a=(0,r.Am)(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(T.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),T.fetch()(R(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))}async function N(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},E),e);try{const e=new O(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw D(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=(r.ok?s.errorMessage:s.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===e)throw D(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===e)throw D(t,"email-already-in-use",s);l(t,i[e]||e.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(e){if(e instanceof r.g)throw e;l(t,"network-request-failed")}}async function C(t,e,n,r,i={}){const s=await A(t,e,n,r,i);return"mfaPendingCredential"in s&&l(t,"multi-factor-auth-required",{serverResponse:s}),s}function R(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?I(t.config,i):`${t.config.apiScheme}://${i}`}class O{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(d(this.auth,"timeout"))),S.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function D(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=d(t,e,r);return i.customData._tokenResponse=n,i}function P(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function L(t){return 1e3*Number(t)}function x(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return h("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,r.u)(n);return t?JSON.parse(t):(h("Failed to decode base64 JWT payload"),null)}catch(t){return h("Caught error parsing JWT payload as JSON",t),null}}async function M(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof r.g&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class U{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class F{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=P(this.lastLoginAt),this.creationTime=P(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function V(t){var e;const n=t.auth,r=await t.getIdToken(),i=await M(t,async function(t,e){return A(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:r}));p(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,n=(0,s.Tt)(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=(u=t.providerData,h=a,[...u.filter((t=>!h.some((e=>e.providerId===t.providerId)))),...h]);var u,h;const l=t.isAnonymous,d=!(t.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!l&&d,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new F(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,m)}class j{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){p(t.idToken,"internal-error"),p(void 0!==t.idToken,"internal-error"),p(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=x(t);return p(e,"internal-error"),p(void 0!==e.exp,"internal-error"),p(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return p(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(t,e){const n=await N(t,{},(()=>{const n=(0,r.Am)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=R(t,i,"/v1/token",`key=${s}`);return T.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new j;return n&&(p("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(p("string"==typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(p("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new j,this.toJSON())}_performRefresh(){return m("not implemented")}}function B(t,e){p("string"==typeof t||void 0===t,"internal-error",{appName:e})}class q{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=(0,s.Tt)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new F(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await M(this,this.stsTokenManager.getToken(this.auth,t));return p(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=(0,r.Ku)(t),i=await n.getIdToken(e),s=x(i);p(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:P(L(s.auth_time)),issuedAtTime:P(L(s.iat)),expirationTime:P(L(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=(0,r.Ku)(t);await V(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(p(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new q(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){p(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await V(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await M(this,async function(t,e){return A(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,c,u;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,l=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,m=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,y=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(u=e.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:_,isAnonymous:b,providerData:I,stsTokenManager:T}=e;p(w&&T,t,"internal-error");const E=j.fromJSON(this.name,T);p("string"==typeof w,t,"internal-error"),B(h,t.name),B(l,t.name),p("boolean"==typeof _,t,"internal-error"),p("boolean"==typeof b,t,"internal-error"),B(d,t.name),B(f,t.name),B(m,t.name),B(g,t.name),B(y,t.name),B(v,t.name);const S=new q({uid:w,auth:t,email:l,emailVerified:_,displayName:h,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:m,stsTokenManager:E,createdAt:y,lastLoginAt:v});return I&&Array.isArray(I)&&(S.providerData=I.map((t=>Object.assign({},t)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(t,e,n=!1){const r=new j;r.updateFromServerResponse(e);const i=new q({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await V(i),i}}class z{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}z.type="NONE";const K=z;function H(t,e,n){return`firebase:${t}:${e}:${n}`}class ${constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=H(this.userKey,r.apiKey,i),this.fullPersistenceKey=H("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?q._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new $(v(K),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||v(K);const s=H(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const r=q._fromJSON(t,e);n!==i&&(o=r),i=n;break}}catch(t){}const a=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(s)}catch(t){}}))),new $(i,t,n)):new $(i,t,n)}}function G(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z(e))return"Blackberry";if(tt(e))return"Webos";if(J(e))return"Safari";if((e.includes("chrome/")||Q(e))&&!e.includes("edge/"))return"Chrome";if(Y(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function W(t=(0,r.ZQ)()){return/firefox\//i.test(t)}function J(t=(0,r.ZQ)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q(t=(0,r.ZQ)()){return/crios\//i.test(t)}function X(t=(0,r.ZQ)()){return/iemobile/i.test(t)}function Y(t=(0,r.ZQ)()){return/android/i.test(t)}function Z(t=(0,r.ZQ)()){return/blackberry/i.test(t)}function tt(t=(0,r.ZQ)()){return/webos/i.test(t)}function et(t=(0,r.ZQ)()){return/iphone|ipad|ipod/i.test(t)}function nt(t=(0,r.ZQ)()){return et(t)||Y(t)||tt(t)||Z(t)||/windows phone/i.test(t)||X(t)}function rt(t,e=[]){let n;switch(t){case"Browser":n=G((0,r.ZQ)());break;case"Worker":n=`${G((0,r.ZQ)())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.MF}/${s}`}class it{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ot(this),this.idTokenSubscription=new ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=v(e)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await $.create(this,t),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(e),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(p(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await V(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,r.Ku)(t):null;return e&&p(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&p(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(v(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new r.FA("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&v(t)||this._popupRedirectResolver;p(e,this,"argument-error"),this.redirectPersistenceManager=await $.create(this,[v(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return p(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof e?t.addObserver(e,n,r):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return p(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function st(t){return(0,r.Ku)(t)}class ot{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,r.tD)((t=>this.observer=t))}get next(){return p(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class at{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return m("not implemented")}_getIdTokenResponse(t){return m("not implemented")}_linkToIdToken(t,e){return m("not implemented")}_getReauthenticationResolver(t){return m("not implemented")}}class ct extends at{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new ct(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new ct(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return C(t,"POST","/v1/accounts:signInWithPassword",k(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return C(t,"POST","/v1/accounts:signInWithEmailLink",k(t,e))}(t,{email:this._email,oobCode:this._password});default:l(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return A(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return C(t,"POST","/v1/accounts:signInWithEmailLink",k(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:l(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ut(t,e){return C(t,"POST","/v1/accounts:signInWithIdp",k(t,e))}class ht extends at{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ht(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):l("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,i=(0,s.Tt)(e,["providerId","signInMethod"]);if(!n||!r)return null;const o=new ht(n,r);return Object.assign(o,i),o}_getIdTokenResponse(t){return ut(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,ut(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ut(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,r.Am)(e)}return t}}const lt={USER_NOT_FOUND:"user-not-found"};class dt extends at{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new dt({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new dt({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return C(t,"POST","/v1/accounts:signInWithPhoneNumber",k(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await C(t,"POST","/v1/accounts:signInWithPhoneNumber",k(t,e));if(n.temporaryProof)throw D(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return C(t,"POST","/v1/accounts:signInWithPhoneNumber",k(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),lt)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new dt({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ft{constructor(t){var e,n,i,s,o,a;const c=(0,r.I9)((0,r.hp)(t)),u=null!==(e=c.apiKey)&&void 0!==e?e:null,h=null!==(n=c.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);p(u&&h&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=h,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,r.I9)((0,r.hp)(t)).link,n=e?(0,r.I9)((0,r.hp)(e)).deep_link_id:null,i=(0,r.I9)((0,r.hp)(t)).deep_link_id;return(i?(0,r.I9)((0,r.hp)(i)).link:null)||i||n||e||t}(t);try{return new ft(e)}catch(t){return null}}}class pt{constructor(){this.providerId=pt.PROVIDER_ID}static credential(t,e){return ct._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ft.parseLink(e);return p(n,"argument-error"),ct._fromEmailAndCode(t,n.code,n.tenantId)}}pt.PROVIDER_ID="password",pt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mt{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class gt extends mt{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class yt extends gt{constructor(){super("facebook.com")}static credential(t){return ht._fromParams({providerId:yt.PROVIDER_ID,signInMethod:yt.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return yt.credentialFromTaggedObject(t)}static credentialFromError(t){return yt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yt.credential(t.oauthAccessToken)}catch(t){return null}}}yt.FACEBOOK_SIGN_IN_METHOD="facebook.com",yt.PROVIDER_ID="facebook.com";class vt extends gt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ht._fromParams({providerId:vt.PROVIDER_ID,signInMethod:vt.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return vt.credentialFromTaggedObject(t)}static credentialFromError(t){return vt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return vt.credential(e,n)}catch(t){return null}}}vt.GOOGLE_SIGN_IN_METHOD="google.com",vt.PROVIDER_ID="google.com";class wt extends gt{constructor(){super("github.com")}static credential(t){return ht._fromParams({providerId:wt.PROVIDER_ID,signInMethod:wt.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wt.credentialFromTaggedObject(t)}static credentialFromError(t){return wt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return wt.credential(t.oauthAccessToken)}catch(t){return null}}}wt.GITHUB_SIGN_IN_METHOD="github.com",wt.PROVIDER_ID="github.com";class _t extends gt{constructor(){super("twitter.com")}static credential(t,e){return ht._fromParams({providerId:_t.PROVIDER_ID,signInMethod:_t.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return _t.credentialFromTaggedObject(t)}static credentialFromError(t){return _t.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return _t.credential(e,n)}catch(t){return null}}}_t.TWITTER_SIGN_IN_METHOD="twitter.com",_t.PROVIDER_ID="twitter.com";class bt{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,r=!1){const i=await q._fromIdTokenResponse(t,n,r),s=It(n);return new bt({user:i,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=It(n);return new bt({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function It(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Tt extends r.g{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Tt.prototype),this.appName=t.name,this.code=e.code,this.tenantId=null!==(i=t.tenantId)&&void 0!==i?i:void 0,this.serverResponse=e.customData.serverResponse}static _fromErrorAndOperation(t,e,n,r){return new Tt(t,e,n,r)}}function Et(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Tt._fromErrorAndOperation(t,n,e,r);throw n}))}new WeakMap;const St="__sak";class kt{constructor(t,e){this.storage=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(St,"1"),this.storage.removeItem(St),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}}class At extends kt{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,r.ZQ)();return J(t)||et(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=nt(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},s=this.storage.getItem(n);(0,r.lT)()&&10===document.documentMode&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}At.type="LOCAL";const Nt=At;class Ct extends kt{constructor(){super(window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Ct.type="SESSION";const Rt=Ct;class Ot{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Ot(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async t=>t(e.origin,i))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Dt(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Ot.receivers=[];class Pt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Dt("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Lt(){return window}function xt(){return void 0!==Lt().WorkerGlobalScope&&"function"==typeof Lt().importScripts}const Mt="firebaseLocalStorageDb",Ut="firebaseLocalStorage",Ft="fbase_key";class Vt{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function jt(t,e){return t.transaction([Ut],e?"readwrite":"readonly").objectStore(Ut)}function Bt(){const t=indexedDB.open(Mt,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Ut,{keyPath:Ft})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Ut)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Mt);return new Vt(t).toPromise()}(),e(await Bt()))}))}))}async function qt(t,e,n){const r=jt(t,!0).put({[Ft]:e,value:n});return new Vt(r).toPromise()}function zt(t,e){const n=jt(t,!0).delete(e);return new Vt(n).toPromise()}class Kt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Bt()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ot._getInstance(xt()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Pt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Bt();return await qt(t,St,"1"),await zt(t,St),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>qt(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=jt(t,!1).get(e),r=await new Vt(n).toPromise();return void 0===r?null:r.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>zt(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=jt(t,!1).getAll();return new Vt(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kt.type="LOCAL";const Ht=Kt;function $t(t){return`__${t}${Math.floor(1e6*Math.random())}`}$t("rcb"),new b(3e4,6e4);class Gt{constructor(t){this.providerId=Gt.PROVIDER_ID,this.auth=st(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var r;const i=await n.verify();try{let s;if(p("string"==typeof i,t,"argument-error"),p("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){p("enroll"===e.type,t,"internal-error");const n=await function(t,e){return A(t,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:t.tenantId},e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{p("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;p(n,t,"missing-multi-factor-info");const o=await function(t,e){return A(t,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:t.tenantId},e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return A(t,"POST","/v1/accounts:sendVerificationCode",k(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}(this.auth,t,(0,r.Ku)(e))}static credential(t,e){return dt._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Gt.credentialFromTaggedObject(e)}static credentialFromError(t){return Gt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?dt._fromTokenResponse(e,n):null}}Gt.PROVIDER_ID="phone",Gt.PHONE_SIGN_IN_METHOD="phone";class Wt extends at{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ut(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ut(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ut(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Jt(t){return async function(t,e,n=!1){const r="signIn",i=await Et(t,r,e),s=await bt._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}(t.auth,new Wt(t),t.bypassAuthState)}function Qt(t){const{auth:e,user:n}=t;return p(n,e,"internal-error"),async function(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await M(t,Et(r,i,e,t),n);p(s.idToken,r,"internal-error");const o=x(s.idToken);p(o,r,"internal-error");const{sub:a}=o;return p(t.uid===a,r,"user-mismatch"),bt._forOperation(t,i,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&l(r,"user-mismatch"),t}}(n,new Wt(t),t.bypassAuthState)}async function Xt(t){const{auth:e,user:n}=t;return p(n,e,"internal-error"),async function(t,e,n=!1){const r=await M(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bt._forOperation(t,"link",r)}(n,new Wt(t),t.bypassAuthState)}class Yt{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Jt;case"linkViaPopup":case"linkViaRedirect":return Xt;case"reauthViaPopup":case"reauthViaRedirect":return Qt;default:l(this.auth,"internal-error")}}resolve(t){g(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){g(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zt=new b(2e3,1e4);class te extends Yt{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,te.currentPopupAction&&te.currentPopupAction.cancel(),te.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return p(t,this.auth,"internal-error"),t}async onExecution(){g(1===this.filter.length,"Popup operations only handle one event");const t=Dt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(d(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,te.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(d(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Zt.get())};t()}}te.currentPopupAction=null;const ee=new Map;class ne extends Yt{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=ee.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return H("pendingRedirect",t.config.apiKey,t.name)}(e),r="true"===await re(t)._get(n);return await re(t)._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}ee.set(this.auth._key(),t)}return t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function re(t){return v(t._redirectPersistence)}async function ie(t,e,n=!1){const r=st(t),i=function(t,e){return e?v(e):(p(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),s=new ne(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}class se{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ae(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!ae(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(d(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oe(t))}saveEventToCache(t){this.cachedEventUids.add(oe(t)),this.lastProcessedEventTime=Date.now()}}function oe(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function ae({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const ce=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ue=/^https?/;function he(t){const e=w(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ue.test(n))return!1;if(ce.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const le=new b(3e4,6e4);function de(){const t=Lt().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let fe=null;function pe(t){return fe=fe||function(t){return new Promise(((e,n)=>{var r,i,s,o;function a(){de(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{de(),n(d(t,"network-request-failed"))},timeout:le.get()})}if(null===(i=null===(r=Lt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Lt().gapi)||void 0===s?void 0:s.load)){const e=$t("iframefcb");return Lt()[e]=()=>{gapi.load?a():n(d(t,"network-request-failed"))},o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(((t,e)=>{const n=document.createElement("script");var r,i;n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=d("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(n)}))}a()}})).catch((t=>{throw fe=null,t}))}(t),fe}const me=new b(5e3,15e3),ge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ve(t){const e=t.config;p(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?I(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,s={apiKey:e.apiKey,appName:t.name,v:i.MF},o=ye.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.Am)(s).slice(1)}`}const we={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function be(t,e,n,s,o,a){p(t.config.authDomain,t,"auth-domain-config-required"),p(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:i.MF,eventId:o};if(e instanceof mt){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,r.Im)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof gt){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const t of Object.keys(u))void 0===u[t]&&delete u[t];return`${function({config:t}){return t.emulator?I(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${(0,r.Am)(u).slice(1)}`}const Ie="webStorageSupport",Te=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rt,this._completeRedirectFn=ie}async _openPopup(t,e,n,i){var s;return g(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},we),{width:i.toString(),height:s.toString(),top:o,left:a}),h=(0,r.ZQ)().toLowerCase();n&&(c=Q(h)?"_blank":n),W(h)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=(0,r.ZQ)()){var e;return et(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",c),new _e(null);const d=window.open(e||"",c,l);p(d,t,"popup-blocked");try{d.focus()}catch(t){}return new _e(d)}(t,be(t,e,n,w(),i),Dt())}async _openRedirect(t,e,n,r){var i;return await this._originValidation(t),i=be(t,e,n,w(),r),Lt().location.href=i,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(g(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n}async initAndGetManager(t){const e=await async function(t){const e=await pe(t),n=Lt().gapi;return p(n,t,"internal-error"),e.open({where:document.body,url:ve(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ge,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=d(t,"network-request-failed"),s=Lt().setTimeout((()=>{r(i)}),me.get());function o(){Lt().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{r(i)}))}))))}(t),n=new se(t);return e.register("authEvent",(e=>(p(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ie,{type:Ie},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ie];void 0!==i&&e(!!i),l(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return A(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(he(t))return}catch(t){}l(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return nt()||J()||et()}};var Ee;class Se{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){p(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ke(t=(0,i.Sx)()){const e=(0,i.j6)(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=(0,i.j6)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),i=n.getOptions();if((0,r.bD)(i,null!=e?e:{}))return t;l(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Te,persistence:[Ht,Nt,Rt]})}Ee="Browser",(0,i.om)(new a.uA("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(t=>{p(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),p(!(null==i?void 0:i.includes(":")),"argument-error",{appName:t.name});const n={apiKey:r,authDomain:i,clientPlatform:Ee,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(Ee)},s=new it(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(v);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),(0,i.om)(new a.uA("auth-internal",(t=>{return e=st(t.getProvider("auth").getImmediate()),new Se(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.KO)("@firebase/auth","0.17.1",function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ee))},188:(t,e,n)=>{var r=n(205),i=n(226),s=n(982);window.onload=function(){const t=localStorage.getItem("editDoc");t?function(t){document.getElementById("edit-document-page-container").innerHTML=`\n    <form action="" id="edit-document-page-form">\n        <div class="row mb-3">\n            <label for="edit-document-page-document-name" class="col-sm-4 col-form-label">Enter name of the document</label>\n            <div class="col-sm-8">\n                <input type="text" class="form-control" id="edit-document-page-document-name" value="${t.documentName}">\n            </div>\n        </div>\n        <div class="row mb-3">\n            <label for="edit-document-page-type-of-document" class="col-sm-4 col-form-label">Select the type of the document</label>\n            <div class="col-sm-8">\n                <select class="form-select form-select-sm" aria-label=".form-select-sm example" id="edit-document-page-type-of-document" >\n                    <option selected>Select the type of document</option>\n                    <option value="1">Aadhaar card</option>\n                    <option value="2">Arms license</option>\n                    <option value="3">Bank passbook</option>\n                    <option value="4">Bank statements</option>\n                    <option value="5">Birth certificate</option>\n                    <option value="6">Domicile certificate issued by government</option>\n                    <option value="7">Driving License</option>\n                    <option value="8">Educational certificate</option>\n                    <option value="9">Electors photo identity card</option>\n                    <option value="10">Electricity bill</option>\n                    <option value="11">Gazetted officer issued documents</option>\n                    <option value="12">Gas connection details</option>\n                    <option value="13">Letter from employer</option>\n                    <option value="14">Marriage certificate</option>\n                    <option value="15">MNREGA Job card</option>\n                    <option value="16">PAN card</option>\n                    <option value="17">Passport</option>\n                    <option value="18">Pension card</option>\n                    <option value="19">Photo credit card</option>\n                    <option value="20">Rent agreement</option>\n                    <option value="21">Ration card</option>\n                    <option value="22">Tax card</option>\n                    <option value="23">Telephone bill</option>\n                    <option value="24">Voter ID</option>\n                </select>\n            </div>\n        </div>\n        <div class="row mb-3">\n            <label for="edit-document-page-document-upload" class="col-sm-4">Upload your document</label>\n            <div class="col-sm-8">\n                 ${t.fileUrl?`<p>Already uploaded: <a href="${t.fileUrl}" target="_blank">${t.documentName}</a></p>`:""}\n                <input type="file" id="edit-document-page-document-upload" name="document" accept="pdf, image/*">\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-sm-8"></div>\n        </div>\n        <button id="edit-document-page-submit-button" type="submit" class="col-sm-1 offset-4 mt-4">Submit</button>\n    </form>`;const e=document.getElementById("edit-document-page-type-of-document"),n=e.options,o=document.getElementById("edit-document-page-form");for(let r=0;r<n.length;r++)if(n[r].text===t.documentType){e.selectedIndex=r;break}o.addEventListener("submit",(async function(t){t.preventDefault();const e=localStorage.getItem("editDoc");if(!e)return void alert("No document to edit.");const n=document.getElementById("edit-document-page-document-name").value,o=document.getElementById("edit-document-page-type-of-document"),a=o.options[o.selectedIndex].text,c=JSON.parse(e);let u=c.fileUrl;const h=document.getElementById("edit-document-page-document-upload");var l;if(h.files.length){if((l=h.files[0]).size>2097152)return void alert("File size must be less than 2MB.");const t=(0,i.KR)(r.IG,`documents/${l.name}_${Date.now()}`);await(0,i.D)(t,l),u=await(0,i.qk)(t)}const d=(0,s.H9)(r.db,"documents",c.id);await(0,s.mZ)(d,{documentName:n,documentType:a,fileName:l?l.name:c.fileName,fileType:l?l.type:c.fileType,fileSize:l?l.size:c.fileSize,fileUrl:u,updatedAt:(0,s.O5)()}),alert("Document updated successfully!"),window.location.href="view_documents_page.html"}))}(JSON.parse(t)):alert("No document found to edit!")}},205:(t,e,n)=>{n.d(e,{IG:()=>u,db:()=>c});var r=n(944),i=n(237),s=n(982),o=n(226);const a=(0,r.Wp)({apiKey:"AIzaSyDEbX-gQ6FwJD5oZGnaoiJu9qIaAG2LZ0M",authDomain:"upload-25f01.firebaseapp.com",projectId:"upload-25f01",storageBucket:"upload-25f01.firebasestorage.app",messagingSenderId:"97167487690",appId:"1:97167487690:web:88409aded0a1dd13f87a33",measurementId:"G-3Y94K1XCBK"}),c=((0,i.xI)(a),(0,s.aU)(a)),u=(0,o.c7)(a)},226:(t,e,n)=>{n.d(e,{D:()=>r.D,KR:()=>r.KR,XR:()=>r.XR,c7:()=>r.c7,qk:()=>r.qk});var r=n(334)},237:(t,e,n)=>{n.d(e,{xI:()=>r.xI});var r=n(440)},334:(t,e,n)=>{n.d(e,{D:()=>nt,KR:()=>st,XR:()=>it,c7:()=>ot,qk:()=>rt});var r,i=n(468),s=n(625),o=n(134);!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(r||(r={}));const a="firebasestorage.googleapis.com",c="storageBucket";class u extends s.g{constructor(t,e){super(h(t),`Firebase Storage: ${e} (${h(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,u.prototype)}_codeEquals(t){return h(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function h(t){return"storage/"+t}function l(){return new u("unknown","An unknown error occurred, please check the error payload for server response.")}function d(t){return new u("invalid-argument",t)}function f(){return new u("app-deleted","The Firebase app was deleted.")}function p(t,e){return new u("invalid-format","String does not match format '"+t+"': "+e)}function m(t){throw new u("internal-error","Internal error: "+t)}class g{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=r.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=r.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=r.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,r){if(this.sent_)throw m("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const t in r)r.hasOwnProperty(t)&&this.xhr_.setRequestHeader(t,r[t].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw m("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw m("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponseText(){if(!this.sent_)throw m("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class y{createConnection(){return new g}}class v{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=v.makeFromUrl(t,e)}catch(e){return new v(t,"")}if(""===n.path)return n;throw new u("invalid-default-bucket","Invalid default bucket '"+t+"'.")}static makeFromUrl(t,e){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${e===a?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let e=0;e<c.length;e++){const r=c[e],i=r.regex.exec(t);if(i){const t=i[r.indices.bucket];let e=i[r.indices.path];e||(e=""),n=new v(t,e),r.postModify(n);break}}if(null==n)throw function(t){return new u("invalid-url","Invalid URL '"+t+"'.")}(t);return n}}class w{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function _(t){return"string"==typeof t||t instanceof String}function b(t){return I()&&t instanceof Blob}function I(){return"undefined"!=typeof Blob}function T(t,e,n,r){if(r<e)throw d(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw d(`Invalid value for '${t}'. Expected ${n} or less.`)}function E(t,e){const n=e.match(/^(\w+):\/\/.+/);let r=e;return null==(null==n?void 0:n[1])&&(r=`https://${e}`),`${r}/v0${t}`}function S(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}class k{constructor(t,e,n,r,i,s,o,a,c,u,h){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=s.slice(),this.callback_=o,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=c,this.pool_=h,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=this;function e(e,n){const r=t.resolve_,i=t.reject_,s=n.connection;if(n.wasSuccessCode)try{const e=t.callback_(s,s.getResponseText());void 0===e?r():r(e)}catch(t){i(t)}else if(null!==s){const e=l();e.serverResponse=s.getResponseText(),t.errorCallback_?i(t.errorCallback_(s,e)):i(e)}else n.canceled?i(t.appDelete_?f():new u("canceled","User canceled the upload/download.")):i(new u("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new A(!1,null,!0)):this.backoffId_=function(e,n,i){let s=1,o=null,a=!1,c=0;function u(){return 2===c}let h=!1;function l(...t){h||(h=!0,n.apply(null,t))}function d(e){o=setTimeout((()=>{o=null,function(e,n){if(n)return void e(!1,new A(!1,null,!0));const i=t.pool_.createConnection();function s(e){const n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}t.pendingConnection_=i,null!==t.progressCallback_&&i.addUploadProgressListener(s),i.send(t.url_,t.method_,t.body_,t.headers_).then((()=>{null!==t.progressCallback_&&i.removeUploadProgressListener(s),t.pendingConnection_=null;const n=i.getErrorCode()===r.NO_ERROR,o=i.getStatus();if(!n||t.isRetryStatusCode_(o)){const t=i.getErrorCode()===r.ABORT;return void e(!1,new A(!1,null,t))}const a=-1!==t.successCodes_.indexOf(o);e(!0,new A(a,i))}))}(f,u())}),e)}function f(t,...e){if(h)return;if(t)return void l.call(null,t,...e);if(u()||a)return void l.call(null,t,...e);let n;s<64&&(s*=2),1===c?(c=2,n=0):n=1e3*(s+Math.random()),d(n)}let p=!1;function m(t){p||(p=!0,h||(null!==o?(t||(c=2),clearTimeout(o),d(0)):t||(c=1)))}return d(0),setTimeout((()=>{a=!0,m(!0)}),i),m}(0,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r}}class A{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function N(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function C(...t){const e=N();if(void 0!==e){const n=new e;for(let e=0;e<t.length;e++)n.append(t[e]);return n.getBlob()}if(I())return new Blob(t);throw new u("unsupported-environment","This browser doesn't seem to support creating Blobs")}const R="base64",O="base64url",D="data_url";class P{constructor(t,e){this.data=t,this.contentType=e||null}}function L(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function x(t,e){switch(t){case R:{const n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw p(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case O:{const n=-1!==e.indexOf("+"),r=-1!==e.indexOf("/");if(n||r)throw p(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(e)}catch(e){throw p(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r}class M{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw p(D,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;var r,i;null!=n&&(this.base64=(i=";base64",(r=n).length>=7&&r.substring(r.length-7)===i),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}class U{constructor(t,e){let n=0,r="";b(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(b(this.data_)){const s=(n=this.data_,r=t,i=e,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new U(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,t,e-t);return new U(n,!0)}}static getBlob(...t){if(I()){const e=t.map((t=>t instanceof U?t.data_:t));return new U(C.apply(null,e))}{const e=t.map((t=>_(t)?function(t,e){switch(t){case"raw":return new P(L(e));case R:case O:return new P(x(t,e));case D:return new P(function(t){const e=new M(t);return e.base64?x(R,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(t){throw p(D,"Malformed data URL.")}return L(e)}(e.rest)}(e),new M(e).contentType)}throw l()}("raw",t).data:t.data_));let n=0;e.forEach((t=>{n+=t.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((t=>{for(let e=0;e<t.length;e++)r[i++]=t[e]})),new U(r,!0)}}uploadData(){return this.data_}}function F(t){let e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e;var n}function V(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function j(t,e){return e}class B{constructor(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||j}}let q=null;function z(){if(q)return q;const t=[];t.push(new B("bucket")),t.push(new B("generation")),t.push(new B("metageneration")),t.push(new B("name","fullPath",!0));const e=new B("name");e.xform=function(t,e){return function(t){return!_(t)||t.length<2?t:V(t)}(e)},t.push(e);const n=new B("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new B("timeCreated")),t.push(new B("updated")),t.push(new B("md5Hash",null,!0)),t.push(new B("cacheControl",null,!0)),t.push(new B("contentDisposition",null,!0)),t.push(new B("contentEncoding",null,!0)),t.push(new B("contentLanguage",null,!0)),t.push(new B("contentType",null,!0)),t.push(new B("metadata","customMetadata",!0)),q=t,q}function K(t,e,n){const r=F(e);return null===r?null:function(t,e,n){const r={type:"file"},i=n.length;for(let t=0;t<i;t++){const i=n[t];r[i.local]=i.xform(r,e[i.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,r=t.fullPath,i=new v(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}class H{constructor(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $(t){if(!t)throw l()}function G(t){return function(e,n){let r;var i,s;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new u("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new u("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,r=new u("quota-exceeded","Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new u("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function W(t){const e=G(t);return function(n,r){let i=e(n,r);var s;return 404===n.getStatus()&&(s=t.path,i=new u("object-not-found","Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function J(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}(e,r,i),h="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",l="\r\n--"+a+"--",d=U.getBlob(h,r,l);if(null===d)throw new u("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.");const f={name:c.fullPath},p=E(s,t.host),m=t.maxUploadRetryTime,g=new H(p,"POST",function(t,e){return function(n,r){const i=K(t,r,e);return $(null!==i),i}}(t,n),m);return g.urlParams=f,g.headers=o,g.body=d.uploadData(),g.errorHandler=G(e),g}class Q{constructor(t,e){this._service=t,this._location=e instanceof v?e:v.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Q(t,e)}get root(){const t=new v(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new v(this._location.bucket,t);return new Q(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new u("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}async function X(t){t._throwIfRoot("getDownloadURL");const e=function(t,e,n){const r=E(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,s=new H(r,"GET",function(t,e){return function(n,r){const i=K(t,r,e);return $(null!==i),function(t,e,n){const r=F(e);if(null===r)return null;if(!_(r.downloadTokens))return null;const i=r.downloadTokens;if(0===i.length)return null;const s=encodeURIComponent;return i.split(",").map((e=>{const r=t.bucket,i=t.fullPath;return E("/b/"+s(r)+"/o/"+s(i),n)+S({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return s.errorHandler=W(e),s}(t.storage,t._location,z());return(await t.storage.makeRequestWithTokens(e)).getPromise().then((t=>{if(null===t)throw new u("no-download-url","The given file does not have any download URLs.");return t}))}function Y(t,e){if(t instanceof tt){const n=t;if(null==n._bucket)throw new u("no-default-bucket","No default bucket found. Did you set the '"+c+"' property when initializing the app?");const r=new Q(n,n._bucket);return null!=e?Y(r,e):r}return void 0!==e?function(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new v(t._location.bucket,n);return new Q(t.storage,r)}(t,e):t}function Z(t,e){const n=null==e?void 0:e[c];return null==n?null:v.makeFromBucketSpec(n,t)}class tt{constructor(t,e,n,r,i,s){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=a,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?v.makeFromBucketSpec(i,this._host):Z(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=v.makeFromBucketSpec(this._url,t):this._bucket=Z(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){T("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){T("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Q(this,t)}_makeRequest(t,e,n){if(this._deleted)return new w(f());{const r=function(t,e,n,r,i,s){const o=S(t.urlParams),a=t.url+o,c=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(c,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new k(a,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),r}}async makeRequestWithTokens(t){const[e,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n)}}const et="storage";function nt(t,e,n){return function(t,e,n){t._throwIfRoot("uploadBytes");const r=J(t.storage,t._location,z(),new U(e,!0),n);return t.storage.makeRequestWithTokens(r).then((t=>t.getPromise())).then((e=>({metadata:e,ref:t})))}(t=(0,s.Ku)(t),e,n)}function rt(t){return X(t=(0,s.Ku)(t))}function it(t){return async function(t){t._throwIfRoot("deleteObject");const e=function(t,e){const n=E(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new H(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=W(e),i}(t.storage,t._location);return(await t.storage.makeRequestWithTokens(e)).getPromise()}(t=(0,s.Ku)(t))}function st(t,e){return function(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof tt)return new Q(t,e);throw d("To use ref(service, url), the first argument must be a Storage instance.")}return Y(t,e)}(t=(0,s.Ku)(t),e)}function ot(t=(0,i.Sx)(),e){return t=(0,s.Ku)(t),(0,i.j6)(t,et).getImmediate({identifier:e})}(0,i.om)(new o.uA(et,(function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new tt(n,r,s,new y,e,i.MF)}),"PUBLIC").setMultipleInstances(!0)),(0,i.KO)("@firebase/storage","0.8.1")},440:(t,e,n)=>{n.d(e,{xI:()=>r.n});var r=n(137);n(625),n(468),n(477),n(134)},468:(t,e,n)=>{n.d(e,{KO:()=>H,MF:()=>q,Sx:()=>K,Wp:()=>z,j6:()=>V,om:()=>F});var r=n(134),i=n(477),s=n(625);class o{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const a="@firebase/app",c=new i.Vy("@firebase/app"),u="@firebase/app-compat",h="@firebase/analytics-compat",l="@firebase/analytics",d="@firebase/app-check-compat",f="@firebase/app-check",p="@firebase/auth",m="@firebase/auth-compat",g="@firebase/database",y="@firebase/database-compat",v="@firebase/functions",w="@firebase/functions-compat",_="@firebase/installations",b="@firebase/installations-compat",I="@firebase/messaging",T="@firebase/messaging-compat",E="@firebase/performance",S="@firebase/performance-compat",k="@firebase/remote-config",A="@firebase/remote-config-compat",N="@firebase/storage",C="@firebase/storage-compat",R="@firebase/firestore",O="@firebase/firestore-compat",D="firebase",P="[DEFAULT]",L={[a]:"fire-core",[u]:"fire-core-compat",[l]:"fire-analytics",[h]:"fire-analytics-compat",[f]:"fire-app-check",[d]:"fire-app-check-compat",[p]:"fire-auth",[m]:"fire-auth-compat",[g]:"fire-rtdb",[y]:"fire-rtdb-compat",[v]:"fire-fn",[w]:"fire-fn-compat",[_]:"fire-iid",[b]:"fire-iid-compat",[I]:"fire-fcm",[T]:"fire-fcm-compat",[E]:"fire-perf",[S]:"fire-perf-compat",[k]:"fire-rc",[A]:"fire-rc-compat",[N]:"fire-gcs",[C]:"fire-gcs-compat",[R]:"fire-fst",[O]:"fire-fst-compat","fire-js":"fire-js",[D]:"fire-js-all"},x=new Map,M=new Map;function U(t,e){try{t.container.addComponent(e)}catch(n){c.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function F(t){const e=t.name;if(M.has(e))return c.debug(`There were multiple attempts to register component ${e}.`),!1;M.set(e,t);for(const e of x.values())U(e,t);return!0}function V(t,e){return t.container.getProvider(e)}const j=new s.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class B{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw j.create("app-deleted",{appName:this._name})}}const q="9.0.0";function z(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:P,automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw j.create("bad-app-name",{appName:String(i)});const o=x.get(i);if(o){if((0,s.bD)(t,o.options)&&(0,s.bD)(n,o.config))return o;throw j.create("duplicate-app",{appName:i})}const a=new r.h1(i);for(const t of M.values())a.addComponent(t);const c=new B(t,n,a);return x.set(i,c),c}function K(t=P){const e=x.get(t);if(!e)throw j.create("no-app",{appName:t});return e}function H(t,e,n){var i;let s=null!==(i=L[t])&&void 0!==i?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void c.warn(t.join(" "))}F(new r.uA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}F(new r.uA("platform-logger",(t=>new o(t)),"PRIVATE")),H(a,"0.7.0",undefined),H("fire-js","")},477:(t,e,n)=>{function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{$b:()=>s,Vy:()=>l});var s,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={}));var a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=u[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=h,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}()},625:(t,e,n)=>{n.d(e,{Am:()=>b,FA:()=>g,I9:()=>I,Im:()=>v,Ku:()=>A,ZQ:()=>a,b8:()=>l,bD:()=>w,cY:()=>o,g:()=>m,hp:()=>T,jZ:()=>c,lT:()=>d,lV:()=>h,n4:()=>f,nr:()=>p,sr:()=>u,tD:()=>E,u:()=>s});var r=n(635),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=s>>2,l=(3&s)<<4|a>>4,d=(15&a)<<2|u>>6,f=63&u;c||(f=64,o||(d=64)),r.push(n[h],n[l],n[d],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==c)throw Error();var u=s<<2|o>>4;if(r.push(u),64!==a){var h=o<<4&240|a>>2;if(r.push(h),64!==c){var l=a<<6&192|c;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){try{return i.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},o=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function u(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function h(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function l(){return a().indexOf("Electron/")>=0}function d(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function f(){return a().indexOf("MSAppHost/")>=0}function p(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var m=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,g.prototype.create),s}return(0,r.C6)(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?function(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").";return new m(i,a,r)},t}(),y=/\{\$([^}]+)}/g;function v(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function w(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,s=n;i<s.length;i++){var o=s[i];if(!r.includes(o))return!1;var a=t[o],c=e[o];if(_(a)&&_(c)){if(!w(a,c))return!1}else if(a!==c)return!1}for(var u=0,h=r;u<h.length;u++)if(o=h[u],!n.includes(o))return!1;return!0}function _(t){return null!==t&&"object"==typeof t}function b(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r];n(s[0],s[1])}return e.length?"&"+e.join("&"):""}function I(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function T(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function E(t,e){var n=new S(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var s,o,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(s=h^c&(u^h),o=1518500249):(s=c^u^h,o=1859775393):r<60?(s=c&u|h&(c|u),o=2400959708):(s=c^u^h,o=3395469782),i=(a<<5|a>>>27)+s+l+o+n[r]&4294967295,l=h,h=u,u=4294967295&(c<<30|c>>>2),c=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t){if("object"!=typeof t||null===t)return!1;for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function k(){}function A(t){return t&&t._delegate?t._delegate:t}},635:(t,e,n)=>{n.d(e,{C6:()=>i,Ju:()=>c,Tt:()=>s,YH:()=>a,fX:()=>h,sH:()=>o,zs:()=>u});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError},790:(t,e,n)=>{n.d(e,{GG:()=>Xs,H9:()=>gs,O5:()=>eo,aU:()=>ws,kd:()=>Zs,mZ:()=>Ys,rJ:()=>ms});var r=n(468),i=n(134),s=n(477),o=n(625),a=n(36);class c{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}c.UNAUTHENTICATED=new c(null),c.GOOGLE_CREDENTIALS=new c("google-credentials-uid"),c.FIRST_PARTY=new c("first-party-uid"),c.MOCK_USER=new c("mock-user");let u="9.0.1";const h=new s.Vy("@firebase/firestore");function l(){return h.logLevel}function d(t,...e){if(h.logLevel<=s.$b.DEBUG){const n=e.map(m);h.debug(`Firestore (${u}): ${t}`,...n)}}function f(t,...e){if(h.logLevel<=s.$b.ERROR){const n=e.map(m);h.error(`Firestore (${u}): ${t}`,...n)}}function p(t,...e){if(h.logLevel<=s.$b.WARN){const n=e.map(m);h.warn(`Firestore (${u}): ${t}`,...n)}}function m(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function g(t="Unexpected state"){const e=`FIRESTORE (${u}) INTERNAL ASSERTION FAILED: `+t;throw f(e),new Error(e)}function y(t,e){t||g()}function v(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _ extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class b{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class I{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class T{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(c.UNAUTHENTICATED)))}shutdown(){}}class E{constructor(t){this.t=t,this.currentUser=c.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new b;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new b,t.enqueueRetryable((()=>r(this.currentUser)))};const s=e=>{t.enqueueRetryable((async()=>{d("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),await i.promise,await r(this.currentUser)}))};this.t.onInit((t=>s(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?s(t):(d("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new b)}}),0),t.enqueueRetryable((async()=>{0===this.i&&(await i.promise,await r(this.currentUser))}))}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(y("string"==typeof e.accessToken),new I(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t),new c(t)}}class S{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=c.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class k{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new S(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(c.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function N(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}A.T=-1;class C{static I(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=N(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function R(t,e){return t<e?-1:t>e?1:0}function O(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class D{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return D.fromMillis(Date.now())}static fromDate(t){return D.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new D(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?R(this.nanoseconds,t.nanoseconds):R(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class P{constructor(t){this.timestamp=t}static fromTimestamp(t){return new P(t)}static min(){return new P(new D(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function L(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function x(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class U{constructor(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===U.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof U?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class F extends U{construct(t,e,n){return new F(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new _(w.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new F(e)}static emptyPath(){return new F([])}}const V=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class j extends U{construct(t,e,n){return new j(t,e,n)}static isValidIdentifier(t){return V.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),j.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new j(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new _(w.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new _(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new _(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new _(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new j(e)}static emptyPath(){return new j([])}}class B{constructor(t){this.fields=t,t.sort(j.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return O(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class q{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new q(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new q(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return R(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}q.EMPTY_BYTE_STRING=new q("");const z=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function K(t){if(y(!!t),"string"==typeof t){let e=0;const n=z.exec(t);if(y(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:H(t.seconds),nanos:H(t.nanos)}}function H(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function $(t){return"string"==typeof t?q.fromBase64String(t):q.fromUint8Array(t)}function G(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function W(t){const e=t.mapValue.fields.__previous_value__;return G(e)?W(e):e}function J(t){const e=K(t.mapValue.fields.__local_write_time__.timestampValue);return new D(e.seconds,e.nanos)}function Q(t){return null==t}function X(t){return 0===t&&1/t==-1/0}class Y{constructor(t){this.path=t}static fromPath(t){return new Y(F.fromString(t))}static fromName(t){return new Y(F.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===F.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return F.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Y(new F(t.slice()))}}function Z(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G(t)?4:10:g()}function tt(t,e){const n=Z(t);if(n!==Z(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return J(t).isEqual(J(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=K(t.timestampValue),r=K(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return $(t.bytesValue).isEqual($(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return H(t.geoPointValue.latitude)===H(e.geoPointValue.latitude)&&H(t.geoPointValue.longitude)===H(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return H(t.integerValue)===H(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=H(t.doubleValue),r=H(e.doubleValue);return n===r?X(n)===X(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return O(t.arrayValue.values||[],e.arrayValue.values||[],tt);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(L(n)!==L(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!tt(n[t],r[t])))return!1;return!0}(t,e);default:return g()}}function et(t,e){return void 0!==(t.values||[]).find((t=>tt(t,e)))}function nt(t,e){const n=Z(t),r=Z(e);if(n!==r)return R(n,r);switch(n){case 0:return 0;case 1:return R(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=H(t.integerValue||t.doubleValue),r=H(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return rt(t.timestampValue,e.timestampValue);case 4:return rt(J(t),J(e));case 5:return R(t.stringValue,e.stringValue);case 6:return function(t,e){const n=$(t),r=$(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=R(n[t],r[t]);if(0!==e)return e}return R(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=R(H(t.latitude),H(e.latitude));return 0!==n?n:R(H(t.longitude),H(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=nt(n[t],r[t]);if(e)return e}return R(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=R(r[t],s[t]);if(0!==e)return e;const o=nt(n[r[t]],i[s[t]]);if(0!==o)return o}return R(r.length,s.length)}(t.mapValue,e.mapValue);default:throw g()}}function rt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return R(t,e);const n=K(t),r=K(e),i=R(n.seconds,r.seconds);return 0!==i?i:R(n.nanos,r.nanos)}function it(t){return st(t)}function st(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=K(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?$(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Y.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=st(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${st(t.fields[i])}`;return n+"}"}(t.mapValue):g();var e,n}function ot(t){return!!t&&"integerValue"in t}function at(t){return!!t&&"arrayValue"in t}function ct(t){return!!t&&"nullValue"in t}function ut(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ht(t){return!!t&&"mapValue"in t}function lt(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return x(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=lt(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lt(t.arrayValue.values[n]);return e}return Object.assign({},t)}class dt{constructor(t){this.value=t}static empty(){return new dt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ht(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=lt(e)}setAll(t){let e=j.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=lt(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());ht(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return tt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];ht(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){x(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new dt(lt(this.value))}}function ft(t){const e=[];return x(t.fields,((t,n)=>{const r=new j([t]);if(ht(n)){const t=ft(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new B(e)}class pt{constructor(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(t){return new pt(t,0,P.min(),dt.empty(),0)}static newFoundDocument(t,e,n){return new pt(t,1,e,n,0)}static newNoDocument(t,e){return new pt(t,2,e,dt.empty(),0)}static newUnknownDocument(t,e){return new pt(t,3,e,dt.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof pt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new pt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mt{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function gt(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mt(t,e,n,r,i,s,o)}function yt(t){const e=v(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+it(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Q(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Rt(e.startAt)),e.endAt&&(t+="|ub:",t+=Rt(e.endAt)),e.A=t}return e.A}function vt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Dt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!tt(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lt(t.startAt,e.startAt)&&Lt(t.endAt,e.endAt)}function wt(t){return Y.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class _t extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new bt(t,e,n):"array-contains"===e?new St(t,n):"in"===e?new kt(t,n):"not-in"===e?new At(t,n):"array-contains-any"===e?new Nt(t,n):new _t(t,e,n)}static R(t,e,n){return"in"===e?new It(t,n):new Tt(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(nt(e,this.value)):null!==e&&Z(this.value)===Z(e)&&this.P(nt(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class bt extends _t{constructor(t,e,n){super(t,e,n),this.key=Y.fromName(n.referenceValue)}matches(t){const e=Y.comparator(t.key,this.key);return this.P(e)}}class It extends _t{constructor(t,e){super(t,"in",e),this.keys=Et(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Tt extends _t{constructor(t,e){super(t,"not-in",e),this.keys=Et(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Et(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Y.fromName(t.referenceValue)))}class St extends _t{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return at(e)&&et(e.arrayValue,this.value)}}class kt extends _t{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&et(this.value.arrayValue,e)}}class At extends _t{constructor(t,e){super(t,"not-in",e)}matches(t){if(et(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!et(this.value.arrayValue,e)}}class Nt extends _t{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!at(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>et(this.value.arrayValue,t)))}}class Ct{constructor(t,e){this.position=t,this.before=e}}function Rt(t){return`${t.before?"b":"a"}:${t.position.map((t=>it(t))).join(",")}`}class Ot{constructor(t,e="asc"){this.field=t,this.dir=e}}function Dt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Pt(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Y.comparator(Y.fromName(o.referenceValue),n.key):nt(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Lt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tt(t.position[n],e.position[n]))return!1;return!0}class xt{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function Mt(t){return new xt(t)}function Ut(t){return!Q(t.limit)&&"F"===t.limitType}function Ft(t){return!Q(t.limit)&&"L"===t.limitType}function Vt(t){const e=v(t);if(null===e.V){e.V=[];const t=function(t){for(const e of t.filters)if(e.v())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new Ot(t)),e.V.push(new Ot(j.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Ot(j.keyField(),t))}}}return e.V}function jt(t){const e=v(t);if(!e.S)if("F"===e.limitType)e.S=gt(e.path,e.collectionGroup,Vt(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Vt(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Ot(n.field,e))}const n=e.endAt?new Ct(e.endAt.position,!e.endAt.before):null,r=e.startAt?new Ct(e.startAt.position,!e.startAt.before):null;e.S=gt(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.S}function Bt(t,e){return vt(jt(t),jt(e))&&t.limitType===e.limitType}function qt(t){return`${yt(jt(t))}|lt:${t.limitType}`}function zt(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${it(e.value)}`;var e})).join(", ")}]`),Q(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+Rt(t.startAt)),t.endAt&&(e+=", endAt: "+Rt(t.endAt)),`Target(${e})`}(jt(t))}; limitType=${t.limitType})`}function Kt(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Y.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Pt(t.startAt,Vt(t),e)||t.endAt&&Pt(t.endAt,Vt(t),e))}(t,e)}function Ht(t){return(e,n)=>{let r=!1;for(const i of Vt(t)){const t=$t(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function $t(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?nt(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Gt(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:X(e)?"-0":e}}function Wt(t){return{integerValue:""+t}}function Jt(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!X(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Wt(e):Gt(t,e)}class Qt{constructor(){this._=void 0}}function Xt(t,e,n){return t instanceof te?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ee?ne(t,e):t instanceof re?ie(t,e):function(t,e){const n=Zt(t,e),r=oe(n)+oe(t.C);return ot(n)&&ot(t.C)?Wt(r):Gt(t.N,r)}(t,e)}function Yt(t,e,n){return t instanceof ee?ne(t,e):t instanceof re?ie(t,e):n}function Zt(t,e){return t instanceof se?ot(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class te extends Qt{}class ee extends Qt{constructor(t){super(),this.elements=t}}function ne(t,e){const n=ae(e);for(const e of t.elements)n.some((t=>tt(t,e)))||n.push(e);return{arrayValue:{values:n}}}class re extends Qt{constructor(t){super(),this.elements=t}}function ie(t,e){let n=ae(e);for(const e of t.elements)n=n.filter((t=>!tt(t,e)));return{arrayValue:{values:n}}}class se extends Qt{constructor(t,e){super(),this.N=t,this.C=e}}function oe(t){return H(t.integerValue||t.doubleValue)}function ae(t){return at(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ce{constructor(t,e){this.field=t,this.transform=e}}class ue{constructor(t,e){this.version=t,this.transformResults=e}}class he{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new he}static exists(t){return new he(void 0,t)}static updateTime(t){return new he(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function le(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class de{}function fe(t,e,n){t instanceof ve?function(t,e,n){const r=t.value.clone(),i=be(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof we?function(t,e,n){if(!le(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=be(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(_e(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function pe(t,e,n){t instanceof ve?function(t,e,n){if(!le(t.precondition,e))return;const r=t.value.clone(),i=Ie(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ye(e),r).setHasLocalMutations()}(t,e,n):t instanceof we?function(t,e,n){if(!le(t.precondition,e))return;const r=Ie(t.fieldTransforms,n,e),i=e.data;i.setAll(_e(t)),i.setAll(r),e.convertToFoundDocument(ye(e),i).setHasLocalMutations()}(t,e,n):function(t,e){le(t.precondition,e)&&e.convertToNoDocument(P.min())}(t,e)}function me(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=Zt(r.transform,t||null);null!=i&&(null==n&&(n=dt.empty()),n.set(r.field,i))}return n||null}function ge(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&O(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ee&&e instanceof ee||t instanceof re&&e instanceof re?O(t.elements,e.elements,tt):t instanceof se&&e instanceof se?tt(t.C,e.C):t instanceof te&&e instanceof te}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ye(t){return t.isFoundDocument()?t.version:P.min()}class ve extends de{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class we extends de{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function _e(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function be(t,e,n){const r=new Map;y(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Yt(o,a,n[i]))}return r}function Ie(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Xt(t,s,e))}return r}class Te extends de{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Ee extends de{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Se{constructor(t){this.count=t}}var ke,Ae;function Ne(t){if(void 0===t)return f("GRPC error has no .code"),w.UNKNOWN;switch(t){case ke.OK:return w.OK;case ke.CANCELLED:return w.CANCELLED;case ke.UNKNOWN:return w.UNKNOWN;case ke.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case ke.INTERNAL:return w.INTERNAL;case ke.UNAVAILABLE:return w.UNAVAILABLE;case ke.UNAUTHENTICATED:return w.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case ke.NOT_FOUND:return w.NOT_FOUND;case ke.ALREADY_EXISTS:return w.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return w.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case ke.ABORTED:return w.ABORTED;case ke.OUT_OF_RANGE:return w.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return w.UNIMPLEMENTED;case ke.DATA_LOSS:return w.DATA_LOSS;default:return g()}}(Ae=ke||(ke={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";class Ce{constructor(t,e){this.comparator=t,this.root=e||Oe.EMPTY}insert(t,e){return new Ce(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Oe.BLACK,null,null))}remove(t){return new Ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Re(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Re(this.root,t,this.comparator,!1)}getReverseIterator(){return new Re(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Re(this.root,t,this.comparator,!0)}}class Re{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Oe{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Oe.RED,this.left=null!=r?r:Oe.EMPTY,this.right=null!=i?i:Oe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Oe(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Oe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Oe.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();const t=this.left.check();if(t!==this.right.check())throw g();return t+(this.isRed()?0:1)}}Oe.EMPTY=null,Oe.RED=!0,Oe.BLACK=!1,Oe.EMPTY=new class{constructor(){this.size=0}get key(){throw g()}get value(){throw g()}get color(){throw g()}get left(){throw g()}get right(){throw g()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Oe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class De{constructor(t){this.comparator=t,this.data=new Ce(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pe(this.data.getIterator())}getIteratorFrom(t){return new Pe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof De))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new De(this.comparator);return e.data=t,e}}class Pe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Le=new Ce(Y.comparator);function xe(){return Le}const Me=new Ce(Y.comparator);function Ue(){return Me}const Fe=new Ce(Y.comparator);const Ve=new De(Y.comparator);function je(...t){let e=Ve;for(const n of t)e=e.add(n);return e}const Be=new De(R);function qe(){return Be}class ze{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Ke.createSynthesizedTargetChangeForCurrentChange(t,e)),new ze(P.min(),n,qe(),xe(),je())}}class Ke{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Ke(q.EMPTY_BYTE_STRING,e,je(),je(),je())}}class He{constructor(t,e,n,r){this.k=t,this.removedTargetIds=e,this.key=n,this.$=r}}class $e{constructor(t,e){this.targetId=t,this.O=e}}class Ge{constructor(t,e,n=q.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class We{constructor(){this.F=0,this.M=Xe(),this.L=q.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=je(),e=je(),n=je();return this.M.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new Ke(this.L,this.B,t,e,n)}G(){this.U=!1,this.M=Xe()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Je{constructor(t){this.tt=t,this.et=new Map,this.nt=xe(),this.st=Qe(),this.it=new De(R)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.at(e,t.key,t.$);for(const e of t.removedTargetIds)this.at(e,t.key,t.$)}ct(t){this.forEachTarget(t,(e=>{const n=this.ut(e);switch(t.state){case 0:this.ht(e)&&n.j(t.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(t.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(e);break;case 3:this.ht(e)&&(n.Z(),n.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),n.j(t.resumeToken));break;default:g()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach(((t,n)=>{this.ht(n)&&e(n)}))}ft(t){const e=t.targetId,n=t.O.count,r=this.dt(e);if(r){const t=r.target;if(wt(t))if(0===n){const n=new Y(t.path);this.at(e,n,pt.newNoDocument(n,P.min()))}else y(1===n);else this.wt(e)!==n&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach(((n,r)=>{const i=this.dt(r);if(i){if(n.current&&wt(i.target)){const e=new Y(i.target.path);null!==this.nt.get(e)||this.gt(r,e)||this.at(r,e,pt.newNoDocument(e,t))}n.K&&(e.set(r,n.W()),n.G())}}));let n=je();this.st.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.dt(t);return!e||2===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))}));const r=new ze(t,e,this.it,this.nt,n);return this.nt=xe(),this.st=Qe(),this.it=new De(R),r}ot(t,e){if(!this.ht(t))return;const n=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,n),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}at(t,e,n){if(!this.ht(t))return;const r=this.ut(t);this.gt(t,e)?r.H(e,1):r.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),n&&(this.nt=this.nt.insert(e,n))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new We,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new De(R),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Et(t)}lt(t){this.et.set(t,new We),this.tt.getRemoteKeysForTarget(t).forEach((e=>{this.at(t,e,null)}))}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function Qe(){return new Ce(Y.comparator)}function Xe(){return new Ce(Y.comparator)}const Ye={asc:"ASCENDING",desc:"DESCENDING"},Ze={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class tn{constructor(t,e){this.databaseId=t,this.D=e}}function en(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nn(t,e){return t.D?e.toBase64():e.toUint8Array()}function rn(t,e){return en(t,e.toTimestamp())}function sn(t){return y(!!t),P.fromTimestamp(function(t){const e=K(t);return new D(e.seconds,e.nanos)}(t))}function on(t,e){return function(t){return new F(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function an(t){const e=F.fromString(t);return y(An(e)),e}function cn(t,e){return on(t.databaseId,e.path)}function un(t,e){const n=an(e);if(n.get(1)!==t.databaseId.projectId)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(dn(n))}function hn(t,e){return on(t.databaseId,e)}function ln(t){return new F(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dn(t){return y(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fn(t,e,n){return{name:cn(t,e),fields:n.value.mapValue.fields}}function pn(t,e){return{documents:[hn(t,e.path)]}}function mn(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(ut(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NAN"}};if(ct(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ut(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NOT_NAN"}};if(ct(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:In(t.field),op:bn(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:In(t.field),direction:_n(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.D||Q(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=vn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=vn(e.endAt)),n}function gn(t){let e=function(t){const e=an(t);return 4===e.length?F.emptyPath():dn(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){y(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=yn(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Ot(Tn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Q(e)?null:e}(n.limit));let c=null;n.startAt&&(c=wn(n.startAt));let u=null;return n.endAt&&(u=wn(n.endAt)),function(t,e,n,r,i,s,o,a){return new xt(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,u)}function yn(t){return t?void 0!==t.unaryFilter?[Sn(t)]:void 0!==t.fieldFilter?[En(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>yn(t))).reduce(((t,e)=>t.concat(e))):g():[]}function vn(t){return{before:t.before,values:t.position}}function wn(t){const e=!!t.before,n=t.values||[];return new Ct(n,e)}function _n(t){return Ye[t]}function bn(t){return Ze[t]}function In(t){return{fieldPath:t.canonicalString()}}function Tn(t){return j.fromServerFormat(t.fieldPath)}function En(t){return _t.create(Tn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Sn(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Tn(t.unaryFilter.field);return _t.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Tn(t.unaryFilter.field);return _t.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Tn(t.unaryFilter.field);return _t.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Tn(t.unaryFilter.field);return _t.create(i,"!=",{nullValue:"NULL_VALUE"});default:return g()}}function kn(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function An(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Nn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rn(e)),e=Cn(t.get(n),e);return Rn(e)}function Cn(t,e){let n=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Rn(t){return t+""}class On{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}On.store="owner",On.key="owner";class Dn{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Dn.store="mutationQueues",Dn.keyPath="userId";class Pn{constructor(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}Pn.store="mutations",Pn.keyPath="batchId",Pn.userMutationsIndex="userMutationsIndex",Pn.userMutationsKeyPath=["userId","batchId"];class Ln{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,Nn(e)]}static key(t,e,n){return[t,Nn(e),n]}}Ln.store="documentMutations",Ln.PLACEHOLDER=new Ln;class xn{constructor(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}xn.store="remoteDocuments",xn.readTimeIndex="readTimeIndex",xn.readTimeIndexPath="readTime",xn.collectionReadTimeIndex="collectionReadTimeIndex",xn.collectionReadTimeIndexPath=["parentPath","readTime"];class Mn{constructor(t){this.byteSize=t}}Mn.store="remoteDocumentGlobal",Mn.key="remoteDocumentGlobalKey";class Un{constructor(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Un.store="targets",Un.keyPath="targetId",Un.queryTargetsIndexName="queryTargetsIndex",Un.queryTargetsKeyPath=["canonicalId","targetId"];class Fn{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Fn.store="targetDocuments",Fn.keyPath=["targetId","path"],Fn.documentTargetsIndex="documentTargetsIndex",Fn.documentTargetsKeyPath=["path","targetId"];class Vn{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Vn.key="targetGlobalKey",Vn.store="targetGlobal";class jn{constructor(t,e){this.collectionId=t,this.parent=e}}jn.store="collectionParents",jn.keyPath=["collectionId","parent"];class Bn{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}Bn.store="clientMetadata",Bn.keyPath="clientId";class qn{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}qn.store="bundles",qn.keyPath="bundleId";class zn{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}zn.store="namedQueries",zn.keyPath="name",Dn.store,Pn.store,Ln.store,xn.store,Un.store,On.store,Vn.store,Fn.store,Bn.store,Mn.store,jn.store,qn.store,zn.store;const Kn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}class $n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $n(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof $n?e:$n.resolve(e)}catch(t){return $n.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):$n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):$n.reject(e)}static resolve(t){return new $n(((e,n)=>{e(t)}))}static reject(t){return new $n(((e,n)=>{n(t)}))}static waitFor(t){return new $n(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=$n.resolve(!1);for(const n of t)e=e.next((t=>t?$n.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}}function Gn(t){return"IndexedDbTransactionError"===t.name}class Wn{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&fe(r,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&pe(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&pe(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(P.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),je())}isEqual(t){return this.batchId===t.batchId&&O(this.mutations,t.mutations,((t,e)=>ge(t,e)))&&O(this.baseMutations,t.baseMutations,((t,e)=>ge(t,e)))}}class Jn{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){y(t.mutations.length===n.length);let r=Fe;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new Jn(t,e,n,r)}}class Qn{constructor(t,e,n,r,i=P.min(),s=P.min(),o=q.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new Qn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Xn{constructor(t){this.Wt=t}}function Yn(t){const e=gn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new xt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class Zn{constructor(){this.Gt=new tr}addToCollectionParentIndex(t,e){return this.Gt.add(e),$n.resolve()}getCollectionParents(t,e){return $n.resolve(this.Gt.getEntries(e))}}class tr{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new De(F.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new De(F.comparator)).toArray()}}class er{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new er(t,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(41943040,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);class nr{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new nr(0)}static ie(){return new nr(-1)}}async function rr(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==Kn)throw t;d("LocalStore","Unexpectedly lost primary lease")}class ir{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){x(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return M(this.inner)}}class sr{constructor(){this.changes=new ir((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:P.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:pt.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?$n.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class or{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Rn(t,e,n)))}Rn(t,e,n){return this.He.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}Pn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}bn(t,e){return this.He.getEntries(t,e).next((e=>this.vn(t,e).next((()=>e))))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.Pn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Y.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new Y(e)).next((t=>{let e=Ue();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Sn(t,e,n){const r=e.collectionGroup;let i=Ue();return this.Ht.getCollectionParents(t,r).next((s=>$n.forEach(s,(s=>{const o=function(t,e){return new xt(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.Dn(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}Dn(t,e,n){let r,i;return this.He.getDocumentsMatchingQuery(t,e,n).next((n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Cn(t,i,r).next((t=>{r=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=pt.newInvalidDocument(n),r=r.insert(n,i)),pe(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((t,n)=>{Kt(e,n)||(r=r.remove(t))})),r)))}Cn(t,e,n){let r=je();for(const t of e)for(const e of t.mutations)e instanceof we&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(t,r).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class ar{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=r}static kn(t,e){let n=je(),r=je();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new ar(t,e.fromCache,n,r)}}class cr{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(P.min())?this.Fn(t,e):this.On.bn(t,r).next((i=>{const o=this.Mn(e,i);return(Ut(e)||Ft(e))&&this.Ln(e.limitType,o,r,n)?this.Fn(t,e):(l()<=s.$b.DEBUG&&d("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zt(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(o.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Mn(t,e){let n=new De(Ht(t));return e.forEach(((e,r)=>{Kt(t,r)&&(n=n.add(r))})),n}Ln(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(t,e){return l()<=s.$b.DEBUG&&d("QueryEngine","Using full collection scan to execute query:",zt(e)),this.On.getDocumentsMatchingQuery(t,e,P.min())}}class ur{constructor(t,e,n,r){this.persistence=t,this.Bn=e,this.N=r,this.Un=new Ce(R),this.qn=new ir((t=>yt(t)),vt),this.Kn=P.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new or(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Un)))}}async function hr(t,e){const n=v(t);let r=n.In,i=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.In.getAllMutationBatches(t).next((o=>(s=o,r=n.persistence.getMutationQueue(e),i=new or(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)))).next((e=>{const n=[],r=[];let o=je();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.bn(t,o).next((t=>({Wn:t,removedBatchIds:n,addedBatchIds:r})))}))}));return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}function lr(t){const e=v(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.ze.getLastRemoteSnapshotVersion(t)))}function dr(t,e){const n=v(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e))))}async function fr(t,e,n){const r=v(t),i=r.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Gn(t))throw t;d("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.Un=r.Un.remove(e),r.qn.delete(i.target)}function pr(t,e,n){const r=v(t);let i=P.min(),s=je();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=v(t),i=r.qn.get(n);return void 0!==i?$n.resolve(r.Un.get(i)):r.ze.getTargetData(e,n)}(r,t,jt(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Bn.getDocumentsMatchingQuery(t,e,n?i:P.min(),n?s:je()))).next((t=>({documents:t,Gn:s})))))}class mr{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return $n.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:sn(n.createTime)}),$n.resolve()}getNamedQuery(t,e){return $n.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:Yn(t.bundledQuery),readTime:sn(t.readTime)}}(e)),$n.resolve()}}class gr{constructor(){this.Zn=new De(yr.ts),this.es=new De(yr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new yr(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.rs(new yr(t,e))}os(t,e){t.forEach((t=>this.removeReference(t,e)))}cs(t){const e=new Y(new F([])),n=new yr(e,t),r=new yr(e,t+1),i=[];return this.es.forEachInRange([n,r],(t=>{this.rs(t),i.push(t.key)})),i}us(){this.Zn.forEach((t=>this.rs(t)))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new Y(new F([])),n=new yr(e,t),r=new yr(e,t+1);let i=je();return this.es.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new yr(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class yr{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return Y.comparator(t.key,e.key)||R(t.ls,e.ls)}static ns(t,e){return R(t.ls,e.ls)||Y.comparator(t.key,e.key)}}class vr{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new De(yr.ts)}checkEmpty(t){return $n.resolve(0===this.In.length)}addMutationBatch(t,e,n,r){const i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new Wn(i,e,n,r);this.In.push(s);for(const e of r)this.ds=this.ds.add(new yr(e.key,i)),this.Ht.addToCollectionParentIndex(t,e.key.path.popLast());return $n.resolve(s)}lookupMutationBatch(t,e){return $n.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this._s(n),i=r<0?0:r;return $n.resolve(this.In.length>i?this.In[i]:null)}getHighestUnacknowledgedBatchId(){return $n.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return $n.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new yr(e,0),r=new yr(e,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],(t=>{const e=this.ws(t.ls);i.push(e)})),$n.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new De(R);return e.forEach((t=>{const e=new yr(t,0),r=new yr(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,r],(t=>{n=n.add(t.ls)}))})),$n.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;Y.isDocumentKey(i)||(i=i.child(""));const s=new yr(new Y(i),0);let o=new De(R);return this.ds.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ls)),!0)}),s),$n.resolve(this.gs(o))}gs(t){const e=[];return t.forEach((t=>{const n=this.ws(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){y(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return $n.forEach(e.mutations,(r=>{const i=new yr(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.ds=n}))}te(t){}containsKey(t,e){const n=new yr(e,0),r=this.ds.firstAfterOrEqual(n);return $n.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.In.length,$n.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class wr{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new Ce(Y.comparator),this.size=0}addEntry(t,e,n){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $n.resolve(n?n.document.clone():pt.newInvalidDocument(e))}getEntries(t,e){let n=xe();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():pt.newInvalidDocument(t))})),$n.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=xe();const i=new Y(e.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||Kt(e,i)&&(r=r.insert(i.key,i.clone()))}return $n.resolve(r)}Es(t,e){return $n.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new _r(this)}getSize(t){return $n.resolve(this.size)}}class _r extends sr{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?e.push(this.Se.addEntry(t,r.document,this.getReadTime(n))):this.Se.removeEntry(n)})),$n.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class br{constructor(t){this.persistence=t,this.Ts=new ir((t=>yt(t)),vt),this.lastRemoteSnapshotVersion=P.min(),this.highestTargetId=0,this.Is=0,this.As=new gr,this.targetCount=0,this.Rs=nr.se()}forEachTarget(t,e){return this.Ts.forEach(((t,n)=>e(n))),$n.resolve()}getLastRemoteSnapshotVersion(t){return $n.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $n.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),$n.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),$n.resolve()}ae(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new nr(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ae(e),this.targetCount+=1,$n.resolve()}updateTargetData(t,e){return this.ae(e),$n.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,$n.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Ts.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),$n.waitFor(i).next((()=>r))}getTargetCount(t){return $n.resolve(this.targetCount)}getTargetData(t,e){const n=this.Ts.get(e)||null;return $n.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),$n.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),$n.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),$n.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return $n.resolve(n)}containsKey(t,e){return $n.resolve(this.As.containsKey(e))}}class Ir{constructor(t,e){this.Ps={},this.Le=new A(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new br(this),this.Ht=new Zn,this.He=function(t,e){return new wr(t,e)}(this.Ht,(t=>this.referenceDelegate.bs(t))),this.N=new Xn(e),this.Je=new mr(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.Ps[t.toKey()];return e||(e=new vr(this.Ht,this.referenceDelegate),this.Ps[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){d("MemoryPersistence","Starting transaction:",t);const r=new Tr(this.Le.next());return this.referenceDelegate.vs(),n(r).next((t=>this.referenceDelegate.Vs(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ss(t,e){return $n.or(Object.values(this.Ps).map((n=>()=>n.containsKey(t,e))))}}class Tr extends Hn{constructor(t){super(),this.currentSequenceNumber=t}}class Er{constructor(t){this.persistence=t,this.Ds=new gr,this.Cs=null}static Ns(t){return new Er(t)}get xs(){if(this.Cs)return this.Cs;throw g()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),$n.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),$n.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),$n.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $n.forEach(this.xs,(n=>{const r=Y.fromPath(n);return this.ks(t,r).next((t=>{t||e.removeEntry(r)}))})).next((()=>(this.Cs=null,e.apply(t))))}updateLimboDocument(t,e){return this.ks(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}bs(t){return 0}ks(t,e){return $n.or([()=>$n.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}class Sr{constructor(){this.activeTargetIds=qe()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kr{constructor(){this.yi=new Sr,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new Sr,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class Ar{Ei(t){}shutdown(){}}class Nr{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(t){this.Pi.push(t)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Pi)t(0)}Ri(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Pi)t(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Cr={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Rr{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class Or extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,r){const i=this.Bi(t,e);d("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(t,i,s,n).then((t=>(d("RestConnection","Received: ",t),t)),(e=>{throw p("RestConnection",`${t} failed with error: `,e,"url: ",i,"request:",n),e}))}Ki(t,e,n,r){return this.Li(t,e,n,r)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+u,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){const n=Cr[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,r){return new Promise(((i,s)=>{const o=new a.ZS;o.listenOnce(a.Bx.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case a.O4.NO_ERROR:const e=o.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),i(e);break;case a.O4.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),s(new _(w.DEADLINE_EXCEEDED,"Request time out"));break;case a.O4.HTTP_ERROR:const n=o.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(e)>=0?e:w.UNKNOWN}(t.status);s(new _(e,t.message))}else s(new _(w.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new _(w.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{d("Connection",'RPC "'+t+'" completed.')}}));const c=JSON.stringify(r);o.send(e,"POST",c,n,15)}))}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=(0,a.fF)(),i=(0,a.Ao)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new a._L({})),this.Ui(s.initMessageHeaders,e),(0,o.jZ)()||(0,o.lV)()||(0,o.b8)()||(0,o.lT)()||(0,o.n4)()||(0,o.sr)()||(s.httpHeadersOverwriteParam="$httpHeaders");const c=n.join("");d("Connection","Creating WebChannel: "+c,s);const u=r.createWebChannel(c,s);let h=!1,l=!1;const f=new Rr({vi:t=>{l?d("Connection","Not sending because WebChannel is closed:",t):(h||(d("Connection","Opening WebChannel transport."),u.open(),h=!0),d("Connection","WebChannel sending:",t),u.send(t))},Vi:()=>u.close()}),m=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return m(u,a.iO.EventType.OPEN,(()=>{l||d("Connection","WebChannel transport opened.")})),m(u,a.iO.EventType.CLOSE,(()=>{l||(l=!0,d("Connection","WebChannel transport closed"),f.$i())})),m(u,a.iO.EventType.ERROR,(t=>{l||(l=!0,p("Connection","WebChannel transport errored:",t),f.$i(new _(w.UNAVAILABLE,"The operation could not be completed")))})),m(u,a.iO.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];y(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){d("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=ke[t];if(void 0!==e)return Ne(e)}(t),n=i.message;void 0===e&&(e=w.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,f.$i(new _(e,n)),u.close()}else d("Connection","WebChannel received:",n),f.Oi(n)}})),m(i,a.Jh.STAT_EVENT,(t=>{t.stat===a.ro.PROXY?d("Connection","Detected buffering proxy"):t.stat===a.ro.NOPROXY&&d("Connection","Detected no buffering proxy")})),setTimeout((()=>{f.ki()}),0),f}}function Dr(){return"undefined"!=typeof document?document:null}function Pr(t){return new tn(t,!0)}class Lr{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,e-n);r>0&&d("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,(()=>(this.Ji=Date.now(),t()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class xr{constructor(t,e,n,r,i,s){this.Oe=t,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Lr(t,e)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}async stop(){this.ar()&&await this.close(0)}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this.dr())))}wr(t){this._r(),this.stream.send(t)}async dr(){if(this.cr())return this.close(0)}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}async close(t,e){this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===w.RESOURCE_EXHAUSTED?(f(e.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):e&&e.code===w.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ci(e)}mr(){}auth(){this.state=1;const t=this.gr(this.sr),e=this.sr;this.credentialsProvider.getToken().then((t=>{this.sr===e&&this.yr(t)}),(e=>{t((()=>{const t=new _(w.UNKNOWN,"Fetching auth token failed: "+e.message);return this.pr(t)}))}))}yr(t){const e=this.gr(this.sr);this.stream=this.Er(t),this.stream.Si((()=>{e((()=>(this.state=2,this.listener.Si())))})),this.stream.Ci((t=>{e((()=>this.pr(t)))})),this.stream.onMessage((t=>{e((()=>this.onMessage(t)))}))}ur(){this.state=4,this.rr.Xi((async()=>{this.state=0,this.start()}))}pr(t){return d("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(3,t)}gr(t){return e=>{this.Oe.enqueueAndForget((()=>this.sr===t?e():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mr extends xr{constructor(t,e,n,r,i){super(t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i),this.N=r}Er(t){return this.nr.ji("Listen",t)}onMessage(t){this.rr.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.D?(y(void 0===e||"string"==typeof e),q.fromBase64String(e||"")):(y(void 0===e||e instanceof Uint8Array),q.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?w.UNKNOWN:Ne(t.code);return new _(e,t.message||"")}(o);n=new Ge(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=un(t,r.document.name),s=sn(r.document.updateTime),o=new dt({mapValue:{fields:r.document.fields}}),a=pt.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new He(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=un(t,r.document),s=r.readTime?sn(r.readTime):P.min(),o=pt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new He([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=un(t,r.document),s=r.removedTargetIds||[];n=new He([],s,i,null)}else{if(!("filter"in e))return g();{e.filter;const t=e.filter;t.targetId;const r=t.count||0,i=new Se(r),s=t.targetId;n=new $e(s,i)}}return n}(this.N,t),n=function(t){if(!("targetChange"in t))return P.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?P.min():e.readTime?sn(e.readTime):P.min()}(t);return this.listener.Tr(e,n)}Ir(t){const e={};e.database=ln(this.N),e.addTarget=function(t,e){let n;const r=e.target;return n=wt(r)?{documents:pn(t,r)}:{query:mn(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=nn(t,e.resumeToken):e.snapshotVersion.compareTo(P.min())>0&&(n.readTime=en(t,e.snapshotVersion.toTimestamp())),n}(this.N,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,t);n&&(e.labels=n),this.wr(e)}Ar(t){const e={};e.database=ln(this.N),e.removeTarget=t,this.wr(e)}}class Ur extends xr{constructor(t,e,n,r,i){super(t,"write_stream_connection_backoff","write_stream_idle",e,n,i),this.N=r,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(t){return this.nr.ji("Write",t)}onMessage(t){if(y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();const e=function(t,e){return t&&t.length>0?(y(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?sn(t.updateTime):sn(e);return n.isEqual(P.min())&&(n=sn(e)),new ue(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=sn(t.commitTime);return this.listener.vr(n,e)}return y(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const t={};t.database=ln(this.N),this.wr(t)}br(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof ve)n={update:fn(t,e.key,e.value)};else if(e instanceof Te)n={delete:cn(t,e.key)};else if(e instanceof we)n={update:fn(t,e.key,e.data),updateMask:kn(e.fieldMask)};else{if(!(e instanceof Ee))return g();n={verify:cn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof te)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ee)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof re)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof se)return{fieldPath:e.field.canonicalString(),increment:n.C};throw g()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:rn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.precondition)),n}(this.N,t)))};this.wr(e)}}class Fr extends class{}{constructor(t,e,n){super(),this.credentials=t,this.nr=e,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Li(t,e,n,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===w.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new _(w.UNKNOWN,t.toString())}))}Ki(t,e,n){return this.Cr(),this.credentials.getToken().then((r=>this.nr.Ki(t,e,n,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===w.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new _(w.UNKNOWN,t.toString())}))}terminate(){this.Dr=!0}}class Vr{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve()))))}Lr(t){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Fr("Offline")))}set(t){this.Br(),this.Nr=0,"Online"===t&&(this.$r=!1),this.Fr(t)}Fr(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Mr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(f(e),this.$r=!1):d("OnlineStateTracker",e)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class jr{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei((t=>{n.enqueueAndForget((async()=>{Jr(this)&&(d("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=v(t);e.Kr.add(4),await qr(e),e.Wr.set("Unknown"),e.Kr.delete(4),await Br(e)}(this))}))})),this.Wr=new Vr(n,r)}}async function Br(t){if(Jr(t))for(const e of t.jr)await e(!0)}async function qr(t){for(const e of t.jr)await e(!1)}function zr(t,e){const n=v(t);n.qr.has(e.targetId)||(n.qr.set(e.targetId,e),Wr(n)?Gr(n):li(n).cr()&&Hr(n,e))}function Kr(t,e){const n=v(t),r=li(n);n.qr.delete(e),r.cr()&&$r(n,e),0===n.qr.size&&(r.cr()?r.lr():Jr(n)&&n.Wr.set("Unknown"))}function Hr(t,e){t.Gr.Y(e.targetId),li(t).Ir(e)}function $r(t,e){t.Gr.Y(e),li(t).Ar(e)}function Gr(t){t.Gr=new Je({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.qr.get(e)||null}),li(t).start(),t.Wr.Or()}function Wr(t){return Jr(t)&&!li(t).ar()&&t.qr.size>0}function Jr(t){return 0===v(t).Kr.size}function Qr(t){t.Gr=void 0}async function Xr(t){t.qr.forEach(((e,n)=>{Hr(t,e)}))}async function Yr(t,e){Qr(t),Wr(t)?(t.Wr.Lr(e),Gr(t)):t.Wr.set("Unknown")}async function Zr(t,e,n){if(t.Wr.set("Online"),e instanceof Ge&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.qr.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.qr.delete(r),t.Gr.removeTarget(r))}(t,e)}catch(n){d("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ti(t,n)}else if(e instanceof He?t.Gr.rt(e):e instanceof $e?t.Gr.ft(e):t.Gr.ct(e),!n.isEqual(P.min()))try{const e=await lr(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Gr._t(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.qr.get(r);i&&t.qr.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.qr.get(e);if(!n)return;t.qr.set(e,n.withResumeToken(q.EMPTY_BYTE_STRING,n.snapshotVersion)),$r(t,e);const r=new Qn(n.target,e,1,n.sequenceNumber);Hr(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){d("RemoteStore","Failed to raise snapshot:",e),await ti(t,e)}}async function ti(t,e,n){if(!Gn(e))throw e;t.Kr.add(1),await qr(t),t.Wr.set("Offline"),n||(n=()=>lr(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{d("RemoteStore","Retrying IndexedDB access"),await n(),t.Kr.delete(1),await Br(t)}))}function ei(t,e){return e().catch((n=>ti(t,n,e)))}async function ni(t){const e=v(t),n=di(e);let r=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;ri(e);)try{const t=await dr(e.localStore,r);if(null===t){0===e.Ur.length&&n.lr();break}r=t.batchId,ii(e,t)}catch(t){await ti(e,t)}si(e)&&oi(e)}function ri(t){return Jr(t)&&t.Ur.length<10}function ii(t,e){t.Ur.push(e);const n=di(t);n.cr()&&n.Pr&&n.br(e.mutations)}function si(t){return Jr(t)&&!di(t).ar()&&t.Ur.length>0}function oi(t){di(t).start()}async function ai(t){di(t).Sr()}async function ci(t){const e=di(t);for(const n of t.Ur)e.br(n.mutations)}async function ui(t,e,n){const r=t.Ur.shift(),i=Jn.from(r,e,n);await ei(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ni(t)}async function hi(t,e){e&&di(t).Pr&&await async function(t,e){if(function(t){switch(t){case w.OK:return g();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return g()}}(n=e.code)&&n!==w.ABORTED){const n=t.Ur.shift();di(t).hr(),await ei(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await ni(t)}var n}(t,e),si(t)&&oi(t)}function li(t){return t.zr||(t.zr=function(t,e,n){const r=v(t);return r.Cr(),new Mr(e,r.nr,r.credentials,r.N,n)}(t.datastore,t.asyncQueue,{Si:Xr.bind(null,t),Ci:Yr.bind(null,t),Tr:Zr.bind(null,t)}),t.jr.push((async e=>{e?(t.zr.hr(),Wr(t)?Gr(t):t.Wr.set("Unknown")):(await t.zr.stop(),Qr(t))}))),t.zr}function di(t){return t.Hr||(t.Hr=function(t,e,n){const r=v(t);return r.Cr(),new Ur(e,r.nr,r.credentials,r.N,n)}(t.datastore,t.asyncQueue,{Si:ai.bind(null,t),Ci:hi.bind(null,t),Vr:ci.bind(null,t),vr:ui.bind(null,t)}),t.jr.push((async e=>{e?(t.Hr.hr(),await ni(t)):(await t.Hr.stop(),t.Ur.length>0&&(d("RemoteStore",`Stopping write stream with ${t.Ur.length} pending writes`),t.Ur=[]))}))),t.Hr}class fi{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new b,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new fi(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pi(t,e){if(f("AsyncQueue",`${e}: ${t}`),Gn(t))return new _(w.UNAVAILABLE,`${e}: ${t}`);throw t}class mi{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Y.comparator(e.key,n.key):(t,e)=>Y.comparator(t.key,e.key),this.keyedMap=Ue(),this.sortedSet=new Ce(this.comparator)}static emptySet(t){return new mi(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof mi))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new mi;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class gi{constructor(){this.Jr=new Ce(Y.comparator)}track(t){const e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):g():this.Jr=this.Jr.insert(e,t)}Yr(){const t=[];return this.Jr.inorderTraversal(((e,n)=>{t.push(n)})),t}}class yi{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new yi(t,e,mi.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bt(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class vi{constructor(){this.Xr=void 0,this.listeners=[]}}class wi{constructor(){this.queries=new ir((t=>qt(t)),Bt),this.onlineState="Unknown",this.Zr=new Set}}function _i(t,e){const n=v(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.no(t)&&(r=!0);i.Xr=t}}r&&Ii(n)}function bi(t,e,n){const r=v(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Ii(t){t.Zr.forEach((t=>{t.next()}))}class Ti{constructor(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new yi(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.io?this.oo(t)&&(this.so.next(t),e=!0):this.ao(t,this.onlineState)&&(this.co(t),e=!0),this.ro=t,e}onError(t){this.so.error(t)}eo(t){this.onlineState=t;let e=!1;return this.ro&&!this.io&&this.ao(this.ro,t)&&(this.co(this.ro),e=!0),e}ao(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.uo&&n||t.docs.isEmpty()&&"Offline"!==e)}oo(t){if(t.docChanges.length>0)return!0;const e=this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}co(t){t=yi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)}}class Ei{constructor(t){this.key=t}}class Si{constructor(t){this.key=t}}class ki{constructor(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=je(),this.mutatedKeys=je(),this.po=Ht(t),this.Eo=new mi(this.po)}get To(){return this._o}Io(t,e){const n=e?e.Ao:new gi,r=e?e.Eo:this.Eo;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Ut(this.query)&&r.size===this.query.limit?r.last():null,c=Ft(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),h=Kt(this.query,e)?e:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.Ro(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.po(h,a)>0||c&&this.po(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),Ut(this.query)||Ft(this.query))for(;s.size>this.query.limit;){const t=Ut(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;const i=t.Ao.Yr();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||this.po(t.doc,e.doc))),this.Po(n);const s=e?this.bo():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new yi(this.query,t.Eo,r,i,t.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new gi,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations}Po(t){t&&(t.addedDocuments.forEach((t=>this._o=this._o.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this._o=this._o.delete(t))),this.current=t.current)}bo(){if(!this.current)return[];const t=this.yo;this.yo=je(),this.Eo.forEach((t=>{this.Vo(t.key)&&(this.yo=this.yo.add(t.key))}));const e=[];return t.forEach((t=>{this.yo.has(t)||e.push(new Si(t))})),this.yo.forEach((n=>{t.has(n)||e.push(new Ei(n))})),e}So(t){this._o=t.Gn,this.yo=je();const e=this.Io(t.documents);return this.applyChanges(e,!0)}Do(){return yi.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Ai{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Ni{constructor(t){this.key=t,this.Co=!1}}class Ci{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new ir((t=>qt(t)),Bt),this.ko=new Map,this.$o=new Set,this.Oo=new Ce(Y.comparator),this.Fo=new Map,this.Mo=new gr,this.Lo={},this.Bo=new Map,this.Uo=nr.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}async function Ri(t,e){const n=function(t){const e=v(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Di.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$i.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Li.bind(null,e),e.No.Tr=_i.bind(null,e.eventManager),e.No.jo=bi.bind(null,e.eventManager),e}(t);let r,i;const s=n.xo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const t=await function(t,e){const n=v(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.ze.getTargetData(t,e).next((i=>i?(r=i,$n.resolve(r)):n.ze.allocateTargetId(t).next((i=>(r=new Qn(e,i,0,t.currentSequenceNumber),n.ze.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.Un.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}(n.localStore,jt(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r){t.Ko=(e,n,r)=>async function(t,e,n,r){let i=e.view.Io(n);i.Ln&&(i=await pr(t.localStore,e.query,!1).then((({documents:t})=>e.view.Io(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return Bi(t,e.targetId,o.vo),o.snapshot}(t,e,n,r);const i=await pr(t.localStore,e,!0),s=new ki(e,i.Gn),o=s.Io(i.documents),a=Ke.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);Bi(t,n,c.vo);const u=new Ai(e,n,s);return t.xo.set(e,u),t.ko.has(n)?t.ko.get(n).push(e):t.ko.set(n,[e]),c.snapshot}(n,e,r,"current"===s),n.isPrimaryClient&&zr(n.remoteStore,t)}return i}async function Oi(t,e){const n=v(t),r=n.xo.get(e),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter((t=>!Bt(t,e)))),void n.xo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await fr(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Kr(n.remoteStore,r.targetId),Vi(n,r.targetId)})).catch(rr)):(Vi(n,r.targetId),await fr(n.localStore,r.targetId,!0))}async function Di(t,e){const n=v(t);try{const t=await function(t,e){const n=v(t),r=e.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];e.targetChanges.forEach(((e,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(t,e.removedDocuments,s).next((()=>n.ze.addMatchingKeys(t,e.addedDocuments,s))));const c=e.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,u),function(t,e,n){return y(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,e)&&o.push(n.ze.updateTargetData(t,u))}}));let a=xe();if(e.documentUpdates.forEach(((r,i)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n,r,i){let s=je();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=xe();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(P.min())?(e.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),s=s.insert(n,o)):d("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}(t,s,e.documentUpdates,r,void 0).next((t=>{a=t}))),!r.isEqual(P.min())){const e=n.ze.getLastRemoteSnapshotVersion(t).next((e=>n.ze.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return $n.waitFor(o).next((()=>s.apply(t))).next((()=>n.Qn.vn(t,a))).next((()=>a))})).then((t=>(n.Un=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Fo.get(e);r&&(y(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?y(r.Co):t.removedDocuments.size>0&&(y(r.Co),r.Co=!1))})),await Ki(n,t,e)}catch(t){await rr(t)}}function Pi(t,e,n){const r=v(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.xo.forEach(((n,r)=>{const i=r.view.eo(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=v(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.eo(e)&&(r=!0)})),r&&Ii(n)}(r.eventManager,e),t.length&&r.No.Tr(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Li(t,e,n){const r=v(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fo.get(e),s=i&&i.key;if(s){let t=new Ce(Y.comparator);t=t.insert(s,pt.newNoDocument(s,P.min()));const n=je().add(s),i=new ze(P.min(),new Map,new De(R),t,n);await Di(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(e),zi(r)}else await fr(r.localStore,e,!1).then((()=>Vi(r,e,n))).catch(rr)}async function xi(t,e){const n=v(t),r=e.batch.batchId;try{const t=await function(t,e){const n=v(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=$n.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);y(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),o.next((()=>t.In.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.bn(t,r)))}))}(n.localStore,e);Fi(n,r,null),Ui(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ki(n,t)}catch(t){await rr(t)}}async function Mi(t,e,n){const r=v(t);try{const t=await function(t,e){const n=v(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.In.lookupMutationBatch(t,e).next((e=>(y(null!==e),r=e.keys(),n.In.removeMutationBatch(t,e)))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.bn(t,r)))}))}(r.localStore,e);Fi(r,e,n),Ui(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ki(r,t)}catch(n){await rr(n)}}function Ui(t,e){(t.Bo.get(e)||[]).forEach((t=>{t.resolve()})),t.Bo.delete(e)}function Fi(t,e,n){const r=v(t);let i=r.Lo[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function Vi(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ko.get(e))t.xo.delete(r),n&&t.No.jo(r,n);t.ko.delete(e),t.isPrimaryClient&&t.Mo.cs(e).forEach((e=>{t.Mo.containsKey(e)||ji(t,e)}))}function ji(t,e){t.$o.delete(e.path.canonicalString());const n=t.Oo.get(e);null!==n&&(Kr(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.Fo.delete(n),zi(t))}function Bi(t,e,n){for(const r of n)r instanceof Ei?(t.Mo.addReference(r.key,e),qi(t,r)):r instanceof Si?(d("SyncEngine","Document no longer in limbo: "+r.key),t.Mo.removeReference(r.key,e),t.Mo.containsKey(r.key)||ji(t,r.key)):g()}function qi(t,e){const n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.$o.has(r)||(d("SyncEngine","New document in limbo: "+n),t.$o.add(r),zi(t))}function zi(t){for(;t.$o.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){const e=t.$o.values().next().value;t.$o.delete(e);const n=new Y(F.fromString(e)),r=t.Uo.next();t.Fo.set(r,new Ni(n)),t.Oo=t.Oo.insert(n,r),zr(t.remoteStore,new Qn(jt(Mt(n.path)),r,2,A.T))}}async function Ki(t,e,n){const r=v(t),i=[],s=[],o=[];r.xo.isEmpty()||(r.xo.forEach(((t,a)=>{o.push(r.Ko(a,e,n).then((t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=ar.kn(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.No.Tr(i),await async function(t,e){const n=v(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>$n.forEach(e,(e=>$n.forEach(e.Nn,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>$n.forEach(e.xn,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!Gn(t))throw t;d("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Un.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Un=n.Un.insert(e,i)}}}(r.localStore,s))}async function Hi(t,e){const n=v(t);if(!n.currentUser.isEqual(e)){d("SyncEngine","User change. New user:",e.toKey());const t=await hr(n.localStore,e);n.currentUser=e,function(t){t.Bo.forEach((t=>{t.forEach((t=>{t.reject(new _(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ki(n,t.Wn)}}function $i(t,e){const n=v(t),r=n.Fo.get(e);if(r&&r.Co)return je().add(r.key);{let t=je();const r=n.ko.get(e);if(!r)return t;for(const e of r){const r=n.xo.get(e);t=t.unionWith(r.view.To)}return t}}function Gi(t){const e=v(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xi.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mi.bind(null,e),e}class Wi{constructor(){this.synchronizeTabs=!1}async initialize(t){this.N=Pr(t.databaseInfo.databaseId),this.sharedClientState=this.Wo(t),this.persistence=this.Go(t),await this.persistence.start(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t)}zo(t){return null}Ho(t){return function(t,e,n,r){return new ur(t,e,n,r)}(this.persistence,new cr,t.initialUser,this.N)}Go(t){return new Ir(Er.Ns,this.N)}Wo(t){return new kr}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ji{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Pi(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hi.bind(null,this.syncEngine),await async function(t,e){const n=v(t);e?(n.Kr.delete(2),await Br(n)):e||(n.Kr.add(2),await qr(n),n.Wr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new wi}createDatastore(t){const e=Pr(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new Or(r));var r;return function(t,e,n){return new Fr(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>Pi(this.syncEngine,t,0),s=Nr.Pt()?new Nr:new Ar,new jr(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Ci(t,e,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=v(t);d("RemoteStore","RemoteStore shutting down."),e.Kr.add(5),await qr(e),e.Qr.shutdown(),e.Wr.set("Unknown")}(this.remoteStore)}}class Qi{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Yo(this.observer.next,t)}error(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Xo(){this.muted=!0}Yo(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Xi{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=c.UNAUTHENTICATED,this.clientId=C.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,(async t=>{d("FirestoreClient","Received user=",t.uid),await this.credentialListener(t),this.user=t}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new b;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),t.resolve()}catch(e){const n=pi(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Yi(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(d("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await hr(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new Wi)),t.offlineComponents}(t);d("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>async function(t,e){const n=v(t);n.asyncQueue.verifyOperationInProgress(),d("RemoteStore","RemoteStore received new credentials");const r=Jr(n);n.Kr.add(3),await qr(n),r&&n.Wr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Kr.delete(3),await Br(n)}(e.remoteStore,t))),t.onlineComponents=e}async function Zi(t){return t.onlineComponents||(d("FirestoreClient","Using default OnlineComponentProvider"),await Yi(t,new Ji)),t.onlineComponents}async function ts(t){const e=await Zi(t),n=e.eventManager;return n.onListen=Ri.bind(null,e.syncEngine),n.onUnlisten=Oi.bind(null,e.syncEngine),n}function es(t,e,n={}){const r=new b;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new Qi({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=v(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Ti(n,s,{includeMetadataChanges:!0,uo:!0});return async function(t,e){const n=v(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new vi),i)try{s.Xr=await n.onListen(r)}catch(t){const n=pi(t,`Initialization of query '${zt(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.eo(n.onlineState),s.Xr&&e.no(s.Xr)&&Ii(n)}(t,o)}(await ts(t),t.asyncQueue,e,n,r))),r.promise}class ns{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class rs{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof rs&&t.projectId===this.projectId&&t.database===this.database}}const is=new Map;function ss(t,e,n){if(!n)throw new _(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function os(t){if(!Y.isDocumentKey(t))throw new _(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function as(t){if(Y.isDocumentKey(t))throw new _(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cs(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){if(t.constructor){const e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":g()}function us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cs(t);throw new _(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class hs{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new _(w.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ls{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hs({}),this._settingsFrozen=!1,t instanceof rs?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rs(t.options.projectId)}(t))}get app(){if(!this._app)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hs(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new T;switch(t.type){case"gapi":const e=t.client;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new k(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new _(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=is.get(t);e&&(d("ComponentProvider","Removing Datastore"),is.delete(t),e.terminate())}(this),Promise.resolve()}}class ds{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ds(this.firestore,t,this._key)}}class fs{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new fs(this.firestore,t,this._query)}}class ps extends fs{constructor(t,e,n){super(t,e,Mt(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ds(this.firestore,null,new Y(t))}withConverter(t){return new ps(this.firestore,t,this._path)}}function ms(t,e,...n){if(t=(0,o.Ku)(t),ss("collection","path",e),t instanceof ls){const r=F.fromString(e,...n);return as(r),new ps(t,null,r)}{if(!(t instanceof ds||t instanceof ps))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=F.fromString(t.path,...n).child(F.fromString(e));return as(r),new ps(t.firestore,null,r)}}function gs(t,e,...n){if(t=(0,o.Ku)(t),1===arguments.length&&(e=C.I()),ss("doc","path",e),t instanceof ls){const r=F.fromString(e,...n);return os(r),new ds(t,null,new Y(r))}{if(!(t instanceof ds||t instanceof ps))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(F.fromString(e,...n));return os(r),new ds(t.firestore,t instanceof ps?t.converter:null,new Y(r))}}class ys{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Lr(this,"async_queue_retry"),this.Ea=()=>{const t=Dr();t&&d("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const t=Dr();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ta(),this.Ia(t)}enterRestrictedMode(t){if(!this.wa){this.wa=!0,this.ya=t||!1;const e=Dr();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ea)}}enqueue(t){if(this.Ta(),this.wa)return new Promise((()=>{}));const e=new b;return this.Ia((()=>this.wa&&this.ya?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.da.push(t),this.Aa())))}async Aa(){if(0!==this.da.length){try{await this.da[0](),this.da.shift(),this.rr.reset()}catch(t){if(!Gn(t))throw t;d("AsyncQueue","Operation failed with retryable error: "+t)}this.da.length>0&&this.rr.Xi((()=>this.Aa()))}}Ia(t){const e=this.fa.then((()=>(this.ga=!0,t().catch((t=>{throw this.ma=t,this.ga=!1,f("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.ga=!1,t))))));return this.fa=e,e}enqueueAfterDelay(t,e,n){this.Ta(),this.pa.indexOf(t)>-1&&(e=0);const r=fi.createAndSchedule(this,t,e,n,(t=>this.Ra(t)));return this._a.push(r),r}Ta(){this.ma&&g()}verifyOperationInProgress(){}async Pa(){let t;do{t=this.fa,await t}while(t!==this.fa)}ba(t){for(const e of this._a)if(e.timerId===t)return!0;return!1}va(t){return this.Pa().then((()=>{this._a.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this._a)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Pa()}))}Va(t){this.pa.push(t)}Ra(t){const e=this._a.indexOf(t);this._a.splice(e,1)}}class vs extends ls{constructor(t,e){super(t,e),this.type="firestore",this._queue=new ys,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bs(this),this._firestoreClient.terminate()}}function ws(t=(0,r.Sx)()){return(0,r.j6)(t,"firestore").getImmediate()}function _s(t){return t._firestoreClient||bs(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bs(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new ns(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Xi(t._credentials,t._queue,r)}class Is{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new _(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new j(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ts{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ts(q.fromBase64String(t))}catch(t){throw new _(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ts(q.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Es{constructor(t){this._methodName=t}}class Ss{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new _(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return R(this._lat,t._lat)||R(this._long,t._long)}}const ks=/^__.*__$/;class As{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new we(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ns(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}class Cs{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(t){return new Cs(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ca({path:n,xa:!1});return r.ka(t),r}$a(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(t){return this.Ca({path:void 0,xa:!0})}Fa(t){return Vs(t,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Sa(){if(this.path)for(let t=0;t<this.path.length;t++)this.ka(this.path.get(t))}ka(t){if(0===t.length)throw this.Fa("Document fields must not be empty");if(Ns(this.Da)&&ks.test(t))throw this.Fa('Document fields cannot begin and end with "__"')}}class Rs{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||Pr(t)}Ba(t,e,n,r=!1){return new Cs({Da:t,methodName:e,La:n,path:j.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}class Os extends Es{_toFieldTransform(t){if(2!==t.Da)throw 1===t.Da?t.Fa(`${this._methodName}() can only appear at the top level of your update data`):t.Fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Os}}class Ds extends Es{_toFieldTransform(t){return new ce(t.path,new te)}isEqual(t){return t instanceof Ds}}function Ps(t,e){if(Ls(t=(0,o.Ku)(t)))return xs("Unsupported field value:",e,t),function(t,e){const n={};return M(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):x(t,((t,r)=>{const i=Ps(r,e.Na(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}(t,e);if(t instanceof Es)return function(t,e){if(!Ns(e.Da))throw e.Fa(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Fa(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=Ps(i,e.Oa(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,o.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Jt(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=D.fromDate(t);return{timestampValue:en(e.N,n)}}if(t instanceof D){const n=new D(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:en(e.N,n)}}if(t instanceof Ss)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ts)return{bytesValue:nn(e.N,t._byteString)};if(t instanceof ds){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:on(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Fa(`Unsupported field value: ${cs(t)}`)}(t,e)}function Ls(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof D||t instanceof Ss||t instanceof Ts||t instanceof ds||t instanceof Es)}function xs(t,e,n){if(!Ls(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=cs(n);throw"an object"===r?e.Fa(t+" a custom object"):e.Fa(t+" "+r)}}function Ms(t,e,n){if((e=(0,o.Ku)(e))instanceof Is)return e._internalPath;if("string"==typeof e)return Fs(t,e);throw Vs("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const Us=new RegExp("[~\\*/\\[\\]]");function Fs(t,e,n){if(e.search(Us)>=0)throw Vs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Is(...e.split("."))._internalPath}catch(r){throw Vs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vs(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new _(w.INVALID_ARGUMENT,a+t+c)}function js(t,e){return t.some((t=>t.isEqual(e)))}class Bs{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ds(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new qs(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(zs("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class qs extends Bs{data(){return super.data()}}function zs(t,e){return"string"==typeof e?Fs(t,e):e instanceof Is?e._internalPath:e._delegate._internalPath}class Ks{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Hs extends Bs{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new $s(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(zs("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class $s extends Hs{data(t={}){return super.data(t)}}class Gs{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ks(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new $s(this._firestore,this._userDataWriter,n.key,n,new Ks(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new $s(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Ks(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new $s(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ks(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Ws(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ws(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}class Js{convertValue(t,e="none"){switch(Z(t)){case 0:return null;case 1:return t.booleanValue;case 2:return H(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes($(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw g()}}convertObject(t,e){const n={};return x(t.fields,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Ss(H(t.latitude),H(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=W(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(J(t));default:return null}}convertTimestamp(t){const e=K(t);return new D(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=F.fromString(t);y(An(n));const r=new rs(n.get(1),n.get(3)),i=new Y(n.popFirst(5));return r.isEqual(e)||f(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class Qs extends Js{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ts(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ds(this.firestore,null,e)}}function Xs(t){t=us(t,fs);const e=us(t.firestore,vs),n=_s(e),r=new Qs(e);return function(t){if(Ft(t)&&0===t.explicitOrderBy.length)throw new _(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),es(n,t._query).then((n=>new Gs(e,r,t,n)))}function Ys(t,e,n,...r){t=us(t,ds);const i=us(t.firestore,vs),s=function(t){const e=t._freezeSettings(),n=Pr(t._databaseId);return new Rs(t._databaseId,!!e.ignoreUndefinedProperties,n)}(i);let a;return a="string"==typeof(e=(0,o.Ku)(e))||e instanceof Is?function(t,e,n,r,i,s){const a=t.Ba(1,e,n),c=[Ms(e,r,n)],u=[i];if(s.length%2!=0)throw new _(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)c.push(Ms(e,s[t])),u.push(s[t+1]);const h=[],l=dt.empty();for(let t=c.length-1;t>=0;--t)if(!js(h,c[t])){const e=c[t];let n=u[t];n=(0,o.Ku)(n);const r=a.$a(e);if(n instanceof Os)h.push(e);else{const t=Ps(n,r);null!=t&&(h.push(e),l.set(e,t))}}const d=new B(h);return new As(l,d,a.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function(t,e,n,r){const i=t.Ba(1,e,n);xs("Data must be an object, but it was:",i,r);const s=[],a=dt.empty();x(r,((t,r)=>{const c=Fs(e,t,n);r=(0,o.Ku)(r);const u=i.$a(c);if(r instanceof Os)s.push(c);else{const t=Ps(r,u);null!=t&&(s.push(c),a.set(c,t))}}));const c=new B(s);return new As(a,c,i.fieldTransforms)}(s,"updateDoc",t._key,e),to(i,[a.toMutation(t._key,he.exists(!0))])}function Zs(t){return to(us(t.firestore,vs),[new Te(t._key,he.none())])}function to(t,e){return function(t,e){const n=new b;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=Gi(t);try{const t=await function(t,e){const n=v(t),r=D.now(),i=e.reduce(((t,e)=>t.add(e.key)),je());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Qn.bn(t,i).next((i=>{s=i;const o=[];for(const t of e){const e=me(t,s.get(t.key));null!=e&&o.push(new we(t.key,e,ft(e.value.mapValue),he.exists(!0)))}return n.In.addMutationBatch(t,r,o,e)})))).then((t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Lo[t.currentUser.toKey()];r||(r=new Ce(R)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,t.batchId,n),await Ki(r,t.changes),await ni(r.remoteStore)}catch(t){const e=pi(t,"Failed to persist write");n.reject(e)}}(await function(t){return Zi(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(_s(t),e)}function eo(){return new Ds("serverTimestamp")}var no;no=r.MF,u=no,(0,r.om)(new i.uA("firestore",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=new vs(n,new E(t.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),r._setSettings(e),r}),"PUBLIC")),(0,r.KO)("@firebase/firestore","3.0.1",void 0)},944:(t,e,n)=>{n.d(e,{Wp:()=>r.Wp});var r=n(468);(0,r.KO)("firebase","9.0.1","app")},982:(t,e,n)=>{n.d(e,{GG:()=>r.GG,H9:()=>r.H9,O5:()=>r.O5,aU:()=>r.aU,kd:()=>r.kd,mZ:()=>r.mZ,rJ:()=>r.rJ});var r=n(790)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r=n(205),i=n(982),s=n(188),o=n(226);window.onload=s.u,async function(){const t=await async function(){const t=await(0,i.GG)((0,i.rJ)(r.db,"documents")),e=[];return t.forEach((t=>{e.push({id:t.id,...t.data()})})),e}(),e=document.getElementById("documents-list");t.forEach((t=>{const n=encodeURIComponent(JSON.stringify(t)),s=document.createElement("div");s.className="document-card mb-3",s.innerHTML=`\n            <div class="row">\n                <div class="col-6">\n                    <h3>${t.documentName}</h3>\n                </div>\n                <div class="col-2">\n                    <img class="view-documents-edit-icon" src="images/edit_icon.png" width="10%" style="cursor: pointer;">\n                </div>\n                <div class="col-2">\n                    <img class="view-documents-share-icon" data-url="${t.fileUrl}" data-bs-toggle="modal" data-bs-target="#view-documents-page-share-modal" src="images/share_icon.png" width="10%" style="cursor: pointer;">\n                </div>\n                <div class="col-2">\n                    <img class="view-documents-delete-icon" src="images/delete_icon.png" width="10%" style="cursor: pointer;">\n                </div>\n            </div>\n            <p>Type: ${t.documentType}</p>\n            <img src="${t.fileUrl}" alt="${t.documentName}" width="200" />\n            <p>Uploaded At: ${t.uploadedAt?.toDate().toLocaleString()||"Unknown"}</p>\n            <p>Updated At: ${t.updatedAt?.toDate().toLocaleString()||" - "}</p>\n            <hr/>\n        `;const a=s.querySelector(".view-documents-edit-icon"),c=s.querySelector(".view-documents-delete-icon"),u=s.querySelector(".view-documents-share-icon");a.addEventListener("click",(()=>{!function(t){const e=JSON.parse(decodeURIComponent(t));localStorage.setItem("documentToBeEdited",JSON.stringify(e)),window.location.href="edit_document_page.html"}(n)})),c.addEventListener("click",(()=>{!async function(t){if(confirm(`Are you sure you want to permanently delete "${t.documentName}"?`))try{if(t.fileUrl){const e=function(t){const e=t.replace("https://firebasestorage.googleapis.com/v0/b/upload-25f01.appspot.com/o/","");return decodeURIComponent(e.split("?")[0])}(t.fileUrl),n=(0,o.KR)(r.IG,e);await(0,o.XR)(n),console.log("File deleted from Storage!")}const e=(0,i.H9)(r.db,"documents",t.id);await(0,i.kd)(e),console.log("Document metadata deleted from Firestore!"),alert("Document deleted successfully!"),window.location.reload()}catch(t){console.error("Error deleting document:",t),alert("Failed to delete document!")}}(t)})),u.addEventListener("click",(()=>{const t=u.getAttribute("data-url");/Mobi|Android/i.test(navigator.userAgent),document.getElementById("view-documents-page-whatsapp-share-button").href=`https://wa.me/?text=${encodeURIComponent(t)}`,document.getElementById("view-documents-page-email-share-button").href=`mailto:?subject=Shared Document&body=${encodeURIComponent(t)}`,document.getElementById("view-documents-page-copy-link-button").onclick=()=>{navigator.clipboard.writeText(t).then((()=>{alert("Copied to clipboard!")}))}})),e.appendChild(s)}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Li9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vc2VjdXJlLWRvY3VtZW50LXVwbG9hZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXV0aC9kaXN0L2VzbTIwMTcvaW5kZXgtOWZmMGZhOWMuanMiLCJ3ZWJwYWNrOi8vc2VjdXJlLWRvY3VtZW50LXVwbG9hZC8uL3NyYy9lZGl0X2RvY3VtZW50X3BhZ2UuanMiLCJ3ZWJwYWNrOi8vc2VjdXJlLWRvY3VtZW50LXVwbG9hZC8uL3NyYy9zZXR1cC5qcyIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9zdG9yYWdlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NlY3VyZS1kb2N1bWVudC11cGxvYWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NlY3VyZS1kb2N1bWVudC11cGxvYWQvLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2Lm1qcyIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9maXJlc3RvcmUvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NlY3VyZS1kb2N1bWVudC11cGxvYWQvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NlY3VyZS1kb2N1bWVudC11cGxvYWQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VjdXJlLWRvY3VtZW50LXVwbG9hZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc2VjdXJlLWRvY3VtZW50LXVwbG9hZC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3NlY3VyZS1kb2N1bWVudC11cGxvYWQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vc3JjL2RlbGV0ZV9kb2N1bWVudC5qcyIsIndlYnBhY2s6Ly9zZWN1cmUtZG9jdW1lbnQtdXBsb2FkLy4vc3JjL3ZpZXdfZG9jdW1lbnRzX3BhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XG5cbnZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgaywgZ29vZyA9IGdvb2cgfHwge30sIGwgPSBjb21tb25qc0dsb2JhbCB8fCBzZWxmO1xyXG5mdW5jdGlvbiBhYSgpIHsgfVxyXG5mdW5jdGlvbiBiYShhKSB7IHZhciBiID0gdHlwZW9mIGE7IGIgPSBcIm9iamVjdFwiICE9IGIgPyBiIDogYSA/IEFycmF5LmlzQXJyYXkoYSkgPyBcImFycmF5XCIgOiBiIDogXCJudWxsXCI7IHJldHVybiBcImFycmF5XCIgPT0gYiB8fCBcIm9iamVjdFwiID09IGIgJiYgXCJudW1iZXJcIiA9PSB0eXBlb2YgYS5sZW5ndGg7IH1cclxuZnVuY3Rpb24gcChhKSB7IHZhciBiID0gdHlwZW9mIGE7IHJldHVybiBcIm9iamVjdFwiID09IGIgJiYgbnVsbCAhPSBhIHx8IFwiZnVuY3Rpb25cIiA9PSBiOyB9XHJcbmZ1bmN0aW9uIGRhKGEpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLCBlYSkgJiYgYVtlYV0gfHwgKGFbZWFdID0gKytmYSk7IH1cclxudmFyIGVhID0gXCJjbG9zdXJlX3VpZF9cIiArICgxRTkgKiBNYXRoLnJhbmRvbSgpID4+PiAwKSwgZmEgPSAwO1xyXG5mdW5jdGlvbiBoYShhLCBiLCBjKSB7IHJldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLCBhcmd1bWVudHMpOyB9XHJcbmZ1bmN0aW9uIGlhKGEsIGIsIGMpIHsgaWYgKCFhKVxyXG4gICAgdGhyb3cgRXJyb3IoKTsgaWYgKDIgPCBhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICB2YXIgZCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7IEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsIGQpOyByZXR1cm4gYS5hcHBseShiLCBlKTsgfTtcclxufSByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gYS5hcHBseShiLCBhcmd1bWVudHMpOyB9OyB9XHJcbmZ1bmN0aW9uIHEoYSwgYiwgYykgeyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCAmJiAtMSAhPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKSA/IHEgPSBoYSA6IHEgPSBpYTsgcmV0dXJuIHEuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfVxyXG5mdW5jdGlvbiBqYShhLCBiKSB7IHZhciBjID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIGQgPSBjLnNsaWNlKCk7IGQucHVzaC5hcHBseShkLCBhcmd1bWVudHMpOyByZXR1cm4gYS5hcHBseSh0aGlzLCBkKTsgfTsgfVxyXG5mdW5jdGlvbiB0KGEsIGIpIHsgZnVuY3Rpb24gYygpIHsgfSBjLnByb3RvdHlwZSA9IGIucHJvdG90eXBlOyBhLlogPSBiLnByb3RvdHlwZTsgYS5wcm90b3R5cGUgPSBuZXcgYzsgYS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBhOyBhLlZiID0gZnVuY3Rpb24gKGQsIGUsIGYpIHsgZm9yICh2YXIgaCA9IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAyKSwgbiA9IDI7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspXHJcbiAgICBoW24gLSAyXSA9IGFyZ3VtZW50c1tuXTsgcmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsIGgpOyB9OyB9XHJcbmZ1bmN0aW9uIHYoKSB7IHRoaXMucyA9IHRoaXMuczsgdGhpcy5vID0gdGhpcy5vOyB9XHJcbnZhciBrYSA9IDAsIGxhID0ge307XHJcbnYucHJvdG90eXBlLnMgPSAhMTtcclxudi5wcm90b3R5cGUubmEgPSBmdW5jdGlvbiAoKSB7IGlmICghdGhpcy5zICYmICh0aGlzLnMgPSAhMCwgdGhpcy5NKCksIDAgIT0ga2EpKSB7XHJcbiAgICB2YXIgYSA9IGRhKHRoaXMpO1xyXG4gICAgZGVsZXRlIGxhW2FdO1xyXG59IH07XHJcbnYucHJvdG90eXBlLk0gPSBmdW5jdGlvbiAoKSB7IGlmICh0aGlzLm8pXHJcbiAgICBmb3IgKDsgdGhpcy5vLmxlbmd0aDspXHJcbiAgICAgICAgdGhpcy5vLnNoaWZ0KCkoKTsgfTtcclxudmFyIG1hID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPyBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLCBiLCB2b2lkIDApOyB9IDogZnVuY3Rpb24gKGEsIGIpIHsgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBhKVxyXG4gICAgcmV0dXJuIFwic3RyaW5nXCIgIT09IHR5cGVvZiBiIHx8IDEgIT0gYi5sZW5ndGggPyAtMSA6IGEuaW5kZXhPZihiLCAwKTsgZm9yICh2YXIgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKVxyXG4gICAgaWYgKGMgaW4gYSAmJiBhW2NdID09PSBiKVxyXG4gICAgICAgIHJldHVybiBjOyByZXR1cm4gLTE7IH0sIG5hID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPyBmdW5jdGlvbiAoYSwgYiwgYykgeyBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsIGIsIGMpOyB9IDogZnVuY3Rpb24gKGEsIGIsIGMpIHsgdmFyIGQgPSBhLmxlbmd0aCwgZSA9IFwic3RyaW5nXCIgPT09IHR5cGVvZiBhID8gYS5zcGxpdChcIlwiKSA6IGE7IGZvciAodmFyIGYgPSAwOyBmIDwgZDsgZisrKVxyXG4gICAgZiBpbiBlICYmIGIuY2FsbChjLCBlW2ZdLCBmLCBhKTsgfTtcclxuZnVuY3Rpb24gb2EoYSkgeyBhOiB7XHJcbiAgICB2YXIgYiA9IHBhO1xyXG4gICAgdmFyIGMgPSBhLmxlbmd0aCwgZCA9IFwic3RyaW5nXCIgPT09IHR5cGVvZiBhID8gYS5zcGxpdChcIlwiKSA6IGE7XHJcbiAgICBmb3IgKHZhciBlID0gMDsgZSA8IGM7IGUrKylcclxuICAgICAgICBpZiAoZSBpbiBkICYmIGIuY2FsbCh2b2lkIDAsIGRbZV0sIGUsIGEpKSB7XHJcbiAgICAgICAgICAgIGIgPSBlO1xyXG4gICAgICAgICAgICBicmVhayBhO1xyXG4gICAgICAgIH1cclxuICAgIGIgPSAtMTtcclxufSByZXR1cm4gMCA+IGIgPyBudWxsIDogXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGEgPyBhLmNoYXJBdChiKSA6IGFbYl07IH1cclxuZnVuY3Rpb24gcWEoYSkgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJndW1lbnRzKTsgfVxyXG5mdW5jdGlvbiByYShhKSB7IHZhciBiID0gYS5sZW5ndGg7IGlmICgwIDwgYikge1xyXG4gICAgdmFyIGMgPSBBcnJheShiKTtcclxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgYjsgZCsrKVxyXG4gICAgICAgIGNbZF0gPSBhW2RdO1xyXG4gICAgcmV0dXJuIGM7XHJcbn0gcmV0dXJuIFtdOyB9XHJcbmZ1bmN0aW9uIHNhKGEpIHsgcmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpOyB9XHJcbnZhciB0YSA9IFN0cmluZy5wcm90b3R5cGUudHJpbSA/IGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRyaW0oKTsgfSA6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAvXltcXHNcXHhhMF0qKFtcXHNcXFNdKj8pW1xcc1xceGEwXSokLy5leGVjKGEpWzFdOyB9O1xyXG5mdW5jdGlvbiB3KGEsIGIpIHsgcmV0dXJuIC0xICE9IGEuaW5kZXhPZihiKTsgfVxyXG5mdW5jdGlvbiB1YShhLCBiKSB7IHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDsgfVxyXG52YXIgeDtcclxuYToge1xyXG4gICAgdmFyIHZhID0gbC5uYXZpZ2F0b3I7XHJcbiAgICBpZiAodmEpIHtcclxuICAgICAgICB2YXIgd2EgPSB2YS51c2VyQWdlbnQ7XHJcbiAgICAgICAgaWYgKHdhKSB7XHJcbiAgICAgICAgICAgIHggPSB3YTtcclxuICAgICAgICAgICAgYnJlYWsgYTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB4ID0gXCJcIjtcclxufVxyXG5mdW5jdGlvbiB4YShhLCBiLCBjKSB7IGZvciAodmFyIGQgaW4gYSlcclxuICAgIGIuY2FsbChjLCBhW2RdLCBkLCBhKTsgfVxyXG5mdW5jdGlvbiB5YShhKSB7IHZhciBiID0ge307IGZvciAodmFyIGMgaW4gYSlcclxuICAgIGJbY10gPSBhW2NdOyByZXR1cm4gYjsgfVxyXG52YXIgemEgPSBcImNvbnN0cnVjdG9yIGhhc093blByb3BlcnR5IGlzUHJvdG90eXBlT2YgcHJvcGVydHlJc0VudW1lcmFibGUgdG9Mb2NhbGVTdHJpbmcgdG9TdHJpbmcgdmFsdWVPZlwiLnNwbGl0KFwiIFwiKTtcclxuZnVuY3Rpb24gQWEoYSwgYikgeyB2YXIgYywgZDsgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcclxuICAgIGQgPSBhcmd1bWVudHNbZV07XHJcbiAgICBmb3IgKGMgaW4gZClcclxuICAgICAgICBhW2NdID0gZFtjXTtcclxuICAgIGZvciAodmFyIGYgPSAwOyBmIDwgemEubGVuZ3RoOyBmKyspXHJcbiAgICAgICAgYyA9IHphW2ZdLCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCwgYykgJiYgKGFbY10gPSBkW2NdKTtcclxufSB9XHJcbmZ1bmN0aW9uIENhKGEpIHsgQ2FbXCIgXCJdKGEpOyByZXR1cm4gYTsgfVxyXG5DYVtcIiBcIl0gPSBhYTtcclxuZnVuY3Rpb24gRmEoYSkgeyB2YXIgYiA9IEdhOyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIDkpID8gYls5XSA6IGJbOV0gPSBhKDkpOyB9XHJcbnZhciBIYSA9IHcoeCwgXCJPcGVyYVwiKSwgeSA9IHcoeCwgXCJUcmlkZW50XCIpIHx8IHcoeCwgXCJNU0lFXCIpLCBJYSA9IHcoeCwgXCJFZGdlXCIpLCBKYSA9IElhIHx8IHksIEthID0gdyh4LCBcIkdlY2tvXCIpICYmICEodyh4LnRvTG93ZXJDYXNlKCksIFwid2Via2l0XCIpICYmICF3KHgsIFwiRWRnZVwiKSkgJiYgISh3KHgsIFwiVHJpZGVudFwiKSB8fCB3KHgsIFwiTVNJRVwiKSkgJiYgIXcoeCwgXCJFZGdlXCIpLCBMYSA9IHcoeC50b0xvd2VyQ2FzZSgpLCBcIndlYmtpdFwiKSAmJiAhdyh4LCBcIkVkZ2VcIik7XHJcbmZ1bmN0aW9uIE1hKCkgeyB2YXIgYSA9IGwuZG9jdW1lbnQ7IHJldHVybiBhID8gYS5kb2N1bWVudE1vZGUgOiB2b2lkIDA7IH1cclxudmFyIE5hO1xyXG5hOiB7XHJcbiAgICB2YXIgT2EgPSBcIlwiLCBQYSA9IGZ1bmN0aW9uICgpIHsgdmFyIGEgPSB4OyBpZiAoS2EpXHJcbiAgICAgICAgcmV0dXJuIC9ydjooW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTsgaWYgKElhKVxyXG4gICAgICAgIHJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpOyBpZiAoeSlcclxuICAgICAgICByZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpOyBpZiAoTGEpXHJcbiAgICAgICAgcmV0dXJuIC9XZWJLaXRcXC8oXFxTKykvLmV4ZWMoYSk7IGlmIChIYSlcclxuICAgICAgICByZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKTsgfSgpO1xyXG4gICAgUGEgJiYgKE9hID0gUGEgPyBQYVsxXSA6IFwiXCIpO1xyXG4gICAgaWYgKHkpIHtcclxuICAgICAgICB2YXIgUWEgPSBNYSgpO1xyXG4gICAgICAgIGlmIChudWxsICE9IFFhICYmIFFhID4gcGFyc2VGbG9hdChPYSkpIHtcclxuICAgICAgICAgICAgTmEgPSBTdHJpbmcoUWEpO1xyXG4gICAgICAgICAgICBicmVhayBhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE5hID0gT2E7XHJcbn1cclxudmFyIEdhID0ge307XHJcbmZ1bmN0aW9uIFJhKCkgeyByZXR1cm4gRmEoZnVuY3Rpb24gKCkgeyB2YXIgYSA9IDA7IHZhciBiID0gdGEoU3RyaW5nKE5hKSkuc3BsaXQoXCIuXCIpLCBjID0gdGEoXCI5XCIpLnNwbGl0KFwiLlwiKSwgZCA9IE1hdGgubWF4KGIubGVuZ3RoLCBjLmxlbmd0aCk7IGZvciAodmFyIGggPSAwOyAwID09IGEgJiYgaCA8IGQ7IGgrKykge1xyXG4gICAgdmFyIGUgPSBiW2hdIHx8IFwiXCIsIGYgPSBjW2hdIHx8IFwiXCI7XHJcbiAgICBkbyB7XHJcbiAgICAgICAgZSA9IC8oXFxkKikoXFxEKikoLiopLy5leGVjKGUpIHx8IFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXTtcclxuICAgICAgICBmID0gLyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZikgfHwgW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCJdO1xyXG4gICAgICAgIGlmICgwID09IGVbMF0ubGVuZ3RoICYmIDAgPT0gZlswXS5sZW5ndGgpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGEgPSB1YSgwID09IGVbMV0ubGVuZ3RoID8gMCA6IHBhcnNlSW50KGVbMV0sIDEwKSwgMCA9PSBmWzFdLmxlbmd0aCA/IDAgOiBwYXJzZUludChmWzFdLCAxMCkpIHx8IHVhKDAgPT0gZVsyXS5sZW5ndGgsIDAgPT0gZlsyXS5sZW5ndGgpIHx8IHVhKGVbMl0sIGZbMl0pO1xyXG4gICAgICAgIGUgPSBlWzNdO1xyXG4gICAgICAgIGYgPSBmWzNdO1xyXG4gICAgfSB3aGlsZSAoMCA9PSBhKTtcclxufSByZXR1cm4gMCA8PSBhOyB9KTsgfVxyXG52YXIgU2E7XHJcbmlmIChsLmRvY3VtZW50ICYmIHkpIHtcclxuICAgIHZhciBUYSA9IE1hKCk7XHJcbiAgICBTYSA9IFRhID8gVGEgOiBwYXJzZUludChOYSwgMTApIHx8IHZvaWQgMDtcclxufVxyXG5lbHNlXHJcbiAgICBTYSA9IHZvaWQgMDtcclxudmFyIFVhID0gU2E7XHJcbnZhciBWYSA9IGZ1bmN0aW9uICgpIHsgaWYgKCFsLmFkZEV2ZW50TGlzdGVuZXIgfHwgIU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlcclxuICAgIHJldHVybiAhMTsgdmFyIGEgPSAhMSwgYiA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgXCJwYXNzaXZlXCIsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IGEgPSAhMDsgfSB9KTsgdHJ5IHtcclxuICAgIGwuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwgYWEsIGIpLCBsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsIGFhLCBiKTtcclxufVxyXG5jYXRjaCAoYykgeyB9IHJldHVybiBhOyB9KCk7XHJcbmZ1bmN0aW9uIHooYSwgYikgeyB0aGlzLnR5cGUgPSBhOyB0aGlzLmcgPSB0aGlzLnRhcmdldCA9IGI7IHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9ICExOyB9XHJcbnoucHJvdG90eXBlLmggPSBmdW5jdGlvbiAoKSB7IHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9ICEwOyB9O1xyXG5mdW5jdGlvbiBBKGEsIGIpIHtcclxuICAgIHouY2FsbCh0aGlzLCBhID8gYS50eXBlIDogXCJcIik7XHJcbiAgICB0aGlzLnJlbGF0ZWRUYXJnZXQgPSB0aGlzLmcgPSB0aGlzLnRhcmdldCA9IG51bGw7XHJcbiAgICB0aGlzLmJ1dHRvbiA9IHRoaXMuc2NyZWVuWSA9IHRoaXMuc2NyZWVuWCA9IHRoaXMuY2xpZW50WSA9IHRoaXMuY2xpZW50WCA9IDA7XHJcbiAgICB0aGlzLmtleSA9IFwiXCI7XHJcbiAgICB0aGlzLm1ldGFLZXkgPSB0aGlzLnNoaWZ0S2V5ID0gdGhpcy5hbHRLZXkgPSB0aGlzLmN0cmxLZXkgPSAhMTtcclxuICAgIHRoaXMuc3RhdGUgPSBudWxsO1xyXG4gICAgdGhpcy5wb2ludGVySWQgPSAwO1xyXG4gICAgdGhpcy5wb2ludGVyVHlwZSA9IFwiXCI7XHJcbiAgICB0aGlzLmkgPSBudWxsO1xyXG4gICAgaWYgKGEpIHtcclxuICAgICAgICB2YXIgYyA9IHRoaXMudHlwZSA9IGEudHlwZSwgZCA9IGEuY2hhbmdlZFRvdWNoZXMgJiYgYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggPyBhLmNoYW5nZWRUb3VjaGVzWzBdIDogbnVsbDtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IGEudGFyZ2V0IHx8IGEuc3JjRWxlbWVudDtcclxuICAgICAgICB0aGlzLmcgPSBiO1xyXG4gICAgICAgIGlmIChiID0gYS5yZWxhdGVkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmIChLYSkge1xyXG4gICAgICAgICAgICAgICAgYToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhKGIubm9kZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZikgeyB9XHJcbiAgICAgICAgICAgICAgICAgICAgZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZSB8fCAoYiA9IG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgXCJtb3VzZW92ZXJcIiA9PSBjID8gYiA9IGEuZnJvbUVsZW1lbnQgOiBcIm1vdXNlb3V0XCIgPT0gYyAmJiAoYiA9IGEudG9FbGVtZW50KTtcclxuICAgICAgICB0aGlzLnJlbGF0ZWRUYXJnZXQgPSBiO1xyXG4gICAgICAgIGQgPyAodGhpcy5jbGllbnRYID0gdm9pZCAwICE9PSBkLmNsaWVudFggPyBkLmNsaWVudFggOiBkLnBhZ2VYLCB0aGlzLmNsaWVudFkgPSB2b2lkIDAgIT09IGQuY2xpZW50WSA/IGQuY2xpZW50WSA6IGQucGFnZVksIHRoaXMuc2NyZWVuWCA9IGQuc2NyZWVuWCB8fCAwLCB0aGlzLnNjcmVlblkgPSBkLnNjcmVlblkgfHwgMCkgOiAodGhpcy5jbGllbnRYID0gdm9pZCAwICE9PSBhLmNsaWVudFggPyBhLmNsaWVudFggOiBhLnBhZ2VYLCB0aGlzLmNsaWVudFkgPSB2b2lkIDAgIT09IGEuY2xpZW50WSA/IGEuY2xpZW50WSA6IGEucGFnZVksIHRoaXMuc2NyZWVuWCA9IGEuc2NyZWVuWCB8fCAwLCB0aGlzLnNjcmVlblkgPSBhLnNjcmVlblkgfHwgMCk7XHJcbiAgICAgICAgdGhpcy5idXR0b24gPSBhLmJ1dHRvbjtcclxuICAgICAgICB0aGlzLmtleSA9IGEua2V5IHx8IFwiXCI7XHJcbiAgICAgICAgdGhpcy5jdHJsS2V5ID0gYS5jdHJsS2V5O1xyXG4gICAgICAgIHRoaXMuYWx0S2V5ID0gYS5hbHRLZXk7XHJcbiAgICAgICAgdGhpcy5zaGlmdEtleSA9XHJcbiAgICAgICAgICAgIGEuc2hpZnRLZXk7XHJcbiAgICAgICAgdGhpcy5tZXRhS2V5ID0gYS5tZXRhS2V5O1xyXG4gICAgICAgIHRoaXMucG9pbnRlcklkID0gYS5wb2ludGVySWQgfHwgMDtcclxuICAgICAgICB0aGlzLnBvaW50ZXJUeXBlID0gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGEucG9pbnRlclR5cGUgPyBhLnBvaW50ZXJUeXBlIDogV2FbYS5wb2ludGVyVHlwZV0gfHwgXCJcIjtcclxuICAgICAgICB0aGlzLnN0YXRlID0gYS5zdGF0ZTtcclxuICAgICAgICB0aGlzLmkgPSBhO1xyXG4gICAgICAgIGEuZGVmYXVsdFByZXZlbnRlZCAmJiBBLlouaC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbnQoQSwgeik7XHJcbnZhciBXYSA9IHsgMjogXCJ0b3VjaFwiLCAzOiBcInBlblwiLCA0OiBcIm1vdXNlXCIgfTtcclxuQS5wcm90b3R5cGUuaCA9IGZ1bmN0aW9uICgpIHsgQS5aLmguY2FsbCh0aGlzKTsgdmFyIGEgPSB0aGlzLmk7IGEucHJldmVudERlZmF1bHQgPyBhLnByZXZlbnREZWZhdWx0KCkgOiBhLnJldHVyblZhbHVlID0gITE7IH07XHJcbnZhciBCID0gXCJjbG9zdXJlX2xpc3RlbmFibGVfXCIgKyAoMUU2ICogTWF0aC5yYW5kb20oKSB8IDApO1xyXG52YXIgWGEgPSAwO1xyXG5mdW5jdGlvbiBZYShhLCBiLCBjLCBkLCBlKSB7IHRoaXMubGlzdGVuZXIgPSBhOyB0aGlzLnByb3h5ID0gbnVsbDsgdGhpcy5zcmMgPSBiOyB0aGlzLnR5cGUgPSBjOyB0aGlzLmNhcHR1cmUgPSAhIWQ7IHRoaXMuaWEgPSBlOyB0aGlzLmtleSA9ICsrWGE7IHRoaXMuY2EgPSB0aGlzLmZhID0gITE7IH1cclxuZnVuY3Rpb24gWmEoYSkgeyBhLmNhID0gITA7IGEubGlzdGVuZXIgPSBudWxsOyBhLnByb3h5ID0gbnVsbDsgYS5zcmMgPSBudWxsOyBhLmlhID0gbnVsbDsgfVxyXG5mdW5jdGlvbiAkYShhKSB7IHRoaXMuc3JjID0gYTsgdGhpcy5nID0ge307IHRoaXMuaCA9IDA7IH1cclxuJGEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7IHZhciBmID0gYS50b1N0cmluZygpOyBhID0gdGhpcy5nW2ZdOyBhIHx8IChhID0gdGhpcy5nW2ZdID0gW10sIHRoaXMuaCsrKTsgdmFyIGggPSBhYihhLCBiLCBkLCBlKTsgLTEgPCBoID8gKGIgPSBhW2hdLCBjIHx8IChiLmZhID0gITEpKSA6IChiID0gbmV3IFlhKGIsIHRoaXMuc3JjLCBmLCAhIWQsIGUpLCBiLmZhID0gYywgYS5wdXNoKGIpKTsgcmV0dXJuIGI7IH07XHJcbmZ1bmN0aW9uIGJiKGEsIGIpIHsgdmFyIGMgPSBiLnR5cGU7IGlmIChjIGluIGEuZykge1xyXG4gICAgdmFyIGQgPSBhLmdbY10sIGUgPSBtYShkLCBiKSwgZjtcclxuICAgIChmID0gMCA8PSBlKSAmJiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCwgZSwgMSk7XHJcbiAgICBmICYmIChaYShiKSwgMCA9PSBhLmdbY10ubGVuZ3RoICYmIChkZWxldGUgYS5nW2NdLCBhLmgtLSkpO1xyXG59IH1cclxuZnVuY3Rpb24gYWIoYSwgYiwgYywgZCkgeyBmb3IgKHZhciBlID0gMDsgZSA8IGEubGVuZ3RoOyArK2UpIHtcclxuICAgIHZhciBmID0gYVtlXTtcclxuICAgIGlmICghZi5jYSAmJiBmLmxpc3RlbmVyID09IGIgJiYgZi5jYXB0dXJlID09ICEhYyAmJiBmLmlhID09IGQpXHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbn0gcmV0dXJuIC0xOyB9XHJcbnZhciBjYiA9IFwiY2xvc3VyZV9sbV9cIiArICgxRTYgKiBNYXRoLnJhbmRvbSgpIHwgMCksIGRiID0ge307XHJcbmZ1bmN0aW9uIGZiKGEsIGIsIGMsIGQsIGUpIHsgaWYgKGQgJiYgZC5vbmNlKVxyXG4gICAgcmV0dXJuIGdiKGEsIGIsIGMsIGQsIGUpOyBpZiAoQXJyYXkuaXNBcnJheShiKSkge1xyXG4gICAgZm9yICh2YXIgZiA9IDA7IGYgPCBiLmxlbmd0aDsgZisrKVxyXG4gICAgICAgIGZiKGEsIGJbZl0sIGMsIGQsIGUpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbn0gYyA9IGhiKGMpOyByZXR1cm4gYSAmJiBhW0JdID8gYS5OKGIsIGMsIHAoZCkgPyAhIWQuY2FwdHVyZSA6ICEhZCwgZSkgOiBpYihhLCBiLCBjLCAhMSwgZCwgZSk7IH1cclxuZnVuY3Rpb24gaWIoYSwgYiwgYywgZCwgZSwgZikgeyBpZiAoIWIpXHJcbiAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTsgdmFyIGggPSBwKGUpID8gISFlLmNhcHR1cmUgOiAhIWUsIG4gPSBqYihhKTsgbiB8fCAoYVtjYl0gPSBuID0gbmV3ICRhKGEpKTsgYyA9IG4uYWRkKGIsIGMsIGQsIGgsIGYpOyBpZiAoYy5wcm94eSlcclxuICAgIHJldHVybiBjOyBkID0ga2IoKTsgYy5wcm94eSA9IGQ7IGQuc3JjID0gYTsgZC5saXN0ZW5lciA9IGM7IGlmIChhLmFkZEV2ZW50TGlzdGVuZXIpXHJcbiAgICBWYSB8fCAoZSA9IGgpLCB2b2lkIDAgPT09IGUgJiYgKGUgPSAhMSksIGEuYWRkRXZlbnRMaXN0ZW5lcihiLnRvU3RyaW5nKCksIGQsIGUpO1xyXG5lbHNlIGlmIChhLmF0dGFjaEV2ZW50KVxyXG4gICAgYS5hdHRhY2hFdmVudChsYihiLnRvU3RyaW5nKCkpLCBkKTtcclxuZWxzZSBpZiAoYS5hZGRMaXN0ZW5lciAmJiBhLnJlbW92ZUxpc3RlbmVyKVxyXG4gICAgYS5hZGRMaXN0ZW5lcihkKTtcclxuZWxzZVxyXG4gICAgdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpOyByZXR1cm4gYzsgfVxyXG5mdW5jdGlvbiBrYigpIHsgZnVuY3Rpb24gYShjKSB7IHJldHVybiBiLmNhbGwoYS5zcmMsIGEubGlzdGVuZXIsIGMpOyB9IHZhciBiID0gbWI7IHJldHVybiBhOyB9XHJcbmZ1bmN0aW9uIGdiKGEsIGIsIGMsIGQsIGUpIHsgaWYgKEFycmF5LmlzQXJyYXkoYikpIHtcclxuICAgIGZvciAodmFyIGYgPSAwOyBmIDwgYi5sZW5ndGg7IGYrKylcclxuICAgICAgICBnYihhLCBiW2ZdLCBjLCBkLCBlKTtcclxuICAgIHJldHVybiBudWxsO1xyXG59IGMgPSBoYihjKTsgcmV0dXJuIGEgJiYgYVtCXSA/IGEuTyhiLCBjLCBwKGQpID8gISFkLmNhcHR1cmUgOiAhIWQsIGUpIDogaWIoYSwgYiwgYywgITAsIGQsIGUpOyB9XHJcbmZ1bmN0aW9uIG5iKGEsIGIsIGMsIGQsIGUpIHsgaWYgKEFycmF5LmlzQXJyYXkoYikpXHJcbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGIubGVuZ3RoOyBmKyspXHJcbiAgICAgICAgbmIoYSwgYltmXSwgYywgZCwgZSk7XHJcbmVsc2VcclxuICAgIChkID0gcChkKSA/ICEhZC5jYXB0dXJlIDogISFkLCBjID0gaGIoYyksIGEgJiYgYVtCXSkgPyAoYSA9IGEuaSwgYiA9IFN0cmluZyhiKS50b1N0cmluZygpLCBiIGluIGEuZyAmJiAoZiA9IGEuZ1tiXSwgYyA9IGFiKGYsIGMsIGQsIGUpLCAtMSA8IGMgJiYgKFphKGZbY10pLCBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZiwgYywgMSksIDAgPT0gZi5sZW5ndGggJiYgKGRlbGV0ZSBhLmdbYl0sIGEuaC0tKSkpKSA6IGEgJiYgKGEgPSBqYihhKSkgJiYgKGIgPSBhLmdbYi50b1N0cmluZygpXSwgYSA9IC0xLCBiICYmIChhID0gYWIoYiwgYywgZCwgZSkpLCAoYyA9IC0xIDwgYSA/IGJbYV0gOiBudWxsKSAmJiBvYihjKSk7IH1cclxuZnVuY3Rpb24gb2IoYSkgeyBpZiAoXCJudW1iZXJcIiAhPT0gdHlwZW9mIGEgJiYgYSAmJiAhYS5jYSkge1xyXG4gICAgdmFyIGIgPSBhLnNyYztcclxuICAgIGlmIChiICYmIGJbQl0pXHJcbiAgICAgICAgYmIoYi5pLCBhKTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBjID0gYS50eXBlLCBkID0gYS5wcm94eTtcclxuICAgICAgICBiLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyBiLnJlbW92ZUV2ZW50TGlzdGVuZXIoYywgZCwgYS5jYXB0dXJlKSA6IGIuZGV0YWNoRXZlbnQgPyBiLmRldGFjaEV2ZW50KGxiKGMpLCBkKSA6IGIuYWRkTGlzdGVuZXIgJiYgYi5yZW1vdmVMaXN0ZW5lciAmJiBiLnJlbW92ZUxpc3RlbmVyKGQpO1xyXG4gICAgICAgIChjID0gamIoYikpID8gKGJiKGMsIGEpLCAwID09IGMuaCAmJiAoYy5zcmMgPSBudWxsLCBiW2NiXSA9IG51bGwpKSA6IFphKGEpO1xyXG4gICAgfVxyXG59IH1cclxuZnVuY3Rpb24gbGIoYSkgeyByZXR1cm4gYSBpbiBkYiA/IGRiW2FdIDogZGJbYV0gPSBcIm9uXCIgKyBhOyB9XHJcbmZ1bmN0aW9uIG1iKGEsIGIpIHsgaWYgKGEuY2EpXHJcbiAgICBhID0gITA7XHJcbmVsc2Uge1xyXG4gICAgYiA9IG5ldyBBKGIsIHRoaXMpO1xyXG4gICAgdmFyIGMgPSBhLmxpc3RlbmVyLCBkID0gYS5pYSB8fCBhLnNyYztcclxuICAgIGEuZmEgJiYgb2IoYSk7XHJcbiAgICBhID0gYy5jYWxsKGQsIGIpO1xyXG59IHJldHVybiBhOyB9XHJcbmZ1bmN0aW9uIGpiKGEpIHsgYSA9IGFbY2JdOyByZXR1cm4gYSBpbnN0YW5jZW9mICRhID8gYSA6IG51bGw7IH1cclxudmFyIHBiID0gXCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiICsgKDFFOSAqIE1hdGgucmFuZG9tKCkgPj4+IDApO1xyXG5mdW5jdGlvbiBoYihhKSB7IGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBhKVxyXG4gICAgcmV0dXJuIGE7IGFbcGJdIHx8IChhW3BiXSA9IGZ1bmN0aW9uIChiKSB7IHJldHVybiBhLmhhbmRsZUV2ZW50KGIpOyB9KTsgcmV0dXJuIGFbcGJdOyB9XHJcbmZ1bmN0aW9uIEMoKSB7IHYuY2FsbCh0aGlzKTsgdGhpcy5pID0gbmV3ICRhKHRoaXMpOyB0aGlzLlAgPSB0aGlzOyB0aGlzLkkgPSBudWxsOyB9XHJcbnQoQywgdik7XHJcbkMucHJvdG90eXBlW0JdID0gITA7XHJcbkMucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyBuYih0aGlzLCBhLCBiLCBjLCBkKTsgfTtcclxuZnVuY3Rpb24gRChhLCBiKSB7IHZhciBjLCBkID0gYS5JOyBpZiAoZClcclxuICAgIGZvciAoYyA9IFtdOyBkOyBkID0gZC5JKVxyXG4gICAgICAgIGMucHVzaChkKTsgYSA9IGEuUDsgZCA9IGIudHlwZSB8fCBiOyBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGIpXHJcbiAgICBiID0gbmV3IHooYiwgYSk7XHJcbmVsc2UgaWYgKGIgaW5zdGFuY2VvZiB6KVxyXG4gICAgYi50YXJnZXQgPSBiLnRhcmdldCB8fCBhO1xyXG5lbHNlIHtcclxuICAgIHZhciBlID0gYjtcclxuICAgIGIgPSBuZXcgeihkLCBhKTtcclxuICAgIEFhKGIsIGUpO1xyXG59IGUgPSAhMDsgaWYgKGMpXHJcbiAgICBmb3IgKHZhciBmID0gYy5sZW5ndGggLSAxOyAwIDw9IGY7IGYtLSkge1xyXG4gICAgICAgIHZhciBoID0gYi5nID0gY1tmXTtcclxuICAgICAgICBlID0gcWIoaCwgZCwgITAsIGIpICYmIGU7XHJcbiAgICB9IGggPSBiLmcgPSBhOyBlID0gcWIoaCwgZCwgITAsIGIpICYmIGU7IGUgPSBxYihoLCBkLCAhMSwgYikgJiYgZTsgaWYgKGMpXHJcbiAgICBmb3IgKGYgPSAwOyBmIDwgYy5sZW5ndGg7IGYrKylcclxuICAgICAgICBoID0gYi5nID0gY1tmXSwgZSA9IHFiKGgsIGQsICExLCBiKSAmJiBlOyB9XHJcbkMucHJvdG90eXBlLk0gPSBmdW5jdGlvbiAoKSB7IEMuWi5NLmNhbGwodGhpcyk7IGlmICh0aGlzLmkpIHtcclxuICAgIHZhciBhID0gdGhpcy5pLCBjO1xyXG4gICAgZm9yIChjIGluIGEuZykge1xyXG4gICAgICAgIGZvciAodmFyIGQgPSBhLmdbY10sIGUgPSAwOyBlIDwgZC5sZW5ndGg7IGUrKylcclxuICAgICAgICAgICAgWmEoZFtlXSk7XHJcbiAgICAgICAgZGVsZXRlIGEuZ1tjXTtcclxuICAgICAgICBhLmgtLTtcclxuICAgIH1cclxufSB0aGlzLkkgPSBudWxsOyB9O1xyXG5DLnByb3RvdHlwZS5OID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgcmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLCBiLCAhMSwgYywgZCk7IH07XHJcbkMucHJvdG90eXBlLk8gPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgeyByZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksIGIsICEwLCBjLCBkKTsgfTtcclxuZnVuY3Rpb24gcWIoYSwgYiwgYywgZCkgeyBiID0gYS5pLmdbU3RyaW5nKGIpXTsgaWYgKCFiKVxyXG4gICAgcmV0dXJuICEwOyBiID0gYi5jb25jYXQoKTsgZm9yICh2YXIgZSA9ICEwLCBmID0gMDsgZiA8IGIubGVuZ3RoOyArK2YpIHtcclxuICAgIHZhciBoID0gYltmXTtcclxuICAgIGlmIChoICYmICFoLmNhICYmIGguY2FwdHVyZSA9PSBjKSB7XHJcbiAgICAgICAgdmFyIG4gPSBoLmxpc3RlbmVyLCB1ID0gaC5pYSB8fCBoLnNyYztcclxuICAgICAgICBoLmZhICYmIGJiKGEuaSwgaCk7XHJcbiAgICAgICAgZSA9ICExICE9PSBuLmNhbGwodSwgZCkgJiYgZTtcclxuICAgIH1cclxufSByZXR1cm4gZSAmJiAhZC5kZWZhdWx0UHJldmVudGVkOyB9XHJcbnZhciByYiA9IGwuSlNPTi5zdHJpbmdpZnk7XHJcbmZ1bmN0aW9uIHNiKCkgeyB2YXIgYSA9IHRiOyB2YXIgYiA9IG51bGw7IGEuZyAmJiAoYiA9IGEuZywgYS5nID0gYS5nLm5leHQsIGEuZyB8fCAoYS5oID0gbnVsbCksIGIubmV4dCA9IG51bGwpOyByZXR1cm4gYjsgfVxyXG52YXIgdWIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB1YigpIHtcclxuICAgICAgICB0aGlzLmggPSB0aGlzLmcgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgdWIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChhLCBiKSB7IHZhciBjID0gdmIuZ2V0KCk7IGMuc2V0KGEsIGIpOyB0aGlzLmggPyB0aGlzLmgubmV4dCA9IGMgOiB0aGlzLmcgPSBjOyB0aGlzLmggPSBjOyB9O1xyXG4gICAgcmV0dXJuIHViO1xyXG59KCkpO1xyXG52YXIgdmIgPSBuZXcgLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gY2xhc3NfMihhLCBiKSB7XHJcbiAgICAgICAgdGhpcy5pID0gYTtcclxuICAgICAgICB0aGlzLmogPSBiO1xyXG4gICAgICAgIHRoaXMuaCA9IDA7XHJcbiAgICAgICAgdGhpcy5nID0gbnVsbDtcclxuICAgIH1cclxuICAgIGNsYXNzXzIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHsgdmFyIGE7IDAgPCB0aGlzLmggPyAodGhpcy5oLS0sIGEgPSB0aGlzLmcsIHRoaXMuZyA9IGEubmV4dCwgYS5uZXh0ID0gbnVsbCkgOiBhID0gdGhpcy5pKCk7IHJldHVybiBhOyB9O1xyXG4gICAgcmV0dXJuIGNsYXNzXzI7XHJcbn0oKSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IHdiOyB9LCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5yZXNldCgpOyB9KTtcclxudmFyIHdiID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gd2IoKSB7XHJcbiAgICAgICAgdGhpcy5uZXh0ID0gdGhpcy5nID0gdGhpcy5oID0gbnVsbDtcclxuICAgIH1cclxuICAgIHdiLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoYSwgYikgeyB0aGlzLmggPSBhOyB0aGlzLmcgPSBiOyB0aGlzLm5leHQgPSBudWxsOyB9O1xyXG4gICAgd2IucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgeyB0aGlzLm5leHQgPSB0aGlzLmcgPSB0aGlzLmggPSBudWxsOyB9O1xyXG4gICAgcmV0dXJuIHdiO1xyXG59KCkpO1xyXG5mdW5jdGlvbiB5YihhKSB7IGwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGE7IH0sIDApOyB9XHJcbmZ1bmN0aW9uIHpiKGEsIGIpIHsgQWIgfHwgQmIoKTsgQ2IgfHwgKEFiKCksIENiID0gITApOyB0Yi5hZGQoYSwgYik7IH1cclxudmFyIEFiO1xyXG5mdW5jdGlvbiBCYigpIHsgdmFyIGEgPSBsLlByb21pc2UucmVzb2x2ZSh2b2lkIDApOyBBYiA9IGZ1bmN0aW9uICgpIHsgYS50aGVuKERiKTsgfTsgfVxyXG52YXIgQ2IgPSAhMSwgdGIgPSBuZXcgdWI7XHJcbmZ1bmN0aW9uIERiKCkgeyBmb3IgKHZhciBhOyBhID0gc2IoKTspIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYS5oLmNhbGwoYS5nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChjKSB7XHJcbiAgICAgICAgeWIoYyk7XHJcbiAgICB9XHJcbiAgICB2YXIgYiA9IHZiO1xyXG4gICAgYi5qKGEpO1xyXG4gICAgMTAwID4gYi5oICYmIChiLmgrKywgYS5uZXh0ID0gYi5nLCBiLmcgPSBhKTtcclxufSBDYiA9ICExOyB9XHJcbmZ1bmN0aW9uIEViKGEsIGIpIHsgQy5jYWxsKHRoaXMpOyB0aGlzLmggPSBhIHx8IDE7IHRoaXMuZyA9IGIgfHwgbDsgdGhpcy5qID0gcSh0aGlzLmtiLCB0aGlzKTsgdGhpcy5sID0gRGF0ZS5ub3coKTsgfVxyXG50KEViLCBDKTtcclxuayA9IEViLnByb3RvdHlwZTtcclxuay5kYSA9ICExO1xyXG5rLlMgPSBudWxsO1xyXG5rLmtiID0gZnVuY3Rpb24gKCkgeyBpZiAodGhpcy5kYSkge1xyXG4gICAgdmFyIGEgPSBEYXRlLm5vdygpIC0gdGhpcy5sO1xyXG4gICAgMCA8IGEgJiYgYSA8IC44ICogdGhpcy5oID8gdGhpcy5TID0gdGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLCB0aGlzLmggLSBhKSA6ICh0aGlzLlMgJiYgKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSwgdGhpcy5TID0gbnVsbCksIEQodGhpcywgXCJ0aWNrXCIpLCB0aGlzLmRhICYmIChGYih0aGlzKSwgdGhpcy5zdGFydCgpKSk7XHJcbn0gfTtcclxuay5zdGFydCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5kYSA9ICEwOyB0aGlzLlMgfHwgKHRoaXMuUyA9IHRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaiwgdGhpcy5oKSwgdGhpcy5sID0gRGF0ZS5ub3coKSk7IH07XHJcbmZ1bmN0aW9uIEZiKGEpIHsgYS5kYSA9ICExOyBhLlMgJiYgKGEuZy5jbGVhclRpbWVvdXQoYS5TKSwgYS5TID0gbnVsbCk7IH1cclxuay5NID0gZnVuY3Rpb24gKCkgeyBFYi5aLk0uY2FsbCh0aGlzKTsgRmIodGhpcyk7IGRlbGV0ZSB0aGlzLmc7IH07XHJcbmZ1bmN0aW9uIEdiKGEsIGIsIGMpIHsgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGEpXHJcbiAgICBjICYmIChhID0gcShhLCBjKSk7XHJcbmVsc2UgaWYgKGEgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBhLmhhbmRsZUV2ZW50KVxyXG4gICAgYSA9IHEoYS5oYW5kbGVFdmVudCwgYSk7XHJcbmVsc2VcclxuICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTsgcmV0dXJuIDIxNDc0ODM2NDcgPCBOdW1iZXIoYikgPyAtMSA6IGwuc2V0VGltZW91dChhLCBiIHx8IDApOyB9XHJcbmZ1bmN0aW9uIEhiKGEpIHsgYS5nID0gR2IoZnVuY3Rpb24gKCkgeyBhLmcgPSBudWxsOyBhLmkgJiYgKGEuaSA9ICExLCBIYihhKSk7IH0sIGEuaik7IHZhciBiID0gYS5oOyBhLmggPSBudWxsOyBhLm0uYXBwbHkobnVsbCwgYik7IH1cclxudmFyIEliID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEliLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSWIoYSwgYikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubSA9IGE7XHJcbiAgICAgICAgX3RoaXMuaiA9IGI7XHJcbiAgICAgICAgX3RoaXMuaCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuaSA9ICExO1xyXG4gICAgICAgIF90aGlzLmcgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEliLnByb3RvdHlwZS5sID0gZnVuY3Rpb24gKGEpIHsgdGhpcy5oID0gYXJndW1lbnRzOyB0aGlzLmcgPyB0aGlzLmkgPSAhMCA6IEhiKHRoaXMpOyB9O1xyXG4gICAgSWIucHJvdG90eXBlLk0gPSBmdW5jdGlvbiAoKSB7IF9zdXBlci5wcm90b3R5cGUuTS5jYWxsKHRoaXMpOyB0aGlzLmcgJiYgKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksIHRoaXMuZyA9IG51bGwsIHRoaXMuaSA9ICExLCB0aGlzLmggPSBudWxsKTsgfTtcclxuICAgIHJldHVybiBJYjtcclxufSh2KSk7XHJcbmZ1bmN0aW9uIEUoYSkgeyB2LmNhbGwodGhpcyk7IHRoaXMuaCA9IGE7IHRoaXMuZyA9IHt9OyB9XHJcbnQoRSwgdik7XHJcbnZhciBKYiA9IFtdO1xyXG5mdW5jdGlvbiBLYihhLCBiLCBjLCBkKSB7IEFycmF5LmlzQXJyYXkoYykgfHwgKGMgJiYgKEpiWzBdID0gYy50b1N0cmluZygpKSwgYyA9IEpiKTsgZm9yICh2YXIgZSA9IDA7IGUgPCBjLmxlbmd0aDsgZSsrKSB7XHJcbiAgICB2YXIgZiA9IGZiKGIsIGNbZV0sIGQgfHwgYS5oYW5kbGVFdmVudCwgITEsIGEuaCB8fCBhKTtcclxuICAgIGlmICghZilcclxuICAgICAgICBicmVhaztcclxuICAgIGEuZ1tmLmtleV0gPSBmO1xyXG59IH1cclxuZnVuY3Rpb24gTGIoYSkgeyB4YShhLmcsIGZ1bmN0aW9uIChiLCBjKSB7IHRoaXMuZy5oYXNPd25Qcm9wZXJ0eShjKSAmJiBvYihiKTsgfSwgYSk7IGEuZyA9IHt9OyB9XHJcbkUucHJvdG90eXBlLk0gPSBmdW5jdGlvbiAoKSB7IEUuWi5NLmNhbGwodGhpcyk7IExiKHRoaXMpOyB9O1xyXG5FLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uICgpIHsgdGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpOyB9O1xyXG5mdW5jdGlvbiBNYigpIHsgdGhpcy5nID0gITA7IH1cclxuTWIucHJvdG90eXBlLkFhID0gZnVuY3Rpb24gKCkgeyB0aGlzLmcgPSAhMTsgfTtcclxuZnVuY3Rpb24gTmIoYSwgYiwgYywgZCwgZSwgZikgeyBhLmluZm8oZnVuY3Rpb24gKCkgeyBpZiAoYS5nKVxyXG4gICAgaWYgKGYpIHtcclxuICAgICAgICB2YXIgaCA9IFwiXCI7XHJcbiAgICAgICAgZm9yICh2YXIgbiA9IGYuc3BsaXQoXCImXCIpLCB1ID0gMDsgdSA8IG4ubGVuZ3RoOyB1KyspIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBuW3VdLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKDEgPCBtLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBtWzBdO1xyXG4gICAgICAgICAgICAgICAgbSA9IG1bMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgRyA9IHIuc3BsaXQoXCJfXCIpO1xyXG4gICAgICAgICAgICAgICAgaCA9IDIgPD0gRy5sZW5ndGggJiYgXCJ0eXBlXCIgPT0gR1sxXSA/IGggKyAociArIFwiPVwiICsgbSArIFwiJlwiKSA6IGggKyAociArIFwiPXJlZGFjdGVkJlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICBoID0gbnVsbDtcclxuZWxzZVxyXG4gICAgaCA9IGY7IHJldHVybiBcIlhNTEhUVFAgUkVRIChcIiArIGQgKyBcIikgW2F0dGVtcHQgXCIgKyBlICsgXCJdOiBcIiArIGIgKyBcIlxcblwiICsgYyArIFwiXFxuXCIgKyBoOyB9KTsgfVxyXG5mdW5jdGlvbiBPYihhLCBiLCBjLCBkLCBlLCBmLCBoKSB7IGEuaW5mbyhmdW5jdGlvbiAoKSB7IHJldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIgKyBkICsgXCIpIFsgYXR0ZW1wdCBcIiArIGUgKyBcIl06IFwiICsgYiArIFwiXFxuXCIgKyBjICsgXCJcXG5cIiArIGYgKyBcIiBcIiArIGg7IH0pOyB9XHJcbmZ1bmN0aW9uIEYoYSwgYiwgYywgZCkgeyBhLmluZm8oZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJYTUxIVFRQIFRFWFQgKFwiICsgYiArIFwiKTogXCIgKyBQYihhLCBjKSArIChkID8gXCIgXCIgKyBkIDogXCJcIik7IH0pOyB9XHJcbmZ1bmN0aW9uIFFiKGEsIGIpIHsgYS5pbmZvKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiVElNRU9VVDogXCIgKyBiOyB9KTsgfVxyXG5NYi5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsgfTtcclxuZnVuY3Rpb24gUGIoYSwgYikgeyBpZiAoIWEuZylcclxuICAgIHJldHVybiBiOyBpZiAoIWIpXHJcbiAgICByZXR1cm4gbnVsbDsgdHJ5IHtcclxuICAgIHZhciBjID0gSlNPTi5wYXJzZShiKTtcclxuICAgIGlmIChjKVxyXG4gICAgICAgIGZvciAoYSA9IDA7IGEgPCBjLmxlbmd0aDsgYSsrKVxyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjW2FdKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBjW2FdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoMiA+IGQubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gZFsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSAmJiAhKDEgPiBlLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJub29wXCIgIT0gZiAmJiBcInN0b3BcIiAhPSBmICYmIFwiY2xvc2VcIiAhPSBmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaCA9IDE7IGggPCBlLmxlbmd0aDsgaCsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbaF0gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgcmV0dXJuIHJiKGMpO1xyXG59XHJcbmNhdGNoIChuKSB7XHJcbiAgICByZXR1cm4gYjtcclxufSB9XHJcbnZhciBIID0ge30sIFJiID0gbnVsbDtcclxuZnVuY3Rpb24gU2IoKSB7IHJldHVybiBSYiA9IFJiIHx8IG5ldyBDOyB9XHJcbkguTWEgPSBcInNlcnZlcnJlYWNoYWJpbGl0eVwiO1xyXG5mdW5jdGlvbiBUYihhKSB7IHouY2FsbCh0aGlzLCBILk1hLCBhKTsgfVxyXG50KFRiLCB6KTtcclxuZnVuY3Rpb24gSShhKSB7IHZhciBiID0gU2IoKTsgRChiLCBuZXcgVGIoYiwgYSkpOyB9XHJcbkguU1RBVF9FVkVOVCA9IFwic3RhdGV2ZW50XCI7XHJcbmZ1bmN0aW9uIFViKGEsIGIpIHsgei5jYWxsKHRoaXMsIEguU1RBVF9FVkVOVCwgYSk7IHRoaXMuc3RhdCA9IGI7IH1cclxudChVYiwgeik7XHJcbmZ1bmN0aW9uIEooYSkgeyB2YXIgYiA9IFNiKCk7IEQoYiwgbmV3IFViKGIsIGEpKTsgfVxyXG5ILk5hID0gXCJ0aW1pbmdldmVudFwiO1xyXG5mdW5jdGlvbiBWYihhLCBiKSB7IHouY2FsbCh0aGlzLCBILk5hLCBhKTsgdGhpcy5zaXplID0gYjsgfVxyXG50KFZiLCB6KTtcclxuZnVuY3Rpb24gSyhhLCBiKSB7IGlmIChcImZ1bmN0aW9uXCIgIT09IHR5cGVvZiBhKVxyXG4gICAgdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7IHJldHVybiBsLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBhKCk7IH0sIGIpOyB9XHJcbnZhciBXYiA9IHsgTk9fRVJST1I6IDAsIGxiOiAxLCB5YjogMiwgeGI6IDMsIHNiOiA0LCB3YjogNSwgemI6IDYsIEphOiA3LCBUSU1FT1VUOiA4LCBDYjogOSB9O1xyXG52YXIgWGIgPSB7IHFiOiBcImNvbXBsZXRlXCIsIE1iOiBcInN1Y2Nlc3NcIiwgS2E6IFwiZXJyb3JcIiwgSmE6IFwiYWJvcnRcIiwgRWI6IFwicmVhZHlcIiwgRmI6IFwicmVhZHlzdGF0ZWNoYW5nZVwiLCBUSU1FT1VUOiBcInRpbWVvdXRcIiwgQWI6IFwiaW5jcmVtZW50YWxkYXRhXCIsIERiOiBcInByb2dyZXNzXCIsIHRiOiBcImRvd25sb2FkcHJvZ3Jlc3NcIiwgVWI6IFwidXBsb2FkcHJvZ3Jlc3NcIiB9O1xyXG5mdW5jdGlvbiBZYigpIHsgfVxyXG5ZYi5wcm90b3R5cGUuaCA9IG51bGw7XHJcbmZ1bmN0aW9uIFpiKGEpIHsgcmV0dXJuIGEuaCB8fCAoYS5oID0gYS5pKCkpOyB9XHJcbmZ1bmN0aW9uICRiKCkgeyB9XHJcbnZhciBMID0geyBPUEVOOiBcImFcIiwgcGI6IFwiYlwiLCBLYTogXCJjXCIsIEJiOiBcImRcIiB9O1xyXG5mdW5jdGlvbiBhYygpIHsgei5jYWxsKHRoaXMsIFwiZFwiKTsgfVxyXG50KGFjLCB6KTtcclxuZnVuY3Rpb24gYmMoKSB7IHouY2FsbCh0aGlzLCBcImNcIik7IH1cclxudChiYywgeik7XHJcbnZhciBjYztcclxuZnVuY3Rpb24gZGMoKSB7IH1cclxudChkYywgWWIpO1xyXG5kYy5wcm90b3R5cGUuZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdDsgfTtcclxuZGMucHJvdG90eXBlLmkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB7fTsgfTtcclxuY2MgPSBuZXcgZGM7XHJcbmZ1bmN0aW9uIE0oYSwgYiwgYywgZCkgeyB0aGlzLmwgPSBhOyB0aGlzLmogPSBiOyB0aGlzLm0gPSBjOyB0aGlzLlggPSBkIHx8IDE7IHRoaXMuViA9IG5ldyBFKHRoaXMpOyB0aGlzLlAgPSBlYzsgYSA9IEphID8gMTI1IDogdm9pZCAwOyB0aGlzLlcgPSBuZXcgRWIoYSk7IHRoaXMuSCA9IG51bGw7IHRoaXMuaSA9ICExOyB0aGlzLnMgPSB0aGlzLkEgPSB0aGlzLnYgPSB0aGlzLksgPSB0aGlzLkYgPSB0aGlzLlkgPSB0aGlzLkIgPSBudWxsOyB0aGlzLkQgPSBbXTsgdGhpcy5nID0gbnVsbDsgdGhpcy5DID0gMDsgdGhpcy5vID0gdGhpcy51ID0gbnVsbDsgdGhpcy5OID0gLTE7IHRoaXMuSSA9ICExOyB0aGlzLk8gPSAwOyB0aGlzLkwgPSBudWxsOyB0aGlzLmFhID0gdGhpcy5KID0gdGhpcy4kID0gdGhpcy5VID0gITE7IHRoaXMuaCA9IG5ldyBmYzsgfVxyXG5mdW5jdGlvbiBmYygpIHsgdGhpcy5pID0gbnVsbDsgdGhpcy5nID0gXCJcIjsgdGhpcy5oID0gITE7IH1cclxudmFyIGVjID0gNDVFMywgZ2MgPSB7fSwgaGMgPSB7fTtcclxuayA9IE0ucHJvdG90eXBlO1xyXG5rLnNldFRpbWVvdXQgPSBmdW5jdGlvbiAoYSkgeyB0aGlzLlAgPSBhOyB9O1xyXG5mdW5jdGlvbiBpYyhhLCBiLCBjKSB7IGEuSyA9IDE7IGEudiA9IGpjKE4oYikpOyBhLnMgPSBjOyBhLlUgPSAhMDsga2MoYSwgbnVsbCk7IH1cclxuZnVuY3Rpb24ga2MoYSwgYikgeyBhLkYgPSBEYXRlLm5vdygpOyBsYyhhKTsgYS5BID0gTihhLnYpOyB2YXIgYyA9IGEuQSwgZCA9IGEuWDsgQXJyYXkuaXNBcnJheShkKSB8fCAoZCA9IFtTdHJpbmcoZCldKTsgbWMoYy5oLCBcInRcIiwgZCk7IGEuQyA9IDA7IGMgPSBhLmwuSDsgYS5oID0gbmV3IGZjOyBhLmcgPSBuYyhhLmwsIGMgPyBiIDogbnVsbCwgIWEucyk7IDAgPCBhLk8gJiYgKGEuTCA9IG5ldyBJYihxKGEuSWEsIGEsIGEuZyksIGEuTykpOyBLYihhLlYsIGEuZywgXCJyZWFkeXN0YXRlY2hhbmdlXCIsIGEuZ2IpOyBiID0gYS5IID8geWEoYS5IKSA6IHt9OyBhLnMgPyAoYS51IHx8IChhLnUgPSBcIlBPU1RcIiksIGJbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBhLmcuZWEoYS5BLCBhLnUsIGEucywgYikpIDogKGEudSA9IFwiR0VUXCIsIGEuZy5lYShhLkEsIGEudSwgbnVsbCwgYikpOyBJKDEpOyBOYihhLmosIGEudSwgYS5BLCBhLm0sIGEuWCwgYS5zKTsgfVxyXG5rLmdiID0gZnVuY3Rpb24gKGEpIHsgYSA9IGEudGFyZ2V0OyB2YXIgYiA9IHRoaXMuTDsgYiAmJiAzID09IE8oYSkgPyBiLmwoKSA6IHRoaXMuSWEoYSk7IH07XHJcbmsuSWEgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAoYSA9PSB0aGlzLmcpXHJcbiAgICAgICAgICAgIGE6IHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gTyh0aGlzLmcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmcuRGEoKTtcclxuICAgICAgICAgICAgICAgIHZhciBHID0gdGhpcy5nLmJhKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISgzID4gcikgJiYgKDMgIT0gciB8fCBKYSB8fCB0aGlzLmcgJiYgKHRoaXMuaC5oIHx8IHRoaXMuZy5nYSgpIHx8IG9jKHRoaXMuZykpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSSB8fCA0ICE9IHIgfHwgNyA9PSBiIHx8ICg4ID09IGIgfHwgMCA+PSBHID8gSSgzKSA6IEkoMikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBjKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5nLmJhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5OID0gYztcclxuICAgICAgICAgICAgICAgICAgICBiOiBpZiAocWModGhpcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBvYyh0aGlzLmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBkLmxlbmd0aCwgZiA9IDQgPT0gTyh0aGlzLmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaC5pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIFRleHREZWNvZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYyh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaC5pID0gbmV3IGwuVGV4dERlY29kZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChiID0gMDsgYiA8IGU7IGIrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaC5oID0gITAsIGEgKz0gdGhpcy5oLmkuZGVjb2RlKGRbYl0sIHsgc3RyZWFtOiBmICYmIGIgPT0gZSAtIDEgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuc3BsaWNlKDAsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmguZyArPSBhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoID0gdGhpcy5oLmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMuZy5nYSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IDIwMCA9PSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIE9iKHRoaXMuaiwgdGhpcy51LCB0aGlzLkEsIHRoaXMubSwgdGhpcy5YLCByLCBjKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiQgJiYgIXRoaXMuSikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIHUgPSB0aGlzLmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobiA9IHUuZyA/IHUuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpIDogbnVsbCkgJiYgIXNhKG4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPSBtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYodGhpcy5qLCB0aGlzLm0sIGMsIFwiSW5pdGlhbCBoYW5kc2hha2UgcmVzcG9uc2UgdmlhIFgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpLCB0aGlzLkogPSAhMCwgc2ModGhpcywgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmkgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm8gPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEooMTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmModGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlUgPyAodGModGhpcywgciwgaCksIEphICYmIHRoaXMuaSAmJiAzID09IHIgJiYgKEtiKHRoaXMuViwgdGhpcy5XLCBcInRpY2tcIiwgdGhpcy5mYiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlcuc3RhcnQoKSkpIDogKEYodGhpcy5qLCB0aGlzLm0sIGgsIG51bGwpLCBzYyh0aGlzLCBoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDQgPT0gciAmJiBQKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmkgJiYgIXRoaXMuSSAmJiAoNCA9PSByID8gdWModGhpcy5sLCB0aGlzKSA6ICh0aGlzLmkgPSAhMSwgbGModGhpcykpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA0MDAgPT0gYyAmJiAwIDwgaC5pbmRleE9mKFwiVW5rbm93biBTSURcIikgPyAodGhpcy5vID0gMywgSigxMikpIDogKHRoaXMubyA9IDAsIEooMTMpKSwgUCh0aGlzKSwgcmModGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChyKSB7IH1cclxuICAgIGZpbmFsbHkgeyB9XHJcbn07XHJcbmZ1bmN0aW9uIHFjKGEpIHsgcmV0dXJuIGEuZyA/IFwiR0VUXCIgPT0gYS51ICYmIDIgIT0gYS5LICYmIGEubC5CYSA6ICExOyB9XHJcbmZ1bmN0aW9uIHRjKGEsIGIsIGMpIHtcclxuICAgIHZhciBkID0gITAsIGU7XHJcbiAgICBmb3IgKDsgIWEuSSAmJiBhLkMgPCBjLmxlbmd0aDspXHJcbiAgICAgICAgaWYgKGUgPSB2YyhhLCBjKSwgZSA9PSBoYykge1xyXG4gICAgICAgICAgICA0ID09IGIgJiYgKGEubyA9IDQsIEooMTQpLCBkID0gITEpO1xyXG4gICAgICAgICAgICBGKGEuaiwgYS5tLCBudWxsLCBcIltJbmNvbXBsZXRlIFJlc3BvbnNlXVwiKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGUgPT0gZ2MpIHtcclxuICAgICAgICAgICAgYS5vID0gNDtcclxuICAgICAgICAgICAgSigxNSk7XHJcbiAgICAgICAgICAgIEYoYS5qLCBhLm0sIGMsIFwiW0ludmFsaWQgQ2h1bmtdXCIpO1xyXG4gICAgICAgICAgICBkID0gITE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIEYoYS5qLCBhLm0sIGUsIG51bGwpLCBzYyhhLCBlKTtcclxuICAgIHFjKGEpICYmIGUgIT0gaGMgJiYgZSAhPSBnYyAmJiAoYS5oLmcgPSBcIlwiLCBhLkMgPSAwKTtcclxuICAgIDQgIT0gYiB8fCAwICE9IGMubGVuZ3RoIHx8IGEuaC5oIHx8IChhLm8gPSAxLCBKKDE2KSwgZCA9ICExKTtcclxuICAgIGEuaSA9IGEuaSAmJiBkO1xyXG4gICAgZCA/IDAgPCBjLmxlbmd0aCAmJiAhYS5hYSAmJiAoYS5hYSA9ICEwLCBiID0gYS5sLCBiLmcgPT0gYSAmJiBiLiQgJiYgIWIuTCAmJiAoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIgKyBjLmxlbmd0aCksIHdjKGIpLCBiLkwgPSAhMCwgSigxMSkpKSA6IChGKGEuaiwgYS5tLCBjLCBcIltJbnZhbGlkIENodW5rZWQgUmVzcG9uc2VdXCIpLCBQKGEpLCByYyhhKSk7XHJcbn1cclxuay5mYiA9IGZ1bmN0aW9uICgpIHsgaWYgKHRoaXMuZykge1xyXG4gICAgdmFyIGEgPSBPKHRoaXMuZyksIGIgPSB0aGlzLmcuZ2EoKTtcclxuICAgIHRoaXMuQyA8IGIubGVuZ3RoICYmIChwYyh0aGlzKSwgdGModGhpcywgYSwgYiksIHRoaXMuaSAmJiA0ICE9IGEgJiYgbGModGhpcykpO1xyXG59IH07XHJcbmZ1bmN0aW9uIHZjKGEsIGIpIHsgdmFyIGMgPSBhLkMsIGQgPSBiLmluZGV4T2YoXCJcXG5cIiwgYyk7IGlmICgtMSA9PSBkKVxyXG4gICAgcmV0dXJuIGhjOyBjID0gTnVtYmVyKGIuc3Vic3RyaW5nKGMsIGQpKTsgaWYgKGlzTmFOKGMpKVxyXG4gICAgcmV0dXJuIGdjOyBkICs9IDE7IGlmIChkICsgYyA+IGIubGVuZ3RoKVxyXG4gICAgcmV0dXJuIGhjOyBiID0gYi5zdWJzdHIoZCwgYyk7IGEuQyA9IGQgKyBjOyByZXR1cm4gYjsgfVxyXG5rLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5JID0gITA7IFAodGhpcyk7IH07XHJcbmZ1bmN0aW9uIGxjKGEpIHsgYS5ZID0gRGF0ZS5ub3coKSArIGEuUDsgeGMoYSwgYS5QKTsgfVxyXG5mdW5jdGlvbiB4YyhhLCBiKSB7IGlmIChudWxsICE9IGEuQilcclxuICAgIHRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7IGEuQiA9IEsocShhLmViLCBhKSwgYik7IH1cclxuZnVuY3Rpb24gcGMoYSkgeyBhLkIgJiYgKGwuY2xlYXJUaW1lb3V0KGEuQiksIGEuQiA9IG51bGwpOyB9XHJcbmsuZWIgPSBmdW5jdGlvbiAoKSB7IHRoaXMuQiA9IG51bGw7IHZhciBhID0gRGF0ZS5ub3coKTsgMCA8PSBhIC0gdGhpcy5ZID8gKFFiKHRoaXMuaiwgdGhpcy5BKSwgMiAhPSB0aGlzLksgJiYgKEkoMyksIEooMTcpKSwgUCh0aGlzKSwgdGhpcy5vID0gMiwgcmModGhpcykpIDogeGModGhpcywgdGhpcy5ZIC0gYSk7IH07XHJcbmZ1bmN0aW9uIHJjKGEpIHsgMCA9PSBhLmwuRyB8fCBhLkkgfHwgdWMoYS5sLCBhKTsgfVxyXG5mdW5jdGlvbiBQKGEpIHsgcGMoYSk7IHZhciBiID0gYS5MOyBiICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgYi5uYSAmJiBiLm5hKCk7IGEuTCA9IG51bGw7IEZiKGEuVyk7IExiKGEuVik7IGEuZyAmJiAoYiA9IGEuZywgYS5nID0gbnVsbCwgYi5hYm9ydCgpLCBiLm5hKCkpOyB9XHJcbmZ1bmN0aW9uIHNjKGEsIGIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIGMgPSBhLmw7XHJcbiAgICAgICAgaWYgKDAgIT0gYy5HICYmIChjLmcgPT0gYSB8fCB5YyhjLmksIGEpKSlcclxuICAgICAgICAgICAgaWYgKGMuSSA9IGEuTiwgIWEuSiAmJiB5YyhjLmksIGEpICYmIDMgPT0gYy5HKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gYy5DYS5nLnBhcnNlKGIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKG0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGQpICYmIDMgPT0gZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gZVswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjLnUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5nLkYgKyAzRTMgPCBhLkYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6YyhjKSwgQWMoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmMoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSigxOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMudGEgPSBlWzFdLCAwIDwgYy50YSAtIGMuVSAmJiAzNzUwMCA+IGVbMl0gJiYgYy5OICYmIDAgPT0gYy5BICYmICFjLnYgJiYgKGMudiA9IEsocShjLmFiLCBjKSwgNkUzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDEgPj0gQ2MoYy5pKSAmJiBjLmthKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmthKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKG0pIHsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLmthID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBRKGMsIDExKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoYS5KIHx8IGMuZyA9PSBhKSAmJiB6YyhjKSwgIXNhKGIpKVxyXG4gICAgICAgICAgICAgICAgZm9yIChlID0gYy5DYS5nLnBhcnNlKGIpLCBiID0gMDsgYiA8IGUubGVuZ3RoOyBiKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IGVbYl07XHJcbiAgICAgICAgICAgICAgICAgICAgYy5VID0gbVswXTtcclxuICAgICAgICAgICAgICAgICAgICBtID0gbVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMiA9PSBjLkcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImNcIiA9PSBtWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLkogPSBtWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5sYSA9IG1bMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG1bM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHIgJiYgKGMubWEgPSByLCBjLmguaW5mbyhcIlZFUj1cIiArIGMubWEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBHID0gbVs0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gRyAmJiAoYy56YSA9IEcsIGMuaC5pbmZvKFwiU1ZFUj1cIiArIGMuemEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBEYSA9IG1bNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IERhICYmIFwibnVtYmVyXCIgPT09IHR5cGVvZiBEYSAmJiAwIDwgRGEgJiYgKGQgPSAxLjUgKiBEYSwgYy5LID0gZCwgYy5oLmluZm8oXCJiYWNrQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNfPVwiICsgZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2EgPSBhLmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRWEgPSBjYS5nID8gY2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIikgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChFYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGQuaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWYuZyAmJiAodyhFYSwgXCJzcGR5XCIpIHx8IHcoRWEsIFwicXVpY1wiKSB8fCB3KEVhLCBcImgyXCIpKSAmJiAoZi5qID0gZi5sLCBmLmcgPSBuZXcgU2V0LCBmLmggJiYgKERjKGYsIGYuaCksIGYuaCA9IG51bGwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGIgPSBjYS5nID8gY2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1TZXNzaW9uLUlkXCIpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGIgJiYgKGQuc2EgPSB4YiwgUihkLkYsIGQuRCwgeGIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLkcgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5qICYmIGMuai54YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYy4kICYmIChjLk8gPSBEYXRlLm5vdygpIC0gYS5GLCBjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiICsgYy5PICsgXCJtc1wiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQub2EgPSBFYyhkLCBkLkggPyBkLmxhIDogbnVsbCwgZC5XKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoLkopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYyhkLmksIGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gaCwgdSA9IGQuSztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ICYmIG4uc2V0VGltZW91dCh1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLkIgJiYgKHBjKG4pLCBsYyhuKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5nID0gaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHYyhkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPCBjLmwubGVuZ3RoICYmIEhjKGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RvcFwiICE9IG1bMF0gJiYgXCJjbG9zZVwiICE9IG1bMF0gfHwgUShjLCA3KTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDMgPT0gYy5HICYmIChcInN0b3BcIiA9PSBtWzBdIHx8IFwiY2xvc2VcIiA9PSBtWzBdID8gXCJzdG9wXCIgPT0gbVswXSA/IFEoYywgNykgOiBJYyhjKSA6IFwibm9vcFwiICE9IG1bMF0gJiYgYy5qICYmIGMuai53YShtKSwgYy5BID0gMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgSSg0KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChtKSB7IH1cclxufVxyXG5mdW5jdGlvbiBKYyhhKSB7IGlmIChhLlIgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBhLlIpXHJcbiAgICByZXR1cm4gYS5SKCk7IGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgYSlcclxuICAgIHJldHVybiBhLnNwbGl0KFwiXCIpOyBpZiAoYmEoYSkpIHtcclxuICAgIGZvciAodmFyIGIgPSBbXSwgYyA9IGEubGVuZ3RoLCBkID0gMDsgZCA8IGM7IGQrKylcclxuICAgICAgICBiLnB1c2goYVtkXSk7XHJcbiAgICByZXR1cm4gYjtcclxufSBiID0gW107IGMgPSAwOyBmb3IgKGQgaW4gYSlcclxuICAgIGJbYysrXSA9IGFbZF07IHJldHVybiBiOyB9XHJcbmZ1bmN0aW9uIEtjKGEsIGIpIHsgaWYgKGEuZm9yRWFjaCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGEuZm9yRWFjaClcclxuICAgIGEuZm9yRWFjaChiLCB2b2lkIDApO1xyXG5lbHNlIGlmIChiYShhKSB8fCBcInN0cmluZ1wiID09PSB0eXBlb2YgYSlcclxuICAgIG5hKGEsIGIsIHZvaWQgMCk7XHJcbmVsc2Uge1xyXG4gICAgaWYgKGEuVCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGEuVClcclxuICAgICAgICB2YXIgYyA9IGEuVCgpO1xyXG4gICAgZWxzZSBpZiAoYS5SICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgYS5SKVxyXG4gICAgICAgIGMgPSB2b2lkIDA7XHJcbiAgICBlbHNlIGlmIChiYShhKSB8fCBcInN0cmluZ1wiID09PSB0eXBlb2YgYSkge1xyXG4gICAgICAgIGMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBkID0gYS5sZW5ndGgsIGUgPSAwOyBlIDwgZDsgZSsrKVxyXG4gICAgICAgICAgICBjLnB1c2goZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgZm9yIChlIGluIGMgPSBbXSwgZCA9IDAsIGEpXHJcbiAgICAgICAgICAgIGNbZCsrXSA9IGU7XHJcbiAgICBkID0gSmMoYSk7XHJcbiAgICBlID0gZC5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGU7IGYrKylcclxuICAgICAgICBiLmNhbGwodm9pZCAwLCBkW2ZdLCBjICYmIGNbZl0sIGEpO1xyXG59IH1cclxuZnVuY3Rpb24gUyhhLCBiKSB7IHRoaXMuaCA9IHt9OyB0aGlzLmcgPSBbXTsgdGhpcy5pID0gMDsgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoOyBpZiAoMSA8IGMpIHtcclxuICAgIGlmIChjICUgMilcclxuICAgICAgICB0aHJvdyBFcnJvcihcIlVuZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzXCIpO1xyXG4gICAgZm9yICh2YXIgZCA9IDA7IGQgPCBjOyBkICs9IDIpXHJcbiAgICAgICAgdGhpcy5zZXQoYXJndW1lbnRzW2RdLCBhcmd1bWVudHNbZCArIDFdKTtcclxufVxyXG5lbHNlIGlmIChhKVxyXG4gICAgaWYgKGEgaW5zdGFuY2VvZiBTKVxyXG4gICAgICAgIGZvciAoYyA9IGEuVCgpLCBkID0gMDsgZCA8IGMubGVuZ3RoOyBkKyspXHJcbiAgICAgICAgICAgIHRoaXMuc2V0KGNbZF0sIGEuZ2V0KGNbZF0pKTtcclxuICAgIGVsc2VcclxuICAgICAgICBmb3IgKGQgaW4gYSlcclxuICAgICAgICAgICAgdGhpcy5zZXQoZCwgYVtkXSk7IH1cclxuayA9IFMucHJvdG90eXBlO1xyXG5rLlIgPSBmdW5jdGlvbiAoKSB7IExjKHRoaXMpOyBmb3IgKHZhciBhID0gW10sIGIgPSAwOyBiIDwgdGhpcy5nLmxlbmd0aDsgYisrKVxyXG4gICAgYS5wdXNoKHRoaXMuaFt0aGlzLmdbYl1dKTsgcmV0dXJuIGE7IH07XHJcbmsuVCA9IGZ1bmN0aW9uICgpIHsgTGModGhpcyk7IHJldHVybiB0aGlzLmcuY29uY2F0KCk7IH07XHJcbmZ1bmN0aW9uIExjKGEpIHsgaWYgKGEuaSAhPSBhLmcubGVuZ3RoKSB7XHJcbiAgICBmb3IgKHZhciBiID0gMCwgYyA9IDA7IGIgPCBhLmcubGVuZ3RoOykge1xyXG4gICAgICAgIHZhciBkID0gYS5nW2JdO1xyXG4gICAgICAgIFQoYS5oLCBkKSAmJiAoYS5nW2MrK10gPSBkKTtcclxuICAgICAgICBiKys7XHJcbiAgICB9XHJcbiAgICBhLmcubGVuZ3RoID0gYztcclxufSBpZiAoYS5pICE9IGEuZy5sZW5ndGgpIHtcclxuICAgIHZhciBlID0ge307XHJcbiAgICBmb3IgKGMgPSBiID0gMDsgYiA8IGEuZy5sZW5ndGg7KVxyXG4gICAgICAgIGQgPSBhLmdbYl0sIFQoZSwgZCkgfHwgKGEuZ1tjKytdID0gZCwgZVtkXSA9IDEpLCBiKys7XHJcbiAgICBhLmcubGVuZ3RoID0gYztcclxufSB9XHJcbmsuZ2V0ID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIFQodGhpcy5oLCBhKSA/IHRoaXMuaFthXSA6IGI7IH07XHJcbmsuc2V0ID0gZnVuY3Rpb24gKGEsIGIpIHsgVCh0aGlzLmgsIGEpIHx8ICh0aGlzLmkrKywgdGhpcy5nLnB1c2goYSkpOyB0aGlzLmhbYV0gPSBiOyB9O1xyXG5rLmZvckVhY2ggPSBmdW5jdGlvbiAoYSwgYikgeyBmb3IgKHZhciBjID0gdGhpcy5UKCksIGQgPSAwOyBkIDwgYy5sZW5ndGg7IGQrKykge1xyXG4gICAgdmFyIGUgPSBjW2RdLCBmID0gdGhpcy5nZXQoZSk7XHJcbiAgICBhLmNhbGwoYiwgZiwgZSwgdGhpcyk7XHJcbn0gfTtcclxuZnVuY3Rpb24gVChhLCBiKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSwgYik7IH1cclxudmFyIE1jID0gL14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO1xyXG5mdW5jdGlvbiBOYyhhLCBiKSB7IGlmIChhKSB7XHJcbiAgICBhID0gYS5zcGxpdChcIiZcIik7XHJcbiAgICBmb3IgKHZhciBjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICB2YXIgZCA9IGFbY10uaW5kZXhPZihcIj1cIiksIGUgPSBudWxsO1xyXG4gICAgICAgIGlmICgwIDw9IGQpIHtcclxuICAgICAgICAgICAgdmFyIGYgPSBhW2NdLnN1YnN0cmluZygwLCBkKTtcclxuICAgICAgICAgICAgZSA9IGFbY10uc3Vic3RyaW5nKGQgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBmID0gYVtjXTtcclxuICAgICAgICBiKGYsIGUgPyBkZWNvZGVVUklDb21wb25lbnQoZS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKSA6IFwiXCIpO1xyXG4gICAgfVxyXG59IH1cclxuZnVuY3Rpb24gVShhLCBiKSB7IHRoaXMuaSA9IHRoaXMucyA9IHRoaXMuaiA9IFwiXCI7IHRoaXMubSA9IG51bGw7IHRoaXMubyA9IHRoaXMubCA9IFwiXCI7IHRoaXMuZyA9ICExOyBpZiAoYSBpbnN0YW5jZW9mIFUpIHtcclxuICAgIHRoaXMuZyA9IHZvaWQgMCAhPT0gYiA/IGIgOiBhLmc7XHJcbiAgICBPYyh0aGlzLCBhLmopO1xyXG4gICAgdGhpcy5zID0gYS5zO1xyXG4gICAgUGModGhpcywgYS5pKTtcclxuICAgIFFjKHRoaXMsIGEubSk7XHJcbiAgICB0aGlzLmwgPSBhLmw7XHJcbiAgICBiID0gYS5oO1xyXG4gICAgdmFyIGMgPSBuZXcgUmM7XHJcbiAgICBjLmkgPSBiLmk7XHJcbiAgICBiLmcgJiYgKGMuZyA9IG5ldyBTKGIuZyksIGMuaCA9IGIuaCk7XHJcbiAgICBTYyh0aGlzLCBjKTtcclxuICAgIHRoaXMubyA9IGEubztcclxufVxyXG5lbHNlXHJcbiAgICBhICYmIChjID0gU3RyaW5nKGEpLm1hdGNoKE1jKSkgPyAodGhpcy5nID0gISFiLCBPYyh0aGlzLCBjWzFdIHx8IFwiXCIsICEwKSwgdGhpcy5zID0gVGMoY1syXSB8fCBcIlwiKSwgUGModGhpcywgY1szXSB8fCBcIlwiLCAhMCksIFFjKHRoaXMsIGNbNF0pLCB0aGlzLmwgPSBUYyhjWzVdIHx8IFwiXCIsICEwKSwgU2ModGhpcywgY1s2XSB8fCBcIlwiLCAhMCksIHRoaXMubyA9IFRjKGNbN10gfHwgXCJcIikpIDogKHRoaXMuZyA9ICEhYiwgdGhpcy5oID0gbmV3IFJjKG51bGwsIHRoaXMuZykpOyB9XHJcblUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyB2YXIgYSA9IFtdLCBiID0gdGhpcy5qOyBiICYmIGEucHVzaChVYyhiLCBWYywgITApLCBcIjpcIik7IHZhciBjID0gdGhpcy5pOyBpZiAoYyB8fCBcImZpbGVcIiA9PSBiKVxyXG4gICAgYS5wdXNoKFwiLy9cIiksIChiID0gdGhpcy5zKSAmJiBhLnB1c2goVWMoYiwgVmMsICEwKSwgXCJAXCIpLCBhLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLCBcIiUkMVwiKSksIGMgPSB0aGlzLm0sIG51bGwgIT0gYyAmJiBhLnB1c2goXCI6XCIsIFN0cmluZyhjKSk7IGlmIChjID0gdGhpcy5sKVxyXG4gICAgdGhpcy5pICYmIFwiL1wiICE9IGMuY2hhckF0KDApICYmIGEucHVzaChcIi9cIiksIGEucHVzaChVYyhjLCBcIi9cIiA9PSBjLmNoYXJBdCgwKSA/IFdjIDogWGMsICEwKSk7IChjID0gdGhpcy5oLnRvU3RyaW5nKCkpICYmIGEucHVzaChcIj9cIiwgYyk7IChjID0gdGhpcy5vKSAmJiBhLnB1c2goXCIjXCIsIFVjKGMsIFljKSk7IHJldHVybiBhLmpvaW4oXCJcIik7IH07XHJcbmZ1bmN0aW9uIE4oYSkgeyByZXR1cm4gbmV3IFUoYSk7IH1cclxuZnVuY3Rpb24gT2MoYSwgYiwgYykgeyBhLmogPSBjID8gVGMoYiwgITApIDogYjsgYS5qICYmIChhLmogPSBhLmoucmVwbGFjZSgvOiQvLCBcIlwiKSk7IH1cclxuZnVuY3Rpb24gUGMoYSwgYiwgYykgeyBhLmkgPSBjID8gVGMoYiwgITApIDogYjsgfVxyXG5mdW5jdGlvbiBRYyhhLCBiKSB7IGlmIChiKSB7XHJcbiAgICBiID0gTnVtYmVyKGIpO1xyXG4gICAgaWYgKGlzTmFOKGIpIHx8IDAgPiBiKVxyXG4gICAgICAgIHRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiICsgYik7XHJcbiAgICBhLm0gPSBiO1xyXG59XHJcbmVsc2VcclxuICAgIGEubSA9IG51bGw7IH1cclxuZnVuY3Rpb24gU2MoYSwgYiwgYykgeyBiIGluc3RhbmNlb2YgUmMgPyAoYS5oID0gYiwgWmMoYS5oLCBhLmcpKSA6IChjIHx8IChiID0gVWMoYiwgJGMpKSwgYS5oID0gbmV3IFJjKGIsIGEuZykpOyB9XHJcbmZ1bmN0aW9uIFIoYSwgYiwgYykgeyBhLmguc2V0KGIsIGMpOyB9XHJcbmZ1bmN0aW9uIGpjKGEpIHsgUihhLCBcInp4XCIsIE1hdGguZmxvb3IoMjE0NzQ4MzY0OCAqIE1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KSArIE1hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCAqIE1hdGgucmFuZG9tKCkpIF4gRGF0ZS5ub3coKSkudG9TdHJpbmcoMzYpKTsgcmV0dXJuIGE7IH1cclxuZnVuY3Rpb24gYWQoYSkgeyByZXR1cm4gYSBpbnN0YW5jZW9mIFUgPyBOKGEpIDogbmV3IFUoYSwgdm9pZCAwKTsgfVxyXG5mdW5jdGlvbiBiZChhLCBiLCBjLCBkKSB7IHZhciBlID0gbmV3IFUobnVsbCwgdm9pZCAwKTsgYSAmJiBPYyhlLCBhKTsgYiAmJiBQYyhlLCBiKTsgYyAmJiBRYyhlLCBjKTsgZCAmJiAoZS5sID0gZCk7IHJldHVybiBlOyB9XHJcbmZ1bmN0aW9uIFRjKGEsIGIpIHsgcmV0dXJuIGEgPyBiID8gZGVjb2RlVVJJKGEucmVwbGFjZSgvJTI1L2csIFwiJTI1MjVcIikpIDogZGVjb2RlVVJJQ29tcG9uZW50KGEpIDogXCJcIjsgfVxyXG5mdW5jdGlvbiBVYyhhLCBiLCBjKSB7IHJldHVybiBcInN0cmluZ1wiID09PSB0eXBlb2YgYSA/IChhID0gZW5jb2RlVVJJKGEpLnJlcGxhY2UoYiwgY2QpLCBjICYmIChhID0gYS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csIFwiJSQxXCIpKSwgYSkgOiBudWxsOyB9XHJcbmZ1bmN0aW9uIGNkKGEpIHsgYSA9IGEuY2hhckNvZGVBdCgwKTsgcmV0dXJuIFwiJVwiICsgKGEgPj4gNCAmIDE1KS50b1N0cmluZygxNikgKyAoYSAmIDE1KS50b1N0cmluZygxNik7IH1cclxudmFyIFZjID0gL1sjXFwvXFw/QF0vZywgWGMgPSAvWyNcXD86XS9nLCBXYyA9IC9bI1xcP10vZywgJGMgPSAvWyNcXD9AXS9nLCBZYyA9IC8jL2c7XHJcbmZ1bmN0aW9uIFJjKGEsIGIpIHsgdGhpcy5oID0gdGhpcy5nID0gbnVsbDsgdGhpcy5pID0gYSB8fCBudWxsOyB0aGlzLmogPSAhIWI7IH1cclxuZnVuY3Rpb24gVihhKSB7IGEuZyB8fCAoYS5nID0gbmV3IFMsIGEuaCA9IDAsIGEuaSAmJiBOYyhhLmksIGZ1bmN0aW9uIChiLCBjKSB7IGEuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpLCBjKTsgfSkpOyB9XHJcbmsgPSBSYy5wcm90b3R5cGU7XHJcbmsuYWRkID0gZnVuY3Rpb24gKGEsIGIpIHsgVih0aGlzKTsgdGhpcy5pID0gbnVsbDsgYSA9IFcodGhpcywgYSk7IHZhciBjID0gdGhpcy5nLmdldChhKTsgYyB8fCB0aGlzLmcuc2V0KGEsIGMgPSBbXSk7IGMucHVzaChiKTsgdGhpcy5oICs9IDE7IHJldHVybiB0aGlzOyB9O1xyXG5mdW5jdGlvbiBkZChhLCBiKSB7IFYoYSk7IGIgPSBXKGEsIGIpOyBUKGEuZy5oLCBiKSAmJiAoYS5pID0gbnVsbCwgYS5oIC09IGEuZy5nZXQoYikubGVuZ3RoLCBhID0gYS5nLCBUKGEuaCwgYikgJiYgKGRlbGV0ZSBhLmhbYl0sIGEuaS0tLCBhLmcubGVuZ3RoID4gMiAqIGEuaSAmJiBMYyhhKSkpOyB9XHJcbmZ1bmN0aW9uIGVkKGEsIGIpIHsgVihhKTsgYiA9IFcoYSwgYik7IHJldHVybiBUKGEuZy5oLCBiKTsgfVxyXG5rLmZvckVhY2ggPSBmdW5jdGlvbiAoYSwgYikgeyBWKHRoaXMpOyB0aGlzLmcuZm9yRWFjaChmdW5jdGlvbiAoYywgZCkgeyBuYShjLCBmdW5jdGlvbiAoZSkgeyBhLmNhbGwoYiwgZSwgZCwgdGhpcyk7IH0sIHRoaXMpOyB9LCB0aGlzKTsgfTtcclxuay5UID0gZnVuY3Rpb24gKCkgeyBWKHRoaXMpOyBmb3IgKHZhciBhID0gdGhpcy5nLlIoKSwgYiA9IHRoaXMuZy5UKCksIGMgPSBbXSwgZCA9IDA7IGQgPCBiLmxlbmd0aDsgZCsrKVxyXG4gICAgZm9yICh2YXIgZSA9IGFbZF0sIGYgPSAwOyBmIDwgZS5sZW5ndGg7IGYrKylcclxuICAgICAgICBjLnB1c2goYltkXSk7IHJldHVybiBjOyB9O1xyXG5rLlIgPSBmdW5jdGlvbiAoYSkgeyBWKHRoaXMpOyB2YXIgYiA9IFtdOyBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGEpXHJcbiAgICBlZCh0aGlzLCBhKSAmJiAoYiA9IHFhKGIsIHRoaXMuZy5nZXQoVyh0aGlzLCBhKSkpKTtcclxuZWxzZSB7XHJcbiAgICBhID0gdGhpcy5nLlIoKTtcclxuICAgIGZvciAodmFyIGMgPSAwOyBjIDwgYS5sZW5ndGg7IGMrKylcclxuICAgICAgICBiID0gcWEoYiwgYVtjXSk7XHJcbn0gcmV0dXJuIGI7IH07XHJcbmsuc2V0ID0gZnVuY3Rpb24gKGEsIGIpIHsgVih0aGlzKTsgdGhpcy5pID0gbnVsbDsgYSA9IFcodGhpcywgYSk7IGVkKHRoaXMsIGEpICYmICh0aGlzLmggLT0gdGhpcy5nLmdldChhKS5sZW5ndGgpOyB0aGlzLmcuc2V0KGEsIFtiXSk7IHRoaXMuaCArPSAxOyByZXR1cm4gdGhpczsgfTtcclxuay5nZXQgPSBmdW5jdGlvbiAoYSwgYikgeyBpZiAoIWEpXHJcbiAgICByZXR1cm4gYjsgYSA9IHRoaXMuUihhKTsgcmV0dXJuIDAgPCBhLmxlbmd0aCA/IFN0cmluZyhhWzBdKSA6IGI7IH07XHJcbmZ1bmN0aW9uIG1jKGEsIGIsIGMpIHsgZGQoYSwgYik7IDAgPCBjLmxlbmd0aCAmJiAoYS5pID0gbnVsbCwgYS5nLnNldChXKGEsIGIpLCByYShjKSksIGEuaCArPSBjLmxlbmd0aCk7IH1cclxuay50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsgaWYgKHRoaXMuaSlcclxuICAgIHJldHVybiB0aGlzLmk7IGlmICghdGhpcy5nKVxyXG4gICAgcmV0dXJuIFwiXCI7IGZvciAodmFyIGEgPSBbXSwgYiA9IHRoaXMuZy5UKCksIGMgPSAwOyBjIDwgYi5sZW5ndGg7IGMrKykge1xyXG4gICAgdmFyIGQgPSBiW2NdLCBlID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7XHJcbiAgICBkID0gdGhpcy5SKGQpO1xyXG4gICAgZm9yICh2YXIgZiA9IDA7IGYgPCBkLmxlbmd0aDsgZisrKSB7XHJcbiAgICAgICAgdmFyIGggPSBlO1xyXG4gICAgICAgIFwiXCIgIT09IGRbZl0gJiYgKGggKz0gXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7XHJcbiAgICAgICAgYS5wdXNoKGgpO1xyXG4gICAgfVxyXG59IHJldHVybiB0aGlzLmkgPSBhLmpvaW4oXCImXCIpOyB9O1xyXG5mdW5jdGlvbiBXKGEsIGIpIHsgYiA9IFN0cmluZyhiKTsgYS5qICYmIChiID0gYi50b0xvd2VyQ2FzZSgpKTsgcmV0dXJuIGI7IH1cclxuZnVuY3Rpb24gWmMoYSwgYikgeyBiICYmICFhLmogJiYgKFYoYSksIGEuaSA9IG51bGwsIGEuZy5mb3JFYWNoKGZ1bmN0aW9uIChjLCBkKSB7IHZhciBlID0gZC50b0xvd2VyQ2FzZSgpOyBkICE9IGUgJiYgKGRkKHRoaXMsIGQpLCBtYyh0aGlzLCBlLCBjKSk7IH0sIGEpKTsgYS5qID0gYjsgfVxyXG52YXIgZmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBmZChhLCBiKSB7XHJcbiAgICAgICAgdGhpcy5oID0gYTtcclxuICAgICAgICB0aGlzLmcgPSBiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZkO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBnZChhKSB7IHRoaXMubCA9IGEgfHwgaGQ7IGwuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nID8gKGEgPSBsLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpLCBhID0gMCA8IGEubGVuZ3RoICYmIChcImhxXCIgPT0gYVswXS5uZXh0SG9wUHJvdG9jb2wgfHwgXCJoMlwiID09IGFbMF0ubmV4dEhvcFByb3RvY29sKSkgOiBhID0gISEobC5nICYmIGwuZy5FYSAmJiBsLmcuRWEoKSAmJiBsLmcuRWEoKS5aYik7IHRoaXMuaiA9IGEgPyB0aGlzLmwgOiAxOyB0aGlzLmcgPSBudWxsOyAxIDwgdGhpcy5qICYmICh0aGlzLmcgPSBuZXcgU2V0KTsgdGhpcy5oID0gbnVsbDsgdGhpcy5pID0gW107IH1cclxudmFyIGhkID0gMTA7XHJcbmZ1bmN0aW9uIGlkKGEpIHsgcmV0dXJuIGEuaCA/ICEwIDogYS5nID8gYS5nLnNpemUgPj0gYS5qIDogITE7IH1cclxuZnVuY3Rpb24gQ2MoYSkgeyByZXR1cm4gYS5oID8gMSA6IGEuZyA/IGEuZy5zaXplIDogMDsgfVxyXG5mdW5jdGlvbiB5YyhhLCBiKSB7IHJldHVybiBhLmggPyBhLmggPT0gYiA6IGEuZyA/IGEuZy5oYXMoYikgOiAhMTsgfVxyXG5mdW5jdGlvbiBEYyhhLCBiKSB7IGEuZyA/IGEuZy5hZGQoYikgOiBhLmggPSBiOyB9XHJcbmZ1bmN0aW9uIEZjKGEsIGIpIHsgYS5oICYmIGEuaCA9PSBiID8gYS5oID0gbnVsbCA6IGEuZyAmJiBhLmcuaGFzKGIpICYmIGEuZy5kZWxldGUoYik7IH1cclxuZ2QucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBlXzEsIF9hO1xyXG4gICAgdGhpcy5pID0gamQodGhpcyk7XHJcbiAgICBpZiAodGhpcy5oKVxyXG4gICAgICAgIHRoaXMuaC5jYW5jZWwoKSwgdGhpcy5oID0gbnVsbDtcclxuICAgIGVsc2UgaWYgKHRoaXMuZyAmJiAwICE9PSB0aGlzLmcuc2l6ZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gX192YWx1ZXModGhpcy5nLnZhbHVlcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBfYy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGEuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZy5jbGVhcigpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBqZChhKSB7XHJcbiAgICB2YXIgZV8yLCBfYTtcclxuICAgIGlmIChudWxsICE9IGEuaClcclxuICAgICAgICByZXR1cm4gYS5pLmNvbmNhdChhLmguRCk7XHJcbiAgICBpZiAobnVsbCAhPSBhLmcgJiYgMCAhPT0gYS5nLnNpemUpIHtcclxuICAgICAgICB2YXIgYiA9IGEuaTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKGEuZy52YWx1ZXMoKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gX2MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBiID0gYi5jb25jYXQoYy5EKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmEoYS5pKTtcclxufVxyXG5mdW5jdGlvbiBrZCgpIHsgfVxyXG5rZC5wcm90b3R5cGUuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGwuSlNPTi5zdHJpbmdpZnkoYSwgdm9pZCAwKTsgfTtcclxua2QucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGwuSlNPTi5wYXJzZShhLCB2b2lkIDApOyB9O1xyXG5mdW5jdGlvbiBsZCgpIHsgdGhpcy5nID0gbmV3IGtkOyB9XHJcbmZ1bmN0aW9uIG1kKGEsIGIsIGMpIHsgdmFyIGQgPSBjIHx8IFwiXCI7IHRyeSB7XHJcbiAgICBLYyhhLCBmdW5jdGlvbiAoZSwgZikgeyB2YXIgaCA9IGU7IHAoZSkgJiYgKGggPSByYihlKSk7IGIucHVzaChkICsgZiArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGgpKTsgfSk7XHJcbn1cclxuY2F0Y2ggKGUpIHtcclxuICAgIHRocm93IGIucHVzaChkICsgXCJ0eXBlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksIGU7XHJcbn0gfVxyXG5mdW5jdGlvbiBuZChhLCBiKSB7IHZhciBjID0gbmV3IE1iOyBpZiAobC5JbWFnZSkge1xyXG4gICAgdmFyIGRfMSA9IG5ldyBJbWFnZTtcclxuICAgIGRfMS5vbmxvYWQgPSBqYShvZCwgYywgZF8xLCBcIlRlc3RMb2FkSW1hZ2U6IGxvYWRlZFwiLCAhMCwgYik7XHJcbiAgICBkXzEub25lcnJvciA9IGphKG9kLCBjLCBkXzEsIFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwgITEsIGIpO1xyXG4gICAgZF8xLm9uYWJvcnQgPSBqYShvZCwgYywgZF8xLCBcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsICExLCBiKTtcclxuICAgIGRfMS5vbnRpbWVvdXQgPSBqYShvZCwgYywgZF8xLCBcIlRlc3RMb2FkSW1hZ2U6IHRpbWVvdXRcIiwgITEsIGIpO1xyXG4gICAgbC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgaWYgKGRfMS5vbnRpbWVvdXQpXHJcbiAgICAgICAgZF8xLm9udGltZW91dCgpOyB9LCAxRTQpO1xyXG4gICAgZF8xLnNyYyA9IGE7XHJcbn1cclxuZWxzZVxyXG4gICAgYighMSk7IH1cclxuZnVuY3Rpb24gb2QoYSwgYiwgYywgZCwgZSkgeyB0cnkge1xyXG4gICAgYi5vbmxvYWQgPSBudWxsLCBiLm9uZXJyb3IgPSBudWxsLCBiLm9uYWJvcnQgPSBudWxsLCBiLm9udGltZW91dCA9IG51bGwsIGUoZCk7XHJcbn1cclxuY2F0Y2ggKGYpIHsgfSB9XHJcbmZ1bmN0aW9uIHBkKGEpIHsgdGhpcy5sID0gYS4kYiB8fCBudWxsOyB0aGlzLmogPSBhLmliIHx8ICExOyB9XHJcbnQocGQsIFliKTtcclxucGQucHJvdG90eXBlLmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgcWQodGhpcy5sLCB0aGlzLmopOyB9O1xyXG5wZC5wcm90b3R5cGUuaSA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBhOyB9OyB9KHt9KTtcclxuZnVuY3Rpb24gcWQoYSwgYikgeyBDLmNhbGwodGhpcyk7IHRoaXMuRCA9IGE7IHRoaXMudSA9IGI7IHRoaXMubSA9IHZvaWQgMDsgdGhpcy5yZWFkeVN0YXRlID0gcmQ7IHRoaXMuc3RhdHVzID0gMDsgdGhpcy5yZXNwb25zZVR5cGUgPSB0aGlzLnJlc3BvbnNlVGV4dCA9IHRoaXMucmVzcG9uc2UgPSB0aGlzLnN0YXR1c1RleHQgPSBcIlwiOyB0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7IHRoaXMudiA9IG5ldyBIZWFkZXJzOyB0aGlzLmggPSBudWxsOyB0aGlzLkMgPSBcIkdFVFwiOyB0aGlzLkIgPSBcIlwiOyB0aGlzLmcgPSAhMTsgdGhpcy5BID0gdGhpcy5qID0gdGhpcy5sID0gbnVsbDsgfVxyXG50KHFkLCBDKTtcclxudmFyIHJkID0gMDtcclxuayA9IHFkLnByb3RvdHlwZTtcclxuay5vcGVuID0gZnVuY3Rpb24gKGEsIGIpIHsgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPSByZClcclxuICAgIHRocm93IHRoaXMuYWJvcnQoKSwgRXJyb3IoXCJFcnJvciByZW9wZW5pbmcgYSBjb25uZWN0aW9uXCIpOyB0aGlzLkMgPSBhOyB0aGlzLkIgPSBiOyB0aGlzLnJlYWR5U3RhdGUgPSAxOyBzZCh0aGlzKTsgfTtcclxuay5zZW5kID0gZnVuY3Rpb24gKGEpIHsgaWYgKDEgIT0gdGhpcy5yZWFkeVN0YXRlKVxyXG4gICAgdGhyb3cgdGhpcy5hYm9ydCgpLCBFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTsgdGhpcy5nID0gITA7IHZhciBiID0geyBoZWFkZXJzOiB0aGlzLnYsIG1ldGhvZDogdGhpcy5DLCBjcmVkZW50aWFsczogdGhpcy5tLCBjYWNoZTogdm9pZCAwIH07IGEgJiYgKGIuYm9keSA9IGEpOyAodGhpcy5EIHx8IGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQiwgYikpLnRoZW4odGhpcy5WYS5iaW5kKHRoaXMpLCB0aGlzLmhhLmJpbmQodGhpcykpOyB9O1xyXG5rLmFib3J0ID0gZnVuY3Rpb24gKCkgeyB0aGlzLnJlc3BvbnNlID0gdGhpcy5yZXNwb25zZVRleHQgPSBcIlwiOyB0aGlzLnYgPSBuZXcgSGVhZGVyczsgdGhpcy5zdGF0dXMgPSAwOyB0aGlzLmogJiYgdGhpcy5qLmNhbmNlbChcIlJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpOyAxIDw9IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLmcgJiYgNCAhPSB0aGlzLnJlYWR5U3RhdGUgJiYgKHRoaXMuZyA9ICExLCB0ZCh0aGlzKSk7IHRoaXMucmVhZHlTdGF0ZSA9IHJkOyB9O1xyXG5rLlZhID0gZnVuY3Rpb24gKGEpIHtcclxuICAgIGlmICh0aGlzLmcgJiYgKHRoaXMubCA9IGEsIHRoaXMuaCB8fCAodGhpcy5zdGF0dXMgPSB0aGlzLmwuc3RhdHVzLCB0aGlzLnN0YXR1c1RleHQgPSB0aGlzLmwuc3RhdHVzVGV4dCwgdGhpcy5oID0gYS5oZWFkZXJzLCB0aGlzLnJlYWR5U3RhdGUgPSAyLCBzZCh0aGlzKSksIHRoaXMuZyAmJiAodGhpcy5yZWFkeVN0YXRlID0gMywgc2QodGhpcyksIHRoaXMuZykpKVxyXG4gICAgICAgIGlmIChcImFycmF5YnVmZmVyXCIgPT09IHRoaXMucmVzcG9uc2VUeXBlKVxyXG4gICAgICAgICAgICBhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLlRhLmJpbmQodGhpcyksIHRoaXMuaGEuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgZWxzZSBpZiAoXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIGwuUmVhZGFibGVTdHJlYW0gJiYgXCJib2R5XCIgaW4gYSkge1xyXG4gICAgICAgICAgICB0aGlzLmogPSBhLmJvZHkuZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3BvbnNlVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigncmVzcG9uc2VUeXBlIG11c3QgYmUgZW1wdHkgZm9yIFwic3RyZWFtQmluYXJ5Q2h1bmtzXCIgbW9kZSByZXNwb25zZXMuJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlID1cclxuICAgICAgICAgICAgICAgICAgICBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlID0gdGhpcy5yZXNwb25zZVRleHQgPSBcIlwiLCB0aGlzLkEgPSBuZXcgVGV4dERlY29kZXI7XHJcbiAgICAgICAgICAgIHVkKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGEudGV4dCgpLnRoZW4odGhpcy5VYS5iaW5kKHRoaXMpLCB0aGlzLmhhLmJpbmQodGhpcykpO1xyXG59O1xyXG5mdW5jdGlvbiB1ZChhKSB7IGEuai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7IH1cclxuay5TYSA9IGZ1bmN0aW9uIChhKSB7IGlmICh0aGlzLmcpIHtcclxuICAgIGlmICh0aGlzLnUgJiYgYS52YWx1ZSlcclxuICAgICAgICB0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7XHJcbiAgICBlbHNlIGlmICghdGhpcy51KSB7XHJcbiAgICAgICAgdmFyIGIgPSBhLnZhbHVlID8gYS52YWx1ZSA6IG5ldyBVaW50OEFycmF5KDApO1xyXG4gICAgICAgIGlmIChiID0gdGhpcy5BLmRlY29kZShiLCB7IHN0cmVhbTogIWEuZG9uZSB9KSlcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZSA9IHRoaXMucmVzcG9uc2VUZXh0ICs9IGI7XHJcbiAgICB9XHJcbiAgICBhLmRvbmUgPyB0ZCh0aGlzKSA6IHNkKHRoaXMpO1xyXG4gICAgMyA9PSB0aGlzLnJlYWR5U3RhdGUgJiYgdWQodGhpcyk7XHJcbn0gfTtcclxuay5VYSA9IGZ1bmN0aW9uIChhKSB7IHRoaXMuZyAmJiAodGhpcy5yZXNwb25zZSA9IHRoaXMucmVzcG9uc2VUZXh0ID0gYSwgdGQodGhpcykpOyB9O1xyXG5rLlRhID0gZnVuY3Rpb24gKGEpIHsgdGhpcy5nICYmICh0aGlzLnJlc3BvbnNlID0gYSwgdGQodGhpcykpOyB9O1xyXG5rLmhhID0gZnVuY3Rpb24gKCkgeyB0aGlzLmcgJiYgdGQodGhpcyk7IH07XHJcbmZ1bmN0aW9uIHRkKGEpIHsgYS5yZWFkeVN0YXRlID0gNDsgYS5sID0gbnVsbDsgYS5qID0gbnVsbDsgYS5BID0gbnVsbDsgc2QoYSk7IH1cclxuay5zZXRSZXF1ZXN0SGVhZGVyID0gZnVuY3Rpb24gKGEsIGIpIHsgdGhpcy52LmFwcGVuZChhLCBiKTsgfTtcclxuay5nZXRSZXNwb25zZUhlYWRlciA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLmggPyB0aGlzLmguZ2V0KGEudG9Mb3dlckNhc2UoKSkgfHwgXCJcIiA6IFwiXCI7IH07XHJcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzID0gZnVuY3Rpb24gKCkgeyBpZiAoIXRoaXMuaClcclxuICAgIHJldHVybiBcIlwiOyB2YXIgYSA9IFtdLCBiID0gdGhpcy5oLmVudHJpZXMoKTsgZm9yICh2YXIgYyA9IGIubmV4dCgpOyAhYy5kb25lOylcclxuICAgIGMgPSBjLnZhbHVlLCBhLnB1c2goY1swXSArIFwiOiBcIiArIGNbMV0pLCBjID0gYi5uZXh0KCk7IHJldHVybiBhLmpvaW4oXCJcXHJcXG5cIik7IH07XHJcbmZ1bmN0aW9uIHNkKGEpIHsgYS5vbnJlYWR5c3RhdGVjaGFuZ2UgJiYgYS5vbnJlYWR5c3RhdGVjaGFuZ2UuY2FsbChhKTsgfVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLCBcIndpdGhDcmVkZW50aWFsc1wiLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJpbmNsdWRlXCIgPT09IHRoaXMubTsgfSwgc2V0OiBmdW5jdGlvbiAoYSkgeyB0aGlzLm0gPSBhID8gXCJpbmNsdWRlXCIgOiBcInNhbWUtb3JpZ2luXCI7IH0gfSk7XHJcbnZhciB2ZCA9IGwuSlNPTi5wYXJzZTtcclxuZnVuY3Rpb24gWChhKSB7IEMuY2FsbCh0aGlzKTsgdGhpcy5oZWFkZXJzID0gbmV3IFM7IHRoaXMudSA9IGEgfHwgbnVsbDsgdGhpcy5oID0gITE7IHRoaXMuQyA9IHRoaXMuZyA9IG51bGw7IHRoaXMuSCA9IFwiXCI7IHRoaXMubSA9IDA7IHRoaXMuaiA9IFwiXCI7IHRoaXMubCA9IHRoaXMuRiA9IHRoaXMudiA9IHRoaXMuRCA9ICExOyB0aGlzLkIgPSAwOyB0aGlzLkEgPSBudWxsOyB0aGlzLkogPSB3ZDsgdGhpcy5LID0gdGhpcy5MID0gITE7IH1cclxudChYLCBDKTtcclxudmFyIHdkID0gXCJcIiwgeGQgPSAvXmh0dHBzPyQvaSwgeWQgPSBbXCJQT1NUXCIsIFwiUFVUXCJdO1xyXG5rID0gWC5wcm90b3R5cGU7XHJcbmsuZWEgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xyXG4gICAgaWYgKHRoaXMuZylcclxuICAgICAgICB0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIiArIHRoaXMuSCArIFwiOyBuZXdVcmk9XCIgKyBhKTtcclxuICAgIGIgPSBiID8gYi50b1VwcGVyQ2FzZSgpIDogXCJHRVRcIjtcclxuICAgIHRoaXMuSCA9IGE7XHJcbiAgICB0aGlzLmogPSBcIlwiO1xyXG4gICAgdGhpcy5tID0gMDtcclxuICAgIHRoaXMuRCA9ICExO1xyXG4gICAgdGhpcy5oID0gITA7XHJcbiAgICB0aGlzLmcgPSB0aGlzLnUgPyB0aGlzLnUuZygpIDogY2MuZygpO1xyXG4gICAgdGhpcy5DID0gdGhpcy51ID8gWmIodGhpcy51KSA6IFpiKGNjKTtcclxuICAgIHRoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBxKHRoaXMuRmEsIHRoaXMpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB0aGlzLkYgPSAhMCwgdGhpcy5nLm9wZW4oYiwgU3RyaW5nKGEpLCAhMCksIHRoaXMuRiA9ICExO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGYpIHtcclxuICAgICAgICB6ZCh0aGlzLCBmKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBhID0gYyB8fCBcIlwiO1xyXG4gICAgdmFyIGUgPSBuZXcgUyh0aGlzLmhlYWRlcnMpO1xyXG4gICAgZCAmJiBLYyhkLCBmdW5jdGlvbiAoZiwgaCkgeyBlLnNldChoLCBmKTsgfSk7XHJcbiAgICBkID0gb2EoZS5UKCkpO1xyXG4gICAgYyA9IGwuRm9ybURhdGEgJiYgYSBpbnN0YW5jZW9mIGwuRm9ybURhdGE7XHJcbiAgICAhKDAgPD0gbWEoeWQsIGIpKSB8fCBkIHx8IGMgfHwgZS5zZXQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKTtcclxuICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZiwgaCkgeyB0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihoLCBmKTsgfSwgdGhpcyk7XHJcbiAgICB0aGlzLkogJiYgKHRoaXMuZy5yZXNwb25zZVR5cGUgPSB0aGlzLkopO1xyXG4gICAgXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB0aGlzLmcgJiYgdGhpcy5nLndpdGhDcmVkZW50aWFscyAhPT0gdGhpcy5MICYmICh0aGlzLmcud2l0aENyZWRlbnRpYWxzID0gdGhpcy5MKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgQWQodGhpcyksIDAgPCB0aGlzLkIgJiYgKCh0aGlzLksgPSBCZCh0aGlzLmcpKSA/ICh0aGlzLmcudGltZW91dCA9IHRoaXMuQiwgdGhpcy5nLm9udGltZW91dCA9IHEodGhpcy5wYSwgdGhpcykpIDogdGhpcy5BID0gR2IodGhpcy5wYSwgdGhpcy5CLCB0aGlzKSksIHRoaXMudiA9ICEwLCB0aGlzLmcuc2VuZChhKSwgdGhpcy52ID0gITE7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZikge1xyXG4gICAgICAgIHpkKHRoaXMsIGYpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBCZChhKSB7IHJldHVybiB5ICYmIFJhKCkgJiYgXCJudW1iZXJcIiA9PT0gdHlwZW9mIGEudGltZW91dCAmJiB2b2lkIDAgIT09IGEub250aW1lb3V0OyB9XHJcbmZ1bmN0aW9uIHBhKGEpIHsgcmV0dXJuIFwiY29udGVudC10eXBlXCIgPT0gYS50b0xvd2VyQ2FzZSgpOyB9XHJcbmsucGEgPSBmdW5jdGlvbiAoKSB7IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGdvb2cgJiYgdGhpcy5nICYmICh0aGlzLmogPSBcIlRpbWVkIG91dCBhZnRlciBcIiArIHRoaXMuQiArIFwibXMsIGFib3J0aW5nXCIsIHRoaXMubSA9IDgsIEQodGhpcywgXCJ0aW1lb3V0XCIpLCB0aGlzLmFib3J0KDgpKTsgfTtcclxuZnVuY3Rpb24gemQoYSwgYikgeyBhLmggPSAhMTsgYS5nICYmIChhLmwgPSAhMCwgYS5nLmFib3J0KCksIGEubCA9ICExKTsgYS5qID0gYjsgYS5tID0gNTsgQ2QoYSk7IERkKGEpOyB9XHJcbmZ1bmN0aW9uIENkKGEpIHsgYS5EIHx8IChhLkQgPSAhMCwgRChhLCBcImNvbXBsZXRlXCIpLCBEKGEsIFwiZXJyb3JcIikpOyB9XHJcbmsuYWJvcnQgPSBmdW5jdGlvbiAoYSkgeyB0aGlzLmcgJiYgdGhpcy5oICYmICh0aGlzLmggPSAhMSwgdGhpcy5sID0gITAsIHRoaXMuZy5hYm9ydCgpLCB0aGlzLmwgPSAhMSwgdGhpcy5tID0gYSB8fCA3LCBEKHRoaXMsIFwiY29tcGxldGVcIiksIEQodGhpcywgXCJhYm9ydFwiKSwgRGQodGhpcykpOyB9O1xyXG5rLk0gPSBmdW5jdGlvbiAoKSB7IHRoaXMuZyAmJiAodGhpcy5oICYmICh0aGlzLmggPSAhMSwgdGhpcy5sID0gITAsIHRoaXMuZy5hYm9ydCgpLCB0aGlzLmwgPSAhMSksIERkKHRoaXMsICEwKSk7IFguWi5NLmNhbGwodGhpcyk7IH07XHJcbmsuRmEgPSBmdW5jdGlvbiAoKSB7IHRoaXMucyB8fCAodGhpcy5GIHx8IHRoaXMudiB8fCB0aGlzLmwgPyBFZCh0aGlzKSA6IHRoaXMuY2IoKSk7IH07XHJcbmsuY2IgPSBmdW5jdGlvbiAoKSB7IEVkKHRoaXMpOyB9O1xyXG5mdW5jdGlvbiBFZChhKSB7XHJcbiAgICBpZiAoYS5oICYmIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGdvb2cgJiYgKCFhLkNbMV0gfHwgNCAhPSBPKGEpIHx8IDIgIT0gYS5iYSgpKSlcclxuICAgICAgICBpZiAoYS52ICYmIDQgPT0gTyhhKSlcclxuICAgICAgICAgICAgR2IoYS5GYSwgMCwgYSk7XHJcbiAgICAgICAgZWxzZSBpZiAoRChhLCBcInJlYWR5c3RhdGVjaGFuZ2VcIiksIDQgPT0gTyhhKSkge1xyXG4gICAgICAgICAgICBhLmggPSAhMTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gYS5iYSgpO1xyXG4gICAgICAgICAgICAgICAgYTogc3dpdGNoIChuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDE6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDY6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjIzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9ICEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGIgPSAhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoYyA9IGIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPSAwID09PSBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gU3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSAmJiBsLnNlbGYgJiYgbC5zZWxmLmxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGwuc2VsZi5sb2NhdGlvbi5wcm90b2NvbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAheGQudGVzdChlID8gZS50b0xvd2VyQ2FzZSgpIDogXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGMpXHJcbiAgICAgICAgICAgICAgICAgICAgRChhLCBcImNvbXBsZXRlXCIpLCBEKGEsIFwic3VjY2Vzc1wiKTtcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGEubSA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSAyIDwgTyhhKSA/IGEuZy5zdGF0dXNUZXh0IDogXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKHUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGEuaiA9IGggKyBcIiBbXCIgKyBhLmJhKCkgKyBcIl1cIjtcclxuICAgICAgICAgICAgICAgICAgICBDZChhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIERkKGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG59XHJcbmZ1bmN0aW9uIERkKGEsIGIpIHsgaWYgKGEuZykge1xyXG4gICAgQWQoYSk7XHJcbiAgICB2YXIgYyA9IGEuZywgZCA9IGEuQ1swXSA/IGFhIDogbnVsbDtcclxuICAgIGEuZyA9IG51bGw7XHJcbiAgICBhLkMgPSBudWxsO1xyXG4gICAgYiB8fCBEKGEsIFwicmVhZHlcIik7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGMub25yZWFkeXN0YXRlY2hhbmdlID0gZDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxufSB9XHJcbmZ1bmN0aW9uIEFkKGEpIHsgYS5nICYmIGEuSyAmJiAoYS5nLm9udGltZW91dCA9IG51bGwpOyBhLkEgJiYgKGwuY2xlYXJUaW1lb3V0KGEuQSksIGEuQSA9IG51bGwpOyB9XHJcbmZ1bmN0aW9uIE8oYSkgeyByZXR1cm4gYS5nID8gYS5nLnJlYWR5U3RhdGUgOiAwOyB9XHJcbmsuYmEgPSBmdW5jdGlvbiAoKSB7IHRyeSB7XHJcbiAgICByZXR1cm4gMiA8IE8odGhpcykgPyB0aGlzLmcuc3RhdHVzIDogLTE7XHJcbn1cclxuY2F0Y2ggKGEpIHtcclxuICAgIHJldHVybiAtMTtcclxufSB9O1xyXG5rLmdhID0gZnVuY3Rpb24gKCkgeyB0cnkge1xyXG4gICAgcmV0dXJuIHRoaXMuZyA/IHRoaXMuZy5yZXNwb25zZVRleHQgOiBcIlwiO1xyXG59XHJcbmNhdGNoIChhKSB7XHJcbiAgICByZXR1cm4gXCJcIjtcclxufSB9O1xyXG5rLlFhID0gZnVuY3Rpb24gKGEpIHsgaWYgKHRoaXMuZykge1xyXG4gICAgdmFyIGIgPSB0aGlzLmcucmVzcG9uc2VUZXh0O1xyXG4gICAgYSAmJiAwID09IGIuaW5kZXhPZihhKSAmJiAoYiA9IGIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7XHJcbiAgICByZXR1cm4gdmQoYik7XHJcbn0gfTtcclxuZnVuY3Rpb24gb2MoYSkgeyB0cnkge1xyXG4gICAgaWYgKCFhLmcpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoXCJyZXNwb25zZVwiIGluIGEuZylcclxuICAgICAgICByZXR1cm4gYS5nLnJlc3BvbnNlO1xyXG4gICAgc3dpdGNoIChhLkopIHtcclxuICAgICAgICBjYXNlIHdkOlxyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHJldHVybiBhLmcucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgIGNhc2UgXCJhcnJheWJ1ZmZlclwiOiBpZiAoXCJtb3pSZXNwb25zZUFycmF5QnVmZmVyXCIgaW4gYS5nKVxyXG4gICAgICAgICAgICByZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5jYXRjaCAoYikge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbn0gfVxyXG5rLkRhID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5tOyB9O1xyXG5rLkxhID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHRoaXMuaiA/IHRoaXMuaiA6IFN0cmluZyh0aGlzLmopOyB9O1xyXG5mdW5jdGlvbiBGZChhKSB7IHZhciBiID0gXCJcIjsgeGEoYSwgZnVuY3Rpb24gKGMsIGQpIHsgYiArPSBkOyBiICs9IFwiOlwiOyBiICs9IGM7IGIgKz0gXCJcXHJcXG5cIjsgfSk7IHJldHVybiBiOyB9XHJcbmZ1bmN0aW9uIEdkKGEsIGIsIGMpIHsgYToge1xyXG4gICAgZm9yIChkIGluIGMpIHtcclxuICAgICAgICB2YXIgZCA9ICExO1xyXG4gICAgICAgIGJyZWFrIGE7XHJcbiAgICB9XHJcbiAgICBkID0gITA7XHJcbn0gZCB8fCAoYyA9IEZkKGMpLCBcInN0cmluZ1wiID09PSB0eXBlb2YgYSA/IChudWxsICE9IGMgJiYgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkpIDogUihhLCBiLCBjKSk7IH1cclxuZnVuY3Rpb24gSGQoYSwgYiwgYykgeyByZXR1cm4gYyAmJiBjLmludGVybmFsQ2hhbm5lbFBhcmFtcyA/IGMuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdIHx8IGIgOiBiOyB9XHJcbmZ1bmN0aW9uIElkKGEpIHtcclxuICAgIHRoaXMuemEgPSAwO1xyXG4gICAgdGhpcy5sID0gW107XHJcbiAgICB0aGlzLmggPSBuZXcgTWI7XHJcbiAgICB0aGlzLmxhID0gdGhpcy5vYSA9IHRoaXMuRiA9IHRoaXMuVyA9IHRoaXMuZyA9IHRoaXMuc2EgPSB0aGlzLkQgPSB0aGlzLmFhID0gdGhpcy5vID0gdGhpcy5QID0gdGhpcy5zID0gbnVsbDtcclxuICAgIHRoaXMuWmEgPSB0aGlzLlYgPSAwO1xyXG4gICAgdGhpcy5YYSA9IEhkKFwiZmFpbEZhc3RcIiwgITEsIGEpO1xyXG4gICAgdGhpcy5OID0gdGhpcy52ID0gdGhpcy51ID0gdGhpcy5tID0gdGhpcy5qID0gbnVsbDtcclxuICAgIHRoaXMuWCA9ICEwO1xyXG4gICAgdGhpcy5JID0gdGhpcy50YSA9IHRoaXMuVSA9IC0xO1xyXG4gICAgdGhpcy5ZID0gdGhpcy5BID0gdGhpcy5DID0gMDtcclxuICAgIHRoaXMuUGEgPSBIZChcImJhc2VSZXRyeURlbGF5TXNcIiwgNUUzLCBhKTtcclxuICAgIHRoaXMuJGEgPSBIZChcInJldHJ5RGVsYXlTZWVkTXNcIiwgMUU0LCBhKTtcclxuICAgIHRoaXMuWWEgPSBIZChcImZvcndhcmRDaGFubmVsTWF4UmV0cmllc1wiLCAyLCBhKTtcclxuICAgIHRoaXMucmEgPSBIZChcImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNc1wiLCAyRTQsIGEpO1xyXG4gICAgdGhpcy5xYSA9IGEgJiYgYS54bWxIdHRwRmFjdG9yeSB8fCB2b2lkIDA7XHJcbiAgICB0aGlzLkJhID0gYSAmJiBhLlliIHx8ICExO1xyXG4gICAgdGhpcy5LID0gdm9pZCAwO1xyXG4gICAgdGhpcy5IID0gYSAmJiBhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHIgfHwgITE7XHJcbiAgICB0aGlzLkogPSBcIlwiO1xyXG4gICAgdGhpcy5pID0gbmV3IGdkKGEgJiYgYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTtcclxuICAgIHRoaXMuQ2EgPSBuZXcgbGQ7XHJcbiAgICB0aGlzLmphID0gYSAmJiBhLmZhc3RIYW5kc2hha2UgfHwgITE7XHJcbiAgICB0aGlzLlJhID0gYSAmJiBhLldiIHx8ICExO1xyXG4gICAgYSAmJiBhLkFhICYmIHRoaXMuaC5BYSgpO1xyXG4gICAgYSAmJiBhLmZvcmNlTG9uZ1BvbGxpbmcgJiYgKHRoaXMuWCA9ICExKTtcclxuICAgIHRoaXMuJCA9ICF0aGlzLmphICYmIHRoaXMuWCAmJiBhICYmIGEuZGV0ZWN0QnVmZmVyaW5nUHJveHkgfHwgITE7XHJcbiAgICB0aGlzLmthID0gdm9pZCAwO1xyXG4gICAgdGhpcy5PID0gMDtcclxuICAgIHRoaXMuTCA9ICExO1xyXG4gICAgdGhpcy5CID0gbnVsbDtcclxuICAgIHRoaXMuV2EgPSAhYSB8fCAhMSAhPT0gYS5YYjtcclxufVxyXG5rID0gSWQucHJvdG90eXBlO1xyXG5rLm1hID0gODtcclxuay5HID0gMTtcclxuZnVuY3Rpb24gSWMoYSkgeyBKZChhKTsgaWYgKDMgPT0gYS5HKSB7XHJcbiAgICB2YXIgYiA9IGEuVisrLCBjID0gTihhLkYpO1xyXG4gICAgUihjLCBcIlNJRFwiLCBhLkopO1xyXG4gICAgUihjLCBcIlJJRFwiLCBiKTtcclxuICAgIFIoYywgXCJUWVBFXCIsIFwidGVybWluYXRlXCIpO1xyXG4gICAgS2QoYSwgYyk7XHJcbiAgICBiID0gbmV3IE0oYSwgYS5oLCBiLCB2b2lkIDApO1xyXG4gICAgYi5LID0gMjtcclxuICAgIGIudiA9IGpjKE4oYykpO1xyXG4gICAgYyA9ICExO1xyXG4gICAgbC5uYXZpZ2F0b3IgJiYgbC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbiAmJiAoYyA9IGwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksIFwiXCIpKTtcclxuICAgICFjICYmIGwuSW1hZ2UgJiYgKChuZXcgSW1hZ2UpLnNyYyA9IGIudiwgYyA9ICEwKTtcclxuICAgIGMgfHwgKGIuZyA9IG5jKGIubCwgbnVsbCksIGIuZy5lYShiLnYpKTtcclxuICAgIGIuRiA9IERhdGUubm93KCk7XHJcbiAgICBsYyhiKTtcclxufSBMZChhKTsgfVxyXG5rLmhiID0gZnVuY3Rpb24gKGEpIHsgdHJ5IHtcclxuICAgIHRoaXMuaC5pbmZvKFwiT3JpZ2luIFRyaWFscyBpbnZva2VkOiBcIiArIGEpO1xyXG59XHJcbmNhdGNoIChiKSB7IH0gfTtcclxuZnVuY3Rpb24gQWMoYSkgeyBhLmcgJiYgKHdjKGEpLCBhLmcuY2FuY2VsKCksIGEuZyA9IG51bGwpOyB9XHJcbmZ1bmN0aW9uIEpkKGEpIHsgQWMoYSk7IGEudSAmJiAobC5jbGVhclRpbWVvdXQoYS51KSwgYS51ID0gbnVsbCk7IHpjKGEpOyBhLmkuY2FuY2VsKCk7IGEubSAmJiAoXCJudW1iZXJcIiA9PT0gdHlwZW9mIGEubSAmJiBsLmNsZWFyVGltZW91dChhLm0pLCBhLm0gPSBudWxsKTsgfVxyXG5mdW5jdGlvbiBNZChhLCBiKSB7IGEubC5wdXNoKG5ldyBmZChhLlphKyssIGIpKTsgMyA9PSBhLkcgJiYgSGMoYSk7IH1cclxuZnVuY3Rpb24gSGMoYSkgeyBpZChhLmkpIHx8IGEubSB8fCAoYS5tID0gITAsIHpiKGEuSGEsIGEpLCBhLkMgPSAwKTsgfVxyXG5mdW5jdGlvbiBOZChhLCBiKSB7IGlmIChDYyhhLmkpID49IGEuaS5qIC0gKGEubSA/IDEgOiAwKSlcclxuICAgIHJldHVybiAhMTsgaWYgKGEubSlcclxuICAgIHJldHVybiBhLmwgPSBiLkQuY29uY2F0KGEubCksICEwOyBpZiAoMSA9PSBhLkcgfHwgMiA9PSBhLkcgfHwgYS5DID49IChhLlhhID8gMCA6IGEuWWEpKVxyXG4gICAgcmV0dXJuICExOyBhLm0gPSBLKHEoYS5IYSwgYSwgYiksIE9kKGEsIGEuQykpOyBhLkMrKzsgcmV0dXJuICEwOyB9XHJcbmsuSGEgPSBmdW5jdGlvbiAoYSkge1xyXG4gICAgaWYgKHRoaXMubSlcclxuICAgICAgICBpZiAodGhpcy5tID0gbnVsbCwgMSA9PSB0aGlzLkcpIHtcclxuICAgICAgICAgICAgaWYgKCFhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlYgPSBNYXRoLmZsb29yKDFFNSAqIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgICAgICAgICAgYSA9IHRoaXMuVisrO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgTSh0aGlzLCB0aGlzLmgsIGEsIHZvaWQgMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHRoaXMucztcclxuICAgICAgICAgICAgICAgIHRoaXMuUCAmJiAoZiA/IChmID0geWEoZiksIEFhKGYsIHRoaXMuUCkpIDogZiA9IHRoaXMuUCk7XHJcbiAgICAgICAgICAgICAgICBudWxsID09PSB0aGlzLm8gJiYgKGUuSCA9IGYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuamEpXHJcbiAgICAgICAgICAgICAgICAgICAgYToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgdGhpcy5sLmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmxbY107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiX19kYXRhX19cIiBpbiBkLmcgJiYgKGQgPSBkLmcuX19kYXRhX18sIFwic3RyaW5nXCIgPT09IHR5cGVvZiBkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYiArPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDQwOTYgPCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg0MDk2ID09PSBiIHx8IGMgPT09IHRoaXMubC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGMgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYiA9IDFFMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgYiA9IDFFMztcclxuICAgICAgICAgICAgICAgIGIgPVxyXG4gICAgICAgICAgICAgICAgICAgIFBkKHRoaXMsIGUsIGIpO1xyXG4gICAgICAgICAgICAgICAgYyA9IE4odGhpcy5GKTtcclxuICAgICAgICAgICAgICAgIFIoYywgXCJSSURcIiwgYSk7XHJcbiAgICAgICAgICAgICAgICBSKGMsIFwiQ1ZFUlwiLCAyMik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkQgJiYgUihjLCBcIlgtSFRUUC1TZXNzaW9uLUlkXCIsIHRoaXMuRCk7XHJcbiAgICAgICAgICAgICAgICBLZCh0aGlzLCBjKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubyAmJiBmICYmIEdkKGMsIHRoaXMubywgZik7XHJcbiAgICAgICAgICAgICAgICBEYyh0aGlzLmksIGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5SYSAmJiBSKGMsIFwiVFlQRVwiLCBcImluaXRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmphID8gKFIoYywgXCIkcmVxXCIsIGIpLCBSKGMsIFwiU0lEXCIsIFwibnVsbFwiKSwgZS4kID0gITAsIGljKGUsIGMsIG51bGwpKSA6IGljKGUsIGMsIGIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5HID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIDMgPT0gdGhpcy5HICYmIChhID8gUWQodGhpcywgYSkgOiAwID09IHRoaXMubC5sZW5ndGggfHwgaWQodGhpcy5pKSB8fCBRZCh0aGlzKSk7XHJcbn07XHJcbmZ1bmN0aW9uIFFkKGEsIGIpIHsgdmFyIGM7IGIgPyBjID0gYi5tIDogYyA9IGEuVisrOyB2YXIgZCA9IE4oYS5GKTsgUihkLCBcIlNJRFwiLCBhLkopOyBSKGQsIFwiUklEXCIsIGMpOyBSKGQsIFwiQUlEXCIsIGEuVSk7IEtkKGEsIGQpOyBhLm8gJiYgYS5zICYmIEdkKGQsIGEubywgYS5zKTsgYyA9IG5ldyBNKGEsIGEuaCwgYywgYS5DICsgMSk7IG51bGwgPT09IGEubyAmJiAoYy5IID0gYS5zKTsgYiAmJiAoYS5sID0gYi5ELmNvbmNhdChhLmwpKTsgYiA9IFBkKGEsIGMsIDFFMyk7IGMuc2V0VGltZW91dChNYXRoLnJvdW5kKC41ICogYS5yYSkgKyBNYXRoLnJvdW5kKC41ICogYS5yYSAqIE1hdGgucmFuZG9tKCkpKTsgRGMoYS5pLCBjKTsgaWMoYywgZCwgYik7IH1cclxuZnVuY3Rpb24gS2QoYSwgYikgeyBhLmogJiYgS2Moe30sIGZ1bmN0aW9uIChjLCBkKSB7IFIoYiwgZCwgYyk7IH0pOyB9XHJcbmZ1bmN0aW9uIFBkKGEsIGIsIGMpIHsgYyA9IE1hdGgubWluKGEubC5sZW5ndGgsIGMpOyB2YXIgZCA9IGEuaiA/IHEoYS5qLk9hLCBhLmosIGEpIDogbnVsbDsgYToge1xyXG4gICAgdmFyIGUgPSBhLmw7XHJcbiAgICB2YXIgZiA9IC0xO1xyXG4gICAgZm9yICg7Oykge1xyXG4gICAgICAgIHZhciBoID0gW1wiY291bnQ9XCIgKyBjXTtcclxuICAgICAgICAtMSA9PSBmID8gMCA8IGMgPyAoZiA9IGVbMF0uaCwgaC5wdXNoKFwib2ZzPVwiICsgZikpIDogZiA9IDAgOiBoLnB1c2goXCJvZnM9XCIgKyBmKTtcclxuICAgICAgICB2YXIgbiA9ICEwO1xyXG4gICAgICAgIGZvciAodmFyIHUgPSAwOyB1IDwgYzsgdSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gZVt1XS5oO1xyXG4gICAgICAgICAgICB2YXIgciA9IGVbdV0uZztcclxuICAgICAgICAgICAgbSAtPSBmO1xyXG4gICAgICAgICAgICBpZiAoMCA+IG0pXHJcbiAgICAgICAgICAgICAgICBmID0gTWF0aC5tYXgoMCwgZVt1XS5oIC0gMTAwKSwgbiA9ICExO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1kKHIsIGgsIFwicmVxXCIgKyBtICsgXCJfXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKEcpIHtcclxuICAgICAgICAgICAgICAgICAgICBkICYmIGQocik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuKSB7XHJcbiAgICAgICAgICAgIGQgPSBoLmpvaW4oXCImXCIpO1xyXG4gICAgICAgICAgICBicmVhayBhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBhID0gYS5sLnNwbGljZSgwLCBjKTsgYi5EID0gYTsgcmV0dXJuIGQ7IH1cclxuZnVuY3Rpb24gR2MoYSkgeyBhLmcgfHwgYS51IHx8IChhLlkgPSAxLCB6YihhLkdhLCBhKSwgYS5BID0gMCk7IH1cclxuZnVuY3Rpb24gQmMoYSkgeyBpZiAoYS5nIHx8IGEudSB8fCAzIDw9IGEuQSlcclxuICAgIHJldHVybiAhMTsgYS5ZKys7IGEudSA9IEsocShhLkdhLCBhKSwgT2QoYSwgYS5BKSk7IGEuQSsrOyByZXR1cm4gITA7IH1cclxuay5HYSA9IGZ1bmN0aW9uICgpIHsgdGhpcy51ID0gbnVsbDsgUmQodGhpcyk7IGlmICh0aGlzLiQgJiYgISh0aGlzLkwgfHwgbnVsbCA9PSB0aGlzLmcgfHwgMCA+PSB0aGlzLk8pKSB7XHJcbiAgICB2YXIgYSA9IDIgKiB0aGlzLk87XHJcbiAgICB0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lciBlbmFibGVkOiBcIiArIGEpO1xyXG4gICAgdGhpcy5CID0gSyhxKHRoaXMuYmIsIHRoaXMpLCBhKTtcclxufSB9O1xyXG5rLmJiID0gZnVuY3Rpb24gKCkgeyB0aGlzLkIgJiYgKHRoaXMuQiA9IG51bGwsIHRoaXMuaC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksIHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSwgdGhpcy5OID0gITEsIHRoaXMuTCA9ICEwLCBKKDEwKSwgQWModGhpcyksIFJkKHRoaXMpKTsgfTtcclxuZnVuY3Rpb24gd2MoYSkgeyBudWxsICE9IGEuQiAmJiAobC5jbGVhclRpbWVvdXQoYS5CKSwgYS5CID0gbnVsbCk7IH1cclxuZnVuY3Rpb24gUmQoYSkgeyBhLmcgPSBuZXcgTShhLCBhLmgsIFwicnBjXCIsIGEuWSk7IG51bGwgPT09IGEubyAmJiAoYS5nLkggPSBhLnMpOyBhLmcuTyA9IDA7IHZhciBiID0gTihhLm9hKTsgUihiLCBcIlJJRFwiLCBcInJwY1wiKTsgUihiLCBcIlNJRFwiLCBhLkopOyBSKGIsIFwiQ0lcIiwgYS5OID8gXCIwXCIgOiBcIjFcIik7IFIoYiwgXCJBSURcIiwgYS5VKTsgS2QoYSwgYik7IFIoYiwgXCJUWVBFXCIsIFwieG1saHR0cFwiKTsgYS5vICYmIGEucyAmJiBHZChiLCBhLm8sIGEucyk7IGEuSyAmJiBhLmcuc2V0VGltZW91dChhLkspOyB2YXIgYyA9IGEuZzsgYSA9IGEubGE7IGMuSyA9IDE7IGMudiA9IGpjKE4oYikpOyBjLnMgPSBudWxsOyBjLlUgPSAhMDsga2MoYywgYSk7IH1cclxuay5hYiA9IGZ1bmN0aW9uICgpIHsgbnVsbCAhPSB0aGlzLnYgJiYgKHRoaXMudiA9IG51bGwsIEFjKHRoaXMpLCBCYyh0aGlzKSwgSigxOSkpOyB9O1xyXG5mdW5jdGlvbiB6YyhhKSB7IG51bGwgIT0gYS52ICYmIChsLmNsZWFyVGltZW91dChhLnYpLCBhLnYgPSBudWxsKTsgfVxyXG5mdW5jdGlvbiB1YyhhLCBiKSB7IHZhciBjID0gbnVsbDsgaWYgKGEuZyA9PSBiKSB7XHJcbiAgICB6YyhhKTtcclxuICAgIHdjKGEpO1xyXG4gICAgYS5nID0gbnVsbDtcclxuICAgIHZhciBkID0gMjtcclxufVxyXG5lbHNlIGlmICh5YyhhLmksIGIpKVxyXG4gICAgYyA9IGIuRCwgRmMoYS5pLCBiKSwgZCA9IDE7XHJcbmVsc2VcclxuICAgIHJldHVybjsgYS5JID0gYi5OOyBpZiAoMCAhPSBhLkcpXHJcbiAgICBpZiAoYi5pKVxyXG4gICAgICAgIGlmICgxID09IGQpIHtcclxuICAgICAgICAgICAgYyA9IGIucyA/IGIucy5sZW5ndGggOiAwO1xyXG4gICAgICAgICAgICBiID0gRGF0ZS5ub3coKSAtIGIuRjtcclxuICAgICAgICAgICAgdmFyIGUgPSBhLkM7XHJcbiAgICAgICAgICAgIGQgPSBTYigpO1xyXG4gICAgICAgICAgICBEKGQsIG5ldyBWYihkLCBjLCBiLCBlKSk7XHJcbiAgICAgICAgICAgIEhjKGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIEdjKGEpO1xyXG4gICAgZWxzZSBpZiAoZSA9IGIubywgMyA9PSBlIHx8IDAgPT0gZSAmJiAwIDwgYS5JIHx8ICEoMSA9PSBkICYmIE5kKGEsIGIpIHx8IDIgPT0gZCAmJiBCYyhhKSkpXHJcbiAgICAgICAgc3dpdGNoIChjICYmIDAgPCBjLmxlbmd0aCAmJiAoYiA9IGEuaSwgYi5pID0gYi5pLmNvbmNhdChjKSksIGUpIHtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgUShhLCA1KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBRKGEsIDEwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICBRKGEsIDYpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFEoYSwgMik7XHJcbiAgICAgICAgfSB9XHJcbmZ1bmN0aW9uIE9kKGEsIGIpIHsgdmFyIGMgPSBhLlBhICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYS4kYSk7IGEuaiB8fCAoYyAqPSAyKTsgcmV0dXJuIGMgKiBiOyB9XHJcbmZ1bmN0aW9uIFEoYSwgYikgeyBhLmguaW5mbyhcIkVycm9yIGNvZGUgXCIgKyBiKTsgaWYgKDIgPT0gYikge1xyXG4gICAgdmFyIGMgPSBudWxsO1xyXG4gICAgYS5qICYmIChjID0gbnVsbCk7XHJcbiAgICB2YXIgZCA9IHEoYS5qYiwgYSk7XHJcbiAgICBjIHx8IChjID0gbmV3IFUoXCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIiksIGwubG9jYXRpb24gJiYgXCJodHRwXCIgPT0gbC5sb2NhdGlvbi5wcm90b2NvbCB8fCBPYyhjLCBcImh0dHBzXCIpLCBqYyhjKSk7XHJcbiAgICBuZChjLnRvU3RyaW5nKCksIGQpO1xyXG59XHJcbmVsc2VcclxuICAgIEooMik7IGEuRyA9IDA7IGEuaiAmJiBhLmoudmEoYik7IExkKGEpOyBKZChhKTsgfVxyXG5rLmpiID0gZnVuY3Rpb24gKGEpIHsgYSA/ICh0aGlzLmguaW5mbyhcIlN1Y2Nlc3NmdWxseSBwaW5nZWQgZ29vZ2xlLmNvbVwiKSwgSigyKSkgOiAodGhpcy5oLmluZm8oXCJGYWlsZWQgdG8gcGluZyBnb29nbGUuY29tXCIpLCBKKDEpKTsgfTtcclxuZnVuY3Rpb24gTGQoYSkgeyBhLkcgPSAwOyBhLkkgPSAtMTsgaWYgKGEuaikge1xyXG4gICAgaWYgKDAgIT0gamQoYS5pKS5sZW5ndGggfHwgMCAhPSBhLmwubGVuZ3RoKVxyXG4gICAgICAgIGEuaS5pLmxlbmd0aCA9IDAsIHJhKGEubCksIGEubC5sZW5ndGggPSAwO1xyXG4gICAgYS5qLnVhKCk7XHJcbn0gfVxyXG5mdW5jdGlvbiBFYyhhLCBiLCBjKSB7IHZhciBkID0gYWQoYyk7IGlmIChcIlwiICE9IGQuaSlcclxuICAgIGIgJiYgUGMoZCwgYiArIFwiLlwiICsgZC5pKSwgUWMoZCwgZC5tKTtcclxuZWxzZSB7XHJcbiAgICB2YXIgZSA9IGwubG9jYXRpb247XHJcbiAgICBkID0gYmQoZS5wcm90b2NvbCwgYiA/IGIgKyBcIi5cIiArIGUuaG9zdG5hbWUgOiBlLmhvc3RuYW1lLCArZS5wb3J0LCBjKTtcclxufSBhLmFhICYmIHhhKGEuYWEsIGZ1bmN0aW9uIChlLCBmKSB7IFIoZCwgZiwgZSk7IH0pOyBiID0gYS5EOyBjID0gYS5zYTsgYiAmJiBjICYmIFIoZCwgYiwgYyk7IFIoZCwgXCJWRVJcIiwgYS5tYSk7IEtkKGEsIGQpOyByZXR1cm4gZDsgfVxyXG5mdW5jdGlvbiBuYyhhLCBiLCBjKSB7IGlmIChiICYmICFhLkgpXHJcbiAgICB0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTsgYiA9IGMgJiYgYS5CYSAmJiAhYS5xYSA/IG5ldyBYKG5ldyBwZCh7IGliOiAhMCB9KSkgOiBuZXcgWChhLnFhKTsgYi5MID0gYS5IOyByZXR1cm4gYjsgfVxyXG5mdW5jdGlvbiBTZCgpIHsgfVxyXG5rID0gU2QucHJvdG90eXBlO1xyXG5rLnhhID0gZnVuY3Rpb24gKCkgeyB9O1xyXG5rLndhID0gZnVuY3Rpb24gKCkgeyB9O1xyXG5rLnZhID0gZnVuY3Rpb24gKCkgeyB9O1xyXG5rLnVhID0gZnVuY3Rpb24gKCkgeyB9O1xyXG5rLk9hID0gZnVuY3Rpb24gKCkgeyB9O1xyXG5mdW5jdGlvbiBUZCgpIHsgaWYgKHkgJiYgISgxMCA8PSBOdW1iZXIoVWEpKSlcclxuICAgIHRocm93IEVycm9yKFwiRW52aXJvbm1lbnRhbCBlcnJvcjogbm8gYXZhaWxhYmxlIHRyYW5zcG9ydC5cIik7IH1cclxuVGQucHJvdG90eXBlLmcgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gbmV3IFkoYSwgYik7IH07XHJcbmZ1bmN0aW9uIFkoYSwgYikge1xyXG4gICAgQy5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy5nID0gbmV3IElkKGIpO1xyXG4gICAgdGhpcy5sID0gYTtcclxuICAgIHRoaXMuaCA9IGIgJiYgYi5tZXNzYWdlVXJsUGFyYW1zIHx8IG51bGw7XHJcbiAgICBhID0gYiAmJiBiLm1lc3NhZ2VIZWFkZXJzIHx8IG51bGw7XHJcbiAgICBiICYmIGIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCAmJiAoYSA/IGFbXCJYLUNsaWVudC1Qcm90b2NvbFwiXSA9IFwid2ViY2hhbm5lbFwiIDogYSA9IHsgXCJYLUNsaWVudC1Qcm90b2NvbFwiOiBcIndlYmNoYW5uZWxcIiB9KTtcclxuICAgIHRoaXMuZy5zID0gYTtcclxuICAgIGEgPSBiICYmIGIuaW5pdE1lc3NhZ2VIZWFkZXJzIHx8IG51bGw7XHJcbiAgICBiICYmIGIubWVzc2FnZUNvbnRlbnRUeXBlICYmIChhID8gYVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl0gPSBiLm1lc3NhZ2VDb250ZW50VHlwZSA6IGEgPSB7IFwiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOiBiLm1lc3NhZ2VDb250ZW50VHlwZSB9KTtcclxuICAgIGIgJiYgYi55YSAmJiAoYSA/IGFbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl0gPSBiLnlhIDogYSA9IHsgXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjogYi55YSB9KTtcclxuICAgIHRoaXMuZy5QID1cclxuICAgICAgICBhO1xyXG4gICAgKGEgPSBiICYmIGIuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSkgJiYgIXNhKGEpICYmICh0aGlzLmcubyA9IGEpO1xyXG4gICAgdGhpcy5BID0gYiAmJiBiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHIgfHwgITE7XHJcbiAgICB0aGlzLnYgPSBiICYmIGIuc2VuZFJhd0pzb24gfHwgITE7XHJcbiAgICAoYiA9IGIgJiYgYi5odHRwU2Vzc2lvbklkUGFyYW0pICYmICFzYShiKSAmJiAodGhpcy5nLkQgPSBiLCBhID0gdGhpcy5oLCBudWxsICE9PSBhICYmIGIgaW4gYSAmJiAoYSA9IHRoaXMuaCwgYiBpbiBhICYmIGRlbGV0ZSBhW2JdKSk7XHJcbiAgICB0aGlzLmogPSBuZXcgWih0aGlzKTtcclxufVxyXG50KFksIEMpO1xyXG5ZLnByb3RvdHlwZS5tID0gZnVuY3Rpb24gKCkgeyB0aGlzLmcuaiA9IHRoaXMuajsgdGhpcy5BICYmICh0aGlzLmcuSCA9ICEwKTsgdmFyIGEgPSB0aGlzLmcsIGIgPSB0aGlzLmwsIGMgPSB0aGlzLmggfHwgdm9pZCAwOyBhLldhICYmIChhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksIHpiKHEoYS5oYiwgYSwgYikpKTsgSigwKTsgYS5XID0gYjsgYS5hYSA9IGMgfHwge307IGEuTiA9IGEuWDsgYS5GID0gRWMoYSwgbnVsbCwgYS5XKTsgSGMoYSk7IH07XHJcblkucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkgeyBJYyh0aGlzLmcpOyB9O1xyXG5ZLnByb3RvdHlwZS51ID0gZnVuY3Rpb24gKGEpIHsgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBhKSB7XHJcbiAgICB2YXIgYiA9IHt9O1xyXG4gICAgYi5fX2RhdGFfXyA9IGE7XHJcbiAgICBNZCh0aGlzLmcsIGIpO1xyXG59XHJcbmVsc2VcclxuICAgIHRoaXMudiA/IChiID0ge30sIGIuX19kYXRhX18gPSByYihhKSwgTWQodGhpcy5nLCBiKSkgOiBNZCh0aGlzLmcsIGEpOyB9O1xyXG5ZLnByb3RvdHlwZS5NID0gZnVuY3Rpb24gKCkgeyB0aGlzLmcuaiA9IG51bGw7IGRlbGV0ZSB0aGlzLmo7IEljKHRoaXMuZyk7IGRlbGV0ZSB0aGlzLmc7IFkuWi5NLmNhbGwodGhpcyk7IH07XHJcbmZ1bmN0aW9uIFVkKGEpIHsgYWMuY2FsbCh0aGlzKTsgdmFyIGIgPSBhLl9fc21fXzsgaWYgKGIpIHtcclxuICAgIGE6IHtcclxuICAgICAgICBmb3IgKHZhciBjIGluIGIpIHtcclxuICAgICAgICAgICAgYSA9IGM7XHJcbiAgICAgICAgICAgIGJyZWFrIGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGEgPSB2b2lkIDA7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5pID0gYSlcclxuICAgICAgICBhID0gdGhpcy5pLCBiID0gbnVsbCAhPT0gYiAmJiBhIGluIGIgPyBiW2FdIDogdm9pZCAwO1xyXG4gICAgdGhpcy5kYXRhID0gYjtcclxufVxyXG5lbHNlXHJcbiAgICB0aGlzLmRhdGEgPSBhOyB9XHJcbnQoVWQsIGFjKTtcclxuZnVuY3Rpb24gVmQoKSB7IGJjLmNhbGwodGhpcyk7IHRoaXMuc3RhdHVzID0gMTsgfVxyXG50KFZkLCBiYyk7XHJcbmZ1bmN0aW9uIFooYSkgeyB0aGlzLmcgPSBhOyB9XHJcbnQoWiwgU2QpO1xyXG5aLnByb3RvdHlwZS54YSA9IGZ1bmN0aW9uICgpIHsgRCh0aGlzLmcsIFwiYVwiKTsgfTtcclxuWi5wcm90b3R5cGUud2EgPSBmdW5jdGlvbiAoYSkgeyBEKHRoaXMuZywgbmV3IFVkKGEpKTsgfTtcclxuWi5wcm90b3R5cGUudmEgPSBmdW5jdGlvbiAoYSkgeyBEKHRoaXMuZywgbmV3IFZkKGEpKTsgfTtcclxuWi5wcm90b3R5cGUudWEgPSBmdW5jdGlvbiAoKSB7IEQodGhpcy5nLCBcImJcIik7IH07IC8qXHJcblxuIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xyXG5UZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbCA9IFRkLnByb3RvdHlwZS5nO1xyXG5ZLnByb3RvdHlwZS5zZW5kID0gWS5wcm90b3R5cGUudTtcclxuWS5wcm90b3R5cGUub3BlbiA9IFkucHJvdG90eXBlLm07XHJcblkucHJvdG90eXBlLmNsb3NlID0gWS5wcm90b3R5cGUuY2xvc2U7XHJcbldiLk5PX0VSUk9SID0gMDtcclxuV2IuVElNRU9VVCA9IDg7XHJcbldiLkhUVFBfRVJST1IgPSA2O1xyXG5YYi5DT01QTEVURSA9IFwiY29tcGxldGVcIjtcclxuJGIuRXZlbnRUeXBlID0gTDtcclxuTC5PUEVOID0gXCJhXCI7XHJcbkwuQ0xPU0UgPSBcImJcIjtcclxuTC5FUlJPUiA9IFwiY1wiO1xyXG5MLk1FU1NBR0UgPSBcImRcIjtcclxuQy5wcm90b3R5cGUubGlzdGVuID0gQy5wcm90b3R5cGUuTjtcclxuWC5wcm90b3R5cGUubGlzdGVuT25jZSA9IFgucHJvdG90eXBlLk87XHJcblgucHJvdG90eXBlLmdldExhc3RFcnJvciA9IFgucHJvdG90eXBlLkxhO1xyXG5YLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlID0gWC5wcm90b3R5cGUuRGE7XHJcblgucHJvdG90eXBlLmdldFN0YXR1cyA9IFgucHJvdG90eXBlLmJhO1xyXG5YLnByb3RvdHlwZS5nZXRSZXNwb25zZUpzb24gPSBYLnByb3RvdHlwZS5RYTtcclxuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0ID0gWC5wcm90b3R5cGUuZ2E7XHJcblgucHJvdG90eXBlLnNlbmQgPSBYLnByb3RvdHlwZS5lYTtcclxudmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgVGQ7IH07XHJcbnZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBTYigpOyB9O1xyXG52YXIgRXJyb3JDb2RlID0gV2I7XHJcbnZhciBFdmVudFR5cGUgPSBYYjtcclxudmFyIEV2ZW50ID0gSDtcclxudmFyIFN0YXQgPSB7IHJiOiAwLCB1YjogMSwgdmI6IDIsIE9iOiAzLCBUYjogNCwgUWI6IDUsIFJiOiA2LCBQYjogNywgTmI6IDgsIFNiOiA5LCBQUk9YWTogMTAsIE5PUFJPWFk6IDExLCBMYjogMTIsIEhiOiAxMywgSWI6IDE0LCBHYjogMTUsIEpiOiAxNiwgS2I6IDE3LCBuYjogMTgsIG1iOiAxOSwgb2I6IDIwIH07XHJcbnZhciBGZXRjaFhtbEh0dHBGYWN0b3J5ID0gcGQ7XHJcbnZhciBXZWJDaGFubmVsID0gJGI7XHJcbnZhciBYaHJJbyA9IFg7XHJcblxyXG52YXIgZXNtID0ge1xyXG4gICAgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydDogY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCxcclxuICAgIGdldFN0YXRFdmVudFRhcmdldDogZ2V0U3RhdEV2ZW50VGFyZ2V0LFxyXG4gICAgRXJyb3JDb2RlOiBFcnJvckNvZGUsXHJcbiAgICBFdmVudFR5cGU6IEV2ZW50VHlwZSxcclxuICAgIEV2ZW50OiBFdmVudCxcclxuICAgIFN0YXQ6IFN0YXQsXHJcbiAgICBGZXRjaFhtbEh0dHBGYWN0b3J5OiBGZXRjaFhtbEh0dHBGYWN0b3J5LFxyXG4gICAgV2ViQ2hhbm5lbDogV2ViQ2hhbm5lbCxcclxuICAgIFhocklvOiBYaHJJb1xyXG59O1xuXG5leHBvcnQgZGVmYXVsdCBlc207XG5leHBvcnQgeyBFcnJvckNvZGUsIEV2ZW50LCBFdmVudFR5cGUsIEZldGNoWG1sSHR0cEZhY3RvcnksIFN0YXQsIFdlYkNoYW5uZWwsIFhocklvLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IF9fdmFsdWVzLCBfX3JlYWQsIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fc3ByZWFkQXJyYXkgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbnZhciBDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudChuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0SW5zdGFudGlhdGlvbk1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0TXVsdGlwbGVJbnN0YW5jZXMgPSBmdW5jdGlvbiAobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRTZXJ2aWNlUHJvcHMgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxudmFyIFByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUHJvdmlkZXIobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICB2YXIgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgdmFyIG9wdGlvbmFsID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9wdGlvbmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2FuIG5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiU2VydmljZSBcIiArIHRoaXMubmFtZSArIFwiIGlzIG5vdCBhdmFpbGFibGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLnNldENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk1pc21hdGNoaW5nIENvbXBvbmVudCBcIiArIGNvbXBvbmVudC5uYW1lICsgXCIgZm9yIFByb3ZpZGVyIFwiICsgdGhpcy5uYW1lICsgXCIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDb21wb25lbnQgZm9yIFwiICsgdGhpcy5uYW1lICsgXCIgaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9kID0gX19yZWFkKF9jLnZhbHVlLCAyKSwgaW5zdGFuY2VJZGVudGlmaWVyID0gX2RbMF0sIGluc3RhbmNlRGVmZXJyZWQgPSBfZFsxXTtcclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5jbGVhckluc3RhbmNlID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH07XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlcztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoc2VydmljZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzZXJ2aWNlKSB7IHJldHVybiAnSU5URVJOQUwnIGluIHNlcnZpY2U7IH0pIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKTsgfSkpKSwgX19yZWFkKHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc2VydmljZSkgeyByZXR1cm4gJ19kZWxldGUnIGluIHNlcnZpY2U7IH0pIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChzZXJ2aWNlKSB7IHJldHVybiBzZXJ2aWNlLl9kZWxldGUoKTsgfSkpKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5pc0NvbXBvbmVudFNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuaXNJbml0aWFsaXplZCA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbiAob3B0cykge1xyXG4gICAgICAgIHZhciBlXzIsIF9hO1xyXG4gICAgICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XHJcbiAgICAgICAgdmFyIF9iID0gb3B0cy5vcHRpb25zLCBvcHRpb25zID0gX2IgPT09IHZvaWQgMCA/IHt9IDogX2I7XHJcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKHRoaXMubmFtZSArIFwiKFwiICsgbm9ybWFsaXplZElkZW50aWZpZXIgKyBcIikgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDb21wb25lbnQgXCIgKyB0aGlzLm5hbWUgKyBcIiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcclxuICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfZSA9IF9fcmVhZChfZC52YWx1ZSwgMiksIGluc3RhbmNlSWRlbnRpZmllciA9IF9lWzBdLCBpbnN0YW5jZURlZmVycmVkID0gX2VbMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzIpIHRocm93IGVfMi5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUub25Jbml0ID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHZhciBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcclxuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZXhpc3RpbmdDYWxsYmFja3MpO1xyXG4gICAgICAgIHZhciBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmludm9rZU9uSW5pdENhbGxiYWNrcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBlXzMsIF9hO1xyXG4gICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjYWxsYmFja3NfMSA9IF9fdmFsdWVzKGNhbGxiYWNrcyksIGNhbGxiYWNrc18xXzEgPSBjYWxsYmFja3NfMS5uZXh0KCk7ICFjYWxsYmFja3NfMV8xLmRvbmU7IGNhbGxiYWNrc18xXzEgPSBjYWxsYmFja3NfMS5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrc18xXzEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzXzFfMSAmJiAhY2FsbGJhY2tzXzFfMS5kb25lICYmIChfYSA9IGNhbGxiYWNrc18xLnJldHVybikpIF9hLmNhbGwoY2FsbGJhY2tzXzEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8zKSB0aHJvdyBlXzMuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICB2YXIgaW5zdGFuY2VJZGVudGlmaWVyID0gX2EuaW5zdGFuY2VJZGVudGlmaWVyLCBfYiA9IF9hLm9wdGlvbnMsIG9wdGlvbnMgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYjtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5zaG91bGRBdXRvSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFByb3ZpZGVyO1xyXG59KCkpO1xyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG52YXIgQ29tcG9uZW50Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IFwiICsgY29tcG9uZW50Lm5hbWUgKyBcIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCBcIiArIHRoaXMubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRQcm92aWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmdldFByb3ZpZGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudENvbnRhaW5lcjtcclxufSgpKTtcblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIEZpcmViYXNlRXJyb3IsIHF1ZXJ5c3RyaW5nLCBnZXRNb2R1bGFySW5zdGFuY2UsIGJhc2U2NERlY29kZSwgZ2V0VUEsIGlzSUUsIGNyZWF0ZVN1YnNjcmliZSwgcXVlcnlzdHJpbmdEZWNvZGUsIGV4dHJhY3RRdWVyeXN0cmluZywgaXNFbXB0eSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFNES19WRVJTSU9OLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBnZXRBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IF9fcmVzdCB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gZW51bSBvZiBmYWN0b3JzIHRoYXQgbWF5IGJlIHVzZWQgZm9yIG11bHRpZmFjdG9yIGF1dGhlbnRpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBGYWN0b3JJZCA9IHtcclxuICAgIC8qKiBQaG9uZSBhcyBzZWNvbmQgZmFjdG9yICovXHJcbiAgICBQSE9ORTogJ3Bob25lJ1xyXG59O1xyXG4vKipcclxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIHByb3ZpZGVycy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgUHJvdmlkZXJJZCA9IHtcclxuICAgIC8qKiBGYWNlYm9vayBwcm92aWRlciBJRCAqL1xyXG4gICAgRkFDRUJPT0s6ICdmYWNlYm9vay5jb20nLFxyXG4gICAgLyoqIEdpdEh1YiBwcm92aWRlciBJRCAqL1xyXG4gICAgR0lUSFVCOiAnZ2l0aHViLmNvbScsXHJcbiAgICAvKiogR29vZ2xlIHByb3ZpZGVyIElEICovXHJcbiAgICBHT09HTEU6ICdnb29nbGUuY29tJyxcclxuICAgIC8qKiBQYXNzd29yZCBwcm92aWRlciAqL1xyXG4gICAgUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogUGhvbmUgcHJvdmlkZXIgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgcHJvdmlkZXIgSUQgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBzaWduLWluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNpZ25Jbk1ldGhvZCA9IHtcclxuICAgIC8qKiBFbWFpbCBsaW5rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBFTUFJTF9MSU5LOiAnZW1haWxMaW5rJyxcclxuICAgIC8qKiBFbWFpbC9wYXNzd29yZCBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogRmFjZWJvb2sgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGhvbmUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBvcGVyYXRpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IE9wZXJhdGlvblR5cGUgPSB7XHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBsaW5raW5nIGFuIGFkZGl0aW9uYWwgcHJvdmlkZXIgdG8gYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIExJTks6ICdsaW5rJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHVzaW5nIGEgcHJvdmlkZXIgdG8gcmVhdXRoZW50aWNhdGUgYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIFJFQVVUSEVOVElDQVRFOiAncmVhdXRoZW50aWNhdGUnLFxyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgc2lnbmluZyBpbiBhIHVzZXIuICovXHJcbiAgICBTSUdOX0lOOiAnc2lnbkluJ1xyXG59O1xyXG4vKipcclxuICogQW4gZW51bWVyYXRpb24gb2YgdGhlIHBvc3NpYmxlIGVtYWlsIGFjdGlvbiB0eXBlcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQWN0aW9uQ29kZU9wZXJhdGlvbiA9IHtcclxuICAgIC8qKiBUaGUgZW1haWwgbGluayBzaWduLWluIGFjdGlvbi4gKi9cclxuICAgIEVNQUlMX1NJR05JTjogJ0VNQUlMX1NJR05JTicsXHJcbiAgICAvKiogVGhlIHBhc3N3b3JkIHJlc2V0IGFjdGlvbi4gKi9cclxuICAgIFBBU1NXT1JEX1JFU0VUOiAnUEFTU1dPUkRfUkVTRVQnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCByZXZvY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFJFQ09WRVJfRU1BSUw6ICdSRUNPVkVSX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb24gZW1haWwgYWN0aW9uLiAqL1xyXG4gICAgUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT046ICdSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTicsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiAnVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCB2ZXJpZmljYXRpb24gYWN0aW9uLiAqL1xyXG4gICAgVkVSSUZZX0VNQUlMOiAnVkVSSUZZX0VNQUlMJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZGVidWdFcnJvck1hcCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgW1wiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyByZXN0cmljdGVkIHRvIGFkbWluaXN0cmF0b3JzIG9ubHkuJyxcclxuICAgICAgICBbXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovXTogJycsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1hdXRob3JpemVkXCIgLyogQVBQX05PVF9BVVRIT1JJWkVEICovXTogXCJUaGlzIGFwcCwgaWRlbnRpZmllZCBieSB0aGUgZG9tYWluIHdoZXJlIGl0J3MgaG9zdGVkLCBpcyBub3QgXCIgK1xyXG4gICAgICAgICAgICAnYXV0aG9yaXplZCB0byB1c2UgRmlyZWJhc2UgQXV0aGVudGljYXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgQVBJIGtleS4gJyArXHJcbiAgICAgICAgICAgICdSZXZpZXcgeW91ciBrZXkgY29uZmlndXJhdGlvbiBpbiB0aGUgR29vZ2xlIEFQSSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1pbnN0YWxsZWRcIiAvKiBBUFBfTk9UX0lOU1RBTExFRCAqL106ICdUaGUgcmVxdWVzdGVkIG1vYmlsZSBhcHBsaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBpZGVudGlmaWVyICgnICtcclxuICAgICAgICAgICAgJ0FuZHJvaWQgcGFja2FnZSBuYW1lIG9yIGlPUyBidW5kbGUgSUQpIHByb3ZpZGVkIGlzIG5vdCBpbnN0YWxsZWQgb24gJyArXHJcbiAgICAgICAgICAgICd0aGlzIGRldmljZS4nLFxyXG4gICAgICAgIFtcImNhcHRjaGEtY2hlY2stZmFpbGVkXCIgLyogQ0FQVENIQV9DSEVDS19GQUlMRUQgKi9dOiAnVGhlIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBwcm92aWRlZCBpcyBlaXRoZXIgaW52YWxpZCwgZXhwaXJlZCwgJyArXHJcbiAgICAgICAgICAgICdhbHJlYWR5IHVzZWQgb3IgdGhlIGRvbWFpbiBhc3NvY2lhdGVkIHdpdGggaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGxpc3QgJyArXHJcbiAgICAgICAgICAgICdvZiB3aGl0ZWxpc3RlZCBkb21haW5zLicsXHJcbiAgICAgICAgW1wiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovXTogJ1RoZSBTTVMgY29kZSBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlLXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRyeSAnICtcclxuICAgICAgICAgICAgJ2FnYWluLicsXHJcbiAgICAgICAgW1wiY29yZG92YS1ub3QtcmVhZHlcIiAvKiBDT1JET1ZBX05PVF9SRUFEWSAqL106ICdDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuJyxcclxuICAgICAgICBbXCJjb3JzLXVuc3VwcG9ydGVkXCIgLyogQ09SU19VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC4nLFxyXG4gICAgICAgIFtcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovXTogJ1RoaXMgY3JlZGVudGlhbCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIGRpZmZlcmVudCB1c2VyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovXTogJ1RoZSBjdXN0b20gdG9rZW4gY29ycmVzcG9uZHMgdG8gYSBkaWZmZXJlbnQgYXVkaWVuY2UuJyxcclxuICAgICAgICBbXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgc2Vuc2l0aXZlIGFuZCByZXF1aXJlcyByZWNlbnQgYXV0aGVudGljYXRpb24uIExvZyBpbiAnICtcclxuICAgICAgICAgICAgJ2FnYWluIGJlZm9yZSByZXRyeWluZyB0aGlzIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nLFxyXG4gICAgICAgIFtcImR5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkXCIgLyogRFlOQU1JQ19MSU5LX05PVF9BQ1RJVkFURUQgKi9dOiAnUGxlYXNlIGFjdGl2YXRlIER5bmFtaWMgTGlua3MgaW4gdGhlIEZpcmViYXNlIENvbnNvbGUgYW5kIGFncmVlIHRvIHRoZSB0ZXJtcyBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb25kaXRpb25zLicsXHJcbiAgICAgICAgW1wiZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvblwiIC8qIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT04gKi9dOiAnTXVsdGktZmFjdG9yIHVzZXJzIG11c3QgYWx3YXlzIGhhdmUgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovXTogJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcImVtdWxhdG9yLWNvbmZpZy1mYWlsZWRcIiAvKiBFTVVMQVRPUl9DT05GSUdfRkFJTEVEICovXTogJ0F1dGggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIG1ha2UgYSBuZXR3b3JrIGNhbGwuIEF1dGggY2FuICcgK1xyXG4gICAgICAgICAgICAnbm8gbG9uZ2VyIGJlIGNvbmZpZ3VyZWQgdG8gdXNlIHRoZSBlbXVsYXRvci4gVHJ5IGNhbGxpbmcgJyArXHJcbiAgICAgICAgICAgICdcImNvbm5lY3RBdXRoRW11bGF0b3IoKVwiIHNvb25lci4nLFxyXG4gICAgICAgIFtcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImNhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0XCIgLyogRVhQSVJFRF9QT1BVUF9SRVFVRVNUICovXTogJ1RoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBkdWUgdG8gYW5vdGhlciBjb25mbGljdGluZyBwb3B1cCBiZWluZyBvcGVuZWQuJyxcclxuICAgICAgICBbXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBhcHBsaWNhdGlvbiB2ZXJpZmllci4nICtcclxuICAgICAgICAgICAgJyBUaGUgcmVDQVBUQ0hBIHRva2VuIHJlc3BvbnNlIGlzIGVpdGhlciBpbnZhbGlkIG9yIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1pZFwiIC8qIElOVkFMSURfQVBQX0lEICovXTogJ1RoZSBtb2JpbGUgYXBwIGlkZW50aWZpZXIgaXMgbm90IHJlZ2lzdGVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovXTogXCJUaGlzIHVzZXIncyBjcmVkZW50aWFsIGlzbid0IHZhbGlkIGZvciB0aGlzIHByb2plY3QuIFRoaXMgY2FuIGhhcHBlbiBcIiArXHJcbiAgICAgICAgICAgIFwiaWYgdGhlIHVzZXIncyB0b2tlbiBoYXMgYmVlbiB0YW1wZXJlZCB3aXRoLCBvciBpZiB0aGUgdXNlciBpc24ndCBmb3IgXCIgK1xyXG4gICAgICAgICAgICAndGhlIHByb2plY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQVBJIGtleS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24tY29kZVwiIC8qIElOVkFMSURfQ09ERSAqL106ICdUaGUgU01TIHZlcmlmaWNhdGlvbiBjb2RlIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgJyArXHJcbiAgICAgICAgICAgICdpbnZhbGlkLiBQbGVhc2UgcmVzZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzbXMgYW5kIGJlIHN1cmUgdG8gdXNlIHRoZSAnICtcclxuICAgICAgICAgICAgJ3ZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBJTlZBTElEX0NPTlRJTlVFX1VSSSAqL106ICdUaGUgY29udGludWUgVVJMIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovXTogJ1RoZSBmb2xsb3dpbmcgQ29yZG92YSBwbHVnaW5zIG11c3QgYmUgaW5zdGFsbGVkIHRvIGVuYWJsZSBPQXV0aCBzaWduLWluOiAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJ1aWxkaW5mbywgY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLCAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWIsIGNvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3NlciBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWN1c3RvbS10b2tlblwiIC8qIElOVkFMSURfQ1VTVE9NX1RPS0VOICovXTogJ1RoZSBjdXN0b20gdG9rZW4gZm9ybWF0IGlzIGluY29ycmVjdC4gUGxlYXNlIGNoZWNrIHRoZSBkb2N1bWVudGF0aW9uLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovXTogJ1RoZSBwcm92aWRlZCBkeW5hbWljIGxpbmsgZG9tYWluIGlzIG5vdCBjb25maWd1cmVkIG9yIGF1dGhvcml6ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBiYWRseSBmb3JtYXR0ZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtdWxhdG9yLXNjaGVtZVwiIC8qIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FICovXTogJ0VtdWxhdG9yIFVSTCBtdXN0IHN0YXJ0IHdpdGggYSB2YWxpZCBzY2hlbWUgKGh0dHA6Ly8gb3IgaHR0cHM6Ly8pLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovXTogJ1lvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY2VydC1oYXNoXCIgLyogSU5WQUxJRF9DRVJUX0hBU0ggKi9dOiAnVGhlIFNIQS0xIGNlcnRpZmljYXRlIGhhc2ggcHJvdmlkZWQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogJ1RoZSBzdXBwbGllZCBhdXRoIGNyZWRlbnRpYWwgaXMgbWFsZm9ybWVkIG9yIGhhcyBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1tZXNzYWdlLXBheWxvYWRcIiAvKiBJTlZBTElEX01FU1NBR0VfUEFZTE9BRCAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgaW4gaXRzIG1lc3NhZ2UuICcgK1xyXG4gICAgICAgICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1wcm92aWRlclwiIC8qIElOVkFMSURfT0FVVEhfUFJPVklERVIgKi9dOiAnRW1haWxBdXRoUHJvdmlkZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBvcGVyYXRpb24uIFRoaXMgb3BlcmF0aW9uICcgK1xyXG4gICAgICAgICAgICAnb25seSBzdXBwb3J0cyBPQXV0aCBwcm92aWRlcnMuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiIC8qIElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovXTogJ1RoZSBPQXV0aCBjbGllbnQgSUQgcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQgb3IgZG9lcyBub3QgbWF0Y2ggdGhlICcgK1xyXG4gICAgICAgICAgICAnc3BlY2lmaWVkIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi9dOiAnVGhpcyBkb21haW4gaXMgbm90IGF1dGhvcml6ZWQgZm9yIE9BdXRoIG9wZXJhdGlvbnMgZm9yIHlvdXIgRmlyZWJhc2UgJyArXHJcbiAgICAgICAgICAgICdwcm9qZWN0LiBFZGl0IHRoZSBsaXN0IG9mIGF1dGhvcml6ZWQgZG9tYWlucyBmcm9tIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hY3Rpb24tY29kZVwiIC8qIElOVkFMSURfT09CX0NPREUgKi9dOiAnVGhlIGFjdGlvbiBjb2RlIGlzIGludmFsaWQuIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29kZSBpcyBtYWxmb3JtZWQsICcgK1xyXG4gICAgICAgICAgICAnZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLicsXHJcbiAgICAgICAgW1wid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBpcyBpbnZhbGlkIG9yIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIElOVkFMSURfUEVSU0lTVEVOQ0UgKi9dOiAnVGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlIGlzIGludmFsaWQuIEl0IGNhbiBvbmx5IGJlIGxvY2FsLCBzZXNzaW9uIG9yIG5vbmUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBob25lLW51bWJlclwiIC8qIElOVkFMSURfUEhPTkVfTlVNQkVSICovXTogJ1RoZSBmb3JtYXQgb2YgdGhlIHBob25lIG51bWJlciBwcm92aWRlZCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBlbnRlciB0aGUgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXIgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGludG8gRS4xNjQgZm9ybWF0LiBFLjE2NCAnICtcclxuICAgICAgICAgICAgJ3Bob25lIG51bWJlcnMgYXJlIHdyaXR0ZW4gaW4gdGhlIGZvcm1hdCBbK11bY291bnRyeSBjb2RlXVtzdWJzY3JpYmVyICcgK1xyXG4gICAgICAgICAgICAnbnVtYmVyIGluY2x1ZGluZyBhcmVhIGNvZGVdLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1wcm92aWRlci1pZFwiIC8qIElOVkFMSURfUFJPVklERVJfSUQgKi9dOiAnVGhlIHNwZWNpZmllZCBwcm92aWRlciBJRCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNpcGllbnQtZW1haWxcIiAvKiBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTCAqL106ICdUaGUgZW1haWwgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBmYWlsZWQgdG8gc2VuZCBhcyB0aGUgcHJvdmlkZWQgJyArXHJcbiAgICAgICAgICAgICdyZWNpcGllbnQgZW1haWwgYWRkcmVzcyBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1zZW5kZXJcIiAvKiBJTlZBTElEX1NFTkRFUiAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBhbiBpbnZhbGlkIHNlbmRlciBlbWFpbCBvciBuYW1lLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovXTogJ1RoZSB2ZXJpZmljYXRpb24gSUQgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC10ZW5hbnQtaWRcIiAvKiBJTlZBTElEX1RFTkFOVF9JRCAqL106IFwiVGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSUQgaXMgaW52YWxpZC5cIixcclxuICAgICAgICBbXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovXTogJ0FuIEFuZHJvaWQgUGFja2FnZSBOYW1lIG11c3QgYmUgcHJvdmlkZWQgaWYgdGhlIEFuZHJvaWQgQXBwIGlzIHJlcXVpcmVkIHRvIGJlIGluc3RhbGxlZC4nLFxyXG4gICAgICAgIFtcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi9dOiAnQmUgc3VyZSB0byBpbmNsdWRlIGF1dGhEb21haW4gd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKSwgJyArXHJcbiAgICAgICAgICAgICdieSBmb2xsb3dpbmcgdGhlIGluc3RydWN0aW9ucyBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIiAvKiBNSVNTSU5HX0FQUF9DUkVERU5USUFMICovXTogJ1RoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBpcyBtaXNzaW5nIGFuIGFwcGxpY2F0aW9uIHZlcmlmaWVyICcgK1xyXG4gICAgICAgICAgICAnYXNzZXJ0aW9uLiBBIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBuZWVkcyB0byBiZSBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBNSVNTSU5HX0NPREUgKi9dOiAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IFNNUyB2ZXJpZmljYXRpb24gY29kZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctY29udGludWUtdXJpXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiAnQSBjb250aW51ZSBVUkwgbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaWZyYW1lLXN0YXJ0XCIgLyogTUlTU0lOR19JRlJBTUVfU1RBUlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIE1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqL106ICdBbiBpT1MgQnVuZGxlIElEIG11c3QgYmUgcHJvdmlkZWQgaWYgYW4gQXBwIFN0b3JlIElEIGlzIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1vci1pbnZhbGlkLW5vbmNlXCIgLyogTUlTU0lOR19PUl9JTlZBTElEX05PTkNFICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBub25jZS4gVGhpcyBjYW4gb2NjdXIgaWYgdGhlICcgK1xyXG4gICAgICAgICAgICAnU0hBLTI1NiBoYXNoIG9mIHRoZSBwcm92aWRlZCByYXcgbm9uY2UgZG9lcyBub3QgbWF0Y2ggdGhlIGhhc2hlZCBub25jZSAnICtcclxuICAgICAgICAgICAgJ2luIHRoZSBJRCB0b2tlbiBwYXlsb2FkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi9dOiAnTm8gc2Vjb25kIGZhY3RvciBpZGVudGlmaWVyIGlzIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIE1JU1NJTkdfTUZBX1NFU1NJT04gKi9dOiAnVGhlIHJlcXVlc3QgaXMgbWlzc2luZyBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1waG9uZS1udW1iZXJcIiAvKiBNSVNTSU5HX1BIT05FX05VTUJFUiAqL106ICdUbyBzZW5kIHZlcmlmaWNhdGlvbiBjb2RlcywgcHJvdmlkZSBhIHBob25lIG51bWJlciBmb3IgdGhlIHJlY2lwaWVudC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIgLyogTUlTU0lOR19TRVNTSU9OX0lORk8gKi9dOiAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IHZlcmlmaWNhdGlvbiBJRC4nLFxyXG4gICAgICAgIFtcImFwcC1kZWxldGVkXCIgLyogTU9EVUxFX0RFU1RST1lFRCAqL106ICdUaGlzIGluc3RhbmNlIG9mIEZpcmViYXNlQXBwIGhhcyBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi9dOiAnVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHNlY29uZCBmYWN0b3IgbWF0Y2hpbmcgdGhlIGlkZW50aWZpZXIgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqL106ICdQcm9vZiBvZiBvd25lcnNoaXAgb2YgYSBzZWNvbmQgZmFjdG9yIGlzIHJlcXVpcmVkIHRvIGNvbXBsZXRlIHNpZ24taW4uJyxcclxuICAgICAgICBbXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi9dOiAnQW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MgYnV0IGRpZmZlcmVudCAnICtcclxuICAgICAgICAgICAgJ3NpZ24taW4gY3JlZGVudGlhbHMuIFNpZ24gaW4gdXNpbmcgYSBwcm92aWRlciBhc3NvY2lhdGVkIHdpdGggdGhpcyAnICtcclxuICAgICAgICAgICAgJ2VtYWlsIGFkZHJlc3MuJyxcclxuICAgICAgICBbXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL106ICdBIG5ldHdvcmsgQXV0aEVycm9yIChzdWNoIGFzIHRpbWVvdXQsIGludGVycnVwdGVkIGNvbm5lY3Rpb24gb3IgdW5yZWFjaGFibGUgaG9zdCkgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLXN1Y2gtcHJvdmlkZXJcIiAvKiBOT19TVUNIX1BST1ZJREVSICovXTogJ1VzZXIgd2FzIG5vdCBsaW5rZWQgdG8gYW4gYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcIm51bGwtdXNlclwiIC8qIE5VTExfVVNFUiAqL106ICdBIG51bGwgdXNlciBvYmplY3Qgd2FzIHByb3ZpZGVkIGFzIHRoZSBhcmd1bWVudCBmb3IgYW4gb3BlcmF0aW9uIHdoaWNoICcgK1xyXG4gICAgICAgICAgICAncmVxdWlyZXMgYSBub24tbnVsbCB1c2VyIG9iamVjdC4nLFxyXG4gICAgICAgIFtcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIE9QRVJBVElPTl9OT1RfQUxMT1dFRCAqL106ICdUaGUgZ2l2ZW4gc2lnbi1pbiBwcm92aWRlciBpcyBkaXNhYmxlZCBmb3IgdGhpcyBGaXJlYmFzZSBwcm9qZWN0LiAnICtcclxuICAgICAgICAgICAgJ0VuYWJsZSBpdCBpbiB0aGUgRmlyZWJhc2UgY29uc29sZSwgdW5kZXIgdGhlIHNpZ24taW4gbWV0aG9kIHRhYiBvZiB0aGUgJyArXHJcbiAgICAgICAgICAgICdBdXRoIHNlY3Rpb24uJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgZW52aXJvbm1lbnQgdGhpcyBhcHBsaWNhdGlvbiBpcyAnICtcclxuICAgICAgICAgICAgJ3J1bm5pbmcgb24uIFwibG9jYXRpb24ucHJvdG9jb2xcIiBtdXN0IGJlIGh0dHAsIGh0dHBzIG9yIGNocm9tZS1leHRlbnNpb24nICtcclxuICAgICAgICAgICAgJyBhbmQgd2ViIHN0b3JhZ2UgbXVzdCBiZSBlbmFibGVkLicsXHJcbiAgICAgICAgW1wicG9wdXAtYmxvY2tlZFwiIC8qIFBPUFVQX0JMT0NLRUQgKi9dOiAnVW5hYmxlIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgcG9wdXAuIEl0IG1heSBoYXZlIGJlZW4gYmxvY2tlZCBieSB0aGUgYnJvd3Nlci4nLFxyXG4gICAgICAgIFtcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi9dOiAnVGhlIHBvcHVwIGhhcyBiZWVuIGNsb3NlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZyB0aGUgb3BlcmF0aW9uLicsXHJcbiAgICAgICAgW1wicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBQUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL106ICdVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcInF1b3RhLWV4Y2VlZGVkXCIgLyogUVVPVEFfRVhDRUVERUQgKi9dOiBcIlRoZSBwcm9qZWN0J3MgcXVvdGEgZm9yIHRoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGV4Y2VlZGVkLlwiLFxyXG4gICAgICAgIFtcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCIgLyogUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVIgKi9dOiAnVGhlIHJlZGlyZWN0IG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcuJyxcclxuICAgICAgICBbXCJyZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZ1wiIC8qIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HICovXTogJ0EgcmVkaXJlY3Qgc2lnbi1pbiBvcGVyYXRpb24gaXMgYWxyZWFkeSBwZW5kaW5nLicsXHJcbiAgICAgICAgW1wicmVqZWN0ZWQtY3JlZGVudGlhbFwiIC8qIFJFSkVDVEVEX0NSRURFTlRJQUwgKi9dOiAnVGhlIHJlcXVlc3QgY29udGFpbnMgbWFsZm9ybWVkIG9yIG1pc21hdGNoaW5nIGNyZWRlbnRpYWxzLicsXHJcbiAgICAgICAgW1wic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqL106ICdUaGUgc2Vjb25kIGZhY3RvciBpcyBhbHJlYWR5IGVucm9sbGVkIG9uIHRoaXMgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiAnVGhlIG1heGltdW0gYWxsb3dlZCBudW1iZXIgb2Ygc2Vjb25kIGZhY3RvcnMgb24gYSB1c2VyIGhhcyBiZWVuIGV4Y2VlZGVkLicsXHJcbiAgICAgICAgW1widGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovXTogXCJUaGUgcHJvdmlkZWQgdGVuYW50IElEIGRvZXMgbm90IG1hdGNoIHRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEXCIsXHJcbiAgICAgICAgW1widGltZW91dFwiIC8qIFRJTUVPVVQgKi9dOiAnVGhlIG9wZXJhdGlvbiBoYXMgdGltZWQgb3V0LicsXHJcbiAgICAgICAgW1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL106IFwiVGhlIHVzZXIncyBjcmVkZW50aWFsIGlzIG5vIGxvbmdlciB2YWxpZC4gVGhlIHVzZXIgbXVzdCBzaWduIGluIGFnYWluLlwiLFxyXG4gICAgICAgIFtcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogJ1dlIGhhdmUgYmxvY2tlZCBhbGwgcmVxdWVzdHMgZnJvbSB0aGlzIGRldmljZSBkdWUgdG8gdW51c3VhbCBhY3Rpdml0eS4gJyArXHJcbiAgICAgICAgICAgICdUcnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106ICdUaGUgZG9tYWluIG9mIHRoZSBjb250aW51ZSBVUkwgaXMgbm90IHdoaXRlbGlzdGVkLiAgUGxlYXNlIHdoaXRlbGlzdCAnICtcclxuICAgICAgICAgICAgJ3RoZSBkb21haW4gaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC1maXJzdC1mYWN0b3JcIiAvKiBVTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1IgKi9dOiAnRW5yb2xsaW5nIGEgc2Vjb25kIGZhY3RvciBvciBzaWduaW5nIGluIHdpdGggYSBtdWx0aS1mYWN0b3IgYWNjb3VudCByZXF1aXJlcyBzaWduLWluIHdpdGggYSBzdXBwb3J0ZWQgZmlyc3QgZmFjdG9yLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBjdXJyZW50IGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgdGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvblwiIC8qIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBhIG11bHRpLXRlbmFudCBjb250ZXh0LicsXHJcbiAgICAgICAgW1widW52ZXJpZmllZC1lbWFpbFwiIC8qIFVOVkVSSUZJRURfRU1BSUwgKi9dOiAnVGhlIG9wZXJhdGlvbiByZXF1aXJlcyBhIHZlcmlmaWVkIGVtYWlsLicsXHJcbiAgICAgICAgW1widXNlci1jYW5jZWxsZWRcIiAvKiBVU0VSX0NBTkNFTExFRCAqL106ICdUaGUgdXNlciBkaWQgbm90IGdyYW50IHlvdXIgYXBwbGljYXRpb24gdGhlIHBlcm1pc3Npb25zIGl0IHJlcXVlc3RlZC4nLFxyXG4gICAgICAgIFtcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXTogJ1RoZXJlIGlzIG5vIHVzZXIgcmVjb3JkIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBpZGVudGlmaWVyLiBUaGUgdXNlciBtYXkgJyArXHJcbiAgICAgICAgICAgICdoYXZlIGJlZW4gZGVsZXRlZC4nLFxyXG4gICAgICAgIFtcInVzZXItZGlzYWJsZWRcIiAvKiBVU0VSX0RJU0FCTEVEICovXTogJ1RoZSB1c2VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYW4gYWRtaW5pc3RyYXRvci4nLFxyXG4gICAgICAgIFtcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovXTogJ1RoZSBzdXBwbGllZCBjcmVkZW50aWFscyBkbyBub3QgY29ycmVzcG9uZCB0byB0aGUgcHJldmlvdXNseSBzaWduZWQgaW4gdXNlci4nLFxyXG4gICAgICAgIFtcInVzZXItc2lnbmVkLW91dFwiIC8qIFVTRVJfU0lHTkVEX09VVCAqL106ICcnLFxyXG4gICAgICAgIFtcIndlYWstcGFzc3dvcmRcIiAvKiBXRUFLX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBtdXN0IGJlIDYgY2hhcmFjdGVycyBsb25nIG9yIG1vcmUuJyxcclxuICAgICAgICBbXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiIC8qIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEICovXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkIG9yIDNyZCBwYXJ0eSBjb29raWVzIGFuZCBkYXRhIG1heSBiZSBkaXNhYmxlZC4nLFxyXG4gICAgICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBdXRoKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgJ2RpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVBdXRoKCkgd2l0aCB0aGUgJyArXHJcbiAgICAgICAgICAgICdzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0QXV0aCgpIHRvIHJldHVybiB0aGUnICtcclxuICAgICAgICAgICAgJyBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLidcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gX3Byb2RFcnJvck1hcCgpIHtcclxuICAgIC8vIFdlIHdpbGwgaW5jbHVkZSB0aGlzIG9uZSBtZXNzYWdlIGluIHRoZSBwcm9kIGVycm9yIG1hcCBzaW5jZSBieSB0aGUgdmVyeVxyXG4gICAgLy8gbmF0dXJlIG9mIHRoaXMgZXJyb3IsIGRldmVsb3BlcnMgd2lsbCBuZXZlciBiZSBhYmxlIHRvIHNlZSB0aGUgbWVzc2FnZVxyXG4gICAgLy8gdXNpbmcgdGhlIGRlYnVnRXJyb3JNYXAgKHdoaWNoIGlzIGluc3RhbGxlZCBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbikuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi9dOiAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXHJcbiAgICAgICAgICAgICdpbml0aWFsaXplZC4gUGxlYXNlIGJlIHN1cmUgdG8gY2FsbCBgaW5pdGlhbGl6ZUF1dGhgIG9yIGBnZXRBdXRoYCBiZWZvcmUgJyArXHJcbiAgICAgICAgICAgICdzdGFydGluZyBhbnkgb3RoZXIgRmlyZWJhc2UgU0RLLidcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIEEgdmVyYm9zZSBlcnJvciBtYXAgd2l0aCBkZXRhaWxlZCBkZXNjcmlwdGlvbnMgZm9yIG1vc3QgZXJyb3IgY29kZXMuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGRlYnVnRXJyb3JNYXAgPSBfZGVidWdFcnJvck1hcDtcclxuLyoqXHJcbiAqIEEgbWluaW1hbCBlcnJvciBtYXAgd2l0aCBhbGwgdmVyYm9zZSBlcnJvciBtZXNzYWdlcyBzdHJpcHBlZC5cclxuICpcclxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgcHJvZEVycm9yTWFwID0gX3Byb2RFcnJvck1hcDtcclxuY29uc3QgX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIF9wcm9kRXJyb3JNYXAoKSk7XHJcbi8qKlxyXG4gKiBBIG1hcCBvZiBwb3RlbnRpYWwgYEF1dGhgIGVycm9yIGNvZGVzLCBmb3IgZWFzaWVyIGNvbXBhcmlzb24gd2l0aCBlcnJvcnNcclxuICogdGhyb3duIGJ5IHRoZSBTREsuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE5vdGUgdGhhdCB5b3UgY2FuJ3QgdHJlZS1zaGFrZSBpbmRpdmlkdWFsIGtleXNcclxuICogaW4gdGhlIG1hcCwgc28gYnkgdXNpbmcgdGhlIG1hcCB5b3UgbWlnaHQgc3Vic3RhbnRpYWxseSBpbmNyZWFzZSB5b3VyXHJcbiAqIGJ1bmRsZSBzaXplLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgPSB7XHJcbiAgICBBRE1JTl9PTkxZX09QRVJBVElPTjogJ2F1dGgvYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb24nLFxyXG4gICAgQVJHVU1FTlRfRVJST1I6ICdhdXRoL2FyZ3VtZW50LWVycm9yJyxcclxuICAgIEFQUF9OT1RfQVVUSE9SSVpFRDogJ2F1dGgvYXBwLW5vdC1hdXRob3JpemVkJyxcclxuICAgIEFQUF9OT1RfSU5TVEFMTEVEOiAnYXV0aC9hcHAtbm90LWluc3RhbGxlZCcsXHJcbiAgICBDQVBUQ0hBX0NIRUNLX0ZBSUxFRDogJ2F1dGgvY2FwdGNoYS1jaGVjay1mYWlsZWQnLFxyXG4gICAgQ09ERV9FWFBJUkVEOiAnYXV0aC9jb2RlLWV4cGlyZWQnLFxyXG4gICAgQ09SRE9WQV9OT1RfUkVBRFk6ICdhdXRoL2NvcmRvdmEtbm90LXJlYWR5JyxcclxuICAgIENPUlNfVU5TVVBQT1JURUQ6ICdhdXRoL2NvcnMtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRTogJ2F1dGgvY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBDUkVERU5USUFMX01JU01BVENIOiAnYXV0aC9jdXN0b20tdG9rZW4tbWlzbWF0Y2gnLFxyXG4gICAgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOOiAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nLFxyXG4gICAgREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIOiAnYXV0aC9kZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoJyxcclxuICAgIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOiAnYXV0aC9keW5hbWljLWxpbmstbm90LWFjdGl2YXRlZCcsXHJcbiAgICBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OOiAnYXV0aC9lbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uJyxcclxuICAgIEVNQUlMX0VYSVNUUzogJ2F1dGgvZW1haWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgRU1VTEFUT1JfQ09ORklHX0ZBSUxFRDogJ2F1dGgvZW11bGF0b3ItY29uZmlnLWZhaWxlZCcsXHJcbiAgICBFWFBJUkVEX09PQl9DT0RFOiAnYXV0aC9leHBpcmVkLWFjdGlvbi1jb2RlJyxcclxuICAgIEVYUElSRURfUE9QVVBfUkVRVUVTVDogJ2F1dGgvY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3QnLFxyXG4gICAgSU5URVJOQUxfRVJST1I6ICdhdXRoL2ludGVybmFsLWVycm9yJyxcclxuICAgIElOVkFMSURfQVBJX0tFWTogJ2F1dGgvaW52YWxpZC1hcGkta2V5JyxcclxuICAgIElOVkFMSURfQVBQX0NSRURFTlRJQUw6ICdhdXRoL2ludmFsaWQtYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9BUFBfSUQ6ICdhdXRoL2ludmFsaWQtYXBwLWlkJyxcclxuICAgIElOVkFMSURfQVVUSDogJ2F1dGgvaW52YWxpZC11c2VyLXRva2VuJyxcclxuICAgIElOVkFMSURfQVVUSF9FVkVOVDogJ2F1dGgvaW52YWxpZC1hdXRoLWV2ZW50JyxcclxuICAgIElOVkFMSURfQ0VSVF9IQVNIOiAnYXV0aC9pbnZhbGlkLWNlcnQtaGFzaCcsXHJcbiAgICBJTlZBTElEX0NPREU6ICdhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGUnLFxyXG4gICAgSU5WQUxJRF9DT05USU5VRV9VUkk6ICdhdXRoL2ludmFsaWQtY29udGludWUtdXJpJyxcclxuICAgIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OOiAnYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvbicsXHJcbiAgICBJTlZBTElEX0NVU1RPTV9UT0tFTjogJ2F1dGgvaW52YWxpZC1jdXN0b20tdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOOiAnYXV0aC9pbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW4nLFxyXG4gICAgSU5WQUxJRF9FTUFJTDogJ2F1dGgvaW52YWxpZC1lbWFpbCcsXHJcbiAgICBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRTogJ2F1dGgvaW52YWxpZC1lbXVsYXRvci1zY2hlbWUnLFxyXG4gICAgSU5WQUxJRF9JRFBfUkVTUE9OU0U6ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX01FU1NBR0VfUEFZTE9BRDogJ2F1dGgvaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxyXG4gICAgSU5WQUxJRF9NRkFfU0VTU0lPTjogJ2F1dGgvaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBJTlZBTElEX09BVVRIX0NMSUVOVF9JRDogJ2F1dGgvaW52YWxpZC1vYXV0aC1jbGllbnQtaWQnLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9QUk9WSURFUjogJ2F1dGgvaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXHJcbiAgICBJTlZBTElEX09PQl9DT0RFOiAnYXV0aC9pbnZhbGlkLWFjdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfT1JJR0lOOiAnYXV0aC91bmF1dGhvcml6ZWQtZG9tYWluJyxcclxuICAgIElOVkFMSURfUEFTU1dPUkQ6ICdhdXRoL3dyb25nLXBhc3N3b3JkJyxcclxuICAgIElOVkFMSURfUEVSU0lTVEVOQ0U6ICdhdXRoL2ludmFsaWQtcGVyc2lzdGVuY2UtdHlwZScsXHJcbiAgICBJTlZBTElEX1BIT05FX05VTUJFUjogJ2F1dGgvaW52YWxpZC1waG9uZS1udW1iZXInLFxyXG4gICAgSU5WQUxJRF9QUk9WSURFUl9JRDogJ2F1dGgvaW52YWxpZC1wcm92aWRlci1pZCcsXHJcbiAgICBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTDogJ2F1dGgvaW52YWxpZC1yZWNpcGllbnQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9TRU5ERVI6ICdhdXRoL2ludmFsaWQtc2VuZGVyJyxcclxuICAgIElOVkFMSURfU0VTU0lPTl9JTkZPOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXHJcbiAgICBJTlZBTElEX1RFTkFOVF9JRDogJ2F1dGgvaW52YWxpZC10ZW5hbnQtaWQnLFxyXG4gICAgTUZBX0lORk9fTk9UX0ZPVU5EOiAnYXV0aC9tdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmQnLFxyXG4gICAgTUZBX1JFUVVJUkVEOiAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXHJcbiAgICBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FOiAnYXV0aC9taXNzaW5nLWFuZHJvaWQtcGtnLW5hbWUnLFxyXG4gICAgTUlTU0lOR19BUFBfQ1JFREVOVElBTDogJ2F1dGgvbWlzc2luZy1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBNSVNTSU5HX0FVVEhfRE9NQUlOOiAnYXV0aC9hdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19DT0RFOiAnYXV0aC9taXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIE1JU1NJTkdfQ09OVElOVUVfVVJJOiAnYXV0aC9taXNzaW5nLWNvbnRpbnVlLXVyaScsXHJcbiAgICBNSVNTSU5HX0lGUkFNRV9TVEFSVDogJ2F1dGgvbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxyXG4gICAgTUlTU0lOR19JT1NfQlVORExFX0lEOiAnYXV0aC9taXNzaW5nLWlvcy1idW5kbGUtaWQnLFxyXG4gICAgTUlTU0lOR19PUl9JTlZBTElEX05PTkNFOiAnYXV0aC9taXNzaW5nLW9yLWludmFsaWQtbm9uY2UnLFxyXG4gICAgTUlTU0lOR19NRkFfSU5GTzogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXHJcbiAgICBNSVNTSU5HX01GQV9TRVNTSU9OOiAnYXV0aC9taXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcclxuICAgIE1JU1NJTkdfUEhPTkVfTlVNQkVSOiAnYXV0aC9taXNzaW5nLXBob25lLW51bWJlcicsXHJcbiAgICBNSVNTSU5HX1NFU1NJT05fSU5GTzogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgTU9EVUxFX0RFU1RST1lFRDogJ2F1dGgvYXBwLWRlbGV0ZWQnLFxyXG4gICAgTkVFRF9DT05GSVJNQVRJT046ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnLFxyXG4gICAgTkVUV09SS19SRVFVRVNUX0ZBSUxFRDogJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXHJcbiAgICBOVUxMX1VTRVI6ICdhdXRoL251bGwtdXNlcicsXHJcbiAgICBOT19BVVRIX0VWRU5UOiAnYXV0aC9uby1hdXRoLWV2ZW50JyxcclxuICAgIE5PX1NVQ0hfUFJPVklERVI6ICdhdXRoL25vLXN1Y2gtcHJvdmlkZXInLFxyXG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEOiAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnLFxyXG4gICAgT1BFUkFUSU9OX05PVF9TVVBQT1JURUQ6ICdhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQnLFxyXG4gICAgUE9QVVBfQkxPQ0tFRDogJ2F1dGgvcG9wdXAtYmxvY2tlZCcsXHJcbiAgICBQT1BVUF9DTE9TRURfQllfVVNFUjogJ2F1dGgvcG9wdXAtY2xvc2VkLWJ5LXVzZXInLFxyXG4gICAgUFJPVklERVJfQUxSRUFEWV9MSU5LRUQ6ICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJyxcclxuICAgIFFVT1RBX0VYQ0VFREVEOiAnYXV0aC9xdW90YS1leGNlZWRlZCcsXHJcbiAgICBSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUjogJ2F1dGgvcmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXInLFxyXG4gICAgUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkc6ICdhdXRoL3JlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nJyxcclxuICAgIFJFSkVDVEVEX0NSRURFTlRJQUw6ICdhdXRoL3JlamVjdGVkLWNyZWRlbnRpYWwnLFxyXG4gICAgU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEOiAnYXV0aC9zZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQ6ICdhdXRoL21heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZCcsXHJcbiAgICBURU5BTlRfSURfTUlTTUFUQ0g6ICdhdXRoL3RlbmFudC1pZC1taXNtYXRjaCcsXHJcbiAgICBUSU1FT1VUOiAnYXV0aC90aW1lb3V0JyxcclxuICAgIFRPS0VOX0VYUElSRUQ6ICdhdXRoL3VzZXItdG9rZW4tZXhwaXJlZCcsXHJcbiAgICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVI6ICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJyxcclxuICAgIFVOQVVUSE9SSVpFRF9ET01BSU46ICdhdXRoL3VuYXV0aG9yaXplZC1jb250aW51ZS11cmknLFxyXG4gICAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SOiAnYXV0aC91bnN1cHBvcnRlZC1maXJzdC1mYWN0b3InLFxyXG4gICAgVU5TVVBQT1JURURfUEVSU0lTVEVOQ0U6ICdhdXRoL3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTjogJ2F1dGgvdW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvbicsXHJcbiAgICBVTlZFUklGSUVEX0VNQUlMOiAnYXV0aC91bnZlcmlmaWVkLWVtYWlsJyxcclxuICAgIFVTRVJfQ0FOQ0VMTEVEOiAnYXV0aC91c2VyLWNhbmNlbGxlZCcsXHJcbiAgICBVU0VSX0RFTEVURUQ6ICdhdXRoL3VzZXItbm90LWZvdW5kJyxcclxuICAgIFVTRVJfRElTQUJMRUQ6ICdhdXRoL3VzZXItZGlzYWJsZWQnLFxyXG4gICAgVVNFUl9NSVNNQVRDSDogJ2F1dGgvdXNlci1taXNtYXRjaCcsXHJcbiAgICBVU0VSX1NJR05FRF9PVVQ6ICdhdXRoL3VzZXItc2lnbmVkLW91dCcsXHJcbiAgICBXRUFLX1BBU1NXT1JEOiAnYXV0aC93ZWFrLXBhc3N3b3JkJyxcclxuICAgIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEOiAnYXV0aC93ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXHJcbiAgICBBTFJFQURZX0lOSVRJQUxJWkVEOiAnYXV0aC9hbHJlYWR5LWluaXRpYWxpemVkJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dDbGllbnQgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXV0aCcpO1xyXG5mdW5jdGlvbiBfbG9nRXJyb3IobXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XHJcbiAgICAgICAgbG9nQ2xpZW50LmVycm9yKGBBdXRoICgke1NES19WRVJTSU9OfSk6ICR7bXNnfWAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9mYWlsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUVycm9yKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHJldHVybiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKHR5cGVvZiBhdXRoT3JDb2RlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSByZXN0WzBdO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXJhbXMgPSBbLi4ucmVzdC5zbGljZSgxKV07XHJcbiAgICAgICAgaWYgKGZ1bGxQYXJhbXNbMF0pIHtcclxuICAgICAgICAgICAgZnVsbFBhcmFtc1swXS5hcHBOYW1lID0gYXV0aE9yQ29kZS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXV0aE9yQ29kZS5fZXJyb3JGYWN0b3J5LmNyZWF0ZShjb2RlLCAuLi5mdWxsUGFyYW1zKTtcclxuICAgIH1cclxuICAgIHJldHVybiBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkuY3JlYXRlKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnQoYXNzZXJ0aW9uLCBhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gaW50ZXJuYWwgZXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cclxuICpcclxuICogQHBhcmFtIGZhaWx1cmUgdHlwZSBvZiBmYWlsdXJlIGVuY291bnRlcmVkXHJcbiAqIEB0aHJvd3MgRXJyb3JcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnRmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZmFpbHVyZTtcclxuICAgIF9sb2dFcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlYmFzZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcclxuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXHJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcclxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3NlcnRpb25cclxuICogQHBhcmFtIG1lc3NhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnQXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBkZWJ1Z0ZhaWwobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VDYWNoZSA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gX2dldEluc3RhbmNlKGNscykge1xyXG4gICAgZGVidWdBc3NlcnQoY2xzIGluc3RhbmNlb2YgRnVuY3Rpb24sICdFeHBlY3RlZCBhIGNsYXNzIGRlZmluaXRpb24nKTtcclxuICAgIGxldCBpbnN0YW5jZSA9IGluc3RhbmNlQ2FjaGUuZ2V0KGNscyk7XHJcbiAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydChpbnN0YW5jZSBpbnN0YW5jZW9mIGNscywgJ0luc3RhbmNlIHN0b3JlZCBpbiBjYWNoZSBtaXNtYXRjaGVkIHdpdGggY2xhc3MnKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBpbnN0YW5jZSA9IG5ldyBjbHMoKTtcclxuICAgIGluc3RhbmNlQ2FjaGUuc2V0KGNscywgaW5zdGFuY2UpO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplcyBhbiB7QGxpbmsgQXV0aH0gaW5zdGFuY2Ugd2l0aCBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyXHJcbiAqIHtAbGluayBEZXBlbmRlbmNpZXN9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBtb3JlIGNvbnRyb2wgb3ZlciB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRoYW5cclxuICoge0BsaW5rIGdldEF1dGh9LiBgZ2V0QXV0aGAgdXNlcyBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0cyB0byBzdXBwbHlcclxuICogdGhlIHtAbGluayBEZXBlbmRlbmNpZXN9LiBJbiBnZW5lcmFsLCBgZ2V0QXV0aGAgaXMgdGhlIGVhc2llc3Qgd2F5IHRvXHJcbiAqIGluaXRpYWxpemUgQXV0aCBhbmQgd29ya3MgZm9yIG1vc3QgdXNlIGNhc2VzLiBVc2UgYGluaXRpYWxpemVBdXRoYCBpZiB5b3VcclxuICogbmVlZCBjb250cm9sIG92ZXIgd2hpY2ggcGVyc2lzdGVuY2UgbGF5ZXIgaXMgdXNlZCwgb3IgdG8gbWluaW1pemUgYnVuZGxlXHJcbiAqIHNpemUgaWYgeW91J3JlIG5vdCB1c2luZyBlaXRoZXIgYHNpZ25JbldpdGhQb3B1cGAgb3IgYHNpZ25JbldpdGhSZWRpcmVjdGAuXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlLCBpZiB5b3VyIGFwcCBvbmx5IHVzZXMgYW5vbnltb3VzIGFjY291bnRzIGFuZCB5b3Ugb25seSB3YW50XHJcbiAqIGFjY291bnRzIHNhdmVkIGZvciB0aGUgY3VycmVudCBzZXNzaW9uLCBpbml0aWFsaXplIGBBdXRoYCB3aXRoOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCBhdXRoID0gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAqICAgcGVyc2lzdGVuY2U6IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsXHJcbiAqICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiB1bmRlZmluZWQsXHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUF1dGgoYXBwLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxPcHRpb25zID0gcHJvdmlkZXIuZ2V0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwoaW5pdGlhbE9wdGlvbnMsIGRlcHMgIT09IG51bGwgJiYgZGVwcyAhPT0gdm9pZCAwID8gZGVwcyA6IHt9KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5pbml0aWFsaXplKHsgb3B0aW9uczogZGVwcyB9KTtcclxuICAgIHJldHVybiBhdXRoO1xyXG59XHJcbmZ1bmN0aW9uIF9pbml0aWFsaXplQXV0aEluc3RhbmNlKGF1dGgsIGRlcHMpIHtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gKGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wZXJzaXN0ZW5jZSkgfHwgW107XHJcbiAgICBjb25zdCBoaWVyYXJjaHkgPSAoQXJyYXkuaXNBcnJheShwZXJzaXN0ZW5jZSkgPyBwZXJzaXN0ZW5jZSA6IFtwZXJzaXN0ZW5jZV0pLm1hcChfZ2V0SW5zdGFuY2UpO1xyXG4gICAgaWYgKGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5lcnJvck1hcCkge1xyXG4gICAgICAgIGF1dGguX3VwZGF0ZUVycm9yTWFwKGRlcHMuZXJyb3JNYXApO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBwcm9taXNlIGlzIGludGVuZGVkIHRvIGZsb2F0OyBhdXRoIGluaXRpYWxpemF0aW9uIGhhcHBlbnMgaW4gdGhlXHJcbiAgICAvLyBiYWNrZ3JvdW5kLCBtZWFud2hpbGUgdGhlIGF1dGggb2JqZWN0IG1heSBiZSB1c2VkIGJ5IHRoZSBhcHAuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICBhdXRoLl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKGhpZXJhcmNoeSwgZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLnBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEN1cnJlbnRVcmwoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhyZWYpKSB8fCAnJztcclxufVxyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkpIHx8IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBicm93c2VyIGlzIHdvcmtpbmcgb25saW5lXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNPbmxpbmUoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBuYXZpZ2F0b3IgJiZcclxuICAgICAgICAnb25MaW5lJyBpbiBuYXZpZ2F0b3IgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm9uTGluZSA9PT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgLy8gQXBwbHkgb25seSBmb3IgdHJhZGl0aW9uYWwgd2ViIGFwcHMgYW5kIENocm9tZSBleHRlbnNpb25zLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSB0cnVlIGZvciBDb3Jkb3ZhIGFwcHMgd2hpY2ggaGF2ZSB1bnJlbGlhYmxlXHJcbiAgICAgICAgLy8gbmF2aWdhdG9yLm9uTGluZSBiZWhhdmlvciB1bmxlc3MgY29yZG92YS1wbHVnaW4tbmV0d29yay1pbmZvcm1hdGlvbiBpc1xyXG4gICAgICAgIC8vIGluc3RhbGxlZCB3aGljaCBvdmVyd3JpdGVzIHRoZSBuYXRpdmUgbmF2aWdhdG9yLm9uTGluZSB2YWx1ZSBhbmRcclxuICAgICAgICAvLyBkZWZpbmVzIG5hdmlnYXRvci5jb25uZWN0aW9uLlxyXG4gICAgICAgIChfaXNIdHRwT3JIdHRwcygpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8ICdjb25uZWN0aW9uJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN0YXRlLCBhc3N1bWUgaXQgaXMgb25saW5lLlxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gX2dldFVzZXJMYW5ndWFnZSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmF2aWdhdG9yTGFuZ3VhZ2UgPSBuYXZpZ2F0b3I7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgLy8gTW9zdCByZWxpYWJsZSwgYnV0IG9ubHkgc3VwcG9ydGVkIGluIENocm9tZS9GaXJlZm94LlxyXG4gICAgKG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXNbMF0pIHx8XHJcbiAgICAgICAgLy8gU3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZXR1cm5zIHRoZSBsYW5ndWFnZSBvZiB0aGUgYnJvd3NlclxyXG4gICAgICAgIC8vIFVJLCBub3QgdGhlIGxhbmd1YWdlIHNldCBpbiBicm93c2VyIHNldHRpbmdzLlxyXG4gICAgICAgIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlIHx8XHJcbiAgICAgICAgLy8gQ291bGRuJ3QgZGV0ZXJtaW5lIGxhbmd1YWdlLlxyXG4gICAgICAgIG51bGwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHN0cnVjdHVyZSB0byBoZWxwIHBpY2sgYmV0d2VlbiBhIHJhbmdlIG9mIGxvbmcgYW5kIHNob3J0IGRlbGF5IGR1cmF0aW9uc1xyXG4gKiBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuIEluIGdlbmVyYWwsIHRoZSBsb25nIGRlbGF5IGlzIHVzZWQgZm9yXHJcbiAqIG1vYmlsZSBlbnZpcm9ubWVudHMgd2hlcmVhcyBzaG9ydCBkZWxheXMgYXJlIHVzZWQgZm9yIGRlc2t0b3AgZW52aXJvbm1lbnRzLlxyXG4gKi9cclxuY2xhc3MgRGVsYXkge1xyXG4gICAgY29uc3RydWN0b3Ioc2hvcnREZWxheSwgbG9uZ0RlbGF5KSB7XHJcbiAgICAgICAgdGhpcy5zaG9ydERlbGF5ID0gc2hvcnREZWxheTtcclxuICAgICAgICB0aGlzLmxvbmdEZWxheSA9IGxvbmdEZWxheTtcclxuICAgICAgICAvLyBJbnRlcm5hbCBlcnJvciB3aGVuIGltcHJvcGVybHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgZGVidWdBc3NlcnQobG9uZ0RlbGF5ID4gc2hvcnREZWxheSwgJ1Nob3J0IGRlbGF5IHNob3VsZCBiZSBsZXNzIHRoYW4gbG9uZyBkZWxheSEnKTtcclxuICAgICAgICB0aGlzLmlzTW9iaWxlID0gaXNNb2JpbGVDb3Jkb3ZhKCkgfHwgaXNSZWFjdE5hdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIGlmICghX2lzT25saW5lKCkpIHtcclxuICAgICAgICAgICAgLy8gUGljayB0aGUgc2hvcnRlciB0aW1lb3V0LlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oNTAwMCAvKiBPRkZMSU5FICovLCB0aGlzLnNob3J0RGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBydW5uaW5nIGluIGEgbW9iaWxlIGVudmlyb25tZW50LCByZXR1cm4gdGhlIGxvbmcgZGVsYXksIG90aGVyd2lzZVxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2hvcnQgZGVsYXkuXHJcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBpbXByb3ZlZCBpbiB0aGUgZnV0dXJlIHRvIGR5bmFtaWNhbGx5IGNoYW5nZSBiYXNlZCBvbiBvdGhlclxyXG4gICAgICAgIC8vIHZhcmlhYmxlcyBpbnN0ZWFkIG9mIGp1c3QgcmVhZGluZyB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHRoaXMubG9uZ0RlbGF5IDogdGhpcy5zaG9ydERlbGF5O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9lbXVsYXRvclVybChjb25maWcsIHBhdGgpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNvbmZpZy5lbXVsYXRvciwgJ0VtdWxhdG9yIHNob3VsZCBhbHdheXMgYmUgc2V0IGhlcmUnKTtcclxuICAgIGNvbnN0IHsgdXJsIH0gPSBjb25maWcuZW11bGF0b3I7XHJcbiAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0ke3BhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGh9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGZXRjaFByb3ZpZGVyIHtcclxuICAgIHN0YXRpYyBpbml0aWFsaXplKGZldGNoSW1wbCwgaGVhZGVyc0ltcGwsIHJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hJbXBsID0gZmV0Y2hJbXBsO1xyXG4gICAgICAgIGlmIChoZWFkZXJzSW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNJbXBsID0gaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUltcGwgPSByZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGZldGNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZldGNoSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2ZldGNoJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIGZldGNoIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGhlYWRlcnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0hlYWRlcnMnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuSGVhZGVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBIZWFkZXJzIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHJlc3BvbnNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ1Jlc3BvbnNlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLlJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIFJlc3BvbnNlIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXAgZnJvbSBlcnJvcnMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciB0byBlcnJvcnMgdG8gZGV2ZWxvcGVyIHZpc2libGUgZXJyb3JzXHJcbiAqL1xyXG5jb25zdCBTRVJWRVJfRVJST1JfTUFQID0ge1xyXG4gICAgLy8gQ3VzdG9tIHRva2VuIGVycm9ycy5cclxuICAgIFtcIkNSRURFTlRJQUxfTUlTTUFUQ0hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovXTogXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DVVNUT01fVE9LRU5cIiAvKiBNSVNTSU5HX0NVU1RPTV9UT0tFTiAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIENyZWF0ZSBBdXRoIFVSSSBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0lERU5USUZJRVJcIiAvKiBJTlZBTElEX0lERU5USUZJRVIgKi9dOiBcImludmFsaWQtZW1haWxcIiAvKiBJTlZBTElEX0VNQUlMICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DT05USU5VRV9VUklcIiAvKiBNSVNTSU5HX0NPTlRJTlVFX1VSSSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNpZ24gaW4gd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzIChzb21lIGFwcGx5IHRvIHNpZ24gdXAgdG9vKS5cclxuICAgIFtcIklOVkFMSURfUEFTU1dPUkRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovXTogXCJ3cm9uZy1wYXNzd29yZFwiIC8qIElOVkFMSURfUEFTU1dPUkQgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX1BBU1NXT1JEXCIgLyogTUlTU0lOR19QQVNTV09SRCAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNpZ24gdXAgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzLlxyXG4gICAgW1wiRU1BSUxfRVhJU1RTXCIgLyogRU1BSUxfRVhJU1RTICovXTogXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqLyxcclxuICAgIFtcIlBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEXCIgLyogUEFTU1dPUkRfTE9HSU5fRElTQUJMRUQgKi9dOiBcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIE9QRVJBVElPTl9OT1RfQUxMT1dFRCAqLyxcclxuICAgIC8vIFZlcmlmeSBhc3NlcnRpb24gZm9yIHNpZ24gaW4gd2l0aCBjcmVkZW50aWFsIGVycm9yczpcclxuICAgIFtcIklOVkFMSURfSURQX1JFU1BPTlNFXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiSU5WQUxJRF9QRU5ESU5HX1RPS0VOXCIgLyogSU5WQUxJRF9QRU5ESU5HX1RPS0VOICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi9dOiBcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19SRVFfVFlQRVwiIC8qIE1JU1NJTkdfUkVRX1RZUEUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTZW5kIFBhc3N3b3JkIHJlc2V0IGVtYWlsIGVycm9yczpcclxuICAgIFtcIkVNQUlMX05PVF9GT1VORFwiIC8qIEVNQUlMX05PVF9GT1VORCAqL106IFwidXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi8sXHJcbiAgICBbXCJSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVRcIiAvKiBSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVQgKi9dOiBcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovLFxyXG4gICAgW1wiRVhQSVJFRF9PT0JfQ09ERVwiIC8qIEVYUElSRURfT09CX0NPREUgKi9dOiBcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9PT0JfQ09ERVwiIC8qIElOVkFMSURfT09CX0NPREUgKi9dOiBcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19PT0JfQ09ERVwiIC8qIE1JU1NJTkdfT09CX0NPREUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBPcGVyYXRpb25zIHRoYXQgcmVxdWlyZSBJRCB0b2tlbiBpbiByZXF1ZXN0OlxyXG4gICAgW1wiQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi8sXHJcbiAgICBbXCJJTlZBTElEX0lEX1RPS0VOXCIgLyogSU5WQUxJRF9JRF9UT0tFTiAqL106IFwiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovLFxyXG4gICAgW1wiVE9LRU5fRVhQSVJFRFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8sXHJcbiAgICBbXCJVU0VSX05PVF9GT1VORFwiIC8qIFVTRVJfTk9UX0ZPVU5EICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgZXJyb3JzLlxyXG4gICAgW1wiVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIC8vIFBob25lIEF1dGggcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0NPREVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiBcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi8sXHJcbiAgICBbXCJJTlZBTElEX1NFU1NJT05fSU5GT1wiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovLFxyXG4gICAgW1wiSU5WQUxJRF9URU1QT1JBUllfUFJPT0ZcIiAvKiBJTlZBTElEX1RFTVBPUkFSWV9QUk9PRiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJNSVNTSU5HX1NFU1NJT05fSU5GT1wiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovLFxyXG4gICAgW1wiU0VTU0lPTl9FWFBJUkVEXCIgLyogU0VTU0lPTl9FWFBJUkVEICovXTogXCJjb2RlLWV4cGlyZWRcIiAvKiBDT0RFX0VYUElSRUQgKi8sXHJcbiAgICAvLyBPdGhlciBhY3Rpb24gY29kZSBlcnJvcnMgd2hlbiBhZGRpdGlvbmFsIHNldHRpbmdzIHBhc3NlZC5cclxuICAgIC8vIE1JU1NJTkdfQ09OVElOVUVfVVJJIGlzIGdldHRpbmcgbWFwcGVkIHRvIElOVEVSTkFMX0VSUk9SIGFib3ZlLlxyXG4gICAgLy8gVGhpcyBpcyBPSyBhcyB0aGlzIGVycm9yIHdpbGwgYmUgY2F1Z2h0IGJ5IGNsaWVudCBzaWRlIHZhbGlkYXRpb24uXHJcbiAgICBbXCJNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106IFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyxcclxuICAgIFtcIlVOQVVUSE9SSVpFRF9ET01BSU5cIiAvKiBVTkFVVEhPUklaRURfRE9NQUlOICovXTogXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqLyxcclxuICAgIC8vIGdldFByb2plY3RDb25maWcgZXJyb3JzIHdoZW4gY2xpZW50SWQgaXMgcGFzc2VkLlxyXG4gICAgW1wiSU5WQUxJRF9PQVVUSF9DTElFTlRfSURcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106IFwiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqLyxcclxuICAgIC8vIFVzZXIgYWN0aW9ucyAoc2lnbi11cCBvciBkZWxldGlvbikgZGlzYWJsZWQgZXJyb3JzLlxyXG4gICAgW1wiQURNSU5fT05MWV9PUEVSQVRJT05cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqL106IFwiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqLyxcclxuICAgIC8vIE11bHRpIGZhY3RvciByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIklOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIElOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwiaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIElOVkFMSURfTUZBX1NFU1NJT04gKi8sXHJcbiAgICBbXCJNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkRcIiAvKiBNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkQgKi9dOiBcIm11bHRpLWZhY3Rvci1pbmZvLW5vdC1mb3VuZFwiIC8qIE1GQV9JTkZPX05PVF9GT1VORCAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX0VOUk9MTE1FTlRfSURcIiAvKiBNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEICovXTogXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogTUlTU0lOR19NRkFfSU5GTyAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIE1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIE1JU1NJTkdfTUZBX1NFU1NJT04gKi8sXHJcbiAgICBbXCJTRUNPTkRfRkFDVE9SX0VYSVNUU1wiIC8qIFNFQ09ORF9GQUNUT1JfRVhJU1RTICovXTogXCJzZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlXCIgLyogU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiBcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9cclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9BUElfVElNRU9VVF9NUyA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5mdW5jdGlvbiBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsICgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IHt9O1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIC8qIEdFVCAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeXN0cmluZyhPYmplY3QuYXNzaWduKHsga2V5OiBhdXRoLmNvbmZpZy5hcGlLZXkgfSwgcGFyYW1zKSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyAoRmV0Y2hQcm92aWRlci5oZWFkZXJzKCkpKCk7XHJcbiAgICAgICAgaGVhZGVycy5zZXQoXCJDb250ZW50LVR5cGVcIiAvKiBDT05URU5UX1RZUEUgKi8sICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgICAgaGVhZGVycy5zZXQoXCJYLUNsaWVudC1WZXJzaW9uXCIgLyogWF9DTElFTlRfVkVSU0lPTiAqLywgYXV0aC5fZ2V0U2RrQ2xpZW50VmVyc2lvbigpKTtcclxuICAgICAgICBpZiAoYXV0aC5sYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJYLUZpcmViYXNlLUxvY2FsZVwiIC8qIFhfRklSRUJBU0VfTE9DQUxFICovLCBhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkoX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGF1dGguY29uZmlnLmFwaUhvc3QsIHBhdGgsIHF1ZXJ5KSwgT2JqZWN0LmFzc2lnbih7IG1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVycywgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicgfSwgYm9keSkpO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIGN1c3RvbUVycm9yTWFwLCBmZXRjaEZuKSB7XHJcbiAgICBhdXRoLl9jYW5Jbml0RW11bGF0b3IgPSBmYWxzZTtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBTRVJWRVJfRVJST1JfTUFQKSwgY3VzdG9tRXJyb3JNYXApO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IG5ldyBOZXR3b3JrVGltZW91dChhdXRoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoRm4oKSxcclxuICAgICAgICAgICAgbmV0d29ya1RpbWVvdXQucHJvbWlzZVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhpcyBwb2ludCwgdGhlIGZldGNoIHN1Y2NlZWRlZCBhbmQgdGhlIG5ldHdvcmtUaW1lb3V0XHJcbiAgICAgICAgLy8gZGlkbid0IHRocm93OyBjbGVhciB0aGUgbmV0d29yayB0aW1lb3V0IGRlbGF5IHNvIHRoYXQgTm9kZSB3b24ndCBoYW5nXHJcbiAgICAgICAgbmV0d29ya1RpbWVvdXQuY2xlYXJOZXR3b3JrVGltZW91dCgpO1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgaWYgKCduZWVkQ29uZmlybWF0aW9uJyBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2sgJiYgISgnZXJyb3JNZXNzYWdlJyBpbiBqc29uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm9rID8ganNvbi5lcnJvck1lc3NhZ2UgOiBqc29uLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckVycm9yQ29kZSA9IGVycm9yTWVzc2FnZS5zcGxpdCgnIDogJylbMF07XHJcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJFcnJvckNvZGUgPT09IFwiRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRURcIiAvKiBGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZXJ2ZXJFcnJvckNvZGUgPT09IFwiRU1BSUxfRVhJU1RTXCIgLyogRU1BSUxfRVhJU1RTICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhFcnJvciA9IGVycm9yTWFwW3NlcnZlckVycm9yQ29kZV0gfHxcclxuICAgICAgICAgICAgICAgIHNlcnZlckVycm9yQ29kZVxyXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tfXFxzXSsvZywgJy0nKTtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgYXV0aEVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfZmFpbChhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCA9IHt9KSB7XHJcbiAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCkpO1xyXG4gICAgaWYgKCdtZmFQZW5kaW5nQ3JlZGVudGlhbCcgaW4gc2VydmVyUmVzcG9uc2UpIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovLCB7XHJcbiAgICAgICAgICAgIHNlcnZlclJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VydmVyUmVzcG9uc2U7XHJcbn1cclxuZnVuY3Rpb24gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGhvc3QsIHBhdGgsIHF1ZXJ5KSB7XHJcbiAgICBjb25zdCBiYXNlID0gYCR7aG9zdH0ke3BhdGh9PyR7cXVlcnl9YDtcclxuICAgIGlmICghYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm4gYCR7YXV0aC5jb25maWcuYXBpU2NoZW1lfTovLyR7YmFzZX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9lbXVsYXRvclVybChhdXRoLmNvbmZpZywgYmFzZSk7XHJcbn1cclxuY2xhc3MgTmV0d29ya1RpbWVvdXQge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXHJcbiAgICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCB0aGUgdmFsdWUgaGVyZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgfSwgREVGQVVMVF9BUElfVElNRU9VVF9NUy5nZXQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhck5ldHdvcmtUaW1lb3V0KCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIGNvZGUsIHJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBlcnJvclBhcmFtcyA9IHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWVcclxuICAgIH07XHJcbiAgICBpZiAocmVzcG9uc2UuZW1haWwpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5lbWFpbCA9IHJlc3BvbnNlLmVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3BvbnNlLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgZXJyb3JQYXJhbXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlcjtcclxuICAgIH1cclxuICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIGNvZGUsIGVycm9yUGFyYW1zKTtcclxuICAgIC8vIFdlIGtub3cgY3VzdG9tRGF0YSBpcyBkZWZpbmVkIG9uIGVycm9yIGJlY2F1c2UgZXJyb3JQYXJhbXMgaXMgZGVmaW5lZFxyXG4gICAgZXJyb3IuY3VzdG9tRGF0YS5fdG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFjY291bnQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpkZWxldGVcIiAvKiBERUxFVEVfQUNDT1VOVCAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlTGlua2VkQWNjb3VudHMoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SW5mbyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmxvb2t1cFwiIC8qIEdFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyh1dGNUaW1lc3RhbXApIHtcclxuICAgIGlmICghdXRjVGltZXN0YW1wKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB0byBkYXRlIG9iamVjdC5cclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoTnVtYmVyKHV0Y1RpbWVzdGFtcCkpO1xyXG4gICAgICAgIC8vIFRlc3QgZGF0ZSBpcyB2YWxpZC5cclxuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRvIFVUQyBkYXRlIHN0cmluZy5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHVzZXIgdG8gYSBGaXJlYmFzZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIGlmIGl0IGhhcyBub3QgZXhwaXJlZCBvciBpZiBpdCB3aWxsIG5vdCBleHBpcmUgaW4gdGhlIG5leHQgZml2ZVxyXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJZFRva2VuKHVzZXIsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIGRlc2VyaWFsaXplZCBKU09OIFdlYiBUb2tlbiAoSldUKSB1c2VkIHRvIGlkZW50aXRmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldElkVG9rZW5SZXN1bHQodXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIGNvbnN0IGNsYWltcyA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQoY2xhaW1zICYmIGNsYWltcy5leHAgJiYgY2xhaW1zLmF1dGhfdGltZSAmJiBjbGFpbXMuaWF0LCB1c2VySW50ZXJuYWwuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGZpcmViYXNlID0gdHlwZW9mIGNsYWltcy5maXJlYmFzZSA9PT0gJ29iamVjdCcgPyBjbGFpbXMuZmlyZWJhc2UgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgYXV0aFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmF1dGhfdGltZSkpLFxyXG4gICAgICAgIGlzc3VlZEF0VGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuaWF0KSksXHJcbiAgICAgICAgZXhwaXJhdGlvblRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmV4cCkpLFxyXG4gICAgICAgIHNpZ25JblByb3ZpZGVyOiBzaWduSW5Qcm92aWRlciB8fCBudWxsLFxyXG4gICAgICAgIHNpZ25JblNlY29uZEZhY3RvcjogKGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9zZWNvbmRfZmFjdG9yJ10pIHx8IG51bGxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKHNlY29uZHMpIHtcclxuICAgIHJldHVybiBOdW1iZXIoc2Vjb25kcykgKiAxMDAwO1xyXG59XHJcbmZ1bmN0aW9uIF9wYXJzZVRva2VuKHRva2VuKSB7XHJcbiAgICBjb25zdCBbYWxnb3JpdGhtLCBwYXlsb2FkLCBzaWduYXR1cmVdID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgIGlmIChhbGdvcml0aG0gPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHBheWxvYWQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHNpZ25hdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgX2xvZ0Vycm9yKCdKV1QgbWFsZm9ybWVkLCBjb250YWluZWQgZmV3ZXIgdGhhbiAzIHNlY3Rpb25zJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBiYXNlNjREZWNvZGUocGF5bG9hZCk7XHJcbiAgICAgICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgICAgICAgIF9sb2dFcnJvcignRmFpbGVkIHRvIGRlY29kZSBiYXNlNjQgSldUIHBheWxvYWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlY29kZWQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0NhdWdodCBlcnJvciBwYXJzaW5nIEpXVCBwYXlsb2FkIGFzIEpTT04nLCBlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdCBleHBpcmVzSW4gVFRMIGZyb20gYSB0b2tlbiBieSBzdWJ0cmFjdGluZyB0aGUgZXhwaXJhdGlvbiBmcm9tIHRoZSBpc3N1YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIF90b2tlbkV4cGlyZXNJbih0b2tlbikge1xyXG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KHBhcnNlZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uZXhwICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIHBhcnNlZFRva2VuLmlhdCAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTnVtYmVyKHBhcnNlZFRva2VuLmV4cCkgLSBOdW1iZXIocGFyc2VkVG9rZW4uaWF0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBwcm9taXNlLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKGJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmIGlzVXNlckludmFsaWRhdGVkKGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyLmF1dGguY3VycmVudFVzZXIgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVzZXIuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1VzZXJJbnZhbGlkYXRlZCh7IGNvZGUgfSkge1xyXG4gICAgcmV0dXJuIChjb2RlID09PSBgYXV0aC8ke1widXNlci1kaXNhYmxlZFwiIC8qIFVTRVJfRElTQUJMRUQgKi99YCB8fFxyXG4gICAgICAgIGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovfWApO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFByb2FjdGl2ZVJlZnJlc2gge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICB9XHJcbiAgICBfc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxuICAgIF9zdG9wKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0SW50ZXJ2YWwod2FzRXJyb3IpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHdhc0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5lcnJvckJhY2tvZmY7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gTWF0aC5taW4odGhpcy5lcnJvckJhY2tvZmYgKiAyLCA5NjAwMDAgLyogUkVUUllfQkFDS09GRl9NQVggKi8pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZXJyb3IgYmFja29mZlxyXG4gICAgICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IDMwMDAwIC8qIFJFVFJZX0JBQ0tPRkZfTUlOICovO1xyXG4gICAgICAgICAgICBjb25zdCBleHBUaW1lID0gKF9hID0gdGhpcy51c2VyLnN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBleHBUaW1lIC0gRGF0ZS5ub3coKSAtIDMwMDAwMCAvKiBPRkZTRVQgKi87XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBpbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2NoZWR1bGUod2FzRXJyb3IgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgLy8gSnVzdCBpbiBjYXNlLi4uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKHdhc0Vycm9yKTtcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVyYXRpb24oKTtcclxuICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpdGVyYXRpb24oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4odHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgcmV0cnkgb24gbmV0d29yayBlcnJvcnNcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoLyogd2FzRXJyb3IgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlck1ldGFkYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWF0ZWRBdCwgbGFzdExvZ2luQXQpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplVGltZSgpIHtcclxuICAgICAgICB0aGlzLmxhc3RTaWduSW5UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMubGFzdExvZ2luQXQpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRpb25UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMuY3JlYXRlZEF0KTtcclxuICAgIH1cclxuICAgIF9jb3B5KG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy5sYXN0TG9naW5BdCA9IG1ldGFkYXRhLmxhc3RMb2dpbkF0O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUaW1lKCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXQ6IHRoaXMubGFzdExvZ2luQXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGggPSB1c2VyLmF1dGg7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGdldEFjY291bnRJbmZvKGF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICBfYXNzZXJ0KHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS51c2Vycy5sZW5ndGgsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBjb25zdCBjb3JlQWNjb3VudCA9IHJlc3BvbnNlLnVzZXJzWzBdO1xyXG4gICAgdXNlci5fbm90aWZ5UmVsb2FkTGlzdGVuZXIoY29yZUFjY291bnQpO1xyXG4gICAgY29uc3QgbmV3UHJvdmlkZXJEYXRhID0gKChfYSA9IGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpXHJcbiAgICAgICAgPyBleHRyYWN0UHJvdmlkZXJEYXRhKGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pXHJcbiAgICAgICAgOiBbXTtcclxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IG1lcmdlUHJvdmlkZXJEYXRhKHVzZXIucHJvdmlkZXJEYXRhLCBuZXdQcm92aWRlckRhdGEpO1xyXG4gICAgLy8gUHJlc2VydmVzIHRoZSBub24tbm9ueW1vdXMgc3RhdHVzIG9mIHRoZSBzdG9yZWQgdXNlciwgZXZlbiBpZiBubyBtb3JlXHJcbiAgICAvLyBjcmVkZW50aWFscyAoZmVkZXJhdGVkIG9yIGVtYWlsL3Bhc3N3b3JkKSBhcmUgbGlua2VkIHRvIHRoZSB1c2VyLiBJZlxyXG4gICAgLy8gdGhlIHVzZXIgd2FzIHByZXZpb3VzbHkgYW5vbnltb3VzLCB0aGVuIHVzZSBwcm92aWRlciBkYXRhIHRvIHVwZGF0ZS5cclxuICAgIC8vIE9uIHRoZSBvdGhlciBoYW5kLCBpZiBpdCB3YXMgbm90IGFub255bW91cyBiZWZvcmUsIGl0IHNob3VsZCBuZXZlciBiZVxyXG4gICAgLy8gY29uc2lkZXJlZCBhbm9ueW1vdXMgbm93LlxyXG4gICAgY29uc3Qgb2xkSXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgbmV3SXNBbm9ueW1vdXMgPSAhKHVzZXIuZW1haWwgJiYgY29yZUFjY291bnQucGFzc3dvcmRIYXNoKSAmJiAhKHByb3ZpZGVyRGF0YSA9PT0gbnVsbCB8fCBwcm92aWRlckRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3ZpZGVyRGF0YS5sZW5ndGgpO1xyXG4gICAgY29uc3QgaXNBbm9ueW1vdXMgPSAhb2xkSXNBbm9ueW1vdXMgPyBmYWxzZSA6IG5ld0lzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgdXBkYXRlcyA9IHtcclxuICAgICAgICB1aWQ6IGNvcmVBY2NvdW50LmxvY2FsSWQsXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IGNvcmVBY2NvdW50LmRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgICAgcGhvdG9VUkw6IGNvcmVBY2NvdW50LnBob3RvVXJsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWw6IGNvcmVBY2NvdW50LmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWxWZXJpZmllZDogY29yZUFjY291bnQuZW1haWxWZXJpZmllZCB8fCBmYWxzZSxcclxuICAgICAgICBwaG9uZU51bWJlcjogY29yZUFjY291bnQucGhvbmVOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogY29yZUFjY291bnQudGVuYW50SWQgfHwgbnVsbCxcclxuICAgICAgICBwcm92aWRlckRhdGEsXHJcbiAgICAgICAgbWV0YWRhdGE6IG5ldyBVc2VyTWV0YWRhdGEoY29yZUFjY291bnQuY3JlYXRlZEF0LCBjb3JlQWNjb3VudC5sYXN0TG9naW5BdCksXHJcbiAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgIH07XHJcbiAgICBPYmplY3QuYXNzaWduKHVzZXIsIHVwZGF0ZXMpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWxvYWRzIHVzZXIgYWNjb3VudCBkYXRhLCBpZiBzaWduZWQgaW4uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbG9hZCh1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VySW50ZXJuYWwpO1xyXG4gICAgLy8gRXZlbiB0aG91Z2ggdGhlIGN1cnJlbnQgdXNlciBoYXNuJ3QgY2hhbmdlZCwgdXBkYXRlXHJcbiAgICAvLyBjdXJyZW50IHVzZXIgd2lsbCB0cmlnZ2VyIGEgcGVyc2lzdGVuY2UgdXBkYXRlIHcvIHRoZVxyXG4gICAgLy8gbmV3IGluZm8uXHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHVzZXJJbnRlcm5hbC5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZVByb3ZpZGVyRGF0YShvcmlnaW5hbCwgbmV3RGF0YSkge1xyXG4gICAgY29uc3QgZGVkdXBlZCA9IG9yaWdpbmFsLmZpbHRlcihvID0+ICFuZXdEYXRhLnNvbWUobiA9PiBuLnByb3ZpZGVySWQgPT09IG8ucHJvdmlkZXJJZCkpO1xyXG4gICAgcmV0dXJuIFsuLi5kZWR1cGVkLCAuLi5uZXdEYXRhXTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0UHJvdmlkZXJEYXRhKHByb3ZpZGVycykge1xyXG4gICAgcmV0dXJuIHByb3ZpZGVycy5tYXAoKF9hKSA9PiB7XHJcbiAgICAgICAgdmFyIHsgcHJvdmlkZXJJZCB9ID0gX2EsIHByb3ZpZGVyID0gX19yZXN0KF9hLCBbXCJwcm92aWRlcklkXCJdKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICB1aWQ6IHByb3ZpZGVyLnJhd0lkIHx8ICcnLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcHJvdmlkZXIuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICAgICAgZW1haWw6IHByb3ZpZGVyLmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiBwcm92aWRlci5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG90b1VSTDogcHJvdmlkZXIucGhvdG9VcmwgfHwgbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgcmVmcmVzaFRva2VuKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCB7fSwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICdncmFudF90eXBlJzogJ3JlZnJlc2hfdG9rZW4nLFxyXG4gICAgICAgICAgICAncmVmcmVzaF90b2tlbic6IHJlZnJlc2hUb2tlblxyXG4gICAgICAgIH0pLnNsaWNlKDEpO1xyXG4gICAgICAgIGNvbnN0IHsgdG9rZW5BcGlIb3N0LCBhcGlLZXkgfSA9IGF1dGguY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRGaW5hbFRhcmdldChhdXRoLCB0b2tlbkFwaUhvc3QsIFwiL3YxL3Rva2VuXCIgLyogVE9LRU4gKi8sIGBrZXk9JHthcGlLZXl9YCk7XHJcbiAgICAgICAgcmV0dXJuIEZldGNoUHJvdmlkZXIuZmV0Y2goKSh1cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIiAvKiBQT1NUICovLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnWC1DbGllbnQtVmVyc2lvbic6IGF1dGguX2dldFNka0NsaWVudFZlcnNpb24oKSxcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIFRoZSByZXNwb25zZSBjb21lcyBiYWNrIGluIHNuYWtlX2Nhc2UuIENvbnZlcnQgdG8gY2FtZWw6XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5hY2Nlc3NfdG9rZW4sXHJcbiAgICAgICAgZXhwaXJlc0luOiByZXNwb25zZS5leHBpcmVzX2luLFxyXG4gICAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2UucmVmcmVzaF90b2tlblxyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogV2UgbmVlZCB0byBtYXJrIHRoaXMgY2xhc3MgYXMgaW50ZXJuYWwgZXhwbGljaXRseSB0byBleGNsdWRlIGl0IGluIHRoZSBwdWJsaWMgdHlwaW5ncywgYmVjYXVzZVxyXG4gKiBpdCByZWZlcmVuY2VzIEF1dGhJbnRlcm5hbCB3aGljaCBoYXMgYSBjaXJjdWxhciBkZXBlbmRlbmN5IHdpdGggVXNlckludGVybmFsLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIFN0c1Rva2VuTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNFeHBpcmVkKCkge1xyXG4gICAgICAgIHJldHVybiAoIXRoaXMuZXhwaXJhdGlvblRpbWUgfHxcclxuICAgICAgICAgICAgRGF0ZS5ub3coKSA+IHRoaXMuZXhwaXJhdGlvblRpbWUgLSAzMDAwMCAvKiBUT0tFTl9SRUZSRVNIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZXNwb25zZS5pZFRva2VuICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZXNwb25zZS5yZWZyZXNoVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IGV4cGlyZXNJbiA9ICdleHBpcmVzSW4nIGluIHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZS5leHBpcmVzSW4gIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgID8gTnVtYmVyKHJlc3BvbnNlLmV4cGlyZXNJbilcclxuICAgICAgICAgICAgOiBfdG9rZW5FeHBpcmVzSW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKHJlc3BvbnNlLmlkVG9rZW4sIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiwgZXhwaXJlc0luKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFRva2VuKGF1dGgsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5hY2Nlc3NUb2tlbiB8fCB0aGlzLnJlZnJlc2hUb2tlbiwgYXV0aCwgXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovKTtcclxuICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiB0aGlzLmFjY2Vzc1Rva2VuICYmICF0aGlzLmlzRXhwaXJlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVmcmVzaFRva2VuKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaChhdXRoLCB0aGlzLnJlZnJlc2hUb2tlbik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNsZWFyUmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlZnJlc2goYXV0aCwgb2xkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCB7IGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJbiB9ID0gYXdhaXQgcmVxdWVzdFN0c1Rva2VuKGF1dGgsIG9sZFRva2VuKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24oYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgTnVtYmVyKGV4cGlyZXNJbikpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBleHBpcmVzSW5TZWMpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBEYXRlLm5vdygpICsgZXhwaXJlc0luU2VjICogMTAwMDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tSlNPTihhcHBOYW1lLCBvYmplY3QpIHtcclxuICAgICAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiwgYWNjZXNzVG9rZW4sIGV4cGlyYXRpb25UaW1lIH0gPSBvYmplY3Q7XHJcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBTdHNUb2tlbk1hbmFnZXIoKTtcclxuICAgICAgICBpZiAocmVmcmVzaFRva2VuKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIHJlZnJlc2hUb2tlbiA9PT0gJ3N0cmluZycsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBhY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXhwaXJhdGlvblRpbWUpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgZXhwaXJhdGlvblRpbWUgPT09ICdudW1iZXInLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIuZXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiB0aGlzLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiB0aGlzLmV4cGlyYXRpb25UaW1lXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24oc3RzVG9rZW5NYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW47XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IHN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZTtcclxuICAgIH1cclxuICAgIF9jbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgU3RzVG9rZW5NYW5hZ2VyKCksIHRoaXMudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgX3BlcmZvcm1SZWZyZXNoKCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGFzc2VydGlvbiwgYXBwTmFtZSkge1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgYXNzZXJ0aW9uID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgYXNzZXJ0aW9uID09PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7IGFwcE5hbWUgfSk7XHJcbn1cclxuY2xhc3MgVXNlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoX2EpIHtcclxuICAgICAgICB2YXIgeyB1aWQsIGF1dGgsIHN0c1Rva2VuTWFuYWdlciB9ID0gX2EsIG9wdCA9IF9fcmVzdChfYSwgW1widWlkXCIsIFwiYXV0aFwiLCBcInN0c1Rva2VuTWFuYWdlclwiXSk7XHJcbiAgICAgICAgLy8gRm9yIHRoZSB1c2VyIG9iamVjdCwgcHJvdmlkZXIgaXMgYWx3YXlzIEZpcmViYXNlLlxyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IFwiZmlyZWJhc2VcIiAvKiBGSVJFQkFTRSAqLztcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzQW5vbnltb3VzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2ggPSBuZXcgUHJvYWN0aXZlUmVmcmVzaCh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnVpZCA9IHVpZDtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyID0gc3RzVG9rZW5NYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IG9wdC5kaXNwbGF5TmFtZSB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSBvcHQuZW1haWwgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gb3B0LnBob25lTnVtYmVyIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5waG90b1VSTCA9IG9wdC5waG90b1VSTCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSBvcHQuaXNBbm9ueW1vdXMgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEob3B0LmNyZWF0ZWRBdCB8fCB1bmRlZmluZWQsIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKSk7XHJcbiAgICAgICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24odXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnVpZCA9PT0gdXNlci51aWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gdXNlci5waG90b1VSTDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHVzZXIudGVuYW50SWQ7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSB1c2VyLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEuX2NvcHkodXNlci5tZXRhZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Fzc2lnbih1c2VyLnN0c1Rva2VuTWFuYWdlcik7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzKSwgeyBhdXRoLCBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9jbG9uZSgpIH0pKTtcclxuICAgIH1cclxuICAgIF9vblJlbG9hZChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZFVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlbG9hZExpc3RlbmVyKHRoaXMucmVsb2FkVXNlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm8pIHtcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGxpc3RlbmVyIGlzIHN1YnNjcmliZWQgeWV0LCBzYXZlIHRoZSByZXN1bHQgc28gaXQncyBhdmFpbGFibGUgd2hlbiB0aGV5IGRvIHN1YnNjcmliZVxyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIHJlbG9hZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHRva2Vuc1JlZnJlc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5pZFRva2VuICYmXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmlkVG9rZW4gIT09IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRva2Vuc1JlZnJlc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWxvYWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIGRlbGV0ZUFjY291bnQodGhpcy5hdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmNsZWFyUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxyXG4gICAgICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHVpZDogdGhpcy51aWQsIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCwgZW1haWxWZXJpZmllZDogdGhpcy5lbWFpbFZlcmlmaWVkLCBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSB8fCB1bmRlZmluZWQsIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLCBwaG90b1VSTDogdGhpcy5waG90b1VSTCB8fCB1bmRlZmluZWQsIHBob25lTnVtYmVyOiB0aGlzLnBob25lTnVtYmVyIHx8IHVuZGVmaW5lZCwgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLCBwcm92aWRlckRhdGE6IHRoaXMucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSksIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIudG9KU09OKCksIFxyXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBldmVudCBJRCBtdXN0IGJlIG1haW50YWluZWQgaW4gY2FzZSB0aGVyZSBpcyBhIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgICAgIF9yZWRpcmVjdEV2ZW50SWQ6IHRoaXMuX3JlZGlyZWN0RXZlbnRJZCB9LCB0aGlzLm1ldGFkYXRhLnRvSlNPTigpKSwgeyBcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgbGVnYWN5IFNESyAoZ28vZmlyZWJhc2UtYXV0aC1zZGstcGVyc2lzdGVuY2UtcGFyc2luZyk6XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksIGFwcE5hbWU6IHRoaXMuYXV0aC5uYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSlNPTihhdXRoLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKF9hID0gb2JqZWN0LmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSAoX2IgPSBvYmplY3QuZW1haWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9IChfYyA9IG9iamVjdC5waG9uZU51bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVVJMID0gKF9kID0gb2JqZWN0LnBob3RvVVJMKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSAoX2UgPSBvYmplY3QudGVuYW50SWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBfcmVkaXJlY3RFdmVudElkID0gKF9mID0gb2JqZWN0Ll9yZWRpcmVjdEV2ZW50SWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAoX2cgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdExvZ2luQXQgPSAoX2ggPSBvYmplY3QubGFzdExvZ2luQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB7IHVpZCwgZW1haWxWZXJpZmllZCwgaXNBbm9ueW1vdXMsIHByb3ZpZGVyRGF0YSwgc3RzVG9rZW5NYW5hZ2VyOiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciB9ID0gb2JqZWN0O1xyXG4gICAgICAgIF9hc3NlcnQodWlkICYmIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IFN0c1Rva2VuTWFuYWdlci5mcm9tSlNPTih0aGlzLm5hbWUsIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiB1aWQgPT09ICdzdHJpbmcnLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGRpc3BsYXlOYW1lLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGVtYWlsLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBpc0Fub255bW91cyA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob25lTnVtYmVyLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob3RvVVJMLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHRlbmFudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKF9yZWRpcmVjdEV2ZW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoY3JlYXRlZEF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGxhc3RMb2dpbkF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIHBob3RvVVJMLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVuYW50SWQsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwcm92aWRlckRhdGEgJiYgQXJyYXkuaXNBcnJheShwcm92aWRlckRhdGEpKSB7XHJcbiAgICAgICAgICAgIHVzZXIucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9IF9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGEgVXNlciBmcm9tIGFuIGlkVG9rZW4gc2VydmVyIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gYXV0aFxyXG4gICAgICogQHBhcmFtIGlkVG9rZW5SZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIHN0c1Rva2VuTWFuYWdlci51cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBGaXJlYmFzZSBBdXRoIHVzZXIuXHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZDogaWRUb2tlblJlc3BvbnNlLmxvY2FsSWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGVzIHRoZSB1c2VyIGluZm8gYW5kIGRhdGEgYW5kIHJlc29sdmVzIHdpdGggYSB1c2VyIGluc3RhbmNlLlxyXG4gICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEluTWVtb3J5UGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJOT05FXCIgLyogTk9ORSAqLztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7fTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Jbk1lbW9yeVBlcnNpc3RlbmNlLnR5cGUgPSAnTk9ORSc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbk1lbW9yeVBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShrZXksIGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke1wiZmlyZWJhc2VcIiAvKiBQRVJTSVNURU5DRSAqL306JHtrZXl9OiR7YXBpS2V5fToke2FwcE5hbWV9YDtcclxufVxyXG5jbGFzcyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5ID0gdXNlcktleTtcclxuICAgICAgICBjb25zdCB7IGNvbmZpZywgbmFtZSB9ID0gdGhpcy5hdXRoO1xyXG4gICAgICAgIHRoaXMuZnVsbFVzZXJLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHRoaXMudXNlcktleSwgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5mdWxsUGVyc2lzdGVuY2VLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKFwicGVyc2lzdGVuY2VcIiAvKiBQRVJTSVNURU5DRV9VU0VSICovLCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gYXV0aC5fb25TdG9yYWdlRXZlbnQuYmluZChhdXRoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9hZGRMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFVzZXJLZXksIHVzZXIudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuX2dldCh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgICAgICByZXR1cm4gYmxvYiA/IFVzZXJJbXBsLl9mcm9tSlNPTih0aGlzLmF1dGgsIGJsb2IpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZUN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmUodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICB9XHJcbiAgICBzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LCB0aGlzLnBlcnNpc3RlbmNlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UobmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSA9PT0gbmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShhdXRoLCBwZXJzaXN0ZW5jZUhpZXJhcmNoeSwgdXNlcktleSA9IFwiYXV0aFVzZXJcIiAvKiBBVVRIX1VTRVIgKi8pIHtcclxuICAgICAgICBpZiAoIXBlcnNpc3RlbmNlSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGFueSBwZXJzaXN0ZW5jZXMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVBlcnNpc3RlbmNlcyA9IChhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSkpKS5maWx0ZXIocGVyc2lzdGVuY2UgPT4gcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgZmlyc3QgcGVyc2lzdGVuY2UgbGlzdGVkLCBvciBpbiBtZW1vcnkgaWYgbm9uZSBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxyXG4gICAgICAgICAgICBfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGV4aXN0aW5nIHVzZXIsIHNldHRpbmcgdGhlIGNob3NlbiBwZXJzaXN0ZW5jZSB0byB0aGF0XHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgaWYgdGhlIHVzZXIgZXhpc3RzLlxyXG4gICAgICAgIGxldCB1c2VyVG9NaWdyYXRlID0gbnVsbDtcclxuICAgICAgICAvLyBOb3RlLCBoZXJlIHdlIGNoZWNrIGZvciBhIHVzZXIgaW4gX2FsbF8gcGVyc2lzdGVuY2VzLCBub3QganVzdCB0aGVcclxuICAgICAgICAvLyBvbmVzIGRlZW1lZCBhdmFpbGFibGUuIElmIHdlIGNhbiBtaWdyYXRlIGEgdXNlciBvdXQgb2YgYSBicm9rZW5cclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSwgd2Ugd2lsbCAoYnV0IG9ubHkgaWYgdGhhdCBwZXJzaXN0ZW5jZSBzdXBwb3J0cyBtaWdyYXRpb24pLlxyXG4gICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgcGVyc2lzdGVuY2VIaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBVc2VySW1wbC5fZnJvbUpTT04oYXV0aCwgYmxvYik7IC8vIHRocm93cyBmb3IgdW5wYXJzYWJsZSBibG9iICh3cm9uZyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUb01pZ3JhdGUgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciBpbiBhIHBlcnNpc3RlbmNlIHRoYXQgZG9lcyBzdXBwb3J0IG1pZ3JhdGlvbiwgdXNlXHJcbiAgICAgICAgLy8gdGhhdCBtaWdyYXRpb24gcGF0aCAob2Ygb25seSBwZXJzaXN0ZW5jZXMgdGhhdCBzdXBwb3J0IG1pZ3JhdGlvbilcclxuICAgICAgICBjb25zdCBtaWdyYXRpb25IaWVyYXJjaHkgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXMuZmlsdGVyKHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZSBwZXJzaXN0ZW5jZSBkb2VzIF9ub3RfIGFsbG93IG1pZ3JhdGlvbiwganVzdCBmaW5pc2ggb2ZmIGhlcmVcclxuICAgICAgICBpZiAoIXNlbGVjdGVkUGVyc2lzdGVuY2UuX3Nob3VsZEFsbG93TWlncmF0aW9uIHx8XHJcbiAgICAgICAgICAgICFtaWdyYXRpb25IaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IG1pZ3JhdGlvbkhpZXJhcmNoeVswXTtcclxuICAgICAgICBpZiAodXNlclRvTWlncmF0ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXHJcbiAgICAgICAgICAgIC8vIHdlJ2xsIGp1c3QgbGV0IGl0IGJ1YmJsZSB0byBzdXJmYWNlIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2V0KGtleSwgdXNlclRvTWlncmF0ZS50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYXIgdGhlIGtleSBpbiBvdGhlciBwZXJzaXN0ZW5jZXMgYnV0IGlnbm9yZSBlcnJvcnMuIFRoaXMgaGVscHMgcHJldmVudCBpc3N1ZXNcclxuICAgICAgICAvLyBzdWNoIGFzIHVzZXJzIGdldHRpbmcgc3R1Y2sgd2l0aCBhIHByZXZpb3VzIGFjY291bnQgYWZ0ZXIgc2lnbmluZyBvdXQgYW5kIHJlZnJlc2hpbmcgdGhlIHRhYi5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHRoZSBicm93c2VyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVwb3J0aW5nIHVzYWdlIHRvIHRoZSBBUElcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRCcm93c2VyTmFtZSh1c2VyQWdlbnQpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT3BlcmFcIiAvKiBPUEVSQSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xyXG4gICAgICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJJRU1vYmlsZVwiIC8qIElFTU9CSUxFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIklFXCIgLyogSUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkVkZ2VcIiAvKiBFREdFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJGaXJlZm94XCIgLyogRklSRUZPWCAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdzaWxrLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2lsa1wiIC8qIFNJTEsgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xyXG4gICAgICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJCbGFja2JlcnJ5XCIgLyogQkxBQ0tCRVJSWSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1dlYk9TKHVhKSkge1xyXG4gICAgICAgIC8vIFdlYk9TIGRlZmF1bHQgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJXZWJvc1wiIC8qIFdFQk9TICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzU2FmYXJpKHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNhZmFyaVwiIC8qIFNBRkFSSSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCIgLyogQ0hST01FICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiIC8qIEFORFJPSUQgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBNb3N0IG1vZGVybiBicm93c2VycyBoYXZlIG5hbWUvdmVyc2lvbiBhdCBlbmQgb2YgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgcmUgPSAvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAoKG1hdGNoZXMgPT09IG51bGwgfHwgbWF0Y2hlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlcy5sZW5ndGgpID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIk90aGVyXCIgLyogT1RIRVIgKi87XHJcbn1cclxuZnVuY3Rpb24gX2lzRmlyZWZveCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1NhZmFyaSh1c2VyQWdlbnQgPSBnZXRVQSgpKSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuICh1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJykpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvY3Jpb3NcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRU1vYmlsZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNBbmRyb2lkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1dlYk9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUzdPcjgodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDdfXFxkL2kudGVzdCh1YSkgfHxcclxuICAgICAgICAvKGlQYWR8aVBob25lfGlQb2QpLipPUyA4X1xcZC9pLnRlc3QodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1NTdGFuZGFsb25lKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuIF9pc0lPUyh1YSkgJiYgISEoKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YW5kYWxvbmUpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFMTAoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gMTA7XHJcbn1cclxuZnVuY3Rpb24gX2lzTW9iaWxlQnJvd3Nlcih1YSA9IGdldFVBKCkpIHtcclxuICAgIC8vIFRPRE86IGltcGxlbWVudCBnZXRCcm93c2VyTmFtZSBlcXVpdmFsZW50IGZvciBPUy5cclxuICAgIHJldHVybiAoX2lzSU9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWQodWEpIHx8XHJcbiAgICAgICAgX2lzV2ViT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQmxhY2tCZXJyeSh1YSkgfHxcclxuICAgICAgICAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgX2lzSUVNb2JpbGUodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJZnJhbWUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgd2luZG93IGlzIG5vdCB0aGUgdG9wIHdpbmRvdy5cclxuICAgICAgICAvLyBJZiBzbywgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgcmV0dXJuICEhKHdpbmRvdyAmJiB3aW5kb3cgIT09IHdpbmRvdy50b3ApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogRGV0ZXJtaW5lIHRoZSBTREsgdmVyc2lvbiBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtLCBmcmFtZXdvcmtzID0gW10pIHtcclxuICAgIGxldCByZXBvcnRlZFBsYXRmb3JtO1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLzpcclxuICAgICAgICAgICAgLy8gSW4gYSBicm93c2VyIGVudmlyb25tZW50LCByZXBvcnQgdGhlIGJyb3dzZXIgbmFtZS5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IF9nZXRCcm93c2VyTmFtZShnZXRVQSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgYSB3b3JrZXIgcnVucyBmcm9tIGEgYnJvd3NlciBidXQgd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGFcclxuICAgICAgICAgICAgLy8gd29ya2VyIGZyb20gYSBicm93c2VyLlxyXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogQ2hyb21lLVdvcmtlci9Kc0NvcmUvNC45LjEvRmlyZWJhc2VDb3JlLXdlYi5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGAke19nZXRCcm93c2VyTmFtZShnZXRVQSgpKX0tJHtjbGllbnRQbGF0Zm9ybX1gO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gY2xpZW50UGxhdGZvcm07XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXBvcnRlZEZyYW1ld29ya3MgPSBmcmFtZXdvcmtzLmxlbmd0aFxyXG4gICAgICAgID8gZnJhbWV3b3Jrcy5qb2luKCcsJylcclxuICAgICAgICA6ICdGaXJlYmFzZUNvcmUtd2ViJzsgLyogZGVmYXVsdCB2YWx1ZSBpZiBubyBvdGhlciBmcmFtZXdvcmsgaXMgdXNlZCAqL1xyXG4gICAgcmV0dXJuIGAke3JlcG9ydGVkUGxhdGZvcm19LyR7XCJKc0NvcmVcIiAvKiBDT1JFICovfS8ke1NES19WRVJTSU9OfS8ke3JlcG9ydGVkRnJhbWV3b3Jrc31gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbXVsYXRvckNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFueSBuZXR3b3JrIGNhbGxzIHdpbGwgc2V0IHRoaXMgdG8gdHJ1ZSBhbmQgcHJldmVudCBzdWJzZXF1ZW50IGVtdWxhdG9yXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgICAgICB0aGlzLl9jYW5Jbml0RW11bGF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWTtcclxuICAgICAgICAvLyBUcmFja3MgdGhlIGxhc3Qgbm90aWZpZWQgVUlEIGZvciBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXJzIHRvIHByZXZlbnRcclxuICAgICAgICAvLyByZXBlYXRlZCBjYWxscyB0byB0aGUgY2FsbGJhY2tzLiBVbmRlZmluZWQgbWVhbnMgaXQncyBuZXZlciBiZWVuXHJcbiAgICAgICAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXHJcbiAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IGFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZzogZmFsc2UgfTtcclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MgPSBbXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBhcHAubmFtZTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBjb25maWcuc2RrQ2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlSGllcmFyY2h5LCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYXZlIHRvIGNoZWNrIGZvciBhcHAgZGVsZXRpb24gdGhyb3VnaG91dCBpbml0aWFsaXphdGlvbiAoYWZ0ZXIgZWFjaFxyXG4gICAgICAgIC8vIHByb21pc2UgcmVzb2x1dGlvbilcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgcGVyc2lzdGVuY2VIaWVyYXJjaHkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc29sdmVyIGVhcmx5IGlmIG5lY2Vzc2FyeSAob25seSBhcHBsaWNhYmxlIHRvIHdlYjpcclxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIHRoZSBpZnJhbWUgdG8gbG9hZCBpbW1lZGlhdGVseSBpbiBjZXJ0YWluIGNhc2VzKVxyXG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Nob3VsZEluaXRQcm9hY3RpdmVseSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIHBlcnNpc3RlbmNlIGlzIGNoYW5nZWQgaW4gYW5vdGhlciB3aW5kb3csIHRoZSB1c2VyIG1hbmFnZXIgd2lsbCBsZXQgdXMga25vd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBfb25TdG9yYWdlRXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyICYmICF1c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZSwgZG8gbm90aGluZyAod2FzIHNpZ25lZCBvdXQgYW5kIHJlbWFpbmVkIHNpZ25lZCBvdXQpLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzYW1lIHVzZXIgaXMgdG8gYmUgc3luY2hyb25pemVkLlxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci51aWQgPT09IHVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgIC8vIERhdGEgdXBkYXRlLCBzaW1wbHkgY29weSBkYXRhIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9hc3NpZ24odXNlcik7XHJcbiAgICAgICAgICAgIC8vIElmIHRva2VucyBjaGFuZ2VkIGZyb20gcHJldmlvdXMgdXNlciB0b2tlbnMsIHRoaXMgd2lsbCB0cmlnZ2VyXHJcbiAgICAgICAgICAgIC8vIG5vdGlmeUF1dGhMaXN0ZW5lcnNfLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBBdXRoIHN0YXRlLiBFaXRoZXIgYSBuZXcgbG9naW4gb3IgbG9nb3V0LlxyXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBGaXJzdCBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBlbmRpbmcgcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgbGV0IHN0b3JlZFVzZXIgPSAoYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCkpO1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIgJiYgdGhpcy5jb25maWcuYXV0aERvbWFpbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXNlckV2ZW50SWQgPSAoX2EgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFVzZXJFdmVudElkID0gc3RvcmVkVXNlciA9PT0gbnVsbCB8fCBzdG9yZWRVc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudHJ5UmVkaXJlY3RTaWduSW4ocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCB1c2VyIChpLmUuIHRoZSBvbGQgXCJjdXJyZW50VXNlclwiKSBoYXMgYSByZWRpcmVjdElkIHRoYXRcclxuICAgICAgICAgICAgLy8gbWF0Y2hlcyB0aGUgcmVkaXJlY3QgdXNlciwgdGhlbiB3ZSB3YW50IHRvIGluaXRpYWxseSBzaWduIGluIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIG5ldyB1c2VyIG9iamVjdCBmcm9tIHJlc3VsdC5cclxuICAgICAgICAgICAgLy8gVE9ETyhzYW1naG8pOiBNb3JlIHRob3JvdWdobHkgdGVzdCBhbGwgb2YgdGhpc1xyXG4gICAgICAgICAgICBpZiAoKCFyZWRpcmVjdFVzZXJFdmVudElkIHx8IHJlZGlyZWN0VXNlckV2ZW50SWQgPT09IHN0b3JlZFVzZXJFdmVudElkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC51c2VyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmVkVXNlciA9IHJlc3VsdC51c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIG5vIHVzZXIgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGlzIG5vIGN1cnJlbnQgdXNlci4gU2V0IHRvIG51bGwuXHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXNuJ3QgYSByZWRpcmVjdCB1c2VyLCB3ZSBjYW4gcmVsb2FkIGFuZCBiYWlsXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbHNvIGNhdGNoIHRoZSByZWRpcmVjdGVkIHVzZXIsIGlmIGF2YWlsYWJsZSwgYXMgdGhhdCBtZXRob2RcclxuICAgICAgICAgICAgLy8gc3RyaXBzIHRoZSBfcmVkaXJlY3RFdmVudElkXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIsIHRoaXMsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB1c2VyJ3MgZXZlbnQgSUQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgZXZlbnQgSUQsXHJcbiAgICAgICAgLy8gRE8gTk9UIHJlbG9hZCB0aGUgY3VycmVudCB1c2VyLCBvdGhlcndpc2UgdGhleSdsbCBiZSBjbGVhcmVkIGZyb20gc3RvcmFnZS5cclxuICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgdGhlIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KCkgZmxvdy5cclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFVzZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9PT0gc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIoc3RvcmVkVXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHRyeVJlZGlyZWN0U2lnbkluKHJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAvLyBUaGUgcmVkaXJlY3QgdXNlciBuZWVkcyB0byBiZSBjaGVja2VkIChhbmQgc2lnbmVkIGluIGlmIGF2YWlsYWJsZSlcclxuICAgICAgICAvLyBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbi4gQWxsIG9mIHRoZSBub3JtYWwgc2lnbiBpbiBhbmQgbGluay9yZWF1dGhcclxuICAgICAgICAvLyBmbG93cyBjYWxsIGJhY2sgaW50byBhdXRoIGFuZCBwdXNoIHRoaW5ncyBvbnRvIHRoZSBwcm9taXNlIHF1ZXVlLiBXZVxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVkaXJlY3Qgc2lnbiBpbiAqaW5zaWRlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgLy8gcXVldWUqLiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbTogd2UgcnVuIGludG8gZGVhZGxvY2suIFNlZTpcclxuICAgICAgICAvLyAgICDilIw+IFtJbml0aWFsaXphdGlvbl0g4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICAgICAgLy8gICAg4pSMPiBbPG90aGVyIHF1ZXVlIHRhc2tzPl0g4pSCXHJcbiAgICAgICAgLy8gICAg4pSU4pSAIFtnZXRSZWRpcmVjdFJlc3VsdF0gPOKUgOKUmFxyXG4gICAgICAgIC8vICAgIHdoZXJlIFtdIGFyZSB0YXNrcyBvbiB0aGUgcXVldWUgYW5kIGFycm93cyBkZW5vdGUgYXdhaXRzXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gd2lsbCBuZXZlciBjb21wbGV0ZSBiZWNhdXNlIGl0J3Mgd2FpdGluZyBvbiBzb21ldGhpbmdcclxuICAgICAgICAvLyB0aGF0J3Mgd2FpdGluZyBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUhXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJbnN0ZWFkLCB0aGlzIG1ldGhvZCBjYWxscyBnZXRSZWRpcmVjdFJlc3VsdCgpIChzdG9yZWQgaW5cclxuICAgICAgICAvLyBfY29tcGxldGVSZWRpcmVjdEZuKSB3aXRoIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyBhbGwgb2ZcclxuICAgICAgICAvLyB0aGUgdW5kZXJseWluZyBhdXRoIG9wZXJhdGlvbnMgdG8gc2tpcCBhbnl0aGluZyB0aGF0IG11dGF0ZXMgYXV0aCBzdGF0ZS5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBXZSBrbm93IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciBpcyBzZXQgc2luY2UgcmVkaXJlY3RSZXNvbHZlclxyXG4gICAgICAgICAgICAvLyBpcyBwYXNzZWQgaW4uIFRoZSBfY29tcGxldGVSZWRpcmVjdEZuIGV4cGVjdHMgdGhlIHVud3JhcHBlZCBleHRlcm4uXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5fY29tcGxldGVSZWRpcmVjdEZuKHRoaXMsIHJlZGlyZWN0UmVzb2x2ZXIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBTd2FsbG93IGFueSBlcnJvcnMgaGVyZTsgdGhlIGNvZGUgY2FuIHJldHJpZXZlIHRoZW0gaW5cclxuICAgICAgICAgICAgLy8gZ2V0UmVkaXJlY3RSZXN1bHQoKS5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHVzZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZydzIHdyb25nIHdpdGggdGhlIHVzZXIncyB0b2tlbi4gTG9nIHRoZW0gb3V0IGFuZCByZW1vdmVcclxuICAgICAgICAgICAgICAgIC8vIHRoZW0gZnJvbSBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICB1c2VEZXZpY2VMYW5ndWFnZSgpIHtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IF9nZXRVc2VyTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9kZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1cGRhdGVDdXJyZW50VXNlcih1c2VyRXh0ZXJuKSB7XHJcbiAgICAgICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXHJcbiAgICAgICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cclxuICAgICAgICAgICAgPyBnZXRNb2R1bGFySW5zdGFuY2UodXNlckV4dGVybilcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodXNlci5hdXRoLmNvbmZpZy5hcGlLZXkgPT09IHRoaXMuY29uZmlnLmFwaUtleSwgdGhpcywgXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBJTlZBTElEX0FVVEggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlciAmJiB1c2VyLl9jbG9uZSh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlQ3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0aGlzLnRlbmFudElkID09PSB1c2VyLnRlbmFudElkLCB0aGlzLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IHVzZXIgd2hlbiBzaWduT3V0IGlzIGNhbGxlZFxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIHx8IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcihudWxsKTtcclxuICAgIH1cclxuICAgIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0UGVyc2lzdGVuY2UoX2dldEluc3RhbmNlKHBlcnNpc3RlbmNlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0UGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5wZXJzaXN0ZW5jZS50eXBlO1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZUVycm9yTWFwKGVycm9yTWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIGVycm9yTWFwKCkpO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcclxuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0pTT04oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0UmVkaXJlY3RVc2VyKHVzZXIsIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0TWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxyXG4gICAgICAgICAgICA/IHJlZGlyZWN0TWFuYWdlci5yZW1vdmVDdXJyZW50VXNlcigpXHJcbiAgICAgICAgICAgIDogcmVkaXJlY3RNYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiBfZ2V0SW5zdGFuY2UocG9wdXBSZWRpcmVjdFJlc29sdmVyKSkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIFtfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpXSwgXCJyZWRpcmVjdFVzZXJcIiAvKiBSRURJUkVDVF9VU0VSICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlci5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcjtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZWRpcmVjdFVzZXJGb3JJZChpZCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIGNsZWFyZWQgYW55IHBlbmRpbmcgcGVyc2lzdGVuY2UgYWN0aW9ucyBpZiB3ZSdyZSBub3QgaW5cclxuICAgICAgICAvLyB0aGUgaW5pdGlhbGl6ZXJcclxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYiA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIE5vdGlmaWVzIGxpc3RlbmVycyBvbmx5IGlmIHRoZSB1c2VyIGlzIGN1cnJlbnQgKi9cclxuICAgIF9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9rZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlnLmF1dGhEb21haW59OiR7dGhpcy5jb25maWcuYXBpS2V5fToke3RoaXMubmFtZX1gO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIGN1cnJlbnQgdXNlciBjYXN0IGFzIHRoZSBpbnRlcm5hbCB0eXBlICovXHJcbiAgICBnZXQgX2N1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5QXV0aExpc3RlbmVycygpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVaWQgPSAoX2IgPSAoX2EgPSB0aGlzLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3ROb3RpZmllZFVpZCAhPT0gY3VycmVudFVpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IGN1cnJlbnRVaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYiA9IHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICA/IG5leHRPck9ic2VydmVyXHJcbiAgICAgICAgICAgIDogbmV4dE9yT2JzZXJ2ZXIubmV4dC5iaW5kKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5faXNJbml0aWFsaXplZFxyXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIDogdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIF9hc3NlcnQocHJvbWlzZSwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBUaGUgY2FsbGJhY2sgbmVlZHMgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IHBlciB0aGUgc3BlYy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IGNiKHRoaXMuY3VycmVudFVzZXIpKTtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnByb3RlY3RlZCAoZnJvbSByYWNlIGNvbmRpdGlvbnMpIG1ldGhvZCB0byBzZXQgdGhlIGN1cnJlbnQgdXNlci4gVGhpc1xyXG4gICAgICogc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgcXVldWVkIGNhbGxiYWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG4gICAgICogYmVjYXVzZSB0aGUgcXVldWUgc2hvdWxkbid0IHJlbHkgb24gYW5vdGhlciBxdWV1ZWQgY2FsbGJhY2suXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIgIT09IHVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyICYmIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUoYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gSW4gY2FzZSBzb21ldGhpbmcgZXJyb3JzLCB0aGUgY2FsbGJhY2sgc3RpbGwgc2hvdWxkIGJlIGNhbGxlZCBpbiBvcmRlclxyXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlIHByb21pc2UgY2hhaW4gYWxpdmVcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSB0aGlzLm9wZXJhdGlvbnMudGhlbihhY3Rpb24sIGFjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBhc3NlcnRlZFBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXIsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2xvZ0ZyYW1ld29yayhmcmFtZXdvcmspIHtcclxuICAgICAgICBpZiAoIWZyYW1ld29yayB8fCB0aGlzLmZyYW1ld29ya3MuaW5jbHVkZXMoZnJhbWV3b3JrKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5wdXNoKGZyYW1ld29yayk7XHJcbiAgICAgICAgLy8gU29ydCBhbHBoYWJldGljYWxseSBzbyB0aGF0IFwiRmlyZWJhc2VDb3JlLXdlYixGaXJlYmFzZVVJLXdlYlwiIGFuZFxyXG4gICAgICAgIC8vIFwiRmlyZWJhc2VVSS13ZWIsRmlyZWJhc2VDb3JlLXdlYlwiIGFyZW4ndCB2aWV3ZWQgYXMgZGlmZmVyZW50LlxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5zb3J0KCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRWZXJzaW9uID0gX2dldENsaWVudFZlcnNpb24odGhpcy5jb25maWcuY2xpZW50UGxhdGZvcm0sIHRoaXMuX2dldEZyYW1ld29ya3MoKSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0RnJhbWV3b3JrcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZXdvcmtzO1xyXG4gICAgfVxyXG4gICAgX2dldFNka0NsaWVudFZlcnNpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWV0aG9kIHRvIGJlIHVzZWQgdG8gY2FzdCBkb3duIHRvIG91ciBwcml2YXRlIGltcGxtZW50YXRpb24gb2YgQXV0aC5cclxuICogSXQgd2lsbCBhbHNvIGhhbmRsZSB1bndyYXBwaW5nIGZyb20gdGhlIGNvbXBhdCB0eXBlIGlmIG5lY2Vzc2FyeVxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCBBdXRoIG9iamVjdCBwYXNzZWQgaW4gZnJvbSBkZXZlbG9wZXJcclxuICovXHJcbmZ1bmN0aW9uIF9jYXN0QXV0aChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG59XHJcbi8qKiBIZWxwZXIgY2xhc3MgdG8gd3JhcCBzdWJzY3JpYmVyIGxvZ2ljICovXHJcbmNsYXNzIFN1YnNjcmlwdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFkZE9ic2VydmVyID0gY3JlYXRlU3Vic2NyaWJlKG9ic2VydmVyID0+ICh0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXIpKTtcclxuICAgIH1cclxuICAgIGdldCBuZXh0KCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5vYnNlcnZlciwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVyLm5leHQuYmluZCh0aGlzLm9ic2VydmVyKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQ2hhbmdlcyB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIEZpcmViYXNlIEF1dGggRW11bGF0b3IsIGluc3RlYWQgb2YgcHJvZHVjdGlvblxyXG4gKiBGaXJlYmFzZSBBdXRoIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHRoZSBmaXJzdCBjYWxsIHRvXHJcbiAqIHtAbGluayBpbml0aWFsaXplQXV0aH0uICBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscyBhcyBlbXVsYXRvclxyXG4gKiB0cmFmZmljIGlzIG5vdCBlbmNyeXB0ZWQuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCAnaHR0cDovLzEyNy4wLjAuMTo5MDk5JywgeyBkaXNhYmxlV2FybmluZ3M6IHRydWUgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIGF0IHdoaWNoIHRoZSBlbXVsYXRvciBpcyBydW5uaW5nIChlZywgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5OScpLlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsLiBgb3B0aW9ucy5kaXNhYmxlV2FybmluZ3NgIGRlZmF1bHRzIHRvIGBmYWxzZWAuIFNldCBpdCB0b1xyXG4gKiBgdHJ1ZWAgdG8gZGlzYWJsZSB0aGUgd2FybmluZyBiYW5uZXIgYXR0YWNoZWQgdG8gdGhlIERPTS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCB1cmwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnQoYXV0aEludGVybmFsLl9jYW5Jbml0RW11bGF0b3IsIGF1dGhJbnRlcm5hbCwgXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqLyk7XHJcbiAgICBfYXNzZXJ0KC9eaHR0cHM/OlxcL1xcLy8udGVzdCh1cmwpLCBhdXRoSW50ZXJuYWwsIFwiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqLyk7XHJcbiAgICBjb25zdCBkaXNhYmxlV2FybmluZ3MgPSAhIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzKTtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCB7IGhvc3QsIHBvcnQgfSA9IGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpO1xyXG4gICAgY29uc3QgcG9ydFN0ciA9IHBvcnQgPT09IG51bGwgPyAnJyA6IGA6JHtwb3J0fWA7XHJcbiAgICAvLyBBbHdheXMgcmVwbGFjZSBwYXRoIHdpdGggXCIvXCIgKGV2ZW4gaWYgaW5wdXQgdXJsIGhhZCBubyBwYXRoIGF0IGFsbCwgb3IgaGFkIGEgZGlmZmVyZW50IG9uZSkuXHJcbiAgICBhdXRoSW50ZXJuYWwuY29uZmlnLmVtdWxhdG9yID0geyB1cmw6IGAke3Byb3RvY29sfS8vJHtob3N0fSR7cG9ydFN0cn0vYCB9O1xyXG4gICAgYXV0aEludGVybmFsLnNldHRpbmdzLmFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZyA9IHRydWU7XHJcbiAgICBhdXRoSW50ZXJuYWwuZW11bGF0b3JDb25maWcgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICBob3N0LFxyXG4gICAgICAgIHBvcnQsXHJcbiAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLnJlcGxhY2UoJzonLCAnJyksXHJcbiAgICAgICAgb3B0aW9uczogT2JqZWN0LmZyZWV6ZSh7IGRpc2FibGVXYXJuaW5ncyB9KVxyXG4gICAgfSk7XHJcbiAgICBlbWl0RW11bGF0b3JXYXJuaW5nKGRpc2FibGVXYXJuaW5ncyk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoZGlzYWJsZUJhbm5lcikge1xyXG4gICAgZnVuY3Rpb24gYXR0YWNoQmFubmVyKCkge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIGNvbnN0IHN0eSA9IGVsLnN0eWxlO1xyXG4gICAgICAgIGVsLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgICdSdW5uaW5nIGluIGVtdWxhdG9yIG1vZGUuIERvIG5vdCB1c2Ugd2l0aCBwcm9kdWN0aW9uIGNyZWRlbnRpYWxzLic7XHJcbiAgICAgICAgc3R5LnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBzdHkud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgc3R5LmJhY2tncm91bmRDb2xvciA9ICcjZmZmZmZmJztcclxuICAgICAgICBzdHkuYm9yZGVyID0gJy4xZW0gc29saWQgIzAwMDAwMCc7XHJcbiAgICAgICAgc3R5LmNvbG9yID0gJyNiNTAwMDAnO1xyXG4gICAgICAgIHN0eS5ib3R0b20gPSAnMHB4JztcclxuICAgICAgICBzdHkubGVmdCA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5tYXJnaW4gPSAnMHB4JztcclxuICAgICAgICBzdHkuekluZGV4ID0gJzEwMDAwJztcclxuICAgICAgICBzdHkudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZmlyZWJhc2UtZW11bGF0b3Itd2FybmluZycpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5pbmZvID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdXQVJOSU5HOiBZb3UgYXJlIHVzaW5nIHRoZSBBdXRoIEVtdWxhdG9yLCcgK1xyXG4gICAgICAgICAgICAnIHdoaWNoIGlzIGludGVuZGVkIGZvciBsb2NhbCB0ZXN0aW5nIG9ubHkuICBEbyBub3QgdXNlIHdpdGgnICtcclxuICAgICAgICAgICAgJyBwcm9kdWN0aW9uIGNyZWRlbnRpYWxzLicpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICFkaXNhYmxlQmFubmVyKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGF0dGFjaEJhbm5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2hCYW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBwcm92aWRlciBJRCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCAnZmFjZWJvb2suY29tJywgb3IgJ2dvb2dsZS5jb20nLlxyXG4gICAgICovXHJcbiAgICBwcm92aWRlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHNpZ24gaW4gbWV0aG9kIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELCBvclxyXG4gICAgICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgc2lnbi1pbiBtZXRob2RcclxuICAgICAqIGlkZW50aWZpZXIgYXMgcmV0dXJuZWQgaW4ge0BsaW5rIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsfS5cclxuICAgICAqL1xyXG4gICAgc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnNpZ25Jbk1ldGhvZCA9IHNpZ25Jbk1ldGhvZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKF9hdXRoLCBfaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmRcIiAvKiBTSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kT29iQ29kZVwiIC8qIFNFTkRfT09CX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFuZENoYW5nZUVtYWlsKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXHJcbiAqIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDb3ZlcnMgYm90aCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2VtYWlsLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9wYXNzd29yZCwgc2lnbkluTWV0aG9kLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF90ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8sIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgdGhpcy5fZW1haWwgPSBfZW1haWw7XHJcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBfcGFzc3dvcmQ7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50SWQgPSBfdGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQsIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIG9vYkNvZGUsIHRlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgb29iQ29kZSwgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovLCB0ZW5hbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuX3RlbmFudElkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBFaXRoZXIgYG9iamVjdGAgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuIFdoZW4gc3RyaW5nIGlzXHJcbiAgICAgKiBwcm92aWRlZCwgYEpTT04ucGFyc2VgIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5lbWFpbCkgJiYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5wYXNzd29yZCkpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRDb2RlKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkLCBvYmoudGVuYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhJZHBcIiAvKiBTSUdOX0lOX1dJVEhfSURQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSQxID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgT0F1dGggY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21QYXJhbXMocGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocGFyYW1zLnByb3ZpZGVySWQsIHBhcmFtcy5zaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGlmIChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMiBhbmQgZWl0aGVyIElEIHRva2VuIG9yIGFjY2VzcyB0b2tlbi5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmlkVG9rZW4gPSBwYXJhbXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBub25jZSBpZiBhdmFpbGFibGUgYW5kIG5vIHBlbmRpbmdUb2tlbiBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm5vbmNlICYmICFwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLm5vbmNlID0gcGFyYW1zLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHBhcmFtcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLm9hdXRoVG9rZW4gJiYgcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMSBhbmQgT0F1dGggdG9rZW4gd2l0aCB0b2tlbiBzZWNyZXRcclxuICAgICAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHBhcmFtcy5vYXV0aFRva2VuO1xyXG4gICAgICAgICAgICBjcmVkLnNlY3JldCA9IHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2ZhaWwoXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5pZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgc2VjcmV0OiB0aGlzLnNlY3JldCxcclxuICAgICAgICAgICAgbm9uY2U6IHRoaXMubm9uY2UsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCB9ID0gb2JqLCByZXN0ID0gX19yZXN0KG9iaiwgW1wicHJvdmlkZXJJZFwiLCBcInNpZ25Jbk1ldGhvZFwiXSk7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8ICFzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjcmVkLCByZXN0KTtcclxuICAgICAgICByZXR1cm4gY3JlZDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkkkMSxcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBlbmRpbmdUb2tlbiA9IHRoaXMucGVuZGluZ1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zdEJvZHkgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ2lkX3Rva2VuJ10gPSB0aGlzLmlkVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydhY2Nlc3NfdG9rZW4nXSA9IHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VjcmV0KSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnb2F1dGhfdG9rZW5fc2VjcmV0J10gPSB0aGlzLnNlY3JldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3N0Qm9keVsncHJvdmlkZXJJZCddID0gdGhpcy5wcm92aWRlcklkO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub25jZSAmJiAhdGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5Wydub25jZSddID0gdGhpcy5ub25jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXF1ZXN0LnBvc3RCb2R5ID0gcXVlcnlzdHJpbmcocG9zdEJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2VuZFZlcmlmaWNhdGlvbkNvZGVcIiAvKiBTRU5EX1ZFUklGSUNBVElPTl9DT0RFICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxuICAgIGlmIChyZXNwb25zZS50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG5jb25zdCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfID0ge1xyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi9cclxufTtcclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBjb25zdCBhcGlSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBvcGVyYXRpb246ICdSRUFVVEgnIH0pO1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBTSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgYXBpUmVxdWVzdCksIFZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZUF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovLCBcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21Ub2tlblJlc3BvbnNlKHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIE9iamVjdC5hc3NpZ24oeyBpZFRva2VuIH0sIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGVtcG9yYXJ5UHJvb2YsIHBob25lTnVtYmVyLCB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSB9ID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgaWYgKHRlbXBvcmFyeVByb29mICYmIHBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uSW5mbzogdmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIGNvZGU6IHZlcmlmaWNhdGlvbkNvZGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5waG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICBvYmoucGhvbmVOdW1iZXIgPSB0aGlzLnBhcmFtcy5waG9uZU51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIG9iai50ZW1wb3JhcnlQcm9vZiA9IHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgICAgICBvYmoudmVyaWZpY2F0aW9uQ29kZSA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25JZCkge1xyXG4gICAgICAgICAgICBvYmoudmVyaWZpY2F0aW9uSWQgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIC8qKiBHZW5lcmF0ZXMgYSBwaG9uZSBjcmVkZW50aWFsIGJhc2VkIG9uIGEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmcuICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoanNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUsIHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9ID0ganNvbjtcclxuICAgICAgICBpZiAoIXZlcmlmaWNhdGlvbkNvZGUgJiZcclxuICAgICAgICAgICAgIXZlcmlmaWNhdGlvbklkICYmXHJcbiAgICAgICAgICAgICFwaG9uZU51bWJlciAmJlxyXG4gICAgICAgICAgICAhdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVtcG9yYXJ5UHJvb2ZcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwcyB0aGUgbW9kZSBzdHJpbmcgaW4gYWN0aW9uIGNvZGUgVVJMIHRvIEFjdGlvbiBDb2RlIEluZm8gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gbW9kZVxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VNb2RlKG1vZGUpIHtcclxuICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICAgIGNhc2UgJ3JlY292ZXJFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlJFQ09WRVJfRU1BSUxcIiAvKiBSRUNPVkVSX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3Jlc2V0UGFzc3dvcmQnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJQQVNTV09SRF9SRVNFVFwiIC8qIFBBU1NXT1JEX1JFU0VUICovO1xyXG4gICAgICAgIGNhc2UgJ3NpZ25Jbic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLztcclxuICAgICAgICBjYXNlICd2ZXJpZnlFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlZFUklGWV9FTUFJTFwiIC8qIFZFUklGWV9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICd2ZXJpZnlBbmRDaGFuZ2VFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAncmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb24nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gcGFyc2UgRkRMIGxpbmtzXHJcbiAqXHJcbiAqIEBwYXJhbSB1cmxcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlRGVlcExpbmsodXJsKSB7XHJcbiAgICBjb25zdCBsaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydsaW5rJ107XHJcbiAgICAvLyBEb3VibGUgbGluayBjYXNlIChhdXRvbWF0aWMgcmVkaXJlY3QpLlxyXG4gICAgY29uc3QgZG91YmxlRGVlcExpbmsgPSBsaW5rXHJcbiAgICAgICAgPyBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcobGluaykpWydkZWVwX2xpbmtfaWQnXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIC8vIGlPUyBjdXN0b20gc2NoZW1lIGxpbmtzLlxyXG4gICAgY29uc3QgaU9TRGVlcExpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2RlZXBfbGlua19pZCddO1xyXG4gICAgY29uc3QgaU9TRG91YmxlRGVlcExpbmsgPSBpT1NEZWVwTGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGlPU0RlZXBMaW5rKSlbJ2xpbmsnXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIHJldHVybiBpT1NEb3VibGVEZWVwTGluayB8fCBpT1NEZWVwTGluayB8fCBkb3VibGVEZWVwTGluayB8fCBsaW5rIHx8IHVybDtcclxufVxyXG4vKipcclxuICogQSB1dGlsaXR5IGNsYXNzIHRvIHBhcnNlIGVtYWlsIGFjdGlvbiBVUkxzIHN1Y2ggYXMgcGFzc3dvcmQgcmVzZXQsIGVtYWlsIHZlcmlmaWNhdGlvbixcclxuICogZW1haWwgbGluayBzaWduIGluLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEFjdGlvbkNvZGVVUkwge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uTGluayAtIFRoZSBsaW5rIGZyb20gd2hpY2ggdG8gZXh0cmFjdCB0aGUgVVJMLlxyXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBBY3Rpb25Db2RlVVJMfSBvYmplY3QsIG9yIG51bGwgaWYgdGhlIGxpbmsgaXMgaW52YWxpZC5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9uTGluaykge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhhY3Rpb25MaW5rKSk7XHJcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gKF9hID0gc2VhcmNoUGFyYW1zW1wiYXBpS2V5XCIgLyogQVBJX0tFWSAqL10pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGw7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IChfYiA9IHNlYXJjaFBhcmFtc1tcIm9vYkNvZGVcIiAvKiBDT0RFICovXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBwYXJzZU1vZGUoKF9jID0gc2VhcmNoUGFyYW1zW1wibW9kZVwiIC8qIE1PREUgKi9dKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBudWxsKTtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBBUEkga2V5LCBjb2RlIGFuZCBtb2RlLlxyXG4gICAgICAgIF9hc3NlcnQoYXBpS2V5ICYmIGNvZGUgJiYgb3BlcmF0aW9uLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jb250aW51ZVVybCA9IChfZCA9IHNlYXJjaFBhcmFtc1tcImNvbnRpbnVlVXJsXCIgLyogQ09OVElOVUVfVVJMICovXSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogbnVsbDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IChfZSA9IHNlYXJjaFBhcmFtc1tcImxhbmd1YWdlQ29kZVwiIC8qIExBTkdVQUdFX0NPREUgKi9dKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSAoX2YgPSBzZWFyY2hQYXJhbXNbXCJ0ZW5hbnRJZFwiIC8qIFRFTkFOVF9JRCAqL10pICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nIGFuZCByZXR1cm5zIGFuIHtAbGluayBBY3Rpb25Db2RlVVJMfSBpZiB0aGUgbGluayBpcyB2YWxpZCxcclxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxpbmsgIC0gVGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZy5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGFyc2VMaW5rKGxpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25MaW5rID0gcGFyc2VEZWVwTGluayhsaW5rKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFjdGlvbkNvZGVVUkwoYWN0aW9uTGluayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFBhcnNlcyB0aGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nIGFuZCByZXR1cm5zIGFuIHtAbGluayBBY3Rpb25Db2RlVVJMfSBpZlxyXG4gKiB0aGUgbGluayBpcyB2YWxpZCwgb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VBY3Rpb25Db2RlVVJMKGxpbmspIHtcclxuICAgIHJldHVybiBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhsaW5rKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcge0BsaW5rIEVtYWlsQXV0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBFbWFpbEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRCwgZXZlbiBmb3IgZW1haWwgbGluay5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBFbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHVzaW5nIGFuIGVtYWlsIGFuZCBwYXNzd29yZC5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW1haWwgLSBFbWFpbCBhZGRyZXNzLlxyXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIC0gVXNlciBhY2NvdW50IHBhc3N3b3JkLlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgYW4gZW1haWwgbGluayBhZnRlciBhIHNpZ24gaW4gd2l0aFxyXG4gICAgICogZW1haWwgbGluayBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsIGVtYWlsKTtcclxuICAgICAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHVzZWQgdG8gdmVyaWZ5IHRoZSBsaW5rLlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBlbWFpbExpbmsgLSBTaWduLWluIGVtYWlsIGxpbmsuXHJcbiAgICAgKiBAcmV0dXJucyAtIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsV2l0aExpbmsoZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbkNvZGVVcmwgPSBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhlbWFpbExpbmspO1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVVybCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gRW1haWxBdXRoQ3JlZGVudGlhbC5fZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgYWN0aW9uQ29kZVVybC5jb2RlLCBhY3Rpb25Db2RlVXJsLnRlbmFudElkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRCA9IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QgPSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIEZlZGVyYXRlZCBwcm92aWRlcnMgKE9BdXRoIChpbmNsdWRpbmcgT0lEQyksIFNBTUwpLlxyXG4gKlxyXG4gKiBUaGlzIGNsYXNzIGlzIG5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIGZvciBnZW5lcmljIE9BdXRoIHByb3ZpZGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFByb3ZpZGVyIGZvciB3aGljaCBjcmVkZW50aWFscyBzaG91bGQgYmUgZ2VuZXJhdGVkLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gbnVsbDtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbGFuZ3VhZ2UgZ29kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VDb2RlIC0gbGFuZ3VhZ2UgY29kZVxyXG4gICAgICovXHJcbiAgICBzZXREZWZhdWx0TGFuZ3VhZ2UobGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBPQXV0aCBjdXN0b20gcGFyYW1ldGVycyB0byBwYXNzIGluIGFuIE9BdXRoIHJlcXVlc3QgZm9yIHBvcHVwIGFuZCByZWRpcmVjdCBzaWduLWluXHJcbiAgICAgKiBvcGVyYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgYSBkZXRhaWxlZCBsaXN0LCBjaGVjayB0aGUgcmVzZXJ2ZWQgcmVxdWlyZWQgT0F1dGggMi4wIHBhcmFtZXRlcnMgc3VjaCBhcyBgY2xpZW50X2lkYCxcclxuICAgICAqIGByZWRpcmVjdF91cmlgLCBgc2NvcGVgLCBgcmVzcG9uc2VfdHlwZWAsIGFuZCBgc3RhdGVgIGFyZSBub3QgYWxsb3dlZCBhbmQgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdXN0b21PQXV0aFBhcmFtZXRlcnMgLSBUaGUgY3VzdG9tIE9BdXRoIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiB0aGUgT0F1dGggcmVxdWVzdC5cclxuICAgICAqL1xyXG4gICAgc2V0Q3VzdG9tUGFyYW1ldGVycyhjdXN0b21PQXV0aFBhcmFtZXRlcnMpIHtcclxuICAgICAgICB0aGlzLmN1c3RvbVBhcmFtZXRlcnMgPSBjdXN0b21PQXV0aFBhcmFtZXRlcnM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIEN1c3RvbVBhcmFtZXRlcnN9LlxyXG4gICAgICovXHJcbiAgICBnZXRDdXN0b21QYXJhbWV0ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVBhcmFtZXRlcnM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbW1vbiBjb2RlIHRvIGFsbCBPQXV0aCBwcm92aWRlcnMuIFRoaXMgaXMgc2VwYXJhdGUgZnJvbSB0aGVcclxuICoge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHNvIHRoYXQgY2hpbGQgcHJvdmlkZXJzIChsaWtlXHJcbiAqIHtAbGluayBHb29nbGVBdXRoUHJvdmlkZXJ9KSBkb24ndCBpbmhlcml0IHRoZSBgY3JlZGVudGlhbGAgaW5zdGFuY2UgbWV0aG9kLlxyXG4gKiBJbnN0ZWFkLCB0aGV5IHJlbHkgb24gYSBzdGF0aWMgYGNyZWRlbnRpYWxgIG1ldGhvZC5cclxuICovXHJcbmNsYXNzIEJhc2VPQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuc2NvcGVzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbiBPQXV0aCBzY29wZSB0byB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NvcGUgLSBQcm92aWRlciBPQXV0aCBzY29wZSB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIGFkZFNjb3BlKHNjb3BlKSB7XHJcbiAgICAgICAgLy8gSWYgbm90IGFscmVhZHkgYWRkZWQsIGFkZCBzY29wZSB0byBsaXN0LlxyXG4gICAgICAgIGlmICghdGhpcy5zY29wZXMuaW5jbHVkZXMoc2NvcGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLnB1c2goc2NvcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGN1cnJlbnQgbGlzdCBvZiBPQXV0aCBzY29wZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFNjb3BlcygpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuc2NvcGVzXTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgZ2VuZXJpYyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgT0F1dGggQWNjZXNzIFRva2VuIGZvciB0aGUgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBKU09OIHN0cmluZyBvciBhIHBsYWluIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBqc29uIC0gQSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBfYXNzZXJ0KCdwcm92aWRlcklkJyBpbiBvYmogJiYgJ3NpZ25Jbk1ldGhvZCcgaW4gb2JqLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMob2JqKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBnZW5lcmljIE9BdXRoIHByb3ZpZGVyJ3MgYWNjZXNzIHRva2VuIG9yIElEIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGUgcmF3IG5vbmNlIGlzIHJlcXVpcmVkIHdoZW4gYW4gSUQgdG9rZW4gd2l0aCBhIG5vbmNlIGZpZWxkIGlzIHByb3ZpZGVkLiBUaGUgU0hBLTI1NiBoYXNoIG9mXHJcbiAgICAgKiB0aGUgcmF3IG5vbmNlIG11c3QgbWF0Y2ggdGhlIG5vbmNlIGZpZWxkIGluIHRoZSBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGdvb2dsZVVzZXJgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIC8vIEluaXRpYWxpemUgYSBnZW5lcmF0ZSBPQXV0aCBwcm92aWRlciB3aXRoIGEgYGdvb2dsZS5jb21gIHByb3ZpZGVySWQuXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbCh7XHJcbiAgICAgKiAgIGlkVG9rZW46IGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4sXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtcyAtIEVpdGhlciB0aGUgb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyB0aGUgSUQgdG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgcmF3IG5vbmNlXHJcbiAgICAgKiBvciB0aGUgSUQgdG9rZW4gc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBjcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVkZW50aWFsKHBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICAvKiogQW4gaW50ZXJuYWwgY3JlZGVudGlhbCBtZXRob2QgdGhhdCBhY2NlcHRzIG1vcmUgcGVybWlzc2l2ZSBvcHRpb25zICovXHJcbiAgICBfY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICBfYXNzZXJ0KHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAvLyBGb3IgT0F1dGhDcmVkZW50aWFsLCBzaWduIGluIG1ldGhvZCBpcyBzYW1lIGFzIHByb3ZpZGVySWQuXHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLCBzaWduSW5NZXRob2Q6IHRoaXMucHJvdmlkZXJJZCB9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAhb2F1dGhJZFRva2VuICYmXHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLl9jcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvYXV0aEFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgcmF3Tm9uY2U6IG5vbmNlLFxyXG4gICAgICAgICAgICAgICAgcGVuZGluZ1Rva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGYWNlYm9va0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgRmFjZWJvb2suXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIGBldmVudGAgZnJvbSB0aGUgRmFjZWJvb2sgYXV0aC5hdXRoUmVzcG9uc2VDaGFuZ2UgY2FsbGJhY2suXHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChldmVudC5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBGYWNlYm9vayBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEZhY2Vib29rQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkZBQ0VCT09LLiAqL1xyXG5GYWNlYm9va0F1dGhQcm92aWRlci5GQUNFQk9PS19TSUdOX0lOX01FVEhPRCA9IFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy4gKi9cclxuRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4gYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHb29nbGVBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi8pO1xyXG4gICAgICAgIHRoaXMuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdvb2dsZS4gQXQgbGVhc3Qgb25lIG9mIElEIHRva2VuIGFuZCBhY2Nlc3MgdG9rZW4gaXMgcmVxdWlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIFxcYGdvb2dsZVVzZXJcXGAgZnJvbSB0aGUgb25zdWNjZXNzIEdvb2dsZSBTaWduIEluIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIEdvb2dsZSBJRCB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdvb2dsZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGlkVG9rZW4sIGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4gfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aElkVG9rZW4gJiYgIW9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhbiBvYXV0aCAxIGNyZWRlbnRpYWwgb3IgYSBwaG9uZSBjcmVkZW50aWFsXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QgPSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBHaXRIdWIgcmVxdWlyZXMgYW4gT0F1dGggMi4wIHJlZGlyZWN0LCBzbyB5b3UgY2FuIGVpdGhlciBoYW5kbGUgdGhlIHJlZGlyZWN0IGRpcmVjdGx5LCBvciB1c2VcclxuICogdGhlIHtAbGluayBzaWduSW5XaXRoUG9wdXB9IGhhbmRsZXI6XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBHaXRodWIgQWNjZXNzIFRva2VuLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR2l0aHViQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdpdGh1Yi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHaXRodWIgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHaXRodWJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QgPSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCwgcHJvdmlkZXJJZCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVG9rZW4gPSBwZW5kaW5nVG9rZW47XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW5cclxuICAgICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gSW5wdXQgY2FuIGJlIGVpdGhlciBPYmplY3Qgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuXHJcbiAgICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kLCBwZW5kaW5nVG9rZW4gfSA9IG9iajtcclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQgfHxcclxuICAgICAgICAgICAgIXNpZ25Jbk1ldGhvZCB8fFxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuIHx8XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQgIT09IHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHN0YXRpYyBtZXRob2QgdG8gYXZvaWQgZXhwb3NpbmcgdGhlIGNvbnN0cnVjdG9yIHRvIGVuZCB1c2Vycy5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkksXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBTQU1MX1BST1ZJREVSX1BSRUZJWCA9ICdzYW1sLic7XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBmb3IgU0FNTC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yLiBUaGUgcHJvdmlkZXJJZCBtdXN0IHN0YXJ0IHdpdGggXCJzYW1sLlwiXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFNBTUwgcHJvdmlkZXIgSUQuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBfYXNzZXJ0KHByb3ZpZGVySWQuc3RhcnRzV2l0aChTQU1MX1BST1ZJREVSX1BSRUZJWCksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGFmdGVyIGFcclxuICAgICAqIHN1Y2Nlc3NmdWwgU0FNTCBmbG93IGNvbXBsZXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxyXG4gICAgICogZm9sbG93aW5nIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHNhbWxQcm92aWRlcik7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aENyZWRlbnRpYWwuZnJvbUpTT04oanNvbik7XHJcbiAgICAgICAgX2Fzc2VydChjcmVkZW50aWFsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGVuZGluZ1Rva2VuLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghcGVuZGluZ1Rva2VuIHx8ICFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gU0FNTEF1dGhDcmVkZW50aWFsLl9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIFR3aXR0ZXIgQWNjZXNzIFRva2VuIGFuZCBTZWNyZXQuXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiAgIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgVHdpdHRlckF1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIFR3aXR0ZXIgQWNjZXNzIFRva2VuIGFuZCBTZWNyZXQuXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVHdpdHRlckF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIFR3aXR0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRva2VuIC0gVHdpdHRlciBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKiBAcGFyYW0gc2VjcmV0IC0gVHdpdHRlciBzZWNyZXQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHRva2VuLCBzZWNyZXQpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlRXSVRURVJfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgICBvYXV0aFRva2VuU2VjcmV0OiBzZWNyZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0IH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiB8fCAhb2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5UV0lUVEVSLiAqL1xyXG5Ud2l0dGVyQXV0aFByb3ZpZGVyLlRXSVRURVJfU0lHTl9JTl9NRVRIT0QgPSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnblVwKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnblVwXCIgLyogU0lHTl9VUCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyQ3JlZGVudGlhbEltcGwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gcGFyYW1zLnVzZXI7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcGFyYW1zLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5SZXNwb25zZSA9IHBhcmFtcy5fdG9rZW5SZXNwb25zZTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBwYXJhbXMub3BlcmF0aW9uVHlwZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBvcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlckltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJDcmVkID0gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIF90b2tlblJlc3BvbnNlOiBpZFRva2VuUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdXNlckNyZWQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zvck9wZXJhdGlvbih1c2VyLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSkge1xyXG4gICAgICAgIGF3YWl0IHVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCAvKiByZWxvYWQgKi8gdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogcmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgIGlmIChyZXNwb25zZS5wcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb3ZpZGVySWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoJ3Bob25lTnVtYmVyJyBpbiByZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBcInBob25lXCIgLyogUEhPTkUgKi87XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gYXMgYW4gYW5vbnltb3VzIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZXJlIGlzIGFscmVhZHkgYW4gYW5vbnltb3VzIHVzZXIgc2lnbmVkIGluLCB0aGF0IHVzZXIgd2lsbCBiZSByZXR1cm5lZDsgb3RoZXJ3aXNlLCBhXHJcbiAqIG5ldyBhbm9ueW1vdXMgdXNlciBpZGVudGl0eSB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbkFub255bW91c2x5KGF1dGgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgaWYgKChfYSA9IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzQW5vbnltb3VzKSB7XHJcbiAgICAgICAgLy8gSWYgYW4gYW5vbnltb3VzIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4sIG5vIG5lZWQgdG8gc2lnbiB0aGVtIGluIGFnYWluLlxyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcjogYXV0aEludGVybmFsLmN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlOiBcInNpZ25JblwiIC8qIFNJR05fSU4gKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSwgdHJ1ZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHN1cGVyKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9IG9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTXVsdGlGYWN0b3JFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIHRoaXMuYXBwTmFtZSA9IGF1dGgubmFtZTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBlcnJvci5jb2RlO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSAoX2EgPSBhdXRoLnRlbmFudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZXJ2ZXJSZXNwb25zZSA9IGVycm9yLmN1c3RvbURhdGFcclxuICAgICAgICAgICAgLnNlcnZlclJlc3BvbnNlO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yRXJyb3IoYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSB7XHJcbiAgICBjb25zdCBpZFRva2VuUHJvdmlkZXIgPSBvcGVyYXRpb25UeXBlID09PSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi9cclxuICAgICAgICA/IGNyZWRlbnRpYWwuX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKVxyXG4gICAgICAgIDogY3JlZGVudGlhbC5fZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpO1xyXG4gICAgcmV0dXJuIGlkVG9rZW5Qcm92aWRlci5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIHRocm93IE11bHRpRmFjdG9yRXJyb3IuX2Zyb21FcnJvckFuZE9wZXJhdGlvbihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRha2VzIGEgc2V0IG9mIFVzZXJJbmZvIHByb3ZpZGVyIGRhdGEgYW5kIGNvbnZlcnRzIGl0IHRvIGEgc2V0IG9mIG5hbWVzXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm92aWRlckRhdGFBc05hbWVzKHByb3ZpZGVyRGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBTZXQocHJvdmlkZXJEYXRhXHJcbiAgICAgICAgLm1hcCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQpXHJcbiAgICAgICAgLmZpbHRlcihwaWQgPT4gISFwaWQpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVW5saW5rcyBhIHByb3ZpZGVyIGZyb20gYSB1c2VyIGFjY291bnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlcklkIC0gVGhlIHByb3ZpZGVyIHRvIHVubGluay5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdW5saW5rKHVzZXIsIHByb3ZpZGVySWQpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXModHJ1ZSwgdXNlckludGVybmFsLCBwcm92aWRlcklkKTtcclxuICAgIGNvbnN0IHsgcHJvdmlkZXJVc2VySW5mbyB9ID0gYXdhaXQgZGVsZXRlTGlua2VkQWNjb3VudHModXNlckludGVybmFsLmF1dGgsIHtcclxuICAgICAgICBpZFRva2VuOiBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbigpLFxyXG4gICAgICAgIGRlbGV0ZVByb3ZpZGVyOiBbcHJvdmlkZXJJZF1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgcHJvdmlkZXJzTGVmdCA9IHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJVc2VySW5mbyB8fCBbXSk7XHJcbiAgICB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maWx0ZXIocGQgPT4gcHJvdmlkZXJzTGVmdC5oYXMocGQucHJvdmlkZXJJZCkpO1xyXG4gICAgaWYgKCFwcm92aWRlcnNMZWZ0LmhhcyhcInBob25lXCIgLyogUEhPTkUgKi8pKSB7XHJcbiAgICAgICAgdXNlckludGVybmFsLnBob25lTnVtYmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHVzZXJJbnRlcm5hbDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayQxKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGNyZWRlbnRpYWwuX2xpbmtUb0lkVG9rZW4odXNlci5hdXRoLCBhd2FpdCB1c2VyLmdldElkVG9rZW4oKSksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgXCJsaW5rXCIgLyogTElOSyAqLywgcmVzcG9uc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9hc3NlcnRMaW5rZWRTdGF0dXMoZXhwZWN0ZWQsIHVzZXIsIHByb3ZpZGVyKSB7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgIGNvbnN0IHByb3ZpZGVySWRzID0gcHJvdmlkZXJEYXRhQXNOYW1lcyh1c2VyLnByb3ZpZGVyRGF0YSk7XHJcbiAgICBjb25zdCBjb2RlID0gZXhwZWN0ZWQgPT09IGZhbHNlXHJcbiAgICAgICAgPyBcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9cclxuICAgICAgICA6IFwibm8tc3VjaC1wcm92aWRlclwiIC8qIE5PX1NVQ0hfUFJPVklERVIgKi87XHJcbiAgICBfYXNzZXJ0KHByb3ZpZGVySWRzLmhhcyhwcm92aWRlcikgPT09IGV4cGVjdGVkLCB1c2VyLmF1dGgsIGNvZGUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqLztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlciksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IF9wYXJzZVRva2VuKHJlc3BvbnNlLmlkVG9rZW4pO1xyXG4gICAgICAgIF9hc3NlcnQocGFyc2VkLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHsgc3ViOiBsb2NhbElkIH0gPSBwYXJzZWQ7XHJcbiAgICAgICAgX2Fzc2VydCh1c2VyLnVpZCA9PT0gbG9jYWxJZCwgYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB1c2VyIGRlbGV0ZWQgZXJyb3IgaW50byB1c2VyIG1pc21hdGNoXHJcbiAgICAgICAgaWYgKChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuY29kZSkgPT09IGBhdXRoLyR7XCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIFVTRVJfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9zaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IFwic2lnbkluXCIgLyogU0lHTl9JTiAqLztcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwpO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgaWYgKCFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBhd2FpdCBhdXRoLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChfY2FzdEF1dGgoYXV0aCksIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBjcmVkZW50aWFsLnByb3ZpZGVySWQpO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlckludGVybmFsLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pblxyXG4gKiBhdHRlbXB0cy4gVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcmVjb3ZlciBmcm9tIGEgYENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTmAgZXJyb3IuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoQ3VzdG9tVG9rZW5cIiAvKiBTSUdOX0lOX1dJVEhfQ1VTVE9NX1RPS0VOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhIGN1c3RvbSB0b2tlbi5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQ3VzdG9tIHRva2VucyBhcmUgdXNlZCB0byBpbnRlZ3JhdGUgRmlyZWJhc2UgQXV0aCB3aXRoIGV4aXN0aW5nIGF1dGggc3lzdGVtcywgYW5kIG11c3RcclxuICogYmUgZ2VuZXJhdGVkIGJ5IGFuIGF1dGggYmFja2VuZCB1c2luZyB0aGVcclxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3JlZmVyZW5jZS9hZG1pbi9ub2RlL2FkbWluLmF1dGguQXV0aCNjcmVhdGVjdXN0b210b2tlbiB8IGNyZWF0ZUN1c3RvbVRva2VufVxyXG4gKiBtZXRob2QgaW4gdGhlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hdXRoL2FkbWluIHwgQWRtaW4gU0RLfSAuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHRva2VuIGlzIGludmFsaWQsIGV4cGlyZWQsIG9yIG5vdCBhY2NlcHRlZCBieSB0aGUgRmlyZWJhc2UgQXV0aCBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjdXN0b21Ub2tlbiAtIFRoZSBjdXN0b20gdG9rZW4gdG8gc2lnbiBpbiB3aXRoLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3VzdG9tVG9rZW4oYXV0aCwgY3VzdG9tVG9rZW4pIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgdG9rZW46IGN1c3RvbVRva2VuLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWQgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIoY3JlZC51c2VyKTtcclxuICAgIHJldHVybiBjcmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgICAgIHRoaXMudWlkID0gcmVzcG9uc2UubWZhRW5yb2xsbWVudElkO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsbWVudFRpbWUgPSBuZXcgRGF0ZShyZXNwb25zZS5lbnJvbGxlZEF0KS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICBpZiAoJ3Bob25lSW5mbycgaW4gZW5yb2xsbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckluZm8uX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckluZm8gZXh0ZW5kcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovLCByZXNwb25zZSk7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lSW5mbztcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKF9hdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU11bHRpRmFjdG9ySW5mbyhlbnJvbGxtZW50KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgX2Fzc2VydCgoKF9hID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPiAwLCBhdXRoLCBcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbi5sZW5ndGggPiAwLCBhdXRoLCBcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqLyk7XHJcbiAgICByZXF1ZXN0LmNvbnRpbnVlVXJsID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybDtcclxuICAgIHJlcXVlc3QuZHluYW1pY0xpbmtEb21haW4gPSBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW47XHJcbiAgICByZXF1ZXN0LmNhbkhhbmRsZUNvZGVJbkFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHA7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmlPUykge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZC5sZW5ndGggPiAwLCBhdXRoLCBcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIE1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5pb3NCdW5kbGVJZCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkSW5zdGFsbEFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLmluc3RhbGxBcHA7XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkTWluaW11bVZlcnNpb25Db2RlID1cclxuICAgICAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQubWluaW11bVZlcnNpb247XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkUGFja2FnZU5hbWUgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0byB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8gY29tcGxldGUgdGhlIHBhc3N3b3JkIHJlc2V0LCBjYWxsIHtAbGluayBjb25maXJtUGFzc3dvcmRSZXNldH0gd2l0aCB0aGUgY29kZSBzdXBwbGllZCBpblxyXG4gKiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlciwgYWxvbmcgd2l0aCB0aGUgbmV3IHBhc3N3b3JkIHNwZWNpZmllZCBieSB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHVzZXIuXHJcbiAqIGF3YWl0IGNvbmZpcm1QYXNzd29yZFJlc2V0KCd1c2VyQGV4YW1wbGUuY29tJywgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLyxcclxuICAgICAgICBlbWFpbFxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhNb2R1bGFyLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGhNb2R1bGFyLCByZXF1ZXN0KTtcclxufVxyXG4vKipcclxuICogQ29tcGxldGVzIHRoZSBwYXNzd29yZCByZXNldCBwcm9jZXNzLCBnaXZlbiBhIGNvbmZpcm1hdGlvbiBjb2RlIGFuZCBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIGNvbmZpcm1hdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1QYXNzd29yZFJlc2V0KGF1dGgsIG9vYkNvZGUsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICBhd2FpdCByZXNldFBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwge1xyXG4gICAgICAgIG9vYkNvZGUsXHJcbiAgICAgICAgbmV3UGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgLy8gRG8gbm90IHJldHVybiB0aGUgZW1haWwuXHJcbn1cclxuLyoqXHJcbiAqIEFwcGxpZXMgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGF3YWl0IGFwcGx5QWN0aW9uQ29kZSQxKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgeyBvb2JDb2RlIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHJldHVybnMgbWV0YWRhdGEgYWJvdXQgdGhlIGNvZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQWN0aW9uQ29kZShhdXRoLCBvb2JDb2RlKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzZXRQYXNzd29yZChhdXRoTW9kdWxhciwgeyBvb2JDb2RlIH0pO1xyXG4gICAgLy8gRW1haWwgY291bGQgYmUgZW1wdHkgb25seSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzIEVNQUlMX1NJR05JTiBvclxyXG4gICAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXHJcbiAgICAvLyBOZXcgZW1haWwgc2hvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE11bHRpLWZhY3RvciBpbmZvIGNvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXHJcbiAgICAvLyBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTi5cclxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHJlc3BvbnNlLnJlcXVlc3RUeXBlO1xyXG4gICAgX2Fzc2VydChvcGVyYXRpb24sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICBjYXNlIFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLzpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5uZXdFbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm1mYUluZm8sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UuZW1haWwsIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIG11bHRpLWZhY3RvciBpbmZvIGZvciByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvblxyXG4gICAgbGV0IG11bHRpRmFjdG9ySW5mbyA9IG51bGw7XHJcbiAgICBpZiAocmVzcG9uc2UubWZhSW5mbykge1xyXG4gICAgICAgIG11bHRpRmFjdG9ySW5mbyA9IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShfY2FzdEF1dGgoYXV0aE1vZHVsYXIpLCByZXNwb25zZS5tZmFJbmZvKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBlbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UubmV3RW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuZW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovXHJcbiAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLmVtYWlsXHJcbiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLm5ld0VtYWlsKSB8fCBudWxsLFxyXG4gICAgICAgICAgICBtdWx0aUZhY3RvckluZm9cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZXJhdGlvblxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgcGFzc3dvcmQgcmVzZXQgY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHJldHVybnMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzIGlmIHZhbGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShhdXRoLCBjb2RlKSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNoZWNrQWN0aW9uQ29kZShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIGNvZGUpO1xyXG4gICAgLy8gRW1haWwgc2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50IHNpbmNlIGEgY29kZSB3YXMgc2VudCB0byBpdFxyXG4gICAgcmV0dXJuIGRhdGEuZW1haWw7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgdXNlciBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBPbiBzdWNjZXNzZnVsIGNyZWF0aW9uIG9mIHRoZSB1c2VyIGFjY291bnQsIHRoaXMgdXNlciB3aWxsIGFsc28gYmUgc2lnbmVkIGluIHRvIHlvdXIgYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIFVzZXIgYWNjb3VudCBjcmVhdGlvbiBjYW4gZmFpbCBpZiB0aGUgYWNjb3VudCBhbHJlYWR5IGV4aXN0cyBvciB0aGUgcGFzc3dvcmQgaXMgaW52YWxpZC5cclxuICpcclxuICogTm90ZTogVGhlIGVtYWlsIGFkZHJlc3MgYWN0cyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciBhbmQgZW5hYmxlcyBhbiBlbWFpbC1iYXNlZFxyXG4gKiBwYXNzd29yZCByZXNldC4gVGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIG5ldyB1c2VyIGFjY291bnQgYW5kIHNldCB0aGUgaW5pdGlhbCB1c2VyIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXIncyBjaG9zZW4gcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkIGRvIG5vdCBtYXRjaC5cclxuICpcclxuICogTm90ZTogVGhlIHVzZXIncyBwYXNzd29yZCBpcyBOT1QgdGhlIHBhc3N3b3JkIHVzZWQgdG8gYWNjZXNzIHRoZSB1c2VyJ3MgZW1haWwgYWNjb3VudC4gVGhlXHJcbiAqIGVtYWlsIGFkZHJlc3Mgc2VydmVzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyLCBhbmQgdGhlIHBhc3N3b3JkIGlzIHVzZWQgdG8gYWNjZXNzXHJcbiAqIHRoZSB1c2VyJ3MgYWNjb3VudCBpbiB5b3VyIEZpcmViYXNlIHByb2plY3QuIFNlZSBhbHNvOiB7QGxpbmsgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcnMgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXJzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNlbmRzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIHRvIHRoZSB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHNpZ24taW4gb3BlcmF0aW9uIGhhcyB0byBhbHdheXMgYmUgY29tcGxldGVkIGluIHRoZSBhcHAgdW5saWtlIG90aGVyIG91dCBvZiBiYW5kIGVtYWlsXHJcbiAqIGFjdGlvbnMgKHBhc3N3b3JkIHJlc2V0IGFuZCBlbWFpbCB2ZXJpZmljYXRpb25zKS4gVGhpcyBpcyBiZWNhdXNlLCBhdCB0aGUgZW5kIG9mIHRoZSBmbG93LFxyXG4gKiB0aGUgdXNlciBpcyBleHBlY3RlZCB0byBiZSBzaWduZWQgaW4gYW5kIHRoZWlyIEF1dGggc3RhdGUgcGVyc2lzdGVkIHdpdGhpbiB0aGUgYXBwLlxyXG4gKlxyXG4gKiBUbyBjb21wbGV0ZSBzaWduIGluIHdpdGggdGhlIGVtYWlsIGxpbmssIGNhbGwge0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9IHdpdGggdGhlIGVtYWlsXHJcbiAqIGFkZHJlc3MgYW5kIHRoZSBlbWFpbCBsaW5rIHN1cHBsaWVkIGluIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoJ3VzZXJAZXhhbXBsZS5jb20nLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoSW50ZXJuYWwgLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovLFxyXG4gICAgICAgIGVtYWlsXHJcbiAgICB9O1xyXG4gICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhNb2R1bGFyLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aE1vZHVsYXIsIHJlcXVlc3QpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYW4gaW5jb21pbmcgbGluayBpcyBhIHNpZ24taW4gd2l0aCBlbWFpbCBsaW5rIHN1aXRhYmxlIGZvciB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSB7XHJcbiAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgIHJldHVybiAoYWN0aW9uQ29kZVVybCA9PT0gbnVsbCB8fCBhY3Rpb25Db2RlVXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhY3Rpb25Db2RlVXJsLm9wZXJhdGlvbikgPT09IFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgc2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBubyBsaW5rIGlzIHBhc3NlZCwgdGhlIGxpbmsgaXMgaW5mZXJyZWQgZnJvbSB0aGUgY3VycmVudCBVUkwuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZCBvciBPVFAgaW4gZW1haWwgbGluayBleHBpcmVzLlxyXG4gKlxyXG4gKiBOb3RlOiBDb25maXJtIHRoZSBsaW5rIGlzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kIGZpcmViYXNlLmF1dGguQXV0aC5pc1NpZ25JbldpdGhFbWFpbExpbmsuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluaygndXNlckBleGFtcGxlLmNvbScsICd1c2VyQGV4YW1wbGUuY29tJywgZW1haWxMaW5rKTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsV2l0aExpbmsoZW1haWwsIGVtYWlsTGluayB8fCBfZ2V0Q3VycmVudFVybCgpKTtcclxuICAgIC8vIENoZWNrIGlmIHRoZSB0ZW5hbnQgSUQgaW4gdGhlIGVtYWlsIGxpbmsgbWF0Y2hlcyB0aGUgdGVuYW50IElEIG9uIEF1dGhcclxuICAgIC8vIGluc3RhbmNlLlxyXG4gICAgX2Fzc2VydChjcmVkZW50aWFsLl90ZW5hbnRJZCA9PT0gKGF1dGhNb2R1bGFyLnRlbmFudElkIHx8IG51bGwpLCBhdXRoTW9kdWxhciwgXCJ0ZW5hbnQtaWQtbWlzbWF0Y2hcIiAvKiBURU5BTlRfSURfTUlTTUFUQ0ggKi8pO1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhNb2R1bGFyLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoVXJpKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6Y3JlYXRlQXV0aFVyaVwiIC8qIENSRUFURV9BVVRIX1VSSSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogR2V0cyB0aGUgbGlzdCBvZiBwb3NzaWJsZSBzaWduIGluIG1ldGhvZHMgZm9yIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBkaWZmZXJlbnRpYXRlIG1ldGhvZHMgb2Ygc2lnbi1pbiBmb3IgdGhlIHNhbWUgcHJvdmlkZXIsIGVnLlxyXG4gKiB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdoaWNoIGhhcyAyIG1ldGhvZHMgb2Ygc2lnbi1pbixcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQgYW5kXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbChhdXRoLCBlbWFpbCkge1xyXG4gICAgLy8gY3JlYXRlQXV0aFVyaSByZXR1cm5zIGFuIGVycm9yIGlmIGNvbnRpbnVlIFVSSSBpcyBub3QgaHR0cCBvciBodHRwcy5cclxuICAgIC8vIEZvciBlbnZpcm9ubWVudHMgbGlrZSBDb3Jkb3ZhLCBDaHJvbWUgZXh0ZW5zaW9ucywgbmF0aXZlIGZyYW1ld29ya3MsIGZpbGVcclxuICAgIC8vIHN5c3RlbXMsIGV0YywgdXNlIGh0dHA6Ly9sb2NhbGhvc3QgYXMgY29udGludWUgVVJMLlxyXG4gICAgY29uc3QgY29udGludWVVcmkgPSBfaXNIdHRwT3JIdHRwcygpID8gX2dldEN1cnJlbnRVcmwoKSA6ICdodHRwOi8vbG9jYWxob3N0JztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRlbnRpZmllcjogZW1haWwsXHJcbiAgICAgICAgY29udGludWVVcmlcclxuICAgIH07XHJcbiAgICBjb25zdCB7IHNpZ25pbk1ldGhvZHMgfSA9IGF3YWl0IGNyZWF0ZUF1dGhVcmkoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCByZXF1ZXN0KTtcclxuICAgIHJldHVybiBzaWduaW5NZXRob2RzIHx8IFtdO1xyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byBhIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBpcyBjb21wbGV0ZWQgYnkgY2FsbGluZyB7QGxpbmsgYXBwbHlBY3Rpb25Db2RlfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBhd2FpdCBhcHBseUFjdGlvbkNvZGUoYXV0aCwgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kRW1haWxWZXJpZmljYXRpb24odXNlciwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlZFUklGWV9FTUFJTFwiIC8qIFZFUklGWV9FTUFJTCAqLyxcclxuICAgICAgICBpZFRva2VuXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBhd2FpdCBzZW5kRW1haWxWZXJpZmljYXRpb24kMSh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCk7XHJcbiAgICBpZiAoZW1haWwgIT09IHVzZXIuZW1haWwpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byBhIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgdXNlcidzIGVtYWlsIHdpbGwgYmUgdXBkYXRlZCB0byB0aGUgbmV3IG9uZSBhZnRlciBiZWluZyB2ZXJpZmllZC5cclxuICpcclxuICogSWYgeW91IGhhdmUgYSBjdXN0b20gZW1haWwgYWN0aW9uIGhhbmRsZXIsIHlvdSBjYW4gY29tcGxldGUgdGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGJ5IGNhbGxpbmdcclxuICoge0BsaW5rIGFwcGx5QWN0aW9uQ29kZX0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh1c2VyLCAnbmV3ZW1haWxAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBhd2FpdCBhcHBseUFjdGlvbkNvZGUoYXV0aCwgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3RW1haWwgLSBUaGUgbmV3IGVtYWlsIGFkZHJlc3MgdG8gYmUgdmVyaWZpZWQgYmVmb3JlIHVwZGF0ZS5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgbmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgbmV3RW1haWxcclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHZlcmlmeUFuZENoYW5nZUVtYWlsKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIC8vIElmIHRoZSBsb2NhbCBjb3B5IG9mIHRoZSBlbWFpbCBvbiB1c2VyIGlzIG91dGRhdGVkLCByZWxvYWQgdGhlXHJcbiAgICAgICAgLy8gdXNlci5cclxuICAgICAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGEgdXNlcidzIHByb2ZpbGUgZGF0YS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb2ZpbGUgLSBUaGUgcHJvZmlsZSdzIGBkaXNwbGF5TmFtZWAgYW5kIGBwaG90b1VSTGAgdG8gdXBkYXRlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlKHVzZXIsIHsgZGlzcGxheU5hbWUsIHBob3RvVVJMOiBwaG90b1VybCB9KSB7XHJcbiAgICBpZiAoZGlzcGxheU5hbWUgPT09IHVuZGVmaW5lZCAmJiBwaG90b1VybCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCBwcm9maWxlUmVxdWVzdCA9IHtcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHBob3RvVXJsLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VySW50ZXJuYWwsIHVwZGF0ZVByb2ZpbGUkMSh1c2VySW50ZXJuYWwuYXV0aCwgcHJvZmlsZVJlcXVlc3QpKTtcclxuICAgIHVzZXJJbnRlcm5hbC5kaXNwbGF5TmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICB1c2VySW50ZXJuYWwucGhvdG9VUkwgPSByZXNwb25zZS5waG90b1VybCB8fCBudWxsO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBwYXNzd29yZCBwcm92aWRlciBhcyB3ZWxsXHJcbiAgICBjb25zdCBwYXNzd29yZFByb3ZpZGVyID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maW5kKCh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZCA9PT0gXCJwYXNzd29yZFwiIC8qIFBBU1NXT1JEICovKTtcclxuICAgIGlmIChwYXNzd29yZFByb3ZpZGVyKSB7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5kaXNwbGF5TmFtZSA9IHVzZXJJbnRlcm5hbC5kaXNwbGF5TmFtZTtcclxuICAgICAgICBwYXNzd29yZFByb3ZpZGVyLnBob3RvVVJMID0gdXNlckludGVybmFsLnBob3RvVVJMO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiBlbWFpbCB3aWxsIGJlIHNlbnQgdG8gdGhlIG9yaWdpbmFsIGVtYWlsIGFkZHJlc3MgKGlmIGl0IHdhcyBzZXQpIHRoYXQgYWxsb3dzIHRvIHJldm9rZSB0aGVcclxuICogZW1haWwgYWRkcmVzcyBjaGFuZ2UsIGluIG9yZGVyIHRvIHByb3RlY3QgdGhlbSBmcm9tIGFjY291bnQgaGlqYWNraW5nLlxyXG4gKlxyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcclxuICogaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3RW1haWwgLSBUaGUgbmV3IGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgbmV3RW1haWwsIG51bGwpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5IHNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5IHNpZ25lZFxyXG4gKiBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkKHVzZXIsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgbnVsbCwgbmV3UGFzc3dvcmQpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUVtYWlsT3JQYXNzd29yZCh1c2VyLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IHsgYXV0aCB9ID0gdXNlcjtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGlmIChlbWFpbCkge1xyXG4gICAgICAgIHJlcXVlc3QuZW1haWwgPSBlbWFpbDtcclxuICAgIH1cclxuICAgIGlmIChwYXNzd29yZCkge1xyXG4gICAgICAgIHJlcXVlc3QucGFzc3dvcmQgPSBwYXNzd29yZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQYXJzZSB0aGUgYEFkZGl0aW9uYWxVc2VySW5mb2AgZnJvbSB0aGUgSUQgdG9rZW4gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiBfZnJvbUlkVG9rZW5SZXNwb25zZShpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBpZiAoIWlkVG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBwcm92aWRlcklkIH0gPSBpZFRva2VuUmVzcG9uc2U7XHJcbiAgICBjb25zdCBwcm9maWxlID0gaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvXHJcbiAgICAgICAgPyBKU09OLnBhcnNlKGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mbylcclxuICAgICAgICA6IHt9O1xyXG4gICAgY29uc3QgaXNOZXdVc2VyID0gaWRUb2tlblJlc3BvbnNlLmlzTmV3VXNlciB8fFxyXG4gICAgICAgIGlkVG9rZW5SZXNwb25zZS5raW5kID09PSBcImlkZW50aXR5dG9vbGtpdCNTaWdudXBOZXdVc2VyUmVzcG9uc2VcIiAvKiBTaWdudXBOZXdVc2VyICovO1xyXG4gICAgaWYgKCFwcm92aWRlcklkICYmIChpZFRva2VuUmVzcG9uc2UgPT09IG51bGwgfHwgaWRUb2tlblJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZFRva2VuUmVzcG9uc2UuaWRUb2tlbikpIHtcclxuICAgICAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IChfYiA9IChfYSA9IF9wYXJzZVRva2VuKGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpcmViYXNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbJ3NpZ25faW5fcHJvdmlkZXInXTtcclxuICAgICAgICBpZiAoc2lnbkluUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRQcm92aWRlcklkID0gc2lnbkluUHJvdmlkZXIgIT09IFwiYW5vbnltb3VzXCIgLyogQU5PTllNT1VTICovICYmXHJcbiAgICAgICAgICAgICAgICBzaWduSW5Qcm92aWRlciAhPT0gXCJjdXN0b21cIiAvKiBDVVNUT00gKi9cclxuICAgICAgICAgICAgICAgID8gc2lnbkluUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgLy8gVXNlcyBnZW5lcmljIGNsYXNzIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgbGVnYWN5IFNESy5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgZmlsdGVyZWRQcm92aWRlcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXByb3ZpZGVySWQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHN3aXRjaCAocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGNhc2UgXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUsIGlkVG9rZW5SZXNwb25zZS5zY3JlZW5OYW1lIHx8IG51bGwpO1xyXG4gICAgICAgIGNhc2UgXCJjdXN0b21cIiAvKiBDVVNUT00gKi86XHJcbiAgICAgICAgY2FzZSBcImFub255bW91c1wiIC8qIEFOT05ZTU9VUyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgbnVsbCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuaXNOZXdVc2VyID0gaXNOZXdVc2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5wcm9maWxlID0gcHJvZmlsZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUgZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSwgdXNlcm5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi8sIHByb2ZpbGUsIHR5cGVvZiAocHJvZmlsZSA9PT0gbnVsbCB8fCBwcm9maWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9maWxlLmxvZ2luKSA9PT0gJ3N0cmluZycgPyBwcm9maWxlID09PSBudWxsIHx8IHByb2ZpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2ZpbGUubG9naW4gOiBudWxsKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSwgc2NyZWVuTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi8sIHByb2ZpbGUsIHNjcmVlbk5hbWUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyBwcm92aWRlciBzcGVjaWZpYyB7QGxpbmsgQWRkaXRpb25hbFVzZXJJbmZvfSBmb3IgdGhlIGdpdmVuIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFkZGl0aW9uYWxVc2VySW5mbyh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgeyB1c2VyLCBfdG9rZW5SZXNwb25zZSB9ID0gdXNlckNyZWRlbnRpYWw7XHJcbiAgICBpZiAodXNlci5pc0Fub255bW91cyAmJiAhX3Rva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAvLyBIYW5kbGUgdGhlIHNwZWNpYWwgY2FzZSB3aGVyZSBzaWduSW5Bbm9ueW1vdXNseSgpIGdldHMgY2FsbGVkIHR3aWNlLlxyXG4gICAgICAgIC8vIE5vIG5ldHdvcmsgY2FsbCBpcyBtYWRlIHNvIHRoZXJlJ3Mgbm90aGluZyB0byBhY3R1YWxseSBmaWxsIHRoaXMgaW5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBpc05ld1VzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBwcm9maWxlOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBfZnJvbUlkVG9rZW5SZXNwb25zZShfdG9rZW5SZXNwb25zZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gTm9uLW9wdGlvbmFsIGF1dGggbWV0aG9kcy5cclxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHR5cGUgb2YgcGVyc2lzdGVuY2Ugb24gdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSBmb3IgdGhlIGN1cnJlbnRseSBzYXZlZFxyXG4gKiBgQXV0aGAgc2Vzc2lvbiBhbmQgYXBwbGllcyB0aGlzIHR5cGUgb2YgcGVyc2lzdGVuY2UgZm9yIGZ1dHVyZSBzaWduLWluIHJlcXVlc3RzLCBpbmNsdWRpbmdcclxuICogc2lnbi1pbiB3aXRoIHJlZGlyZWN0IHJlcXVlc3RzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG1ha2VzIGl0IGVhc3kgZm9yIGEgdXNlciBzaWduaW5nIGluIHRvIHNwZWNpZnkgd2hldGhlciB0aGVpciBzZXNzaW9uIHNob3VsZCBiZVxyXG4gKiByZW1lbWJlcmVkIG9yIG5vdC4gSXQgYWxzbyBtYWtlcyBpdCBlYXNpZXIgdG8gbmV2ZXIgcGVyc2lzdCB0aGUgYEF1dGhgIHN0YXRlIGZvciBhcHBsaWNhdGlvbnNcclxuICogdGhhdCBhcmUgc2hhcmVkIGJ5IG90aGVyIHVzZXJzIG9yIGhhdmUgc2Vuc2l0aXZlIGRhdGEuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogc2V0UGVyc2lzdGVuY2UoYXV0aCwgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZSAtIFRoZSB7QGxpbmsgUGVyc2lzdGVuY2V9IHRvIHVzZS5cclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBwZXJzaXN0ZW5jZSBjaGFuZ2UgaGFzIGNvbXBsZXRlZFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBwZXJzaXN0ZW5jZSkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgYW4gb2JzZXJ2ZXIgZm9yIGNoYW5nZXMgdG8gdGhlIHNpZ25lZC1pbiB1c2VyJ3MgSUQgdG9rZW4sIHdoaWNoIGluY2x1ZGVzIHNpZ24taW4sXHJcbiAqIHNpZ24tb3V0LCBhbmQgdG9rZW4gcmVmcmVzaCBldmVudHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGVycm9yLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25JZFRva2VuQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhbiBvYnNlcnZlciBmb3IgY2hhbmdlcyB0byB0aGUgdXNlcidzIHNpZ24taW4gc3RhdGUuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGtlZXAgdGhlIG9sZCBiZWhhdmlvciwgc2VlIHtAbGluayBvbklkVG9rZW5DaGFuZ2VkfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gY2hhbmdlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gZXJyb3IuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkub25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgY3VycmVudCBsYW5ndWFnZSB0byB0aGUgZGVmYXVsdCBkZXZpY2UvYnJvd3NlciBwcmVmZXJlbmNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVzZURldmljZUxhbmd1YWdlKGF1dGgpIHtcclxuICAgIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51c2VEZXZpY2VMYW5ndWFnZSgpO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzZXRzIHRoZSBwcm92aWRlZCB1c2VyIGFzIHtAbGluayBBdXRoLmN1cnJlbnRVc2VyfSBvbiB0aGVcclxuICoge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBIG5ldyBpbnN0YW5jZSBjb3B5IG9mIHRoZSB1c2VyIHByb3ZpZGVkIHdpbGwgYmUgbWFkZSBhbmQgc2V0IGFzIGN1cnJlbnRVc2VyLlxyXG4gKlxyXG4gKiBUaGlzIHdpbGwgdHJpZ2dlciB7QGxpbmsgb25BdXRoU3RhdGVDaGFuZ2VkfSBhbmQge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9IGxpc3RlbmVyc1xyXG4gKiBsaWtlIG90aGVyIHNpZ24gaW4gbWV0aG9kcy5cclxuICpcclxuICogVGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSB1c2VyIHRvIGJlIHVwZGF0ZWQgYmVsb25ncyB0byBhIGRpZmZlcmVudCBGaXJlYmFzZVxyXG4gKiBwcm9qZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIG5ldyB7QGxpbmsgVXNlcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRVc2VyKGF1dGgsIHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkudXBkYXRlQ3VycmVudFVzZXIodXNlcik7XHJcbn1cclxuLyoqXHJcbiAqIFNpZ25zIG91dCB0aGUgY3VycmVudCB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25PdXQoYXV0aCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zaWduT3V0KCk7XHJcbn1cclxuLyoqXHJcbiAqIERlbGV0ZXMgYW5kIHNpZ25zIG91dCB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHktc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHlcclxuICogc2lnbmVkIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcih1c2VyKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmRlbGV0ZSgpO1xyXG59XG5cbmNsYXNzIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IodHlwZSwgY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbUlkdG9rZW4oaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbChcImVucm9sbFwiIC8qIEVOUk9MTCAqLywgaWRUb2tlbik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbChcInNpZ25pblwiIC8qIFNJR05fSU4gKi8sIG1mYVBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLnR5cGUgPT09IFwiZW5yb2xsXCIgLyogRU5ST0xMICovXHJcbiAgICAgICAgICAgID8gJ2lkVG9rZW4nXHJcbiAgICAgICAgICAgIDogJ3BlbmRpbmdDcmVkZW50aWFsJztcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtdWx0aUZhY3RvclNlc3Npb246IHtcclxuICAgICAgICAgICAgICAgIFtrZXldOiB0aGlzLmNyZWRlbnRpYWxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbUpTT04ob2JqKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikge1xyXG4gICAgICAgICAgICBpZiAoKF9hID0gb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKG9iai5tdWx0aUZhY3RvclNlc3Npb24ucGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChfYiA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4ob2JqLm11bHRpRmFjdG9yU2Vzc2lvbi5pZFRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvclJlc29sdmVySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uLCBoaW50cywgc2lnbkluUmVzb2x2ZXIpIHtcclxuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xyXG4gICAgICAgIHRoaXMuaGludHMgPSBoaW50cztcclxuICAgICAgICB0aGlzLnNpZ25JblJlc29sdmVyID0gc2lnbkluUmVzb2x2ZXI7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FcnJvcihhdXRoRXh0ZXJuLCBlcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XHJcbiAgICAgICAgY29uc3QgaGludHMgPSAoZXJyb3Iuc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICBfYXNzZXJ0KGVycm9yLnNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwoZXJyb3Iuc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwoc2Vzc2lvbiwgaGludHMsIGFzeW5jIChhc3NlcnRpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWZhUmVzcG9uc2UgPSBhd2FpdCBhc3NlcnRpb24uX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbik7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIG91dCB0aGUgdW5uZWVkZWQgZmllbGRzIGZyb20gdGhlIG9sZCBsb2dpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBkZWxldGUgZXJyb3Iuc2VydmVyUmVzcG9uc2UubWZhSW5mbztcclxuICAgICAgICAgICAgZGVsZXRlIGVycm9yLnNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAvLyBVc2UgaW4gdGhlIG5ldyB0b2tlbiAmIHJlZnJlc2ggdG9rZW4gaW4gdGhlIG9sZCByZXNwb25zZVxyXG4gICAgICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGVycm9yLnNlcnZlclJlc3BvbnNlKSwgeyBpZFRva2VuOiBtZmFSZXNwb25zZS5pZFRva2VuLCByZWZyZXNoVG9rZW46IG1mYVJlc3BvbnNlLnJlZnJlc2hUb2tlbiB9KTtcclxuICAgICAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIGNvbGxhcHNlIHRoaXMgc3dpdGNoIHN0YXRlbWVudCBpbnRvIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uIGFuZCBoYXZlIGl0IHN1cHBvcnQgdGhlIFNJR05fSU4gY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLm9wZXJhdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2VydChlcnJvci51c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbihlcnJvci51c2VyLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZXNvbHZlU2lnbkluKGFzc2VydGlvbkV4dGVybikge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5SZXNvbHZlcihhc3NlcnRpb24pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHtAbGluayBNdWx0aUZhY3RvclJlc29sdmVyfSBzdWl0YWJsZSBmb3IgY29tcGxldGlvbiBvZiBhXHJcbiAqIG11bHRpLWZhY3RvciBmbG93LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JFcnJvcn0gcmFpc2VkIGR1cmluZyBhIHNpZ24taW4sIG9yXHJcbiAqIHJlYXV0aGVudGljYXRpb24gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGVycm9yKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IGVycm9ySW50ZXJuYWwgPSBlcnJvcjtcclxuICAgIF9hc3NlcnQoZXJyb3Iub3BlcmF0aW9uVHlwZSwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KChfYSA9IGVycm9ySW50ZXJuYWwuc2VydmVyUmVzcG9uc2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTXVsdGlGYWN0b3JSZXNvbHZlckltcGwuX2Zyb21FcnJvcihhdXRoTW9kdWxhciwgZXJyb3JJbnRlcm5hbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfRU5ST0xMTUVOVCAqLywgT2JqZWN0LmFzc2lnbih7IHRlbmFudElkOiBhdXRoLnRlbmFudElkIH0sIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBPYmplY3QuYXNzaWduKHsgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQgfSwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIHdpdGhkcmF3TWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDp3aXRoZHJhd1wiIC8qIFdJVEhEUkFXX01GQSAqLywgT2JqZWN0LmFzc2lnbih7IHRlbmFudElkOiBhdXRoLnRlbmFudElkIH0sIHJlcXVlc3QpKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gW107XHJcbiAgICAgICAgdXNlci5fb25SZWxvYWQodXNlckluZm8gPT4ge1xyXG4gICAgICAgICAgICBpZiAodXNlckluZm8ubWZhSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB1c2VySW5mby5tZmFJbmZvLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZSh1c2VyLmF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tVXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclVzZXJJbXBsKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4oYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBlbnJvbGwoYXNzZXJ0aW9uRXh0ZXJuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gKGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigpKTtcclxuICAgICAgICBjb25zdCBmaW5hbGl6ZU1mYVJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcy51c2VyLCBhc3NlcnRpb24uX3Byb2Nlc3ModGhpcy51c2VyLmF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKSk7XHJcbiAgICAgICAgLy8gTmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZCBhZnRlciBlbnJvbGxtZW50IG9mIHRoZSBuZXcgc2Vjb25kIGZhY3RvcnMuXHJcbiAgICAgICAgLy8gVGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQgb24gdGhlIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShmaW5hbGl6ZU1mYVJlc3BvbnNlKTtcclxuICAgICAgICAvLyBUaGUgdXNlciBuZWVkcyB0byBiZSByZWxvYWRlZCB0byBnZXQgdGhlIG5ldyBtdWx0aS1mYWN0b3IgaW5mb3JtYXRpb25cclxuICAgICAgICAvLyBmcm9tIHNlcnZlci4gVVNFUl9SRUxPQURFRCBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBhbmQgYGVucm9sbGVkRmFjdG9yc2BcclxuICAgICAgICAvLyB3aWxsIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVuZW5yb2xsKGluZm9PclVpZCkge1xyXG4gICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9IHR5cGVvZiBpbmZvT3JVaWQgPT09ICdzdHJpbmcnID8gaW5mb09yVWlkIDogaW5mb09yVWlkLnVpZDtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIHdpdGhkcmF3TWZhKHRoaXMudXNlci5hdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNlY29uZCBmYWN0b3IgZnJvbSB0aGUgdXNlcidzIGxpc3QuXHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB0aGlzLmVucm9sbGVkRmFjdG9ycy5maWx0ZXIoKHsgdWlkIH0pID0+IHVpZCAhPT0gbWZhRW5yb2xsbWVudElkKTtcclxuICAgICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYmFja2VuZCBkZWNpZGVkIHRvIHJldm9rZSB0aGUgdXNlcidzIHNlc3Npb24sXHJcbiAgICAgICAgLy8gdGhlIHRva2VuUmVzcG9uc2UgbWF5IGJlIGVtcHR5LiBJZiB0aGUgdG9rZW5zIHdlcmUgbm90IHVwZGF0ZWQgKGFuZCB0aGV5XHJcbiAgICAgICAgLy8gYXJlIG5vdyBpbnZhbGlkKSwgcmVsb2FkaW5nIHRoZSB1c2VyIHdpbGwgZGlzY292ZXIgdGhpcyBhbmQgaW52YWxpZGF0ZVxyXG4gICAgICAgIC8vIHRoZSB1c2VyJ3Mgc3RhdGUgYWNjb3JkaW5nbHkuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb25zdCBtdWx0aUZhY3RvclVzZXJDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbi8qKlxyXG4gKiBUaGUge0BsaW5rIE11bHRpRmFjdG9yVXNlcn0gY29ycmVzcG9uZGluZyB0byB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VkIHRvIGFjY2VzcyBhbGwgbXVsdGktZmFjdG9yIHByb3BlcnRpZXMgYW5kIG9wZXJhdGlvbnMgcmVsYXRlZCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbXVsdGlGYWN0b3IodXNlcikge1xyXG4gICAgY29uc3QgdXNlck1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBpZiAoIW11bHRpRmFjdG9yVXNlckNhY2hlLmhhcyh1c2VyTW9kdWxhcikpIHtcclxuICAgICAgICBtdWx0aUZhY3RvclVzZXJDYWNoZS5zZXQodXNlck1vZHVsYXIsIE11bHRpRmFjdG9yVXNlckltcGwuX2Zyb21Vc2VyKHVzZXJNb2R1bGFyKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXVsdGlGYWN0b3JVc2VyQ2FjaGUuZ2V0KHVzZXJNb2R1bGFyKTtcclxufVxuXG5jb25zdCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkgPSAnX19zYWsnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGVyZSBhcmUgdHdvIGRpZmZlcmVudCBicm93c2VyIHBlcnNpc3RlbmNlIHR5cGVzOiBsb2NhbCBhbmQgc2Vzc2lvbi5cclxuLy8gQm90aCBoYXZlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uIGJ1dCB1c2UgYSBkaWZmZXJlbnQgdW5kZXJseWluZyBzdG9yYWdlXHJcbi8vIG9iamVjdC5cclxuY2xhc3MgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Ioc3RvcmFnZSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuICAgIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gX2lzU2FmYXJpKHVhKSB8fCBfaXNJT1ModWEpO1xyXG59XHJcbi8vIFRoZSBwb2xsaW5nIHBlcmlvZCBpbiBjYXNlIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZFxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyQxID0gMTAwMDtcclxuLy8gVGhlIElFIDEwIGxvY2FsU3RvcmFnZSBjcm9zcyB0YWIgc3luY2hyb25pemF0aW9uIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG5jb25zdCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSA9IDEwO1xyXG5jbGFzcyBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHdpbmRvdy5sb2NhbFN0b3JhZ2UsIFwiTE9DQUxcIiAvKiBMT0NBTCAqLyk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIFNhZmFyaSBvciBpT1MgYnJvd3NlciBhbmQgZW1iZWRkZWQgaW4gYW4gaWZyYW1lLlxyXG4gICAgICAgIHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkID0gX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlKCkgJiYgX2lzSWZyYW1lKCk7XHJcbiAgICAgICAgLy8gV2hldGhlciB0byB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGRlcGVuZGluZyBvbiB3aW5kb3cgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5mYWxsYmFja1RvUG9sbGluZyA9IF9pc01vYmlsZUJyb3dzZXIoKTtcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IHRoaXMub25TdG9yYWdlRXZlbnQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIGZvckFsbENoYW5nZWRLZXlzKGNiKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgYWxsIGtleXMgd2l0aCBsaXN0ZW5lcnMgb24gdGhlbS5cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgLy8gR2V0IHZhbHVlIGZyb20gbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2FsIG1hcCB2YWx1ZSBkb2VzIG5vdCBtYXRjaCwgdHJpZ2dlciBsaXN0ZW5lciB3aXRoIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIERpZmZlcmVudGlhdGUgdGhpcyBzaW11bGF0ZWQgZXZlbnQgZnJvbSB0aGUgcmVhbCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjYihrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gS2V5IHdvdWxkIGJlIG51bGwgaW4gc29tZSBzaXR1YXRpb25zLCBsaWtlIHdoZW4gbG9jYWxTdG9yYWdlIGlzIGNsZWFyZWRcclxuICAgICAgICBpZiAoIWV2ZW50LmtleSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIF9vbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5rZXk7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIG1lY2hhbmlzbSBob3cgdGhpcyBldmVudCB3YXMgZGV0ZWN0ZWQuXHJcbiAgICAgICAgLy8gVGhlIGZpcnN0IGV2ZW50IHdpbGwgZGljdGF0ZSB0aGUgbWVjaGFuaXNtIHRvIGJlIHVzZWQuXHJcbiAgICAgICAgaWYgKHBvbGwpIHtcclxuICAgICAgICAgICAgLy8gRW52aXJvbm1lbnQgZGV0ZWN0cyBzdG9yYWdlIGNoYW5nZXMgdmlhIHBvbGxpbmcuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyIHRvIHByZXZlbnQgcG9zc2libGUgZXZlbnQgZHVwbGljYXRpb24uXHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgcG9sbGluZyBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNhZmFyaSBlbWJlZGRlZCBpZnJhbWUuIFN0b3JhZ2UgZXZlbnQgd2lsbCB0cmlnZ2VyIHdpdGggdGhlIGRlbHRhXHJcbiAgICAgICAgLy8gY2hhbmdlcyBidXQgbm8gY2hhbmdlcyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGlmcmFtZSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgaWYgKHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IGlmcmFtZSBwYWdlIHZhbHVlLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIC8vIFZhbHVlIG5vdCBzeW5jaHJvbml6ZWQsIHN5bmNocm9uaXplIG1hbnVhbGx5LlxyXG4gICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZSBjaGFuZ2VkIGZyb20gY3VycmVudCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWUgZGVsZXRlZC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubG9jYWxDYWNoZVtrZXldID09PSBldmVudC5uZXdWYWx1ZSAmJiAhcG9sbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBkZXRlY3RlZCBhbmQgcHJvY2Vzc2VkLCBkbyBub3QgdHJpZ2dlciBsaXN0ZW5lcnMgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHJpZ2dlckxpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gS2VlcCBsb2NhbCBtYXAgdXAgdG8gZGF0ZSBpbiBjYXNlIHN0b3JhZ2UgZXZlbnQgaXMgdHJpZ2dlcmVkIGJlZm9yZVxyXG4gICAgICAgICAgICAvLyBwb2xsLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghcG9sbCAmJiB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gc3RvcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlYWwgc3RvcmFnZSBldmVudCB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGRldGVjdGVkLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyB0byB0cmlnZ2VyIGluIHNvbWUgSUUgYnJvd3NlcnMgZm9yIHNvbWUgcmVhc29uLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgc3RvcmVkVmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGlmIChfaXNJRTEwKCkgJiZcclxuICAgICAgICAgICAgc3RvcmVkVmFsdWUgIT09IGV2ZW50Lm5ld1ZhbHVlICYmXHJcbiAgICAgICAgICAgIGV2ZW50Lm5ld1ZhbHVlICE9PSBldmVudC5vbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBJRSAxMCBoYXMgdGhpcyB3ZWlyZCBidWcgd2hlcmUgYSBzdG9yYWdlIGV2ZW50IHdvdWxkIHRyaWdnZXIgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gY29ycmVjdCBrZXksIG9sZFZhbHVlIGFuZCBuZXdWYWx1ZSBidXQgbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSBkb2VzXHJcbiAgICAgICAgICAgIC8vIG5vdCB5aWVsZCB0aGUgdXBkYXRlZCB2YWx1ZSB1bnRpbCBhIGZldyBtaWxsaXNlY29uZHMuIFRoaXMgZW5zdXJlc1xyXG4gICAgICAgICAgICAvLyB0aGlzIHJlY292ZXJzIGZyb20gdGhhdCBzaXR1YXRpb24uXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodHJpZ2dlckxpc3RlbmVycywgSUUxMF9MT0NBTF9TVE9SQUdFX1NZTkNfREVMQVkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlckxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydFBvbGxpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3JhZ2VFdmVudChuZXcgU3RvcmFnZUV2ZW50KCdzdG9yYWdlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfSksIFxyXG4gICAgICAgICAgICAgICAgLyogcG9sbCAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgX1BPTExJTkdfSU5URVJWQUxfTVMkMSk7XHJcbiAgICB9XHJcbiAgICBzdG9wUG9sbGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhdHRhY2hMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZGV0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gV2hldGhlciBicm93c2VyIGNhbiBkZXRlY3Qgc3RvcmFnZSBldmVudCB3aGVuIGl0IGhhZCBhbHJlYWR5IGJlZW4gcHVzaGVkIHRvIHRoZSBiYWNrZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyBUaGlzIG1heSBoYXBwZW4gaW4gc29tZSBtb2JpbGUgYnJvd3NlcnMuIEEgbG9jYWxTdG9yYWdlIGNoYW5nZSBpbiB0aGUgZm9yZWdyb3VuZCB3aW5kb3dcclxuICAgICAgICAgICAgLy8gd2lsbCBub3QgYmUgZGV0ZWN0ZWQgaW4gdGhlIGJhY2tncm91bmQgd2luZG93IHZpYSB0aGUgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgLy8gVGhpcyB3YXMgZGV0ZWN0ZWQgaW4gaU9TIDcueCBtb2JpbGUgYnJvd3NlcnNcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFsbGJhY2tUb1BvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gVXBkYXRlIGxvY2FsIGNhY2hlIG9uIGJhc2Ugb3BlcmF0aW9uczpcclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgc3VwZXIuX2dldChrZXkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuX3JlbW92ZShrZXkpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgIH1cclxufVxyXG5Ccm93c2VyTG9jYWxQZXJzaXN0ZW5jZS50eXBlID0gJ0xPQ0FMJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSBgTE9DQUxgIHVzaW5nIGBsb2NhbFN0b3JhZ2VgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSA9IEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIod2luZG93LnNlc3Npb25TdG9yYWdlLCBcIlNFU1NJT05cIiAvKiBTRVNTSU9OICovKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZS50eXBlID0gJ1NFU1NJT04nO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiBgU0VTU0lPTmAgdXNpbmcgYHNlc3Npb25TdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSA9IEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTaGltIGZvciBQcm9taXNlLmFsbFNldHRsZWQsIG5vdGUgdGhlIHNsaWdodGx5IGRpZmZlcmVudCBmb3JtYXQgb2YgYGZ1bGZpbGxlZGAgdnMgYHN0YXR1c2AuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyAtIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWxsU2V0dGxlZChwcm9taXNlcykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChhc3luYyAocHJvbWlzZSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcHJvbWlzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChyZWFzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFzb25cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBjbGFzcyBmb3IgcmVjZWl2aW5nIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgUmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc01hcCA9IHt9O1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbiBhbiBpbnN0YW5jZSBvZiBhIFJlY2VpdmVyIGZvciBhIGdpdmVuIGV2ZW50IHRhcmdldCwgaWYgbm9uZSBleGlzdHMgaXQgd2lsbCBiZSBjcmVhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFRhcmdldCAtIEFuIGV2ZW50IHRhcmdldCAoc3VjaCBhcyB3aW5kb3cgb3Igc2VsZikgdGhyb3VnaCB3aGljaCB0aGUgdW5kZXJseWluZ1xyXG4gICAgICogbWVzc2FnZXMgd2lsbCBiZSByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9nZXRJbnN0YW5jZShldmVudFRhcmdldCkge1xyXG4gICAgICAgIC8vIFRoZSByZXN1bHRzIGFyZSBzdG9yZWQgaW4gYW4gYXJyYXkgc2luY2Ugb2JqZWN0cyBjYW4ndCBiZSBrZXlzIGZvciBvdGhlclxyXG4gICAgICAgIC8vIG9iamVjdHMuIEluIGFkZGl0aW9uLCBzZXR0aW5nIGEgdW5pcXVlIHByb3BlcnR5IG9uIGFuIGV2ZW50IHRhcmdldCBhcyBhXHJcbiAgICAgICAgLy8gaGFzaCBtYXAga2V5IG1heSBub3QgYmUgYWxsb3dlZCBkdWUgdG8gQ09SUyByZXN0cmljdGlvbnMuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMucmVjZWl2ZXJzLmZpbmQocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdJbnN0YW5jZSA9IG5ldyBSZWNlaXZlcihldmVudFRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlcnMucHVzaChuZXdJbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VGFyZ2V0ID09PSBldmVudFRhcmdldDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmFucyBvdXQgYSBNZXNzYWdlRXZlbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGxpc3RlbmVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogU2VuZHMgYW4ge0BsaW5rIFN0YXR1cy5BQ0t9IHVwb24gcmVjZWlwdCBhbmQgYSB7QGxpbmsgU3RhdHVzLkRPTkV9IG9uY2UgYWxsIGhhbmRsZXJzIGhhdmVcclxuICAgICAqIGZpbmlzaGVkIHByb2Nlc3NpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIE1lc3NhZ2VFdmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBldmVudElkLCBldmVudFR5cGUsIGRhdGEgfSA9IG1lc3NhZ2VFdmVudC5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIGlmICghKGhhbmRsZXJzID09PSBudWxsIHx8IGhhbmRsZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBoYW5kbGVycy5zaXplKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJhY2tcIiAvKiBBQ0sgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbShoYW5kbGVycykubWFwKGFzeW5jIChoYW5kbGVyKSA9PiBoYW5kbGVyKG1lc3NhZ2VFdmVudC5vcmlnaW4sIGRhdGEpKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9hbGxTZXR0bGVkKHByb21pc2VzKTtcclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiZG9uZVwiIC8qIERPTkUgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgcmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIGV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9zdWJzY3JpYmUoZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5hZGQoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgYW4gZXZlbnQgaGFuZGxlciBmcm9tIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byB1bnN1YnNjcmliZSBmcm9tLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIE9wdGlub2FsIGV2ZW50IGhhbmRsZXIsIGlmIG5vbmUgcHJvdmlkZWQsIHVuc3Vic2NyaWJlIGFsbCBoYW5kbGVycyBvbiB0aGlzIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX3Vuc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSAmJiBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLmRlbGV0ZShldmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWV2ZW50SGFuZGxlciB8fCB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5SZWNlaXZlci5yZWNlaXZlcnMgPSBbXTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dlbmVyYXRlRXZlbnRJZChwcmVmaXggPSAnJywgZGlnaXRzID0gMTApIHtcclxuICAgIGxldCByYW5kb20gPSAnJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzOyBpKyspIHtcclxuICAgICAgICByYW5kb20gKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHJhbmRvbTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGFuZCB3YWl0aW5nIGZvciBhIGNvbXBsZXRpb24gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBTZW5kZXIge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgdGhlIGhhbmRsZXIgYW5kIHJlbW92ZSBpdCBmcm9tIG91ciB0cmFja2luZyBTZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1bnN1YnNjcmliZS5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIGlmIChoYW5kbGVyLm1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgaGFuZGxlci5tZXNzYWdlQ2hhbm5lbC5wb3J0MS5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIFJlY2VpdmVyIGxvY2F0ZWQgYXQge0BsaW5rIHRhcmdldH0uXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFdlJ2xsIGZpcnN0IHdhaXQgYSBiaXQgZm9yIGFuIEFDSyAsIGlmIHdlIGdldCBvbmUgd2Ugd2lsbCB3YWl0IHNpZ25pZmljYW50bHkgbG9uZ2VyIHVudGlsIHRoZVxyXG4gICAgICogcmVjZWl2ZXIgaGFzIGhhZCBhIGNoYW5jZSB0byBmdWxseSBwcm9jZXNzIHRoZSBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gVHlwZSBvZiBldmVudCB0byBzZW5kLlxyXG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgcGF5bG9hZCBvZiB0aGUgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dCAtIFRpbWVvdXQgZm9yIHdhaXRpbmcgb24gYW4gQUNLIGZyb20gdGhlIHJlY2VpdmVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNldHRsZWQgcHJvbWlzZXMgZnJvbSBhbGwgdGhlIGhhbmRsZXJzIHRoYXQgd2VyZSBsaXN0ZW5pbmcgb24gdGhlIHJlY2VpdmVyLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2VuZChldmVudFR5cGUsIGRhdGEsIHRpbWVvdXQgPSA1MCAvKiBBQ0sgKi8pIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ2hhbm5lbCA9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgTWVzc2FnZUNoYW5uZWwoKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb25uZWN0aW9uX3VuYXZhaWxhYmxlXCIgLyogQ09OTkVDVElPTl9VTkFWQUlMQUJMRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIGxldCBjb21wbGV0aW9uVGltZXI7XHJcbiAgICAgICAgbGV0IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoJycsIDIwKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwucG9ydDEuc3RhcnQoKTtcclxuICAgICAgICAgICAgY29uc3QgYWNrVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZF9ldmVudFwiIC8qIFVOU1VQUE9SVEVEX0VWRU5UICovKSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBoYW5kbGVyID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICBvbk1lc3NhZ2UoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUV2ZW50LmRhdGEuZXZlbnRJZCAhPT0gZXZlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZUV2ZW50LmRhdGEuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY2tcIiAvKiBBQ0sgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVjZWl2ZXIgc2hvdWxkIEFDSyBmaXJzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDAgLyogQ09NUExFVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIiAvKiBET05FICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgcmVjZWl2ZXIncyBoYW5kbGVycyBhcmUgZmluaXNoZWQgd2Ugd2lsbCBnZXQgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZUV2ZW50LmRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaW52YWxpZF9yZXNwb25zZVwiIC8qIElOVkFMSURfUkVTUE9OU0UgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hZGQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICAgIH0sIFttZXNzYWdlQ2hhbm5lbC5wb3J0Ml0pO1xyXG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNZXNzYWdlSGFuZGxlcihoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBMYXp5IGFjY2Vzc29yIGZvciB3aW5kb3csIHNpbmNlIHRoZSBjb21wYXQgbGF5ZXIgd29uJ3QgdHJlZSBzaGFrZSB0aGlzIG91dCxcclxuICogd2UgbmVlZCB0byBtYWtlIHN1cmUgbm90IHRvIG1lc3Mgd2l0aCB3aW5kb3cgdW5sZXNzIHdlIGhhdmUgdG9cclxuICovXHJcbmZ1bmN0aW9uIF93aW5kb3coKSB7XHJcbiAgICByZXR1cm4gd2luZG93O1xyXG59XHJcbmZ1bmN0aW9uIF9zZXRXaW5kb3dMb2NhdGlvbih1cmwpIHtcclxuICAgIF93aW5kb3coKS5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNXb3JrZXIoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBfd2luZG93KClbJ1dvcmtlckdsb2JhbFNjb3BlJ10gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIF93aW5kb3coKVsnaW1wb3J0U2NyaXB0cyddID09PSAnZnVuY3Rpb24nKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QWN0aXZlU2VydmljZVdvcmtlcigpIHtcclxuICAgIGlmICghKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLmFjdGl2ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAoKF9hID0gbmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250cm9sbGVyKSB8fCBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRXb3JrZXJHbG9iYWxTY29wZSgpIHtcclxuICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHNlbGYgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2VMb2NhbFN0b3JhZ2VEYic7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBEQl9PQkpFQ1RTVE9SRV9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlJztcclxuY29uc3QgREJfREFUQV9LRVlQQVRIID0gJ2ZiYXNlX2tleSc7XHJcbi8qKlxyXG4gKiBQcm9taXNlIHdyYXBwZXIgZm9yIElEQlJlcXVlc3RcclxuICpcclxuICogVW5mb3J0dW5hdGVseSB3ZSBjYW4ndCBjbGVhbmx5IGV4dGVuZCBQcm9taXNlPFQ+IHNpbmNlIHByb21pc2VzIGFyZSBub3QgY2FsbGFibGUgaW4gRVM2XHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBEQlByb21pc2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVxdWVzdCkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICB9XHJcbiAgICB0b1Byb21pc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMucmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldE9iamVjdFN0b3JlKGRiLCBpc1JlYWRXcml0ZSkge1xyXG4gICAgcmV0dXJuIGRiXHJcbiAgICAgICAgLnRyYW5zYWN0aW9uKFtEQl9PQkpFQ1RTVE9SRV9OQU1FXSwgaXNSZWFkV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpXHJcbiAgICAgICAgLm9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUpO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVEYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfTkFNRSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5mdW5jdGlvbiBfb3BlbkRhdGFiYXNlKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoREJfT0JKRUNUU1RPUkVfTkFNRSwgeyBrZXlQYXRoOiBEQl9EQVRBX0tFWVBBVEggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgLy8gU3RyYW5nZSBidWcgdGhhdCBvY2N1cnMgaW4gRmlyZWZveCB3aGVuIG11bHRpcGxlIHRhYnMgYXJlIG9wZW5lZCBhdCB0aGVcclxuICAgICAgICAgICAgLy8gc2FtZSB0aW1lLiBUaGUgb25seSB3YXkgdG8gcmVjb3ZlciBzZWVtcyB0byBiZSBkZWxldGluZyB0aGUgZGF0YWJhc2VcclxuICAgICAgICAgICAgLy8gYW5kIHJlLWluaXRpYWxpemluZyBpdC5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjM0XHJcbiAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhEQl9PQkpFQ1RTVE9SRV9OQU1FKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjbG9zZSB0aGUgZGF0YWJhc2Ugb3IgZWxzZSB5b3UgZ2V0IGEgYGJsb2NrZWRgIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgX2RlbGV0ZURhdGFiYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IF9vcGVuRGF0YWJhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5wdXQoe1xyXG4gICAgICAgIFtEQl9EQVRBX0tFWVBBVEhdOiBrZXksXHJcbiAgICAgICAgdmFsdWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0T2JqZWN0KGRiLCBrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldChrZXkpO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbiAgICByZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGRhdGEudmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gX2RlbGV0ZU9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIHRydWUpLmRlbGV0ZShrZXkpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuY29uc3QgX1BPTExJTkdfSU5URVJWQUxfTVMgPSA4MDA7XHJcbmNvbnN0IF9UUkFOU0FDVElPTl9SRVRSWV9DT1VOVCA9IDM7XHJcbmNsYXNzIEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJMT0NBTFwiIC8qIExPQ0FMICovO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzID0gMDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIEZpcmUgJiBmb3JnZXQgdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBhcyBpdCBtYXkgbmV2ZXIgcmVzb2x2ZVxyXG4gICAgICAgIHRoaXMuX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSA9XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKS50aGVuKCgpID0+IHsgfSwgKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuRGIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFJldHJpZXMob3ApIHtcclxuICAgICAgICBsZXQgbnVtQXR0ZW1wdHMgPSAwO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuX29wZW5EYigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9wKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bUF0dGVtcHRzKysgPiBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyBleHBvbmVudGlhbCBiYWNrb2ZmXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluZGV4ZWREQiBldmVudHMgZG8gbm90IHByb3BhZ2F0ZSBmcm9tIHRoZSBtYWluIHdpbmRvdyB0byB0aGUgd29ya2VyIGNvbnRleHQuICBXZSByZWx5IG9uIGFcclxuICAgICAqIHBvc3RNZXNzYWdlIGludGVyZmFjZSB0byBzZW5kIHRoZXNlIGV2ZW50cyB0byB0aGUgd29ya2VyIG91cnNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpID8gdGhpcy5pbml0aWFsaXplUmVjZWl2ZXIoKSA6IHRoaXMuaW5pdGlhbGl6ZVNlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgd29ya2VyIHdlIHNob3VsZCBsaXN0ZW4gdG8gZXZlbnRzIGZyb20gdGhlIG1haW4gd2luZG93LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplUmVjZWl2ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IFJlY2VpdmVyLl9nZXRJbnN0YW5jZShfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCBmcm9tIHBlcnNpc3RlbmNlIGlmIHdlIHJlY2VpdmUgYSBLZXlDaGFuZ2VkIG1lc3NhZ2UuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCBhc3luYyAoX29yaWdpbiwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gYXdhaXQgdGhpcy5fcG9sbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAga2V5UHJvY2Vzc2VkOiBrZXlzLmluY2x1ZGVzKGRhdGEua2V5KVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExldCB0aGUgc2VuZGVyIGtub3cgdGhhdCB3ZSBhcmUgbGlzdGVuaW5nIHNvIHRoZXkgZ2l2ZSB1cyBtb3JlIHRpbWVvdXQuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwicGluZ1wiIC8qIFBJTkcgKi8sIGFzeW5jIChfb3JpZ2luLCBfZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1wia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIG1haW4gd2luZG93LCB3ZSBzaG91bGQgbGV0IHRoZSB3b3JrZXIga25vdyB3aGVuIGtleXMgY2hhbmdlIChzZXQgYW5kIHJlbW92ZSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmljZVdvcmtlckNvbnRhaW5lci9yZWFkeSB8IFNlcnZpY2VXb3JrZXJDb250YWluZXIucmVhZHl9XHJcbiAgICAgKiBtYXkgbm90IHJlc29sdmUuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZW5kZXIoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUncyBhbiBhY3RpdmUgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gYXdhaXQgX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbmV3IFNlbmRlcih0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpO1xyXG4gICAgICAgIC8vIFBpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIHRvIGNoZWNrIHdoYXQgZXZlbnRzIHRoZXkgY2FuIGhhbmRsZS5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJwaW5nXCIgLyogUElORyAqLywge30sIDgwMCAvKiBMT05HX0FDSyAqLyk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSByZXN1bHRzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnVsZmlsbGVkKSAmJlxyXG4gICAgICAgICAgICAoKF9iID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlLmluY2x1ZGVzKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTGV0IHRoZSB3b3JrZXIga25vdyBhYm91dCBhIGNoYW5nZWQga2V5LCB0aGUgZXhhY3Qga2V5IGRvZXNuJ3QgdGVjaG5pY2FsbHkgbWF0dGVyIHNpbmNlIHRoZVxyXG4gICAgICogd29ya2VyIHdpbGwganVzdCB0cmlnZ2VyIGEgZnVsbCBzeW5jIGFueXdheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIG5vdywgd2Ugb25seSBzdXBwb3J0IG9uZSBzZXJ2aWNlIHdvcmtlciBwZXIgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ga2V5IC0gU3RvcmFnZSBrZXkgd2hpY2ggY2hhbmdlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbm90aWZ5U2VydmljZVdvcmtlcihrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgfHxcclxuICAgICAgICAgICAgX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkgIT09IHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCB7IGtleSB9LCBcclxuICAgICAgICAgICAgLy8gVXNlIGxvbmcgdGltZW91dCBpZiByZWNlaXZlciBoYXMgcHJldmlvdXNseSByZXNwb25kZWQgdG8gYSBwaW5nIGZyb20gdXMuXHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICA/IDgwMCAvKiBMT05HX0FDSyAqL1xyXG4gICAgICAgICAgICAgICAgOiA1MCAvKiBBQ0sgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QgZWZmb3J0IGFwcHJvYWNoLiBJZ25vcmUgZXJyb3JzLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIWluZGV4ZWREQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCBfcHV0T2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9kZWxldGVPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUGVuZGluZ1dyaXRlKHdyaXRlKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzKys7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcy0tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gKGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gZ2V0T2JqZWN0KGRiLCBrZXkpKSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBvYmo7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9kZWxldGVPYmplY3QoZGIsIGtleSkpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wb2xsKCkge1xyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIGlmIHdlIG5lZWQgdG8gZmFsbGJhY2sgaWYgZ2V0QWxsIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2V0QWxsUmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgREJQcm9taXNlKGdldEFsbFJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBwZW5kaW5nIHdyaXRlcyBpbiBwcm9ncmVzcyBhYm9ydCwgd2UnbGwgZ2V0IHBpY2tlZCB1cCBvbiB0aGUgbmV4dCBwb2xsXHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1dyaXRlcyAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgICAgICBjb25zdCBrZXlzSW5SZXN1bHQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGZiYXNlX2tleToga2V5LCB2YWx1ZSB9IG9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICBrZXlzSW5SZXN1bHQuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2FsQ2FjaGVba2V5XSkgIT09IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGxvY2FsS2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubG9jYWxDYWNoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxDYWNoZVtsb2NhbEtleV0gJiYgIWtleXNJblJlc3VsdC5oYXMobG9jYWxLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWxldGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhsb2NhbEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobG9jYWxLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIEFycmF5LmZyb20obGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHRoaXMuX3BvbGwoKSwgX1BPTExJTkdfSU5URVJWQUxfTVMpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIGNhY2hlIHRvIGF2b2lkIHNwdXJpb3VzbHkgdHJpZ2dlcmluZyBvbiBmaXJzdCBwb2xsLlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX2dldChrZXkpOyAvLyBUaGlzIGNhbiBoYXBwZW4gaW4gdGhlIGJhY2tncm91bmQgYXN5bmMgYW5kIHdlIGNhbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgaW5kZXhlZERCYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSA9IEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0U2lnbkluUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfU0lHTl9JTiAqLywgT2JqZWN0LmFzc2lnbih7IHRlbmFudElkOiBhdXRoLnRlbmFudElkIH0sIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX1NJR05fSU4gKi8sIE9iamVjdC5hc3NpZ24oeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9LCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjYXB0Y2hhUGFyYW1zKGF1dGgpIHtcclxuICAgIHJldHVybiAoKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEdFVCAqLywgXCIvdjEvcmVjYXB0Y2hhUGFyYW1zXCIgLyogR0VUX1JFQ0FQVENIQV9QQVJBTSAqLykpLnJlY2FwdGNoYVNpdGVLZXkgfHwgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZG9jdW1lbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2xvYWRKUyh1cmwpIHtcclxuICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyB0aW1lb3V0IHN1cHBvcnQgJiBjYW5jZWxsYXRpb25cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgZWwub25sb2FkID0gcmVzb2x2ZTtcclxuICAgICAgICBlbC5vbmVycm9yID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGVycm9yLmN1c3RvbURhdGEgPSBlO1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIGVsLmNoYXJzZXQgPSAnVVRGLTgnO1xyXG4gICAgICAgIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfZ2VuZXJhdGVDYWxsYmFja05hbWUocHJlZml4KSB7XHJcbiAgICByZXR1cm4gYF9fJHtwcmVmaXh9JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKX1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9TT0xWRV9USU1FX01TID0gNTAwO1xyXG5jb25zdCBfRVhQSVJBVElPTl9USU1FX01TID0gNjAwMDA7XHJcbmNvbnN0IF9XSURHRVRfSURfU1RBUlQgPSAxMDAwMDAwMDAwMDAwO1xyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcihjb250YWluZXIsIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuY291bnRlcjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzLnNldChpZCwgbmV3IE1vY2tXaWRnZXQoY29udGFpbmVyLCB0aGlzLmF1dGgubmFtZSwgcGFyYW1ldGVycyB8fCB7fSkpO1xyXG4gICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuICAgIHJlc2V0KG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWxldGUoKSk7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2Uob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UmVzcG9uc2UoKSkgfHwgJyc7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5leGVjdXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5jbGFzcyBNb2NrV2lkZ2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIGFwcE5hbWUsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdGhpcy5wYXJhbXMuc2l6ZSAhPT0gJ2ludmlzaWJsZSc7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlVG9rZW47XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyg1MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2FsbGJhY2ssICdleHBpcmVkLWNhbGxiYWNrJzogZXhwaXJlZENhbGxiYWNrIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucmVzcG9uc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwaXJlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBfRVhQSVJBVElPTl9USU1FX01TKTtcclxuICAgICAgICB9LCBfU09MVkVfVElNRV9NUyk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lmRGVsZXRlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncmVDQVBUQ0hBIG1vY2sgd2FzIGFscmVhZHkgZGVsZXRlZCEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcobGVuKSB7XHJcbiAgICBjb25zdCBjaGFycyA9IFtdO1xyXG4gICAgY29uc3QgYWxsb3dlZENoYXJzID0gJzEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZENoYXJzLmxlbmd0aCkpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBSZUNhcHRjaGEgd2lsbCBsb2FkIHVzaW5nIHRoZSBzYW1lIGNhbGxiYWNrLCBzbyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gbmVlZHNcclxuLy8gdG8gYmUga2VwdCBhcm91bmRcclxuY29uc3QgX0pTTE9BRF9DQUxMQkFDSyA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgncmNiJyk7XHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVF9ERUxBWSA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5jb25zdCBSRUNBUFRDSEFfQkFTRSA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/JztcclxuLyoqXHJcbiAqIExvYWRlciBmb3IgdGhlIEdSZUNhcHRjaGEgbGlicmFyeS4gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgb2YgdGhpcy5cclxuICovXHJcbmNsYXNzIFJlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ob3N0TGFuZ3VhZ2UgPSAnJztcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQgPSAhIV93aW5kb3coKS5ncmVjYXB0Y2hhO1xyXG4gICAgfVxyXG4gICAgbG9hZChhdXRoLCBobCA9ICcnKSB7XHJcbiAgICAgICAgX2Fzc2VydChpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3dpbmRvdygpLmdyZWNhcHRjaGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICB9LCBORVRXT1JLX1RJTUVPVVRfREVMQVkuZ2V0KCkpO1xyXG4gICAgICAgICAgICBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS10gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS107XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNhcHRjaGEgPSBfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVjYXB0Y2hhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHRoZSBncmVwdGNoYSByZW5kZXIgZnVuY3Rpb24gc28gdGhhdCB3ZSBrbm93IGlmIHRoZSBkZXZlbG9wZXIgaGFzXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsZWQgaXQgc2VwYXJhdGVseVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gcmVjYXB0Y2hhLnJlbmRlcjtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5yZW5kZXIgPSAoY29udGFpbmVyLCBwYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXRJZCA9IHJlbmRlcihjb250YWluZXIsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gaGw7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlY2FwdGNoYSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke1JFQ0FQVENIQV9CQVNFfT8ke3F1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIG9ubG9hZDogX0pTTE9BRF9DQUxMQkFDSyxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogJ2V4cGxpY2l0JyxcclxuICAgICAgICAgICAgICAgIGhsXHJcbiAgICAgICAgICAgIH0pfWA7XHJcbiAgICAgICAgICAgIF9sb2FkSlModXJsKS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyLS07XHJcbiAgICB9XHJcbiAgICBzaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpIHtcclxuICAgICAgICAvLyBXZSBjYW4gcmVzb2x2ZSBpbW1lZGlhdGVseSBpZjpcclxuICAgICAgICAvLyAgIOKAoiBncmVjYXB0Y2hhIGlzIGFscmVhZHkgZGVmaW5lZCBBTkQgKFxyXG4gICAgICAgIC8vICAgICAxLiB0aGUgcmVxdWVzdGVkIGxhbmd1YWdlIGNvZGVzIGFyZSB0aGUgc2FtZSBPUlxyXG4gICAgICAgIC8vICAgICAyLiB0aGVyZSBleGlzdHMgYWxyZWFkeSBhIFJlQ2FwdGNoYSBvbiB0aGUgcGFnZVxyXG4gICAgICAgIC8vICAgICAzLiB0aGUgbGlicmFyeSB3YXMgYWxyZWFkeSBsb2FkZWQgYnkgdGhlIGFwcFxyXG4gICAgICAgIC8vIEluIGNhc2VzICgyKSBhbmQgKDMpLCB3ZSBfY2FuJ3RfIHJlbG9hZCBhcyBpdCB3b3VsZCBicmVhayB0aGUgcmVjYXB0Y2hhc1xyXG4gICAgICAgIC8vIHRoYXQgYXJlIGFscmVhZHkgaW4gdGhlIHBhZ2VcclxuICAgICAgICByZXR1cm4gKCEhX3dpbmRvdygpLmdyZWNhcHRjaGEgJiZcclxuICAgICAgICAgICAgKGhsID09PSB0aGlzLmhvc3RMYW5ndWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpIHtcclxuICAgIHJldHVybiBobC5sZW5ndGggPD0gNiAmJiAvXlxccypbYS16QS1aMC05XFwtXSpcXHMqJC8udGVzdChobCk7XHJcbn1cclxuY2xhc3MgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgYXN5bmMgbG9hZChhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2NrUmVDYXB0Y2hhKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkgeyB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUgPSAncmVjYXB0Y2hhJztcclxuY29uc3QgREVGQVVMVF9QQVJBTVMgPSB7XHJcbiAgICB0aGVtZTogJ2xpZ2h0JyxcclxuICAgIHR5cGU6ICdpbWFnZSdcclxufTtcclxuLyoqXHJcbiAqIEFuIHtAbGluayBodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS8gfCByZUNBUFRDSEF9LWJhc2VkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyT3JJZCAtIFRoZSByZUNBUFRDSEEgY29udGFpbmVyIHBhcmFtZXRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhpcyBoYXMgZGlmZmVyZW50IG1lYW5pbmcgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHJlQ0FQVENIQSBpcyBoaWRkZW4gb3IgdmlzaWJsZS4gRm9yIGFcclxuICAgICAqIHZpc2libGUgcmVDQVBUQ0hBIHRoZSBjb250YWluZXIgbXVzdCBiZSBlbXB0eS4gSWYgYSBzdHJpbmcgaXMgdXNlZCwgaXQgaGFzIHRvIGNvcnJlc3BvbmQgdG9cclxuICAgICAqIGFuIGVsZW1lbnQgSUQuIFRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnQgbXVzdCBhbHNvIG11c3QgYmUgaW4gdGhlIERPTSBhdCB0aGUgdGltZSBvZlxyXG4gICAgICogaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtZXRlcnMgLSBUaGUgb3B0aW9uYWwgcmVDQVBUQ0hBIHBhcmFtZXRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIENoZWNrIHRoZSByZUNBUFRDSEEgZG9jcyBmb3IgYSBjb21wcmVoZW5zaXZlIGxpc3QuIEFsbCBwYXJhbWV0ZXJzIGFyZSBhY2NlcHRlZCBleGNlcHQgZm9yXHJcbiAgICAgKiB0aGUgc2l0ZWtleS4gRmlyZWJhc2UgQXV0aCBiYWNrZW5kIHByb3Zpc2lvbnMgYSByZUNBUFRDSEEgZm9yIGVhY2ggcHJvamVjdCBhbmQgd2lsbFxyXG4gICAgICogY29uZmlndXJlIHRoaXMgdXBvbiByZW5kZXJpbmcuIEZvciBhbiBpbnZpc2libGUgcmVDQVBUQ0hBLCBhIHNpemUga2V5IG11c3QgaGF2ZSB0aGUgdmFsdWVcclxuICAgICAqICdpbnZpc2libGUnLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoRXh0ZXJuIC0gVGhlIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBJZiBub25lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaXMgdXNlZC4gQSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2VcclxuICAgICAqIG11c3QgYmUgaW5pdGlhbGl6ZWQgd2l0aCBhbiBBUEkga2V5LCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIHBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BBUkFNUyksIGF1dGhFeHRlcm4pIHtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhcHBsaWNhdGlvbiB2ZXJpZmllciB0eXBlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJlbWFya3NcclxuICAgICAgICAgKiBGb3IgYSByZUNBUFRDSEEgdmVyaWZpZXIsIHRoaXMgaXMgJ3JlY2FwdGNoYScuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndpZGdldElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICB0aGlzLmlzSW52aXNpYmxlID0gdGhpcy5wYXJhbWV0ZXJzLnNpemUgPT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrID0gdGhpcy5tYWtlVG9rZW5DYWxsYmFjayh0aGlzLnBhcmFtZXRlcnMuY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX3JlY2FwdGNoYUxvYWRlciA9IHRoaXMuYXV0aC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmdcclxuICAgICAgICAgICAgPyBuZXcgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwoKVxyXG4gICAgICAgICAgICA6IG5ldyBSZUNhcHRjaGFMb2FkZXJJbXBsKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKTtcclxuICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGlmIHNkayB2ZXJzaW9uIGlzIG5lZWRlZFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyBmb3IgdGhlIHVzZXIgdG8gc29sdmUgdGhlIHJlQ0FQVENIQSBhbmQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVDQVBUQ0hBIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdmVyaWZ5KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIGNvbnN0IHJlY2FwdGNoYSA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlY2FwdGNoYS5nZXRSZXNwb25zZShpZCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbkNoYW5nZSA9ICh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIHRva2VuIGV4cGlyYXRpb25zLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycy5kZWxldGUodG9rZW5DaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuYWRkKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5leGVjdXRlKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IG9uIHRoZSBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB3aWRnZXQgSUQuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZS4gU2luY2UgaXQncyBub3QgYXN5bmMgKHdlIHdhbnQgdG8gcmV0dXJuIHRoZVxyXG4gICAgICAgICAgICAvLyBfc2FtZV8gcHJvbWlzZSBpZiByZW5kZXJpbmcgaXMgc3RpbGwgb2NjdXJyaW5nKSwgdGhlIEFQSSBzdXJmYWNlIHNob3VsZFxyXG4gICAgICAgICAgICAvLyByZWplY3Qgd2l0aCB0aGUgZXJyb3IgcmF0aGVyIHRoYW4ganVzdCB0aHJvd1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlclByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gdGhpcy5tYWtlUmVuZGVyUHJvbWlzZSgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy53aWRnZXRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCkucmVzZXQodGhpcy53aWRnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHJlQ0FQVENIQSB3aWRnZXQgZnJvbSB0aGUgcGFnZSBhbmQgZGVzdHJveXMgdGhlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIuY2xlYXJlZE9uZUluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuaXNJbnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBtYWtlVG9rZW5DYWxsYmFjayhleGlzdGluZykge1xyXG4gICAgICAgIHJldHVybiB0b2tlbiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0b2tlbikpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZyh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRnVuYyA9IF93aW5kb3coKVtleGlzdGluZ107XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbEZ1bmMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxGdW5jKHRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3NlcnROb3REZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5kZXN0cm95ZWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VSZW5kZXJQcm9taXNlKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXRJZCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmFudGVlZEVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmFudGVlZEVtcHR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGd1YXJhbnRlZWRFbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLndpZGdldElkID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlbmRlcihjb250YWluZXIsIHRoaXMucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldElkO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBfYXNzZXJ0KF9pc0h0dHBPckh0dHBzKCkgJiYgIV9pc1dvcmtlcigpLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgZG9tUmVhZHkoKTtcclxuICAgICAgICB0aGlzLnJlY2FwdGNoYSA9IGF3YWl0IHRoaXMuX3JlY2FwdGNoYUxvYWRlci5sb2FkKHRoaXMuYXV0aCwgdGhpcy5hdXRoLmxhbmd1YWdlQ29kZSB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IHNpdGVLZXkgPSBhd2FpdCBnZXRSZWNhcHRjaGFQYXJhbXModGhpcy5hdXRoKTtcclxuICAgICAgICBfYXNzZXJ0KHNpdGVLZXksIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2l0ZWtleSA9IHNpdGVLZXk7XHJcbiAgICB9XHJcbiAgICBnZXRBc3NlcnRlZFJlY2FwdGNoYSgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMucmVjYXB0Y2hhLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjYXB0Y2hhO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xyXG4gICAgbGV0IHJlc29sdmVyID0gbnVsbDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9jdW1lbnQgbm90IHJlYWR5LCB3YWl0IGZvciBsb2FkIGJlZm9yZSByZXNvbHZpbmcuXHJcbiAgICAgICAgLy8gU2F2ZSByZXNvbHZlciwgc28gd2UgY2FuIHJlbW92ZSBsaXN0ZW5lciBpbiBjYXNlIGl0IHdhcyBleHRlcm5hbGx5XHJcbiAgICAgICAgLy8gY2FuY2VsbGVkLlxyXG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJpZmljYXRpb25JZCwgb25Db25maXJtYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbklkID0gdmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm1hdGlvbiA9IG9uQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHRoaXMudmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29uZmlybWF0aW9uKGF1dGhDcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgY29kZSB2aWEgU01TIHRvIHRoZSBnaXZlblxyXG4gKiBwaG9uZSBudW1iZXIsIGFuZCByZXR1cm5zIGEge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdH0uIEFmdGVyIHRoZSB1c2VyXHJcbiAqIHByb3ZpZGVzIHRoZSBjb2RlIHNlbnQgdG8gdGhlaXIgcGhvbmUsIGNhbGwge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtfVxyXG4gKiB3aXRoIHRoZSBjb2RlIHRvIHNpZ24gdGhlIHVzZXIgaW4uXHJcbiAqXHJcbiAqIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGEge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbiwge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBmaXJlYmFzZS5hdXRoLlJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiBhIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aEludGVybmFsLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aEludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gbGlua1dpdGhDcmVkZW50aWFsKHVzZXJJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIHBob25lIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluIGF0dGVtcHRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIodXNlciwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2ZXJpZmljYXRpb24gSUQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBTTVMgY29kZSB0aGF0IGlzIHNlbnQuXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aCwgb3B0aW9ucywgdmVyaWZpZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHJlY2FwdGNoYVRva2VuID0gYXdhaXQgdmVyaWZpZXIudmVyaWZ5KCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlY2FwdGNoYVRva2VuID09PSAnc3RyaW5nJywgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHZlcmlmaWVyLnR5cGUgPT09IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGxldCBwaG9uZUluZm9PcHRpb25zO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdzZXNzaW9uJyBpbiBwaG9uZUluZm9PcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBwaG9uZUluZm9PcHRpb25zLnNlc3Npb247XHJcbiAgICAgICAgICAgIGlmICgncGhvbmVOdW1iZXInIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lRW5yb2xsbWVudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVTZXNzaW9uSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcInNpZ25pblwiIC8qIFNJR05fSU4gKi8sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZmFFbnJvbGxtZW50SWQgPSAoKF9hID0gcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvckhpbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvclVpZDtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQobWZhRW5yb2xsbWVudElkLCBhdXRoLCBcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVTaWduSW5JbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbkluZm8gfSA9IGF3YWl0IHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25JbmZvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHZlcmlmaWVyLl9yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBhdXRoZW50aWNhdGluZyB0aGUgbmV3IHBob25lIG51bWJlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgYXdhaXQgX2xpbmskMShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgUGhvbmVBdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGluIHdoaWNoIHNpZ24taW5zIHNob3VsZCBvY2N1ci5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogU3RhcnRzIGEgcGhvbmUgbnVtYmVyIGF1dGhlbnRpY2F0aW9uIGZsb3cgYnkgc2VuZGluZyBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRoZSBnaXZlbiBwaG9uZVxyXG4gICAgICogbnVtYmVyLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVJbmZvT3B0aW9ucyAtIFRoZSB1c2VyJ3Mge0BsaW5rIFBob25lSW5mb09wdGlvbnN9LiBUaGUgcGhvbmUgbnVtYmVyIHNob3VsZCBiZSBpblxyXG4gICAgICogRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25WZXJpZmllciAtIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGFcclxuICAgICAqIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS4gVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sXHJcbiAgICAgKiB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgYSB2ZXJpZmljYXRpb24gSUQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0gdG8gaWRlbnRpZnkgdGhpcyBmbG93Li5cclxuICAgICAqL1xyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVPcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIF92ZXJpZnlQaG9uZU51bWJlcih0aGlzLmF1dGgsIHBob25lT3B0aW9ucywgZ2V0TW9kdWxhckluc3RhbmNlKGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBob25lIGF1dGggY3JlZGVudGlhbCwgZ2l2ZW4gdGhlIHZlcmlmaWNhdGlvbiBJRCBmcm9tXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9IGFuZCB0aGUgY29kZSB0aGF0IHdhcyBzZW50IHRvIHRoZSB1c2VyJ3NcclxuICAgICAqIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25JZCAtIFRoZSB2ZXJpZmljYXRpb24gSUQgcmV0dXJuZWQgZnJvbSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9LlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbkNvZGUgLSBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlcidzIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHdoZW4gcGFzc2VkIGFuIGVycm9yLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd29ya3MgZm9yIGVycm9ycyBsaWtlXHJcbiAgICAgKiBgYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxyXG4gICAgICogcmVjb3ZlcmluZyB3aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGEgdXNlcidzIHBob25lIG51bWJlciBidXQgdGhlIG51bWJlclxyXG4gICAgICogaW4gcXVlc3Rpb24gaXMgYWxyZWFkeSB0aWVkIHRvIGFub3RoZXIgYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcclxuICAgICAqIGNvZGUgdHJpZXMgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHVzZXIncyBwaG9uZSBudW1iZXIsIGFuZCBpZiB0aGF0XHJcbiAgICAgKiBmYWlscywgbGlua3MgdGhlIHVzZXIgd2l0aCB0aGUgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhhdCBudW1iZXI6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihudW1iZXIsIHZlcmlmaWVyKTtcclxuICAgICAqIHRyeSB7XHJcbiAgICAgKiAgIGNvbnN0IGNvZGUgPSAnJzsgLy8gUHJvbXB0IHRoZSB1c2VyIGZvciB0aGUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgICAqICAgYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIoXHJcbiAgICAgKiAgICAgICBhdXRoLmN1cnJlbnRVc2VyLFxyXG4gICAgICogICAgICAgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgY29kZSkpO1xyXG4gICAgICogfSBjYXRjaCAoZSkge1xyXG4gICAgICogICBpZiAoZS5jb2RlID09PSAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJykge1xyXG4gICAgICogICAgIGNvbnN0IGNyZWQgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKGUpO1xyXG4gICAgICogICAgIGF3YWl0IGxpbmtXaXRoQ3JlZGVudGlhbChhdXRoLmN1cnJlbnRVc2VyLCBjcmVkKTtcclxuICAgICAqICAgfVxyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIC8vIEF0IHRoaXMgcG9pbnQsIGF1dGguY3VycmVudFVzZXIucGhvbmVOdW1iZXIgPT09IG51bWJlci5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBnZW5lcmF0ZSBhIGNyZWRlbnRpYWwgZnJvbS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmIChwaG9uZU51bWJlciAmJiB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGhvbmVcIiAvKiBQSE9ORSAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hvb3NlcyBhIHBvcHVwL3JlZGlyZWN0IHJlc29sdmVyIHRvIHVzZS4gVGhpcyBwcmVmZXJzIHRoZSBvdmVycmlkZSAod2hpY2hcclxuICogaXMgZGlyZWN0bHkgcGFzc2VkIGluKSwgYW5kIGZhbGxzIGJhY2sgdG8gdGhlIHByb3BlcnR5IHNldCBvbiB0aGUgYXV0aFxyXG4gKiBvYmplY3QuIElmIG5laXRoZXIgYXJlIGF2YWlsYWJsZSwgdGhpcyBmdW5jdGlvbiBlcnJvcnMgdy8gYW4gYXJndW1lbnQgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoLCByZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICBpZiAocmVzb2x2ZXJPdmVycmlkZSkge1xyXG4gICAgICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXJPdmVycmlkZSk7XHJcbiAgICB9XHJcbiAgICBfYXNzZXJ0KGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBhdXRoLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSWRwQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwiY3VzdG9tXCIgLyogQ1VTVE9NICovLCBcImN1c3RvbVwiIC8qIENVU1RPTSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KGlkVG9rZW4pKTtcclxuICAgIH1cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHRoaXMucGFyYW1zLnJlcXVlc3RVcmksXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5wYXJhbXMuc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogdGhpcy5wYXJhbXMucG9zdEJvZHksXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLnBhcmFtcy50ZW5hbnRJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBhcmFtcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICByZXR1cm5JZHBDcmVkZW50aWFsOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaWRUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfc2lnbkluKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChwYXJhbXMuYXV0aCwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuZnVuY3Rpb24gX3JlYXV0aChwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayhwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKi9cclxuY2xhc3MgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZXI7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmJ5cGFzc0F1dGhTdGF0ZSA9IGJ5cGFzc0F1dGhTdGF0ZTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX2luaXRpYWxpemUodGhpcy5hdXRoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25FeGVjdXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkF1dGhFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdXJsUmVzcG9uc2UsIHNlc3Npb25JZCwgcG9zdEJvZHksIHRlbmFudElkLCBlcnJvciwgdHlwZSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGF1dGg6IHRoaXMuYXV0aCxcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdXJsUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogcG9zdEJvZHkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXHJcbiAgICAgICAgICAgIGJ5cGFzc0F1dGhTdGF0ZTogdGhpcy5ieXBhc3NBdXRoU3RhdGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShhd2FpdCB0aGlzLmdldElkcFRhc2sodHlwZSkocGFyYW1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICBnZXRJZHBUYXNrKHR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zaWduSW47XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9saW5rO1xyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWF1dGg7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbCh0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzb2x2ZShjcmVkKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZXNvbHZlKGNyZWQpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHJlamVjdChlcnJvcikge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMucGVuZGluZ1Byb21pc2UsICdQZW5kaW5nIHByb21pc2Ugd2FzIG5ldmVyIHNldCcpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBbmRDbGVhblVwKCk7XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIudW5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsZWFuVXAoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCA9IG5ldyBEZWxheSgyMDAwLCAxMDAwMCk7XHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgcG9wdXAtYmFzZWQgT0F1dGggYXV0aGVudGljYXRpb24gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc3VjY2VlZHMsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyIGFsb25nIHdpdGggdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC4gSWYgc2lnbiBpbiB3YXNcclxuICogdW5zdWNjZXNzZnVsLCByZXR1cm5zIGFuIGVycm9yIG9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbihhdXRoSW50ZXJuYWwsIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgcG9wLXVwIGJhc2VkXHJcbiAqIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSByZWF1dGhlbnRpY2F0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGVcclxuICogcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gUmVhdXRoZW50aWNhdGUgdXNpbmcgYSBwb3B1cC5cclxuICogYXdhaXQgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0KHByb3ZpZGVyIGluc3RhbmNlb2YgRmVkZXJhdGVkQXV0aFByb3ZpZGVyLCB1c2VySW50ZXJuYWwuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFBvcHVwT3BlcmF0aW9uKHVzZXJJbnRlcm5hbC5hdXRoLCBcInJlYXV0aFZpYVBvcHVwXCIgLyogUkVBVVRIX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSBhdXRoZW50aWNhdGVkIHByb3ZpZGVyIHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBwb3AtdXAgYmFzZWQgT0F1dGggZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlIGxpbmtpbmcgaXMgc3VjY2Vzc2Z1bCwgdGhlIHJldHVybmVkIHJlc3VsdCB3aWxsIGNvbnRhaW4gdGhlIHVzZXIgYW5kIHRoZSBwcm92aWRlcidzIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUG9wdXAocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQb3B1cCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnQocHJvdmlkZXIgaW5zdGFuY2VvZiBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIsIHVzZXJJbnRlcm5hbC5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwibGlua1ZpYVBvcHVwXCIgLyogTElOS19WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBQb3B1cCBldmVudCBtYW5hZ2VyLiBIYW5kbGVzIHRoZSBwb3B1cCdzIGVudGlyZSBsaWZlY3ljbGU7IGxpc3RlbnMgdG8gYXV0aFxyXG4gKiBldmVudHNcclxuICpcclxuICovXHJcbmNsYXNzIFBvcHVwT3BlcmF0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcHJvdmlkZXIsIHJlc29sdmVyLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlcik7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIGlmIChQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24pIHtcclxuICAgICAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSB0aGlzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZU5vdE51bGwoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgX2Fzc2VydChyZXN1bHQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5maWx0ZXIubGVuZ3RoID09PSAxLCAnUG9wdXAgb3BlcmF0aW9ucyBvbmx5IGhhbmRsZSBvbmUgZXZlbnQnKTtcclxuICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX29wZW5Qb3B1cCh0aGlzLmF1dGgsIHRoaXMucHJvdmlkZXIsIHRoaXMuZmlsdGVyWzBdLCAvLyBUaGVyZSdzIGFsd2F5cyBvbmUsIHNlZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGV2ZW50SWQpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdy5hc3NvY2lhdGVkRXZlbnQgPSBldmVudElkO1xyXG4gICAgICAgIC8vIENoZWNrIGZvciB3ZWIgc3RvcmFnZSBzdXBwb3J0IGFuZCBvcmlnaW4gdmFsaWRhdGlvbiBfYWZ0ZXJfIHRoZSBwb3B1cCBpc1xyXG4gICAgICAgIC8vIGxvYWRlZC4gVGhlc2Ugb3BlcmF0aW9ucyBhcmUgc2xvdyAofjEgc2Vjb25kIG9yIHNvKSBSYXRoZXIgdGhhblxyXG4gICAgICAgIC8vIHdhaXRpbmcgb24gdGhlbSBiZWZvcmUgb3BlbmluZyB0aGUgd2luZG93LCBvcHRpbWlzdGljYWxseSBvcGVuIHRoZSBwb3B1cFxyXG4gICAgICAgIC8vIGFuZCBjaGVjayBmb3Igc3RvcmFnZSBzdXBwb3J0IGF0IHRoZSBzYW1lIHRpbWUuIElmIHN0b3JhZ2Ugc3VwcG9ydCBpc1xyXG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGUsIHRoaXMgd2lsbCBjYXVzZSB0aGUgd2hvbGUgdGhpbmcgdG8gcmVqZWN0IHByb3Blcmx5LiBJdFxyXG4gICAgICAgIC8vIHdpbGwgYWxzbyBjbG9zZSB0aGUgcG9wdXAsIGJ1dCBzaW5jZSB0aGUgcHJvbWlzZSBoYXMgYWxyZWFkeSByZWplY3RlZCxcclxuICAgICAgICAvLyB0aGUgcG9wdXAgY2xvc2VkIGJ5IHVzZXIgcG9sbCB3aWxsIHJlamVjdCBpbnRvIHRoZSB2b2lkLlxyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24odGhpcy5hdXRoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5faXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKHRoaXMuYXV0aCwgaXNTdXBwb3J0ZWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIgLyogV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi8pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEhhbmRsZSB1c2VyIGNsb3N1cmUuIE5vdGljZSB0aGlzIGRvZXMgKm5vdCogdXNlIGF3YWl0XHJcbiAgICAgICAgdGhpcy5wb2xsVXNlckNhbmNlbGxhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGV2ZW50SWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXNzb2NpYXRlZEV2ZW50KSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBFWFBJUkVEX1BPUFVQX1JFUVVFU1QgKi8pKTtcclxuICAgIH1cclxuICAgIGNsZWFuVXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aFdpbmRvdykge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbElkKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5wb2xsSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcG9sbFVzZXJDYW5jZWxsYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcG9sbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKChfYiA9IChfYSA9IHRoaXMuYXV0aFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLndpbmRvdykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlcmUgaXMgc3VmZmljaWVudCB0aW1lIGZvciB3aGF0ZXZlciBhY3Rpb24gdG9cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRlLiBUaGUgd2luZG93IGNvdWxkIGhhdmUgY2xvc2VkIGJ1dCB0aGUgc2lnbiBpbiBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsIGNvdWxkIHN0aWxsIGJlIGluIGZsaWdodC5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sIDIwMDAgLyogQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dChwb2xsLCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwb2xsKCk7XHJcbiAgICB9XHJcbn1cclxuLy8gT25seSBvbmUgcG9wdXAgaXMgZXZlciBzaG93biBhdCBvbmNlLiBUaGUgbGlmZWN5Y2xlIG9mIHRoZSBjdXJyZW50IHBvcHVwXHJcbi8vIGNhbiBiZSBtYW5hZ2VkIC8gY2FuY2VsbGVkIGJ5IHRoZSBjb25zdHJ1Y3Rvci5cclxuUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19SRURJUkVDVF9LRVkgPSAncGVuZGluZ1JlZGlyZWN0JztcclxuLy8gV2Ugb25seSBnZXQgb25lIHJlZGlyZWN0IG91dGNvbWUgZm9yIGFueSBvbmUgYXV0aCwgc28ganVzdCBzdG9yZSBpdFxyXG4vLyBpbiBoZXJlLlxyXG5jb25zdCByZWRpcmVjdE91dGNvbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmNsYXNzIFJlZGlyZWN0QWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIFtcclxuICAgICAgICAgICAgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqL1xyXG4gICAgICAgIF0sIHJlc29sdmVyLCB1bmRlZmluZWQsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudElkID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgdGhlIGV4ZWN1dGUgZnVuY3Rpb247IGlmIHdlIGFscmVhZHkgaGF2ZSBhIHJlZGlyZWN0IHJlc3VsdCwgdGhlblxyXG4gICAgICoganVzdCByZXR1cm4gaXQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgbGV0IHJlYWR5T3V0Y29tZSA9IHJlZGlyZWN0T3V0Y29tZU1hcC5nZXQodGhpcy5hdXRoLl9rZXkoKSk7XHJcbiAgICAgICAgaWYgKCFyZWFkeU91dGNvbWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IGF3YWl0IF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyh0aGlzLnJlc29sdmVyLCB0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaGFzUGVuZGluZ1JlZGlyZWN0ID8gYXdhaXQgc3VwZXIuZXhlY3V0ZSgpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWFkeU91dGNvbWUgPSAoKSA9PiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksIHJlYWR5T3V0Y29tZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWFkeU91dGNvbWUoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZW50aW5lbCB2YWx1ZSBpbmRpY2F0aW5nIHRoZXJlJ3Mgbm8gcGVuZGluZyByZWRpcmVjdFxyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50SWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuYXV0aC5fcmVkaXJlY3RVc2VyRm9ySWQoZXZlbnQuZXZlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkgeyB9XHJcbiAgICBjbGVhblVwKCkgeyB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICBjb25zdCBrZXkgPSBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCk7XHJcbiAgICBjb25zdCBoYXNQZW5kaW5nUmVkaXJlY3QgPSAoYXdhaXQgcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikuX2dldChrZXkpKSA9PT0gJ3RydWUnO1xyXG4gICAgYXdhaXQgcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikuX3JlbW92ZShrZXkpO1xyXG4gICAgcmV0dXJuIGhhc1BlbmRpbmdSZWRpcmVjdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikuX3NldChwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCksICd0cnVlJyk7XHJcbn1cclxuZnVuY3Rpb24gX2NsZWFyUmVkaXJlY3RPdXRjb21lcygpIHtcclxuICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5jbGVhcigpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSB7XHJcbiAgICByZXR1cm4gX3BlcnNpc3RlbmNlS2V5TmFtZShQRU5ESU5HX1JFRElSRUNUX0tFWSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgYXV0aEludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QoYXV0aEludGVybmFsLCBwcm92aWRlciwgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovKTtcclxufVxyXG4vKipcclxuICogUmVhdXRoZW50aWNhdGVzIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHtAbGluayBPQXV0aFByb3ZpZGVyfSB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSByZWRpcmVjdC5cclxuICogYXdhaXQgbGlua1dpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgYWdhaW4gdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlciwgdXNlckludGVybmFsLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLCBldmVudElkKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHtAbGluayBPQXV0aFByb3ZpZGVyfSB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2xpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnQocHJvdmlkZXIgaW5zdGFuY2VvZiBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIsIHVzZXJJbnRlcm5hbC5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgLy8gQWxsb3cgdGhlIHJlc29sdmVyIHRvIGVycm9yIGJlZm9yZSBwZXJzaXN0aW5nIHRoZSByZWRpcmVjdCB1c2VyXHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXIucHJvdmlkZXJJZCk7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLywgZXZlbnRJZCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGZyb20gdGhlIHJlZGlyZWN0LWJhc2VkIHNpZ24taW4gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc2lnbi1pbiBzdWNjZWVkZWQsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyLiBJZiBzaWduLWluIHdhcyB1bnN1Y2Nlc3NmdWwsIGZhaWxzIHdpdGggYW5cclxuICogZXJyb3IuIElmIG5vIHJlZGlyZWN0IG9wZXJhdGlvbiB3YXMgY2FsbGVkLCByZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfVxyXG4gKiB3aXRoIGEgbnVsbCBgdXNlcmAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIpIHtcclxuICAgIGF3YWl0IF9jYXN0QXV0aChhdXRoKS5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlciwgZmFsc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlckV4dGVybiwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc29sdmVyID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVkaXJlY3RBY3Rpb24oYXV0aEludGVybmFsLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICBpZiAocmVzdWx0ICYmICFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBkZWxldGUgcmVzdWx0LnVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3BlcnNpc3RVc2VySWZDdXJyZW50KHJlc3VsdC51c2VyKTtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3NldFJlZGlyZWN0VXNlcihudWxsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlcikge1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoYCR7dXNlci51aWR9Ojo6YCk7XHJcbiAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBldmVudElkO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9zZXRSZWRpcmVjdFVzZXIodXNlcik7XHJcbiAgICBhd2FpdCB1c2VyLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpO1xyXG4gICAgcmV0dXJuIGV2ZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIGFtb3VudCBvZiB0aW1lIHRvIHN0b3JlIHRoZSBVSURzIG9mIHNlZW4gZXZlbnRzOyB0aGlzIGlzXHJcbi8vIHNldCB0byAxMCBtaW4gYnkgZGVmYXVsdFxyXG5jb25zdCBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUyA9IDEwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJDb25zdW1lcihhdXRoRXZlbnRDb25zdW1lcikge1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmFkZChhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzRXZlbnRGb3JDb25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCwgYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5kZWxldGUoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgfVxyXG4gICAgb25FdmVudChldmVudCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWRcclxuICAgICAgICBpZiAodGhpcy5oYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZm9yRWFjaChjb25zdW1lciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUV2ZW50VG9DYWNoZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgfHwgIWlzUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBzZWVuIGEgcmVkaXJlY3QgYmVmb3JlLCBvciB0aGlzIGlzIGEgcG9wdXAgZXZlbnQsXHJcbiAgICAgICAgICAgIC8vIGJhaWwgbm93XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IHRydWU7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHdhc24ndCBoYW5kbGVkLCBoYW5nIG9uIHRvIGl0XHJcbiAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICB9XHJcbiAgICBzZW5kVG9Db25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKGV2ZW50LmVycm9yICYmICFpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gKChfYSA9IGV2ZW50LmVycm9yLmNvZGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGxpdCgnYXV0aC8nKVsxXSkgfHxcclxuICAgICAgICAgICAgICAgIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLztcclxuICAgICAgICAgICAgY29uc3VtZXIub25FcnJvcihfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBjb2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNFdmVudEZvckNvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWRNYXRjaGVzID0gY29uc3VtZXIuZXZlbnRJZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAoISFldmVudC5ldmVudElkICYmIGV2ZW50LmV2ZW50SWQgPT09IGNvbnN1bWVyLmV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBjb25zdW1lci5maWx0ZXIuaW5jbHVkZXMoZXZlbnQudHlwZSkgJiYgZXZlbnRJZE1hdGNoZXM7XHJcbiAgICB9XHJcbiAgICBoYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPj1cclxuICAgICAgICAgICAgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmhhcyhldmVudFVpZChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZUV2ZW50VG9DYWNoZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmFkZChldmVudFVpZChldmVudCkpO1xyXG4gICAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXZlbnRVaWQoZSkge1xyXG4gICAgcmV0dXJuIFtlLnR5cGUsIGUuZXZlbnRJZCwgZS5zZXNzaW9uSWQsIGUudGVuYW50SWRdLmZpbHRlcih2ID0+IHYpLmpvaW4oJy0nKTtcclxufVxyXG5mdW5jdGlvbiBpc051bGxSZWRpcmVjdEV2ZW50KHsgdHlwZSwgZXJyb3IgfSkge1xyXG4gICAgcmV0dXJuICh0eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovICYmXHJcbiAgICAgICAgKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jb2RlKSA9PT0gYGF1dGgvJHtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovfWApO1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVkaXJlY3RFdmVudChldmVudCkge1xyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIGlzTnVsbFJlZGlyZWN0RXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UHJvamVjdENvbmZpZyhhdXRoLCByZXF1ZXN0ID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3Byb2plY3RzXCIgLyogR0VUX1BST0pFQ1RfQ09ORklHICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJUF9BRERSRVNTX1JFR0VYID0gL15cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfSQvO1xyXG5jb25zdCBIVFRQX1JFR0VYID0gL15odHRwcz8vO1xyXG5hc3luYyBmdW5jdGlvbiBfdmFsaWRhdGVPcmlnaW4oYXV0aCkge1xyXG4gICAgLy8gU2tpcCBvcmlnaW4gdmFsaWRhdGlvbiBpZiB3ZSBhcmUgaW4gYW4gZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICAgIGlmIChhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgYXV0aG9yaXplZERvbWFpbnMgfSA9IGF3YWl0IF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgpO1xyXG4gICAgZm9yIChjb25zdCBkb21haW4gb2YgYXV0aG9yaXplZERvbWFpbnMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hEb21haW4oZG9tYWluKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZXJlJ3MgYSBVUkwgZXJyb3I7IGp1c3QgY29udGludWUgc2VhcmNoaW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gSW4gdGhlIG9sZCBTREssIHRoaXMgZXJyb3IgYWxzbyBwcm92aWRlcyBoZWxwZnVsIG1lc3NhZ2VzLlxyXG4gICAgX2ZhaWwoYXV0aCwgXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi8pO1xyXG59XHJcbmZ1bmN0aW9uIG1hdGNoRG9tYWluKGV4cGVjdGVkKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXJsID0gX2dldEN1cnJlbnRVcmwoKTtcclxuICAgIGNvbnN0IHsgcHJvdG9jb2wsIGhvc3RuYW1lIH0gPSBuZXcgVVJMKGN1cnJlbnRVcmwpO1xyXG4gICAgaWYgKGV4cGVjdGVkLnN0YXJ0c1dpdGgoJ2Nocm9tZS1leHRlbnNpb246Ly8nKSkge1xyXG4gICAgICAgIGNvbnN0IGNlVXJsID0gbmV3IFVSTChleHBlY3RlZCk7XHJcbiAgICAgICAgaWYgKGNlVXJsLmhvc3RuYW1lID09PSAnJyAmJiBob3N0bmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHdlJ3JlIG5vdCBwYXJzaW5nIGNocm9tZSBVUkxzIHByb3Blcmx5XHJcbiAgICAgICAgICAgIHJldHVybiAocHJvdG9jb2wgPT09ICdjaHJvbWUtZXh0ZW5zaW9uOicgJiZcclxuICAgICAgICAgICAgICAgIGV4cGVjdGVkLnJlcGxhY2UoJ2Nocm9tZS1leHRlbnNpb246Ly8nLCAnJykgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVybC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmIGNlVXJsLmhvc3RuYW1lID09PSBob3N0bmFtZTtcclxuICAgIH1cclxuICAgIGlmICghSFRUUF9SRUdFWC50ZXN0KHByb3RvY29sKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChJUF9BRERSRVNTX1JFR0VYLnRlc3QoZXhwZWN0ZWQpKSB7XHJcbiAgICAgICAgLy8gVGhlIGRvbWFpbiBoYXMgdG8gYmUgZXhhY3RseSBlcXVhbCB0byB0aGUgcGF0dGVybiwgYXMgYW4gSVAgZG9tYWluIHdpbGxcclxuICAgICAgICAvLyBvbmx5IGNvbnRhaW4gdGhlIElQLCBubyBleHRyYSBjaGFyYWN0ZXIuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RuYW1lID09PSBleHBlY3RlZDtcclxuICAgIH1cclxuICAgIC8vIERvdHMgaW4gcGF0dGVybiBzaG91bGQgYmUgZXNjYXBlZC5cclxuICAgIGNvbnN0IGVzY2FwZWREb21haW5QYXR0ZXJuID0gZXhwZWN0ZWQucmVwbGFjZSgvXFwuL2csICdcXFxcLicpO1xyXG4gICAgLy8gTm9uIGlwIGFkZHJlc3MgZG9tYWlucy5cclxuICAgIC8vIGRvbWFpbi5jb20gPSAqLmRvbWFpbi5jb20gT1IgZG9tYWluLmNvbVxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKCdeKC4rXFxcXC4nICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnfCcgKyBlc2NhcGVkRG9tYWluUGF0dGVybiArICcpJCcsICdpJyk7XHJcbiAgICByZXR1cm4gcmUudGVzdChob3N0bmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVCA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG4vKipcclxuICogUmVzZXQgdW5sYW9kZWQgR0FwaSBtb2R1bGVzLiBJZiBnYXBpLmxvYWQgZmFpbHMgZHVlIHRvIGEgbmV0d29yayBlcnJvcixcclxuICogaXQgd2lsbCBzdG9wIHdvcmtpbmcgYWZ0ZXIgYSByZXRyaWFsLiBUaGlzIGlzIGEgaGFjayB0byBmaXggdGhpcyBpc3N1ZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpIHtcclxuICAgIC8vIENsZWFyIGxhc3QgZmFpbGVkIGdhcGkubG9hZCBzdGF0ZSB0byBmb3JjZSBuZXh0IGdhcGkubG9hZCB0byBmaXJzdFxyXG4gICAgLy8gbG9hZCB0aGUgZmFpbGVkIGdhcGkuaWZyYW1lcyBtb2R1bGUuXHJcbiAgICAvLyBHZXQgZ2FwaXguYmVhY29uIGNvbnRleHQuXHJcbiAgICBjb25zdCBiZWFjb24gPSBfd2luZG93KCkuX19fanNsO1xyXG4gICAgLy8gR2V0IGN1cnJlbnQgaGludC5cclxuICAgIGlmIChiZWFjb24gPT09IG51bGwgfHwgYmVhY29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWFjb24uSCkge1xyXG4gICAgICAgIC8vIEdldCBnYXBpIGhpbnQuXHJcbiAgICAgICAgZm9yIChjb25zdCBoaW50IG9mIE9iamVjdC5rZXlzKGJlYWNvbi5IKSkge1xyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0ZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uciA9IGJlYWNvbi5IW2hpbnRdLnIgfHwgW107XHJcbiAgICAgICAgICAgIC8vIExvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5MID0gYmVhY29uLkhbaGludF0uTCB8fCBbXTtcclxuICAgICAgICAgICAgLy8gU2V0IHJlcXVlc3RlZCBtb2R1bGVzIHRvIGEgY29weSBvZiB0aGUgbG9hZGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBbLi4uYmVhY29uLkhbaGludF0uTF07XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICBpZiAoYmVhY29uLkNQKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJlYWNvbi5DUC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZmFpbGVkIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICAgICAgICAgIGJlYWNvbi5DUFtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYztcclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBydW4gd2hlbiBnYXBpLmxvYWQgaXMgcmVhZHkuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZEdhcGlJZnJhbWUoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkZXZlbG9wZXIgbWF5IGhhdmUgdHJpZWQgdG8gcHJldmlvdXNseSBydW4gZ2FwaS5sb2FkIGFuZCBmYWlsZWQuXHJcbiAgICAgICAgICAgIC8vIFJ1biB0aGlzIHRvIGZpeCB0aGF0LlxyXG4gICAgICAgICAgICByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKTtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdnYXBpLmlmcmFtZXMnLCB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb250aW1lb3V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFib3ZlIHJlc2V0IG1heSBiZSBzdWZmaWNpZW50LCBidXQgaGF2aW5nIHRoaXMgcmVzZXQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlIGVuc3VyZXMgdGhhdCBpZiB0aGUgZGV2ZWxvcGVyIGNhbGxzIGdhcGkubG9hZCBhZnRlciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIHJlLWVzdGFibGlzaGVkIGFuZCBiZWZvcmUgYW5vdGhlciBhdHRlbXB0IHRvIGVtYmVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGlmcmFtZSwgaXQgd291bGQgd29yayBhbmQgd291bGQgbm90IGJlIGJyb2tlbiBiZWNhdXNlIG9mIG91clxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgd2hlbiBnYXBpLmlmcmFtZXMuSWZyYW1lIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGltZW91dDogTkVUV09SS19USU1FT1VULmdldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKF9iID0gKF9hID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZnJhbWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuSWZyYW1lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGdhcGkuaWZyYW1lcy5JZnJhbWUgYXZhaWxhYmxlLCByZXNvbHZlLlxyXG4gICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghISgoX2MgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxvYWQpKSB7XHJcbiAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIHJlYWR5LCBsb2FkIGdhcGkuaWZyYW1lcy5cclxuICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBpZnJhbWUgY2FsbGJhY2sgd2hlbiB0aGlzIGlzIGNhbGxlZCBzbyBhcyBub3QgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgICAgIC8vIGFueSBwcmV2aW91cyBkZWZpbmVkIGNhbGxiYWNrLiBUaGlzIGhhcHBlbnMgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkXHJcbiAgICAgICAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGluIHBhcmFsbGVsIGFuZCBjb3VsZCByZXN1bHQgaW4gdGhlIGxhdGVyIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0aW5nIHRoZSBwcmV2aW91cyBvbmUuIFRoaXMgd291bGQgZW5kIHVwIHdpdGggYSBpZnJhbWVcclxuICAgICAgICAgICAgLy8gdGltZW91dC5cclxuICAgICAgICAgICAgY29uc3QgY2JOYW1lID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdpZnJhbWVmY2InKTtcclxuICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgbm90IGF2YWlsYWJsZSwgZHluYW1pY2FsbHkgbG9hZCBwbGF0Zm9ybS5qcy5cclxuICAgICAgICAgICAgX3dpbmRvdygpW2NiTmFtZV0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBzaG91bGQgYmUgcmVhZHkuXHJcbiAgICAgICAgICAgICAgICBpZiAoISFnYXBpLmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgZmFpbGVkLCB0aHJvdyBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gTG9hZCBHQXBpIGxvYWRlci5cclxuICAgICAgICAgICAgcmV0dXJuIF9sb2FkSlMoYGh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcz9vbmxvYWQ9JHtjYk5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IGNhY2hlZCBwcm9taXNlIHRvIGFsbG93IGZvciByZXRyaWFsLlxyXG4gICAgICAgIGNhY2hlZEdBcGlMb2FkZXIgPSBudWxsO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfSk7XHJcbn1cclxubGV0IGNhY2hlZEdBcGlMb2FkZXIgPSBudWxsO1xyXG5mdW5jdGlvbiBfbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgY2FjaGVkR0FwaUxvYWRlciA9IGNhY2hlZEdBcGlMb2FkZXIgfHwgbG9hZEdhcGkoYXV0aCk7XHJcbiAgICByZXR1cm4gY2FjaGVkR0FwaUxvYWRlcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUElOR19USU1FT1VUID0gbmV3IERlbGF5KDUwMDAsIDE1MDAwKTtcclxuY29uc3QgSUZSQU1FX1BBVEggPSAnX18vYXV0aC9pZnJhbWUnO1xyXG5jb25zdCBFTVVMQVRFRF9JRlJBTUVfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2lmcmFtZSc7XHJcbmNvbnN0IElGUkFNRV9BVFRSSUJVVEVTID0ge1xyXG4gICAgc3R5bGU6IHtcclxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICB0b3A6ICctMTAwcHgnLFxyXG4gICAgICAgIHdpZHRoOiAnMXB4JyxcclxuICAgICAgICBoZWlnaHQ6ICcxcHgnXHJcbiAgICB9XHJcbn07XHJcbi8vIE1hcCBmcm9tIGFwaUhvc3QgdG8gZW5kcG9pbnQgSUQgZm9yIHBhc3NpbmcgaW50byBpZnJhbWUuIEluIGN1cnJlbnQgU0RLLCBhcGlIb3N0IGNhbiBiZSBzZXQgdG9cclxuLy8gYW55dGhpbmcgKG5vdCBmcm9tIGEgbGlzdCBvZiBlbmRwb2ludHMgd2l0aCBJRHMgYXMgaW4gbGVnYWN5KSwgc28gdGhpcyBpcyB0aGUgY2xvc2VzdCB3ZSBjYW4gZ2V0LlxyXG5jb25zdCBFSURfRlJPTV9BUElIT1NUID0gbmV3IE1hcChbXHJcbiAgICBbXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBBUElfSE9TVCAqLywgJ3AnXSxcclxuICAgIFsnc3RhZ2luZy1pZGVudGl0eXRvb2xraXQuc2FuZGJveC5nb29nbGVhcGlzLmNvbScsICdzJ10sXHJcbiAgICBbJ3Rlc3QtaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAndCddIC8vIHRlc3RcclxuXSk7XHJcbmZ1bmN0aW9uIGdldElmcmFtZVVybChhdXRoKSB7XHJcbiAgICBjb25zdCBjb25maWcgPSBhdXRoLmNvbmZpZztcclxuICAgIF9hc3NlcnQoY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBjb25zdCB1cmwgPSBjb25maWcuZW11bGF0b3JcclxuICAgICAgICA/IF9lbXVsYXRvclVybChjb25maWcsIEVNVUxBVEVEX0lGUkFNRV9QQVRIKVxyXG4gICAgICAgIDogYGh0dHBzOi8vJHthdXRoLmNvbmZpZy5hdXRoRG9tYWlufS8ke0lGUkFNRV9QQVRIfWA7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IGVpZCA9IEVJRF9GUk9NX0FQSUhPU1QuZ2V0KGF1dGguY29uZmlnLmFwaUhvc3QpO1xyXG4gICAgaWYgKGVpZCkge1xyXG4gICAgICAgIHBhcmFtcy5laWQgPSBlaWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFtZXdvcmtzID0gYXV0aC5fZ2V0RnJhbWV3b3JrcygpO1xyXG4gICAgaWYgKGZyYW1ld29ya3MubGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyYW1zLmZ3ID0gZnJhbWV3b3Jrcy5qb2luKCcsJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7dXJsfT8ke3F1ZXJ5c3RyaW5nKHBhcmFtcykuc2xpY2UoMSl9YDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfb3BlbklmcmFtZShhdXRoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgX2xvYWRHYXBpKGF1dGgpO1xyXG4gICAgY29uc3QgZ2FwaSA9IF93aW5kb3coKS5nYXBpO1xyXG4gICAgX2Fzc2VydChnYXBpLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGNvbnRleHQub3Blbih7XHJcbiAgICAgICAgd2hlcmU6IGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgdXJsOiBnZXRJZnJhbWVVcmwoYXV0aCksXHJcbiAgICAgICAgbWVzc2FnZUhhbmRsZXJzRmlsdGVyOiBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IElGUkFNRV9BVFRSSUJVVEVTLFxyXG4gICAgICAgIGRvbnRjbGVhcjogdHJ1ZVxyXG4gICAgfSwgKGlmcmFtZSkgPT4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGlmcmFtZS5yZXN0eWxlKHtcclxuICAgICAgICAgICAgLy8gUHJldmVudCBpZnJhbWUgZnJvbSBjbG9zaW5nIG9uIG1vdXNlIG91dC5cclxuICAgICAgICAgICAgc2V0SGlkZU9uTGVhdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pO1xyXG4gICAgICAgIC8vIENvbmZpcm0gaWZyYW1lIGlzIGNvcnJlY3RseSBsb2FkZWQuXHJcbiAgICAgICAgLy8gVG8gZmFsbGJhY2sgb24gZmFpbHVyZSwgc2V0IGEgdGltZW91dC5cclxuICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JUaW1lciA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSwgUElOR19USU1FT1VULmdldCgpKTtcclxuICAgICAgICAvLyBDbGVhciB0aW1lciBhbmQgcmVzb2x2ZSBwZW5kaW5nIGlmcmFtZSByZWFkeSBwcm9taXNlLlxyXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyVGltZXJBbmRSZXNvbHZlKCkge1xyXG4gICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtFcnJvclRpbWVyKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShpZnJhbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHJldHVybnMgYW4gSVRoZW5hYmxlLiBIb3dldmVyIHRoZSByZWplY3QgcGFydCBkb2VzIG5vdCBjYWxsXHJcbiAgICAgICAgLy8gd2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgaWZyYW1lLnBpbmcoY2xlYXJUaW1lckFuZFJlc29sdmUpLnRoZW4oY2xlYXJUaW1lckFuZFJlc29sdmUsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEJBU0VfUE9QVVBfT1BUSU9OUyA9IHtcclxuICAgIGxvY2F0aW9uOiAneWVzJyxcclxuICAgIHJlc2l6YWJsZTogJ3llcycsXHJcbiAgICBzdGF0dXNiYXI6ICd5ZXMnLFxyXG4gICAgdG9vbGJhcjogJ25vJ1xyXG59O1xyXG5jb25zdCBERUZBVUxUX1dJRFRIID0gNTAwO1xyXG5jb25zdCBERUZBVUxUX0hFSUdIVCA9IDYwMDtcclxuY29uc3QgVEFSR0VUX0JMQU5LID0gJ19ibGFuayc7XHJcbmNvbnN0IEZJUkVGT1hfRU1QVFlfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG5jbGFzcyBBdXRoUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Iod2luZG93KSB7XHJcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgdGhpcy5hc3NvY2lhdGVkRXZlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2luZG93KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX29wZW4oYXV0aCwgdXJsLCBuYW1lLCB3aWR0aCA9IERFRkFVTFRfV0lEVEgsIGhlaWdodCA9IERFRkFVTFRfSEVJR0hUKSB7XHJcbiAgICBjb25zdCB0b3AgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCAtIGhlaWdodCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgY29uc3QgbGVmdCA9IE1hdGgubWF4KCh3aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGggLSB3aWR0aCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgbGV0IHRhcmdldCA9ICcnO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgQkFTRV9QT1BVUF9PUFRJT05TKSwgeyB3aWR0aDogd2lkdGgudG9TdHJpbmcoKSwgaGVpZ2h0OiBoZWlnaHQudG9TdHJpbmcoKSwgdG9wLFxyXG4gICAgICAgIGxlZnQgfSk7XHJcbiAgICAvLyBDaHJvbWUgaU9TIDcgYW5kIDggaXMgcmV0dXJuaW5nIGFuIHVuZGVmaW5lZCBwb3B1cCB3aW4gd2hlbiB0YXJnZXQgaXNcclxuICAgIC8vIHNwZWNpZmllZCwgZXZlbiB0aG91Z2ggdGhlIHBvcHVwIGlzIG5vdCBuZWNlc3NhcmlseSBibG9ja2VkLlxyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICAgIHRhcmdldCA9IF9pc0Nocm9tZUlPUyh1YSkgPyBUQVJHRVRfQkxBTksgOiBuYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKF9pc0ZpcmVmb3godWEpKSB7XHJcbiAgICAgICAgLy8gRmlyZWZveCBjb21wbGFpbnMgd2hlbiBpbnZhbGlkIFVSTHMgYXJlIHBvcHBlZCBvdXQuIEhhY2t5IHdheSB0byBieXBhc3MuXHJcbiAgICAgICAgdXJsID0gdXJsIHx8IEZJUkVGT1hfRU1QVFlfVVJMO1xyXG4gICAgICAgIC8vIEZpcmVmb3ggZGlzYWJsZXMgYnkgZGVmYXVsdCBzY3JvbGxpbmcgb24gcG9wdXAgd2luZG93cywgd2hpY2ggY2FuIGNyZWF0ZVxyXG4gICAgICAgIC8vIGlzc3VlcyB3aGVuIHRoZSB1c2VyIGhhcyBtYW55IEdvb2dsZSBhY2NvdW50cywgZm9yIGluc3RhbmNlLlxyXG4gICAgICAgIG9wdGlvbnMuc2Nyb2xsYmFycyA9ICd5ZXMnO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3B0aW9uc1N0cmluZyA9IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLnJlZHVjZSgoYWNjdW0sIFtrZXksIHZhbHVlXSkgPT4gYCR7YWNjdW19JHtrZXl9PSR7dmFsdWV9LGAsICcnKTtcclxuICAgIGlmIChfaXNJT1NTdGFuZGFsb25lKHVhKSAmJiB0YXJnZXQgIT09ICdfc2VsZicpIHtcclxuICAgICAgICBvcGVuQXNOZXdXaW5kb3dJT1ModXJsIHx8ICcnLCB0YXJnZXQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG51bGwpO1xyXG4gICAgfVxyXG4gICAgLy8gYWJvdXQ6YmxhbmsgZ2V0dGluZyBzYW5pdGl6ZWQgY2F1c2luZyBicm93c2VycyBsaWtlIElFL0VkZ2UgdG8gZGlzcGxheVxyXG4gICAgLy8gYnJpZWYgZXJyb3IgbWVzc2FnZSBiZWZvcmUgcmVkaXJlY3RpbmcgdG8gaGFuZGxlci5cclxuICAgIGNvbnN0IG5ld1dpbiA9IHdpbmRvdy5vcGVuKHVybCB8fCAnJywgdGFyZ2V0LCBvcHRpb25zU3RyaW5nKTtcclxuICAgIF9hc3NlcnQobmV3V2luLCBhdXRoLCBcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovKTtcclxuICAgIC8vIEZsYWt5IG9uIElFIGVkZ2UsIGVuY2Fwc3VsYXRlIHdpdGggYSB0cnkgYW5kIGNhdGNoLlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdXaW4uZm9jdXMoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG5ld1dpbik7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFzTmV3V2luZG93SU9TKHVybCwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGVsLmhyZWYgPSB1cmw7XHJcbiAgICBlbC50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBjbGljayA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7XHJcbiAgICBjbGljay5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDEsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAxLCBudWxsKTtcclxuICAgIGVsLmRpc3BhdGNoRXZlbnQoY2xpY2spO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVUkwgZm9yIEF1dGhlbnRpY2F0aW9uIHdpZGdldCB3aGljaCB3aWxsIGluaXRpYXRlIHRoZSBPQXV0aCBoYW5kc2hha2VcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBXSURHRVRfUEFUSCA9ICdfXy9hdXRoL2hhbmRsZXInO1xyXG4vKipcclxuICogVVJMIGZvciBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IEVNVUxBVE9SX1dJREdFVF9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaGFuZGxlcic7XHJcbmZ1bmN0aW9uIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIHJlZGlyZWN0VXJsLCBldmVudElkLCBhZGRpdGlvbmFsUGFyYW1zKSB7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmFwaUtleSwgYXV0aCwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8pO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogYXV0aC5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICBhdXRoVHlwZSxcclxuICAgICAgICByZWRpcmVjdFVybCxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTixcclxuICAgICAgICBldmVudElkXHJcbiAgICB9O1xyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0RGVmYXVsdExhbmd1YWdlKGF1dGgubGFuZ3VhZ2VDb2RlKTtcclxuICAgICAgICBwYXJhbXMucHJvdmlkZXJJZCA9IHByb3ZpZGVyLnByb3ZpZGVySWQgfHwgJyc7XHJcbiAgICAgICAgaWYgKCFpc0VtcHR5KHByb3ZpZGVyLmdldEN1c3RvbVBhcmFtZXRlcnMoKSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmN1c3RvbVBhcmFtZXRlcnMgPSBKU09OLnN0cmluZ2lmeShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPIHNldCBhZGRpdGlvbmFsUGFyYW1zIGZyb20gdGhlIHByb3ZpZGVyIGFzIHdlbGw/XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYWRkaXRpb25hbFBhcmFtcyB8fCB7fSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocHJvdmlkZXIgaW5zdGFuY2VvZiBCYXNlT0F1dGhQcm92aWRlcikge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHByb3ZpZGVyLmdldFNjb3BlcygpLmZpbHRlcihzY29wZSA9PiBzY29wZSAhPT0gJycpO1xyXG4gICAgICAgIGlmIChzY29wZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuc2NvcGVzID0gc2NvcGVzLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYXV0aC50ZW5hbnRJZCkge1xyXG4gICAgICAgIHBhcmFtcy50aWQgPSBhdXRoLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGVpZCBhcyBlbmRpcG9pbnRJZFxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGZ3IGFzIEZyYW1ld29ya3Muam9pbihcIixcIilcclxuICAgIGNvbnN0IHBhcmFtc0RpY3QgPSBwYXJhbXM7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwYXJhbXNEaWN0KSkge1xyXG4gICAgICAgIGlmIChwYXJhbXNEaWN0W2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zRGljdFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBgJHtnZXRIYW5kbGVyQmFzZShhdXRoKX0/JHtxdWVyeXN0cmluZyhwYXJhbXNEaWN0KS5zbGljZSgxKX1gO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhhbmRsZXJCYXNlKHsgY29uZmlnIH0pIHtcclxuICAgIGlmICghY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Y29uZmlnLmF1dGhEb21haW59LyR7V0lER0VUX1BBVEh9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRPUl9XSURHRVRfUEFUSCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBzcGVjaWFsIHdlYiBzdG9yYWdlIGV2ZW50XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSA9ICd3ZWJTdG9yYWdlU3VwcG9ydCc7XHJcbmNsYXNzIEJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzID0ge307XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyBXcmFwcGluZyBpbiBhc3luYyBldmVuIHRob3VnaCB3ZSBkb24ndCBhd2FpdCBhbnl3aGVyZSBpbiBvcmRlclxyXG4gICAgLy8gdG8gbWFrZSBzdXJlIGVycm9ycyBhcmUgcmFpc2VkIGFzIHByb21pc2UgcmVqZWN0aW9uc1xyXG4gICAgYXN5bmMgX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoKF9hID0gdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hbmFnZXIsICdfaW5pdGlhbGl6ZSgpIG5vdCBjYWxsZWQgYmVmb3JlIF9vcGVuUG9wdXAoKScpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBfb3BlbihhdXRoLCB1cmwsIF9nZW5lcmF0ZUV2ZW50SWQoKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICAgICAgX3NldFdpbmRvd0xvY2F0aW9uKF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtYW5hZ2VyLCBwcm9taXNlIH0gPSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICAgICAgaWYgKG1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWFuYWdlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z0Fzc2VydChwcm9taXNlLCAnSWYgbWFuYWdlciBpcyBub3Qgc2V0LCBwcm9taXNlIHNob3VsZCBiZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuaW5pdEFuZEdldE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2tleV0gPSB7IHByb21pc2UgfTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSBhd2FpdCBfb3BlbklmcmFtZShhdXRoKTtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IEF1dGhFdmVudE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgaWZyYW1lLnJlZ2lzdGVyKCdhdXRoRXZlbnQnLCAoaWZyYW1lRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChpZnJhbWVFdmVudCA9PT0gbnVsbCB8fCBpZnJhbWVFdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWZyYW1lRXZlbnQuYXV0aEV2ZW50LCBhdXRoLCBcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHNwbGl0dGluZyByZWRpcmVjdCBhbmQgcG9wdXAgZXZlbnRzIGVhcmxpZXIgb25cclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IG1hbmFnZXIub25FdmVudChpZnJhbWVFdmVudC5hdXRoRXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IGhhbmRsZWQgPyBcIkFDS1wiIC8qIEFDSyAqLyA6IFwiRVJST1JcIiAvKiBFUlJPUiAqLyB9O1xyXG4gICAgICAgIH0sIGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0gPSB7IG1hbmFnZXIgfTtcclxuICAgICAgICB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldID0gaWZyYW1lO1xyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV07XHJcbiAgICAgICAgaWZyYW1lLnNlbmQoV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVksIHsgdHlwZTogV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgfSwgcmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IChfYSA9IHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdFswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1dFQl9TVE9SQUdFX1NVUFBPUlRfS0VZXTtcclxuICAgICAgICAgICAgaWYgKGlzU3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNiKCEhaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgLy8gTW9iaWxlIGJyb3dzZXJzIGFuZCBTYWZhcmkgbmVlZCB0byBvcHRpbWlzdGljYWxseSBpbml0aWFsaXplXHJcbiAgICAgICAgcmV0dXJuIF9pc01vYmlsZUJyb3dzZXIoKSB8fCBfaXNTYWZhcmkoKSB8fCBfaXNJT1MoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGJyb3dzZXJcclxuICogYmFzZWQgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcblxuY2xhc3MgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgfVxyXG4gICAgX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNlc3Npb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5yb2xsXCIgLyogRU5ST0xMICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplRW5yb2xsKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCwgZGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbmluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZVNpZ25JbihhdXRoLCBzZXNzaW9uLmNyZWRlbnRpYWwpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgndW5leHBlY3RlZCBNdWx0aUZhY3RvclNlc3Npb25UeXBlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiB7QGluaGVyaXRkb2MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwgZXh0ZW5kcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUNyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVFbnJvbGwoYXV0aCwgaWRUb2tlbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplU2lnbkluKGF1dGgsIG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplU2lnbkluUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbCxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gdG8gY29uZmlybSBvd25lcnNoaXAgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBob25lQXV0aENyZWRlbnRpYWwgLSBBIGNyZWRlbnRpYWwgcHJvdmlkZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWx9LlxyXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxyXG4gICAgICoge0BsaW5rIE11bHRpRmFjdG9yUmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2VydGlvbihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsLl9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2F1dGhcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjE3LjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQXV0aEludGVyb3Age1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGdldFVpZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuYXV0aC5jdXJyZW50VXNlci5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgcmV0dXJuIHsgYWNjZXNzVG9rZW4gfTtcclxuICAgIH1cclxuICAgIGFkZEF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuYXV0aC5vbklkVG9rZW5DaGFuZ2VkKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKCgoX2EgPSB1c2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB8fCBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLnNldChsaXN0ZW5lciwgdW5zdWJzY3JpYmUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmludGVybmFsTGlzdGVuZXJzLmdldChsaXN0ZW5lcik7XHJcbiAgICAgICAgaWYgKCF1bnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZSwgXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIk5vZGVcIiAvKiBOT0RFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ25vZGUnO1xyXG4gICAgICAgIGNhc2UgXCJSZWFjdE5hdGl2ZVwiIC8qIFJFQUNUX05BVElWRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdybic7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICd3ZWJ3b3JrZXInO1xyXG4gICAgICAgIGNhc2UgXCJDb3Jkb3ZhXCIgLyogQ09SRE9WQSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdjb3Jkb3ZhJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBdXRoKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGhcIiAvKiBBVVRIICovLCAoY29udGFpbmVyLCB7IG9wdGlvbnM6IGRlcHMgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgeyBhcGlLZXksIGF1dGhEb21haW4gfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgICAgIHJldHVybiAoYXBwID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChhcGlLZXkgJiYgIWFwaUtleS5pbmNsdWRlcygnOicpLCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywgeyBhcHBOYW1lOiBhcHAubmFtZSB9KTtcclxuICAgICAgICAgICAgLy8gQXV0aCBkb21haW4gaXMgb3B0aW9uYWwgaWYgSWRQIHNpZ24gaW4gaXNuJ3QgYmVpbmcgdXNlZFxyXG4gICAgICAgICAgICBfYXNzZXJ0KCEoYXV0aERvbWFpbiA9PT0gbnVsbCB8fCBhdXRoRG9tYWluID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdXRoRG9tYWluLmluY2x1ZGVzKCc6JykpLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXksXHJcbiAgICAgICAgICAgICAgICBhdXRoRG9tYWluLFxyXG4gICAgICAgICAgICAgICAgY2xpZW50UGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICBhcGlIb3N0OiBcImlkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbVwiIC8qIEFQSV9IT1NUICovLFxyXG4gICAgICAgICAgICAgICAgdG9rZW5BcGlIb3N0OiBcInNlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tXCIgLyogVE9LRU5fQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgICAgICBhcGlTY2hlbWU6IFwiaHR0cHNcIiAvKiBBUElfU0NIRU1FICovLFxyXG4gICAgICAgICAgICAgICAgc2RrQ2xpZW50VmVyc2lvbjogX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IG5ldyBBdXRoSW1wbChhcHAsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIF9pbml0aWFsaXplQXV0aEluc3RhbmNlKGF1dGhJbnN0YW5jZSwgZGVwcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoSW5zdGFuY2U7XHJcbiAgICAgICAgfSkoYXBwKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEF1dGggY2FuIG9ubHkgYmUgaW5pdGlhbGl6ZWQgYnkgZXhwbGljaXRseSBjYWxsaW5nIGdldEF1dGgoKSBvciBpbml0aWFsaXplQXV0aCgpXHJcbiAgICAgICAgICogRm9yIHdoeSB3ZSBkbyB0aGlzLCBTZWUgZ28vZmlyZWJhc2UtbmV4dC1hdXRoLWluaXRcclxuICAgICAgICAgKi9cclxuICAgICAgICAuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJlY2F1c2UgYWxsIGZpcmViYXNlIHByb2R1Y3RzIHRoYXQgZGVwZW5kIG9uIGF1dGggZGVwZW5kIG9uIGF1dGgtaW50ZXJuYWwgZGlyZWN0bHksXHJcbiAgICAgICAgICogd2UgbmVlZCB0byBpbml0aWFsaXplIGF1dGgtaW50ZXJuYWwgYWZ0ZXIgYXV0aCBpcyBpbml0aWFsaXplZCB0byBtYWtlIGl0IGF2YWlsYWJsZSB0byBvdGhlciBmaXJlYmFzZSBwcm9kdWN0cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICAuc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soKGNvbnRhaW5lciwgX2luc3RhbmNlSWRlbnRpZmllciwgX2luc3RhbmNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aEludGVybmFsUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIgLyogQVVUSF9JTlRFUk5BTCAqLyk7XHJcbiAgICAgICAgYXV0aEludGVybmFsUHJvdmlkZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfSkpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJhdXRoLWludGVybmFsXCIgLyogQVVUSF9JTlRFUk5BTCAqLywgY29udGFpbmVyID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGNvbnRhaW5lci5nZXRQcm92aWRlcihcImF1dGhcIiAvKiBBVVRIICovKS5nZXRJbW1lZGlhdGUoKSk7XHJcbiAgICAgICAgcmV0dXJuIChhdXRoID0+IG5ldyBBdXRoSW50ZXJvcChhdXRoKSkoYXV0aCk7XHJcbiAgICB9LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKS5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgQXV0aCBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS5cclxuICogSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhbiBBdXRoIGluc3RhbmNlIHdpdGggcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdCBkZXBlbmRlbmNpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUgRmlyZWJhc2UgQXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBdXRoKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gICAgICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcixcclxuICAgICAgICBwZXJzaXN0ZW5jZTogW1xyXG4gICAgICAgICAgICBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG59XHJcbnJlZ2lzdGVyQXV0aChcIkJyb3dzZXJcIiAvKiBCUk9XU0VSICovKTtcblxuZXhwb3J0IHsgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCBhcyAkLCBBY3Rpb25Db2RlT3BlcmF0aW9uIGFzIEEsIHByb2RFcnJvck1hcCBhcyBCLCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgYXMgQywgaW5pdGlhbGl6ZUF1dGggYXMgRCwgY29ubmVjdEF1dGhFbXVsYXRvciBhcyBFLCBGYWN0b3JJZCBhcyBGLCBBdXRoQ3JlZGVudGlhbCBhcyBHLCBFbWFpbEF1dGhDcmVkZW50aWFsIGFzIEgsIE9BdXRoQ3JlZGVudGlhbCBhcyBJLCBQaG9uZUF1dGhDcmVkZW50aWFsIGFzIEosIGluTWVtb3J5UGVyc2lzdGVuY2UgYXMgSywgRW1haWxBdXRoUHJvdmlkZXIgYXMgTCwgRmFjZWJvb2tBdXRoUHJvdmlkZXIgYXMgTSwgR29vZ2xlQXV0aFByb3ZpZGVyIGFzIE4sIE9wZXJhdGlvblR5cGUgYXMgTywgUGhvbmVBdXRoUHJvdmlkZXIgYXMgUCwgR2l0aHViQXV0aFByb3ZpZGVyIGFzIFEsIFJlY2FwdGNoYVZlcmlmaWVyIGFzIFIsIFNpZ25Jbk1ldGhvZCBhcyBTLCBPQXV0aFByb3ZpZGVyIGFzIFQsIFNBTUxBdXRoUHJvdmlkZXIgYXMgVSwgVHdpdHRlckF1dGhQcm92aWRlciBhcyBWLCBzaWduSW5Bbm9ueW1vdXNseSBhcyBXLCBzaWduSW5XaXRoQ3JlZGVudGlhbCBhcyBYLCBsaW5rV2l0aENyZWRlbnRpYWwgYXMgWSwgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCBhcyBaLCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4gYXMgXywgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBhcyBhLCBjb25maXJtUGFzc3dvcmRSZXNldCBhcyBhMCwgYXBwbHlBY3Rpb25Db2RlIGFzIGExLCBjaGVja0FjdGlvbkNvZGUgYXMgYTIsIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlIGFzIGEzLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYTQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE1LCBzZW5kU2lnbkluTGlua1RvRW1haWwgYXMgYTYsIGlzU2lnbkluV2l0aEVtYWlsTGluayBhcyBhNywgc2lnbkluV2l0aEVtYWlsTGluayBhcyBhOCwgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwgYXMgYTksIF9nZXRSZWRpcmVjdFJlc3VsdCBhcyBhQSwgX2NsZWFyUmVkaXJlY3RPdXRjb21lcyBhcyBhQiwgX2Nhc3RBdXRoIGFzIGFDLCBVc2VySW1wbCBhcyBhRCwgQXV0aEltcGwgYXMgYUUsIF9nZXRDbGllbnRWZXJzaW9uIGFzIGFGLCBfZ2VuZXJhdGVFdmVudElkIGFzIGFHLCBBdXRoUG9wdXAgYXMgYUgsIEZldGNoUHJvdmlkZXIgYXMgYUksIFNBTUxBdXRoQ3JlZGVudGlhbCBhcyBhSiwgc2VuZEVtYWlsVmVyaWZpY2F0aW9uIGFzIGFhLCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCBhcyBhYiwgQWN0aW9uQ29kZVVSTCBhcyBhYywgcGFyc2VBY3Rpb25Db2RlVVJMIGFzIGFkLCB1cGRhdGVQcm9maWxlIGFzIGFlLCB1cGRhdGVFbWFpbCBhcyBhZiwgdXBkYXRlUGFzc3dvcmQgYXMgYWcsIGdldElkVG9rZW4gYXMgYWgsIGdldElkVG9rZW5SZXN1bHQgYXMgYWksIHVubGluayBhcyBhaiwgZ2V0QWRkaXRpb25hbFVzZXJJbmZvIGFzIGFrLCByZWxvYWQgYXMgYWwsIGdldE11bHRpRmFjdG9yUmVzb2x2ZXIgYXMgYW0sIG11bHRpRmFjdG9yIGFzIGFuLCBfaXNJT1M3T3I4IGFzIGFvLCBkZWJ1Z0Fzc2VydCBhcyBhcCwgX2lzSU9TIGFzIGFxLCBfaXNBbmRyb2lkIGFzIGFyLCBfZmFpbCBhcyBhcywgX2dldFJlZGlyZWN0VXJsIGFzIGF0LCBfZ2V0UHJvamVjdENvbmZpZyBhcyBhdSwgX2NyZWF0ZUVycm9yIGFzIGF2LCBfYXNzZXJ0IGFzIGF3LCBfZ2V0SW5zdGFuY2UgYXMgYXgsIF9wZXJzaXN0ZW5jZUtleU5hbWUgYXMgYXksIEF1dGhFdmVudE1hbmFnZXIgYXMgYXosIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGFzIGIsIHNpZ25JbldpdGhQb3B1cCBhcyBjLCBsaW5rV2l0aFBvcHVwIGFzIGQsIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwIGFzIGUsIHNpZ25JbldpdGhSZWRpcmVjdCBhcyBmLCBsaW5rV2l0aFJlZGlyZWN0IGFzIGcsIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IGFzIGgsIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgYXMgaSwgZ2V0UmVkaXJlY3RSZXN1bHQgYXMgaiwgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciBhcyBrLCBsaW5rV2l0aFBob25lTnVtYmVyIGFzIGwsIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IgYXMgbSwgZ2V0QXV0aCBhcyBuLCBQcm92aWRlcklkIGFzIG8sIHNldFBlcnNpc3RlbmNlIGFzIHAsIG9uSWRUb2tlbkNoYW5nZWQgYXMgcSwgcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIgYXMgciwgc2lnbkluV2l0aFBob25lTnVtYmVyIGFzIHMsIG9uQXV0aFN0YXRlQ2hhbmdlZCBhcyB0LCB1cGRhdGVQaG9uZU51bWJlciBhcyB1LCB1c2VEZXZpY2VMYW5ndWFnZSBhcyB2LCB1cGRhdGVDdXJyZW50VXNlciBhcyB3LCBzaWduT3V0IGFzIHgsIGRlbGV0ZVVzZXIgYXMgeSwgZGVidWdFcnJvck1hcCBhcyB6IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC05ZmYwZmE5Yy5qcy5tYXBcbiIsImltcG9ydCB7IGRiLCBzdG9yYWdlIH0gZnJvbSAnLi9zZXR1cC5qcyc7XG5pbXBvcnQgeyByZWYgYXMgc3RvcmFnZVJlZiwgdXBsb2FkQnl0ZXMsIGdldERvd25sb2FkVVJMIH0gZnJvbSBcImZpcmViYXNlL3N0b3JhZ2VcIjtcbmltcG9ydCB7IGRvYyBhcyBmaXJlc3RvcmVEb2MsIHVwZGF0ZURvYywgc2VydmVyVGltZXN0YW1wIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgZG9jU3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VkaXREb2MnKTtcbiAgICBpZiAoZG9jU3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGRvYyA9IEpTT04ucGFyc2UoZG9jU3RyaW5nKTtcbiAgICAgICAgZWRpdERvY3VtZW50KGRvYyk7IFxuICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KFwiTm8gZG9jdW1lbnQgZm91bmQgdG8gZWRpdCFcIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlZGl0RG9jdW1lbnQoZG9jKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kb2N1bWVudC1wYWdlLWNvbnRhaW5lcicpLmlubmVySFRNTCA9IFxuICAgIGBcbiAgICA8Zm9ybSBhY3Rpb249XCJcIiBpZD1cImVkaXQtZG9jdW1lbnQtcGFnZS1mb3JtXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbWItM1wiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImVkaXQtZG9jdW1lbnQtcGFnZS1kb2N1bWVudC1uYW1lXCIgY2xhc3M9XCJjb2wtc20tNCBjb2wtZm9ybS1sYWJlbFwiPkVudGVyIG5hbWUgb2YgdGhlIGRvY3VtZW50PC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tOFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJlZGl0LWRvY3VtZW50LXBhZ2UtZG9jdW1lbnQtbmFtZVwiIHZhbHVlPVwiJHtkb2MuZG9jdW1lbnROYW1lfVwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93IG1iLTNcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlZGl0LWRvY3VtZW50LXBhZ2UtdHlwZS1vZi1kb2N1bWVudFwiIGNsYXNzPVwiY29sLXNtLTQgY29sLWZvcm0tbGFiZWxcIj5TZWxlY3QgdGhlIHR5cGUgb2YgdGhlIGRvY3VtZW50PC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tOFwiPlxuICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLXNlbGVjdCBmb3JtLXNlbGVjdC1zbVwiIGFyaWEtbGFiZWw9XCIuZm9ybS1zZWxlY3Qtc20gZXhhbXBsZVwiIGlkPVwiZWRpdC1kb2N1bWVudC1wYWdlLXR5cGUtb2YtZG9jdW1lbnRcIiA+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gc2VsZWN0ZWQ+U2VsZWN0IHRoZSB0eXBlIG9mIGRvY3VtZW50PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+QWFkaGFhciBjYXJkPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyXCI+QXJtcyBsaWNlbnNlPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIzXCI+QmFuayBwYXNzYm9vazwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNFwiPkJhbmsgc3RhdGVtZW50czwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNVwiPkJpcnRoIGNlcnRpZmljYXRlPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI2XCI+RG9taWNpbGUgY2VydGlmaWNhdGUgaXNzdWVkIGJ5IGdvdmVybm1lbnQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjdcIj5Ecml2aW5nIExpY2Vuc2U8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjhcIj5FZHVjYXRpb25hbCBjZXJ0aWZpY2F0ZTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiOVwiPkVsZWN0b3JzIHBob3RvIGlkZW50aXR5IGNhcmQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjEwXCI+RWxlY3RyaWNpdHkgYmlsbDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMTFcIj5HYXpldHRlZCBvZmZpY2VyIGlzc3VlZCBkb2N1bWVudHM8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjEyXCI+R2FzIGNvbm5lY3Rpb24gZGV0YWlsczwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMTNcIj5MZXR0ZXIgZnJvbSBlbXBsb3llcjwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMTRcIj5NYXJyaWFnZSBjZXJ0aWZpY2F0ZTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMTVcIj5NTlJFR0EgSm9iIGNhcmQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjE2XCI+UEFOIGNhcmQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjE3XCI+UGFzc3BvcnQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjE4XCI+UGVuc2lvbiBjYXJkPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxOVwiPlBob3RvIGNyZWRpdCBjYXJkPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyMFwiPlJlbnQgYWdyZWVtZW50PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyMVwiPlJhdGlvbiBjYXJkPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyMlwiPlRheCBjYXJkPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyM1wiPlRlbGVwaG9uZSBiaWxsPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyNFwiPlZvdGVyIElEPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbWItM1wiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImVkaXQtZG9jdW1lbnQtcGFnZS1kb2N1bWVudC11cGxvYWRcIiBjbGFzcz1cImNvbC1zbS00XCI+VXBsb2FkIHlvdXIgZG9jdW1lbnQ8L2xhYmVsPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS04XCI+XG4gICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5maWxlVXJsXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGA8cD5BbHJlYWR5IHVwbG9hZGVkOiA8YSBocmVmPVwiJHtkb2MuZmlsZVVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj4ke2RvYy5kb2N1bWVudE5hbWV9PC9hPjwvcD5gXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiZWRpdC1kb2N1bWVudC1wYWdlLWRvY3VtZW50LXVwbG9hZFwiIG5hbWU9XCJkb2N1bWVudFwiIGFjY2VwdD1cInBkZiwgaW1hZ2UvKlwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLThcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gaWQ9XCJlZGl0LWRvY3VtZW50LXBhZ2Utc3VibWl0LWJ1dHRvblwiIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImNvbC1zbS0xIG9mZnNldC00IG10LTRcIj5TdWJtaXQ8L2J1dHRvbj5cbiAgICA8L2Zvcm0+YFxuICAgIC8vIE5vdyBzZWxlY3QgdGhlIG9wdGlvbiBiYXNlZCBvbiBURVhUXG4gICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWRvY3VtZW50LXBhZ2UtdHlwZS1vZi1kb2N1bWVudCcpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBzZWxlY3RFbGVtZW50Lm9wdGlvbnM7XG5cbiAgICBjb25zdCBlZGl0RG9jdW1lbnRQYWdlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWRvY3VtZW50LXBhZ2UtZm9ybScpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChvcHRpb25zW2ldLnRleHQgPT09IGRvYy5kb2N1bWVudFR5cGUpIHtcbiAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVkaXREb2N1bWVudFBhZ2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIGZ1bmN0aW9uIChlKXtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IGRvY1N0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlZGl0RG9jJyk7XG4gICAgICAgIGlmICghZG9jU3RyaW5nKSB7XG4gICAgICAgICAgICBhbGVydCgnTm8gZG9jdW1lbnQgdG8gZWRpdC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgIFxuICAgICAgICBjb25zdCBlZGl0RG9jdW1lbnRQYWdlTmFtZU9mRG9jdW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZG9jdW1lbnQtcGFnZS1kb2N1bWVudC1uYW1lXCIpLnZhbHVlO1xuICAgICAgICBjb25zdCBlZGl0RG9jdW1lbnRQYWdlVHlwZU9mRG9jdW1lbnRPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LWRvY3VtZW50LXBhZ2UtdHlwZS1vZi1kb2N1bWVudFwiKTtcbiAgICAgICAgY29uc3QgZWRpdERvY3VtZW50UGFnZVR5cGVPZkRvY3VtZW50U2VsZWN0ZWQgPSBlZGl0RG9jdW1lbnRQYWdlVHlwZU9mRG9jdW1lbnRPcHRpb25zLm9wdGlvbnNbZWRpdERvY3VtZW50UGFnZVR5cGVPZkRvY3VtZW50T3B0aW9ucy5zZWxlY3RlZEluZGV4XS50ZXh0O1xuXG4gICAgICAgIGNvbnN0IG9sZERvYyA9IEpTT04ucGFyc2UoZG9jU3RyaW5nKTtcbiAgICAgICAgbGV0IG5ld0ZpbGVVUkwgPSBvbGREb2MuZmlsZVVybDtcblxuICAgICAgICBjb25zdCBlZGl0RG9jdW1lbnRQYWdlRmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZG9jdW1lbnQtcGFnZS1kb2N1bWVudC11cGxvYWQnKTtcbiAgICAgICAgdmFyIGVkaXREb2N1bWVudFBhZ2VGaWxlVXBsb2FkZWQ7XG4gICAgICAgIHZhciBlZGl0RG9jdW1lbnRQYWdlRG93bmxvYWRVUkw7XG5cbiAgICAgICAgaWYoZWRpdERvY3VtZW50UGFnZUZpbGVJbnB1dC5maWxlcy5sZW5ndGgpe1xuICAgICAgICAgICAgZWRpdERvY3VtZW50UGFnZUZpbGVVcGxvYWRlZCA9IGVkaXREb2N1bWVudFBhZ2VGaWxlSW5wdXQuZmlsZXNbMF07XG5cbiAgICAgICAgICAgIGlmIChlZGl0RG9jdW1lbnRQYWdlRmlsZVVwbG9hZGVkLnNpemUgPiAyICogMTAyNCAqIDEwMjQpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZpbGUgc2l6ZSBtdXN0IGJlIGxlc3MgdGhhbiAyTUIuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvY2VlZCB3aXRoIHVwbG9hZCB0byBGaXJlYmFzZSBTdG9yYWdlXG4gICAgICAgICAgICBjb25zdCBuZXdTdG9yYWdlUmVmID0gc3RvcmFnZVJlZihzdG9yYWdlLCBgZG9jdW1lbnRzLyR7ZWRpdERvY3VtZW50UGFnZUZpbGVVcGxvYWRlZC5uYW1lfV8ke0RhdGUubm93KCl9YCk7XG4gICAgICAgICAgICBhd2FpdCB1cGxvYWRCeXRlcyhuZXdTdG9yYWdlUmVmLCBlZGl0RG9jdW1lbnRQYWdlRmlsZVVwbG9hZGVkKTtcbiAgICAgICAgICAgIGVkaXREb2N1bWVudFBhZ2VEb3dubG9hZFVSTCA9IGF3YWl0IGdldERvd25sb2FkVVJMKG5ld1N0b3JhZ2VSZWYpO1xuICAgICAgICAgICAgbmV3RmlsZVVSTCA9IGVkaXREb2N1bWVudFBhZ2VEb3dubG9hZFVSTDtcbiAgICAgICAgfVxuICAgICAgIFxuICAgICAgICBjb25zdCBkb2NSZWYgPSBmaXJlc3RvcmVEb2MoZGIsIFwiZG9jdW1lbnRzXCIsIG9sZERvYy5pZCk7XG4gICAgICAgXG4gICAgICAgIC8vIFRoZW4gc2F2ZSBtZXRhZGF0YSB0byBGaXJlc3RvcmVcbiAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwge1xuICAgICAgICAgICAgZG9jdW1lbnROYW1lOiBlZGl0RG9jdW1lbnRQYWdlTmFtZU9mRG9jdW1lbnQsXG4gICAgICAgICAgICBkb2N1bWVudFR5cGU6IGVkaXREb2N1bWVudFBhZ2VUeXBlT2ZEb2N1bWVudFNlbGVjdGVkLFxuICAgICAgICAgICAgZmlsZU5hbWU6IGVkaXREb2N1bWVudFBhZ2VGaWxlVXBsb2FkZWQgPyBlZGl0RG9jdW1lbnRQYWdlRmlsZVVwbG9hZGVkLm5hbWUgOiBvbGREb2MuZmlsZU5hbWUsXG4gICAgICAgICAgICBmaWxlVHlwZTogZWRpdERvY3VtZW50UGFnZUZpbGVVcGxvYWRlZCA/IGVkaXREb2N1bWVudFBhZ2VGaWxlVXBsb2FkZWQudHlwZSA6IG9sZERvYy5maWxlVHlwZSxcbiAgICAgICAgICAgIGZpbGVTaXplOiBlZGl0RG9jdW1lbnRQYWdlRmlsZVVwbG9hZGVkID8gZWRpdERvY3VtZW50UGFnZUZpbGVVcGxvYWRlZC5zaXplIDogb2xkRG9jLmZpbGVTaXplLFxuICAgICAgICAgICAgZmlsZVVybDogbmV3RmlsZVVSTCxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKClcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIGFsZXJ0KFwiRG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICd2aWV3X2RvY3VtZW50c19wYWdlLmh0bWwnOyAgLy8gUmVkaXJlY3QgYmFja1xuICAgIH0pXG5cbn1cbiIsImltcG9ydCB7aW5pdGlhbGl6ZUFwcH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7Z2V0QXV0aCwgUmVjYXB0Y2hhVmVyaWZpZXJ9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuLy8gRmlyZXN0b3JlIChmb3Igc3RvcmluZyBtZXRhZGF0YSlcbmltcG9ydCB7IGdldEZpcmVzdG9yZSwgY29sbGVjdGlvbiwgYWRkRG9jIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vLyBGaXJlYmFzZSBTdG9yYWdlIChmb3IgdXBsb2FkaW5nIGZpbGVzKVxuaW1wb3J0IHsgZ2V0U3RvcmFnZSwgcmVmLCB1cGxvYWRCeXRlcywgZ2V0RG93bmxvYWRVUkwgfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xuXG4vLyBjb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcbi8vIFx0YXBpS2V5OiBcIkFJemFTeURFYlgtZ1E2RndKRDVvWkduYW9pSnU5cUlhQUcyTFowTVwiLFxuLy8gXHRhdXRoRG9tYWluOiBcInVwbG9hZC0yNWYwMS5maXJlYmFzZWFwcC5jb21cIixcbi8vIFx0cHJvamVjdElkOiBcInVwbG9hZC0yNWYwMVwiLFxuLy8gXHRzdG9yYWdlQnVja2V0OiBcInVwbG9hZC0yNWYwMS5maXJlYmFzZXN0b3JhZ2UuYXBwXCIsXG4vLyBcdG1lc3NhZ2luZ1NlbmRlcklkOiBcIjk3MTY3NDg3NjkwXCIsXG4vLyBcdGFwcElkOiBcIjE6OTcxNjc0ODc2OTA6d2ViOjg4NDA5YWRlZDBhMWRkMTNmODdhMzNcIixcbi8vIFx0bWVhc3VyZW1lbnRJZDogXCJHLTNZOTRLMVhDQktcIlxuLy8gfTtcblxuLy8gY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG4vLyBleHBvcnQgY29uc3QgYXV0aCA9IGdldEF1dGgoYXBwKTtcblxuLy8gRmlyZWJhc2UgQ29uZmlndXJhdGlvblxuLy8gRmlyZWJhc2UgQ29uZmlndXJhdGlvblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG5cdGFwaUtleTogXCJBSXphU3lERWJYLWdRNkZ3SkQ1b1pHbmFvaUp1OXFJYUFHMkxaME1cIixcblx0YXV0aERvbWFpbjogXCJ1cGxvYWQtMjVmMDEuZmlyZWJhc2VhcHAuY29tXCIsXG5cdHByb2plY3RJZDogXCJ1cGxvYWQtMjVmMDFcIixcblx0c3RvcmFnZUJ1Y2tldDogXCJ1cGxvYWQtMjVmMDEuZmlyZWJhc2VzdG9yYWdlLmFwcFwiLFxuXHRtZXNzYWdpbmdTZW5kZXJJZDogXCI5NzE2NzQ4NzY5MFwiLFxuXHRhcHBJZDogXCIxOjk3MTY3NDg3NjkwOndlYjo4ODQwOWFkZWQwYTFkZDEzZjg3YTMzXCIsXG5cdG1lYXN1cmVtZW50SWQ6IFwiRy0zWTk0SzFYQ0JLXCJcbiAgfTtcbiAgXG4gIC8vIEluaXRpYWxpemUgRmlyZWJhc2VcbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuY29uc3QgYXV0aCA9IGdldEF1dGgoYXBwKTsgLy8gVXNlIGNvbXBhdCB2ZXJzaW9uIG9mIGF1dGhcblxuLy8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUgYW5kIFN0b3JhZ2VcbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XG5jb25zdCBzdG9yYWdlID0gZ2V0U3RvcmFnZShhcHApO1xuXG5leHBvcnR7YXBwLCBhdXRoLCBSZWNhcHRjaGFWZXJpZmllciwgZGIsIHN0b3JhZ2V9IiwiaW1wb3J0IHsgZ2V0QXBwLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciwgY3JlYXRlTW9ja1VzZXJUb2tlbiwgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFcnJvciBjb2RlcyBmb3IgcmVxdWVzdHMgbWFkZSBieSB0aGUgdGhlIFhocklvIHdyYXBwZXIuXHJcbiAqL1xyXG52YXIgRXJyb3JDb2RlO1xyXG4oZnVuY3Rpb24gKEVycm9yQ29kZSkge1xyXG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIk5PX0VSUk9SXCJdID0gMF0gPSBcIk5PX0VSUk9SXCI7XHJcbiAgICBFcnJvckNvZGVbRXJyb3JDb2RlW1wiTkVUV09SS19FUlJPUlwiXSA9IDFdID0gXCJORVRXT1JLX0VSUk9SXCI7XHJcbiAgICBFcnJvckNvZGVbRXJyb3JDb2RlW1wiQUJPUlRcIl0gPSAyXSA9IFwiQUJPUlRcIjtcclxufSkoRXJyb3JDb2RlIHx8IChFcnJvckNvZGUgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBDb25zdGFudHMgdXNlZCBpbiB0aGUgRmlyZWJhc2UgU3RvcmFnZSBsaWJyYXJ5LlxyXG4gKi9cclxuLyoqXHJcbiAqIERvbWFpbiBuYW1lIGZvciBmaXJlYmFzZSBzdG9yYWdlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9IT1NUID0gJ2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbSc7XHJcbi8qKlxyXG4gKiBUaGUga2V5IGluIEZpcmViYXNlIGNvbmZpZyBqc29uIGZvciB0aGUgc3RvcmFnZSBidWNrZXQuXHJcbiAqL1xyXG5jb25zdCBDT05GSUdfU1RPUkFHRV9CVUNLRVRfS0VZID0gJ3N0b3JhZ2VCdWNrZXQnO1xyXG4vKipcclxuICogMiBtaW51dGVzXHJcbiAqXHJcbiAqIFRoZSB0aW1lb3V0IGZvciBhbGwgb3BlcmF0aW9ucyBleGNlcHQgdXBsb2FkLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9NQVhfT1BFUkFUSU9OX1JFVFJZX1RJTUUgPSAyICogNjAgKiAxMDAwO1xyXG4vKipcclxuICogMTAgbWludXRlc1xyXG4gKlxyXG4gKiBUaGUgdGltZW91dCBmb3IgdXBsb2FkLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9NQVhfVVBMT0FEX1JFVFJZX1RJTUUgPSAxMCAqIDYwICogMTAwMDtcblxuLyoqXHJcbiAqIEFuIGVycm9yIHJldHVybmVkIGJ5IHRoZSBGaXJlYmFzZSBTdG9yYWdlIFNESy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU3RvcmFnZUVycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBjb2RlIC0gQSBTdG9yYWdlRXJyb3JDb2RlIHN0cmluZyB0byBiZSBwcmVmaXhlZCB3aXRoICdzdG9yYWdlLycgYW5kXHJcbiAgICAgKiAgYWRkZWQgdG8gdGhlIGVuZCBvZiB0aGUgbWVzc2FnZS5cclxuICAgICAqIEBwYXJhbSBtZXNzYWdlICAtIEVycm9yIG1lc3NhZ2UuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICBzdXBlcihwcmVwZW5kQ29kZShjb2RlKSwgYEZpcmViYXNlIFN0b3JhZ2U6ICR7bWVzc2FnZX0gKCR7cHJlcGVuZENvZGUoY29kZSl9KWApO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0b3JlcyBjdXN0b20gZXJyb3IgZGF0YSB1bnF1ZSB0byBTdG9yYWdlRXJyb3IuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0geyBzZXJ2ZXJSZXNwb25zZTogbnVsbCB9O1xyXG4gICAgICAgIHRoaXMuX2Jhc2VNZXNzYWdlID0gdGhpcy5tZXNzYWdlO1xyXG4gICAgICAgIC8vIFdpdGhvdXQgdGhpcywgYGluc3RhbmNlb2YgU3RvcmFnZUVycm9yYCwgaW4gdGVzdHMgZm9yIGV4YW1wbGUsXHJcbiAgICAgICAgLy8gcmV0dXJucyBmYWxzZS5cclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgU3RvcmFnZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENvbXBhcmVzIGEgU3RvcmFnZUVycm9yQ29kZSBhZ2FpbnN0IHRoaXMgZXJyb3IncyBjb2RlLCBmaWx0ZXJpbmcgb3V0IHRoZSBwcmVmaXguXHJcbiAgICAgKi9cclxuICAgIF9jb2RlRXF1YWxzKGNvZGUpIHtcclxuICAgICAgICByZXR1cm4gcHJlcGVuZENvZGUoY29kZSkgPT09IHRoaXMuY29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3B0aW9uYWwgcmVzcG9uc2UgbWVzc2FnZSB0aGF0IHdhcyBhZGRlZCBieSB0aGUgc2VydmVyLlxyXG4gICAgICovXHJcbiAgICBnZXQgc2VydmVyUmVzcG9uc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRGF0YS5zZXJ2ZXJSZXNwb25zZTtcclxuICAgIH1cclxuICAgIHNldCBzZXJ2ZXJSZXNwb25zZShzZXJ2ZXJSZXNwb25zZSkge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YS5zZXJ2ZXJSZXNwb25zZSA9IHNlcnZlclJlc3BvbnNlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbURhdGEuc2VydmVyUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gYCR7dGhpcy5fYmFzZU1lc3NhZ2V9XFxuJHt0aGlzLmN1c3RvbURhdGEuc2VydmVyUmVzcG9uc2V9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuX2Jhc2VNZXNzYWdlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBwcmVwZW5kQ29kZShjb2RlKSB7XHJcbiAgICByZXR1cm4gJ3N0b3JhZ2UvJyArIGNvZGU7XHJcbn1cclxuZnVuY3Rpb24gdW5rbm93bigpIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCwgcGxlYXNlIGNoZWNrIHRoZSBlcnJvciBwYXlsb2FkIGZvciAnICtcclxuICAgICAgICAnc2VydmVyIHJlc3BvbnNlLic7XHJcbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VFcnJvcihcInVua25vd25cIiAvKiBVTktOT1dOICovLCBtZXNzYWdlKTtcclxufVxyXG5mdW5jdGlvbiBvYmplY3ROb3RGb3VuZChwYXRoKSB7XHJcbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VFcnJvcihcIm9iamVjdC1ub3QtZm91bmRcIiAvKiBPQkpFQ1RfTk9UX0ZPVU5EICovLCBcIk9iamVjdCAnXCIgKyBwYXRoICsgXCInIGRvZXMgbm90IGV4aXN0LlwiKTtcclxufVxyXG5mdW5jdGlvbiBxdW90YUV4Y2VlZGVkKGJ1Y2tldCkge1xyXG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlRXJyb3IoXCJxdW90YS1leGNlZWRlZFwiIC8qIFFVT1RBX0VYQ0VFREVEICovLCBcIlF1b3RhIGZvciBidWNrZXQgJ1wiICtcclxuICAgICAgICBidWNrZXQgK1xyXG4gICAgICAgIFwiJyBleGNlZWRlZCwgcGxlYXNlIHZpZXcgcXVvdGEgb24gXCIgK1xyXG4gICAgICAgICdodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vcHJpY2luZy8uJyk7XHJcbn1cclxuZnVuY3Rpb24gdW5hdXRoZW50aWNhdGVkKCkge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9ICdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkLCBwbGVhc2UgYXV0aGVudGljYXRlIHVzaW5nIEZpcmViYXNlICcgK1xyXG4gICAgICAgICdBdXRoZW50aWNhdGlvbiBhbmQgdHJ5IGFnYWluLic7XHJcbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VFcnJvcihcInVuYXV0aGVudGljYXRlZFwiIC8qIFVOQVVUSEVOVElDQVRFRCAqLywgbWVzc2FnZSk7XHJcbn1cclxuZnVuY3Rpb24gdW5hdXRob3JpemVkQXBwKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlRXJyb3IoXCJ1bmF1dGhvcml6ZWQtYXBwXCIgLyogVU5BVVRIT1JJWkVEX0FQUCAqLywgJ1RoaXMgYXBwIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgRmlyZWJhc2UgU3RvcmFnZSBvbiB0aGlzIHByb2plY3QuJyk7XHJcbn1cclxuZnVuY3Rpb24gdW5hdXRob3JpemVkKHBhdGgpIHtcclxuICAgIHJldHVybiBuZXcgU3RvcmFnZUVycm9yKFwidW5hdXRob3JpemVkXCIgLyogVU5BVVRIT1JJWkVEICovLCBcIlVzZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyAnXCIgKyBwYXRoICsgXCInLlwiKTtcclxufVxyXG5mdW5jdGlvbiByZXRyeUxpbWl0RXhjZWVkZWQoKSB7XHJcbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VFcnJvcihcInJldHJ5LWxpbWl0LWV4Y2VlZGVkXCIgLyogUkVUUllfTElNSVRfRVhDRUVERUQgKi8sICdNYXggcmV0cnkgdGltZSBmb3Igb3BlcmF0aW9uIGV4Y2VlZGVkLCBwbGVhc2UgdHJ5IGFnYWluLicpO1xyXG59XHJcbmZ1bmN0aW9uIGNhbmNlbGVkKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlRXJyb3IoXCJjYW5jZWxlZFwiIC8qIENBTkNFTEVEICovLCAnVXNlciBjYW5jZWxlZCB0aGUgdXBsb2FkL2Rvd25sb2FkLicpO1xyXG59XHJcbmZ1bmN0aW9uIGludmFsaWRVcmwodXJsKSB7XHJcbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VFcnJvcihcImludmFsaWQtdXJsXCIgLyogSU5WQUxJRF9VUkwgKi8sIFwiSW52YWxpZCBVUkwgJ1wiICsgdXJsICsgXCInLlwiKTtcclxufVxyXG5mdW5jdGlvbiBpbnZhbGlkRGVmYXVsdEJ1Y2tldChidWNrZXQpIHtcclxuICAgIHJldHVybiBuZXcgU3RvcmFnZUVycm9yKFwiaW52YWxpZC1kZWZhdWx0LWJ1Y2tldFwiIC8qIElOVkFMSURfREVGQVVMVF9CVUNLRVQgKi8sIFwiSW52YWxpZCBkZWZhdWx0IGJ1Y2tldCAnXCIgKyBidWNrZXQgKyBcIicuXCIpO1xyXG59XHJcbmZ1bmN0aW9uIG5vRGVmYXVsdEJ1Y2tldCgpIHtcclxuICAgIHJldHVybiBuZXcgU3RvcmFnZUVycm9yKFwibm8tZGVmYXVsdC1idWNrZXRcIiAvKiBOT19ERUZBVUxUX0JVQ0tFVCAqLywgJ05vIGRlZmF1bHQgYnVja2V0ICcgK1xyXG4gICAgICAgIFwiZm91bmQuIERpZCB5b3Ugc2V0IHRoZSAnXCIgK1xyXG4gICAgICAgIENPTkZJR19TVE9SQUdFX0JVQ0tFVF9LRVkgK1xyXG4gICAgICAgIFwiJyBwcm9wZXJ0eSB3aGVuIGluaXRpYWxpemluZyB0aGUgYXBwP1wiKTtcclxufVxyXG5mdW5jdGlvbiBjYW5ub3RTbGljZUJsb2IoKSB7XHJcbiAgICByZXR1cm4gbmV3IFN0b3JhZ2VFcnJvcihcImNhbm5vdC1zbGljZS1ibG9iXCIgLyogQ0FOTk9UX1NMSUNFX0JMT0IgKi8sICdDYW5ub3Qgc2xpY2UgYmxvYiBmb3IgdXBsb2FkLiBQbGVhc2UgcmV0cnkgdGhlIHVwbG9hZC4nKTtcclxufVxyXG5mdW5jdGlvbiBzZXJ2ZXJGaWxlV3JvbmdTaXplKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlRXJyb3IoXCJzZXJ2ZXItZmlsZS13cm9uZy1zaXplXCIgLyogU0VSVkVSX0ZJTEVfV1JPTkdfU0laRSAqLywgJ1NlcnZlciByZWNvcmRlZCBpbmNvcnJlY3QgdXBsb2FkIGZpbGUgc2l6ZSwgcGxlYXNlIHJldHJ5IHRoZSB1cGxvYWQuJyk7XHJcbn1cclxuZnVuY3Rpb24gbm9Eb3dubG9hZFVSTCgpIHtcclxuICAgIHJldHVybiBuZXcgU3RvcmFnZUVycm9yKFwibm8tZG93bmxvYWQtdXJsXCIgLyogTk9fRE9XTkxPQURfVVJMICovLCAnVGhlIGdpdmVuIGZpbGUgZG9lcyBub3QgaGF2ZSBhbnkgZG93bmxvYWQgVVJMcy4nKTtcclxufVxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnZhbGlkQXJndW1lbnQobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlRXJyb3IoXCJpbnZhbGlkLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUkdVTUVOVCAqLywgbWVzc2FnZSk7XHJcbn1cclxuZnVuY3Rpb24gYXBwRGVsZXRlZCgpIHtcclxuICAgIHJldHVybiBuZXcgU3RvcmFnZUVycm9yKFwiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqLywgJ1RoZSBGaXJlYmFzZSBhcHAgd2FzIGRlbGV0ZWQuJyk7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIG9wZXJhdGlvbiB0aGF0IHdhcyBpbnZhbGlkLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIGludmFsaWRSb290T3BlcmF0aW9uKG5hbWUpIHtcclxuICAgIHJldHVybiBuZXcgU3RvcmFnZUVycm9yKFwiaW52YWxpZC1yb290LW9wZXJhdGlvblwiIC8qIElOVkFMSURfUk9PVF9PUEVSQVRJT04gKi8sIFwiVGhlIG9wZXJhdGlvbiAnXCIgK1xyXG4gICAgICAgIG5hbWUgK1xyXG4gICAgICAgIFwiJyBjYW5ub3QgYmUgcGVyZm9ybWVkIG9uIGEgcm9vdCByZWZlcmVuY2UsIGNyZWF0ZSBhIG5vbi1yb290IFwiICtcclxuICAgICAgICBcInJlZmVyZW5jZSB1c2luZyBjaGlsZCwgc3VjaCBhcyAuY2hpbGQoJ2ZpbGUucG5nJykuXCIpO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm9ybWF0IC0gVGhlIGZvcm1hdCB0aGF0IHdhcyBub3QgdmFsaWQuXHJcbiAqIEBwYXJhbSBtZXNzYWdlIC0gQSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIGZvcm1hdCB2aW9sYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnZhbGlkRm9ybWF0KGZvcm1hdCwgbWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBTdG9yYWdlRXJyb3IoXCJpbnZhbGlkLWZvcm1hdFwiIC8qIElOVkFMSURfRk9STUFUICovLCBcIlN0cmluZyBkb2VzIG5vdCBtYXRjaCBmb3JtYXQgJ1wiICsgZm9ybWF0ICsgXCInOiBcIiArIG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gbWVzc2FnZSAtIEEgbWVzc2FnZSBkZXNjcmliaW5nIHRoZSBpbnRlcm5hbCBlcnJvci5cclxuICovXHJcbmZ1bmN0aW9uIGludGVybmFsRXJyb3IobWVzc2FnZSkge1xyXG4gICAgdGhyb3cgbmV3IFN0b3JhZ2VFcnJvcihcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sICdJbnRlcm5hbCBlcnJvcjogJyArIG1lc3NhZ2UpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBOZXR3b3JrIGxheWVyIGZvciBicm93c2Vycy4gV2UgdXNlIHRoaXMgaW5zdGVhZCBvZiBnb29nLm5ldC5YaHJJbyBiZWNhdXNlXHJcbiAqIGdvb2cubmV0LlhocklvIGlzIGh5dXV1dWdlIGFuZCBkb2Vzbid0IHdvcmsgaW4gUmVhY3QgTmF0aXZlIG9uIEFuZHJvaWQuXHJcbiAqL1xyXG5jbGFzcyBYaHJDb25uZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc2VudF8gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnhocl8gPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB0aGlzLmVycm9yQ29kZV8gPSBFcnJvckNvZGUuTk9fRVJST1I7XHJcbiAgICAgICAgdGhpcy5zZW5kUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy54aHJfLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvckNvZGVfID0gRXJyb3JDb2RlLkFCT1JUO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy54aHJfLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvckNvZGVfID0gRXJyb3JDb2RlLk5FVFdPUktfRVJST1I7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnhocl8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICovXHJcbiAgICBzZW5kKHVybCwgbWV0aG9kLCBib2R5LCBoZWFkZXJzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VudF8pIHtcclxuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignY2Fubm90IC5zZW5kKCkgbW9yZSB0aGFuIG9uY2UnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZW50XyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy54aHJfLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xyXG4gICAgICAgIGlmIChoZWFkZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueGhyXy5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChib2R5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy54aHJfLnNlbmQoYm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnhocl8uc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUHJvbWlzZV87XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICovXHJcbiAgICBnZXRFcnJvckNvZGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbnRfKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludGVybmFsRXJyb3IoJ2Nhbm5vdCAuZ2V0RXJyb3JDb2RlKCkgYmVmb3JlIHNlbmRpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb2RlXztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXR1cygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VudF8pIHtcclxuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignY2Fubm90IC5nZXRTdGF0dXMoKSBiZWZvcmUgc2VuZGluZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy54aHJfLnN0YXR1cztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIGdldFJlc3BvbnNlVGV4dCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VudF8pIHtcclxuICAgICAgICAgICAgdGhyb3cgaW50ZXJuYWxFcnJvcignY2Fubm90IC5nZXRSZXNwb25zZVRleHQoKSBiZWZvcmUgc2VuZGluZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy54aHJfLnJlc3BvbnNlVGV4dDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWJvcnRzIHRoZSByZXF1ZXN0LlxyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIGFib3J0KCkge1xyXG4gICAgICAgIHRoaXMueGhyXy5hYm9ydCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueGhyXy5nZXRSZXNwb25zZUhlYWRlcihoZWFkZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgYWRkVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLnhocl8udXBsb2FkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy54aHJfLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICovXHJcbiAgICByZW1vdmVVcGxvYWRQcm9ncmVzc0xpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMueGhyXy51cGxvYWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnhocl8udXBsb2FkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgbGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBuZXdDb25uZWN0aW9uKCkge1xyXG4gICAgcmV0dXJuIG5ldyBYaHJDb25uZWN0aW9uKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEZhY3RvcnktbGlrZSBjbGFzcyBmb3IgY3JlYXRpbmcgWGhySW8gaW5zdGFuY2VzLlxyXG4gKi9cclxuY2xhc3MgQ29ubmVjdGlvblBvb2wge1xyXG4gICAgY3JlYXRlQ29ubmVjdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3Q29ubmVjdGlvbigpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBGaXJlYmFzZSBTdG9yYWdlIGxvY2F0aW9uIGRhdGEuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgTG9jYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYnVja2V0LCBwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5idWNrZXQgPSBidWNrZXQ7XHJcbiAgICAgICAgdGhpcy5wYXRoXyA9IHBhdGg7XHJcbiAgICB9XHJcbiAgICBnZXQgcGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXRoXztcclxuICAgIH1cclxuICAgIGdldCBpc1Jvb3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcbiAgICBmdWxsU2VydmVyVXJsKCkge1xyXG4gICAgICAgIGNvbnN0IGVuY29kZSA9IGVuY29kZVVSSUNvbXBvbmVudDtcclxuICAgICAgICByZXR1cm4gJy9iLycgKyBlbmNvZGUodGhpcy5idWNrZXQpICsgJy9vLycgKyBlbmNvZGUodGhpcy5wYXRoKTtcclxuICAgIH1cclxuICAgIGJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKSB7XHJcbiAgICAgICAgY29uc3QgZW5jb2RlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xyXG4gICAgICAgIHJldHVybiAnL2IvJyArIGVuY29kZSh0aGlzLmJ1Y2tldCkgKyAnL28nO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG1ha2VGcm9tQnVja2V0U3BlYyhidWNrZXRTdHJpbmcsIGhvc3QpIHtcclxuICAgICAgICBsZXQgYnVja2V0TG9jYXRpb247XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYnVja2V0TG9jYXRpb24gPSBMb2NhdGlvbi5tYWtlRnJvbVVybChidWNrZXRTdHJpbmcsIGhvc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBOb3QgdmFsaWQgVVJMLCB1c2UgYXMtaXMuIFRoaXMgbGV0cyB5b3UgcHV0IGJhcmUgYnVja2V0IG5hbWVzIGluXHJcbiAgICAgICAgICAgIC8vIGNvbmZpZy5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihidWNrZXRTdHJpbmcsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJ1Y2tldExvY2F0aW9uLnBhdGggPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidWNrZXRMb2NhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWREZWZhdWx0QnVja2V0KGJ1Y2tldFN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIG1ha2VGcm9tVXJsKHVybCwgaG9zdCkge1xyXG4gICAgICAgIGxldCBsb2NhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYnVja2V0RG9tYWluID0gJyhbQS1aYS16MC05LlxcXFwtX10rKSc7XHJcbiAgICAgICAgZnVuY3Rpb24gZ3NNb2RpZnkobG9jKSB7XHJcbiAgICAgICAgICAgIGlmIChsb2MucGF0aC5jaGFyQXQobG9jLnBhdGgubGVuZ3RoIC0gMSkgPT09ICcvJykge1xyXG4gICAgICAgICAgICAgICAgbG9jLnBhdGhfID0gbG9jLnBhdGhfLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBnc1BhdGggPSAnKC8oLiopKT8kJztcclxuICAgICAgICBjb25zdCBnc1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXmdzOi8vJyArIGJ1Y2tldERvbWFpbiArIGdzUGF0aCwgJ2knKTtcclxuICAgICAgICBjb25zdCBnc0luZGljZXMgPSB7IGJ1Y2tldDogMSwgcGF0aDogMyB9O1xyXG4gICAgICAgIGZ1bmN0aW9uIGh0dHBNb2RpZnkobG9jKSB7XHJcbiAgICAgICAgICAgIGxvYy5wYXRoXyA9IGRlY29kZVVSSUNvbXBvbmVudChsb2MucGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSAndltBLVphLXowLTlfXSsnO1xyXG4gICAgICAgIGNvbnN0IGZpcmViYXNlU3RvcmFnZUhvc3QgPSBob3N0LnJlcGxhY2UoL1suXS9nLCAnXFxcXC4nKTtcclxuICAgICAgICBjb25zdCBmaXJlYmFzZVN0b3JhZ2VQYXRoID0gJygvKFtePyNdKikuKik/JCc7XHJcbiAgICAgICAgY29uc3QgZmlyZWJhc2VTdG9yYWdlUmVnRXhwID0gbmV3IFJlZ0V4cChgXmh0dHBzPzovLyR7ZmlyZWJhc2VTdG9yYWdlSG9zdH0vJHt2ZXJzaW9ufS9iLyR7YnVja2V0RG9tYWlufS9vJHtmaXJlYmFzZVN0b3JhZ2VQYXRofWAsICdpJyk7XHJcbiAgICAgICAgY29uc3QgZmlyZWJhc2VTdG9yYWdlSW5kaWNlcyA9IHsgYnVja2V0OiAxLCBwYXRoOiAzIH07XHJcbiAgICAgICAgY29uc3QgY2xvdWRTdG9yYWdlSG9zdCA9IGhvc3QgPT09IERFRkFVTFRfSE9TVFxyXG4gICAgICAgICAgICA/ICcoPzpzdG9yYWdlLmdvb2dsZWFwaXMuY29tfHN0b3JhZ2UuY2xvdWQuZ29vZ2xlLmNvbSknXHJcbiAgICAgICAgICAgIDogaG9zdDtcclxuICAgICAgICBjb25zdCBjbG91ZFN0b3JhZ2VQYXRoID0gJyhbXj8jXSopJztcclxuICAgICAgICBjb25zdCBjbG91ZFN0b3JhZ2VSZWdFeHAgPSBuZXcgUmVnRXhwKGBeaHR0cHM/Oi8vJHtjbG91ZFN0b3JhZ2VIb3N0fS8ke2J1Y2tldERvbWFpbn0vJHtjbG91ZFN0b3JhZ2VQYXRofWAsICdpJyk7XHJcbiAgICAgICAgY29uc3QgY2xvdWRTdG9yYWdlSW5kaWNlcyA9IHsgYnVja2V0OiAxLCBwYXRoOiAyIH07XHJcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gW1xyXG4gICAgICAgICAgICB7IHJlZ2V4OiBnc1JlZ2V4LCBpbmRpY2VzOiBnc0luZGljZXMsIHBvc3RNb2RpZnk6IGdzTW9kaWZ5IH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlZ2V4OiBmaXJlYmFzZVN0b3JhZ2VSZWdFeHAsXHJcbiAgICAgICAgICAgICAgICBpbmRpY2VzOiBmaXJlYmFzZVN0b3JhZ2VJbmRpY2VzLFxyXG4gICAgICAgICAgICAgICAgcG9zdE1vZGlmeTogaHR0cE1vZGlmeVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZWdleDogY2xvdWRTdG9yYWdlUmVnRXhwLFxyXG4gICAgICAgICAgICAgICAgaW5kaWNlczogY2xvdWRTdG9yYWdlSW5kaWNlcyxcclxuICAgICAgICAgICAgICAgIHBvc3RNb2RpZnk6IGh0dHBNb2RpZnlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVzID0gZ3JvdXAucmVnZXguZXhlYyh1cmwpO1xyXG4gICAgICAgICAgICBpZiAoY2FwdHVyZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldFZhbHVlID0gY2FwdHVyZXNbZ3JvdXAuaW5kaWNlcy5idWNrZXRdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhdGhWYWx1ZSA9IGNhcHR1cmVzW2dyb3VwLmluZGljZXMucGF0aF07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBhdGhWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24oYnVja2V0VmFsdWUsIHBhdGhWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBncm91cC5wb3N0TW9kaWZ5KGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2NhdGlvbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRVcmwodXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBBIHJlcXVlc3Qgd2hvc2UgcHJvbWlzZSBhbHdheXMgZmFpbHMuXHJcbiAqL1xyXG5jbGFzcyBGYWlsUmVxdWVzdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMucHJvbWlzZV8gPSBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIGdldFByb21pc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZV87XHJcbiAgICB9XHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIGNhbmNlbChfYXBwRGVsZXRlID0gZmFsc2UpIHsgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAcGFyYW0gZiBNYXkgYmUgaW52b2tlZFxyXG4gKiAgICAgYmVmb3JlIHRoZSBmdW5jdGlvbiByZXR1cm5zLlxyXG4gKiBAcGFyYW0gY2FsbGJhY2sgR2V0IGFsbCB0aGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgZnVuY3Rpb25cclxuICogICAgIHBhc3NlZCB0byBmLCBpbmNsdWRpbmcgdGhlIGluaXRpYWwgYm9vbGVhbi5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0KGYsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jYWxsYmFjaywgdGltZW91dCkge1xyXG4gICAgLy8gVE9ETyhhbmR5c290byk6IG1ha2UgdGhpcyBjb2RlIGNsZWFuZXIgKHByb2JhYmx5IHJlZmFjdG9yIGludG8gYW4gYWN0dWFsXHJcbiAgICAvLyB0eXBlIGluc3RlYWQgb2YgYSBidW5jaCBvZiBmdW5jdGlvbnMgd2l0aCBzdGF0ZSBzaGFyZWQgaW4gdGhlIGNsb3N1cmUpXHJcbiAgICBsZXQgd2FpdFNlY29uZHMgPSAxO1xyXG4gICAgLy8gV291bGQgdHlwZSB0aGlzIGFzIFwibnVtYmVyXCIgYnV0IHRoYXQgZG9lc24ndCB3b3JrIGZvciBOb2RlIHNvIMKvXFxfKOODhClfL8KvXHJcbiAgICAvLyBUT0RPOiBmaW5kIGEgd2F5IHRvIGV4Y2x1ZGUgTm9kZSB0eXBlIGRlZmluaXRpb24gZm9yIHN0b3JhZ2UgYmVjYXVzZSBzdG9yYWdlIG9ubHkgd29ya3MgaW4gYnJvd3NlclxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIGxldCB0aW1lb3V0SWQgPSBudWxsO1xyXG4gICAgbGV0IGhpdFRpbWVvdXQgPSBmYWxzZTtcclxuICAgIGxldCBjYW5jZWxTdGF0ZSA9IDA7XHJcbiAgICBmdW5jdGlvbiBjYW5jZWxlZCgpIHtcclxuICAgICAgICByZXR1cm4gY2FuY2VsU3RhdGUgPT09IDI7XHJcbiAgICB9XHJcbiAgICBsZXQgdHJpZ2dlcmVkQ2FsbGJhY2sgPSBmYWxzZTtcclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJDYWxsYmFjayguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKCF0cmlnZ2VyZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0cmlnZ2VyZWRDYWxsYmFjayA9IHRydWU7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNhbGxXaXRoRGVsYXkobWlsbGlzKSB7XHJcbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIGYoaGFuZGxlciwgY2FuY2VsZWQoKSk7XHJcbiAgICAgICAgfSwgbWlsbGlzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGhhbmRsZXIoc3VjY2VzcywgLi4uYXJncykge1xyXG4gICAgICAgIGlmICh0cmlnZ2VyZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJDYWxsYmFjay5jYWxsKG51bGwsIHN1Y2Nlc3MsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG11c3RTdG9wID0gY2FuY2VsZWQoKSB8fCBoaXRUaW1lb3V0O1xyXG4gICAgICAgIGlmIChtdXN0U3RvcCkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyQ2FsbGJhY2suY2FsbChudWxsLCBzdWNjZXNzLCAuLi5hcmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2FpdFNlY29uZHMgPCA2NCkge1xyXG4gICAgICAgICAgICAvKiBUT0RPKGFuZHlzb3RvKTogZG9uJ3QgYmFjayBvZmYgc28gcXVpY2tseSBpZiB3ZSBrbm93IHdlJ3JlIG9mZmxpbmUuICovXHJcbiAgICAgICAgICAgIHdhaXRTZWNvbmRzICo9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB3YWl0TWlsbGlzO1xyXG4gICAgICAgIGlmIChjYW5jZWxTdGF0ZSA9PT0gMSkge1xyXG4gICAgICAgICAgICBjYW5jZWxTdGF0ZSA9IDI7XHJcbiAgICAgICAgICAgIHdhaXRNaWxsaXMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2FpdE1pbGxpcyA9ICh3YWl0U2Vjb25kcyArIE1hdGgucmFuZG9tKCkpICogMTAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsbFdpdGhEZWxheSh3YWl0TWlsbGlzKTtcclxuICAgIH1cclxuICAgIGxldCBzdG9wcGVkID0gZmFsc2U7XHJcbiAgICBmdW5jdGlvbiBzdG9wKHdhc1RpbWVvdXQpIHtcclxuICAgICAgICBpZiAoc3RvcHBlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0b3BwZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0cmlnZ2VyZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aW1lb3V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCF3YXNUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxTdGF0ZSA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIGNhbGxXaXRoRGVsYXkoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXdhc1RpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbFN0YXRlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhbGxXaXRoRGVsYXkoMCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBoaXRUaW1lb3V0ID0gdHJ1ZTtcclxuICAgICAgICBzdG9wKHRydWUpO1xyXG4gICAgfSwgdGltZW91dCk7XHJcbiAgICByZXR1cm4gc3RvcDtcclxufVxyXG4vKipcclxuICogU3RvcHMgdGhlIHJldHJ5IGxvb3AgZnJvbSByZXBlYXRpbmcuXHJcbiAqIElmIHRoZSBmdW5jdGlvbiBpcyBjdXJyZW50bHkgXCJpbiBiZXR3ZWVuXCIgcmV0cmllcywgaXQgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxyXG4gKiB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGFzIFwidHJ1ZVwiLiBPdGhlcndpc2UsIGl0IHdpbGwgYmUgaW52b2tlZCBvbmNlIG1vcmVcclxuICogYWZ0ZXIgdGhlIGN1cnJlbnQgaW52b2NhdGlvbiBmaW5pc2hlcyBpZmYgdGhlIGN1cnJlbnQgaW52b2NhdGlvbiB3b3VsZCBoYXZlXHJcbiAqIHRyaWdnZXJlZCBhbm90aGVyIHJldHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RvcChpZCkge1xyXG4gICAgaWQoZmFsc2UpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzSnVzdERlZihwKSB7XHJcbiAgICByZXR1cm4gcCAhPT0gdm9pZCAwO1xyXG59XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGlzRnVuY3Rpb24ocCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBwID09PSAnZnVuY3Rpb24nO1xyXG59XHJcbmZ1bmN0aW9uIGlzTm9uQXJyYXlPYmplY3QocCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBwID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShwKTtcclxufVxyXG5mdW5jdGlvbiBpc1N0cmluZyhwKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHAgPT09ICdzdHJpbmcnIHx8IHAgaW5zdGFuY2VvZiBTdHJpbmc7XHJcbn1cclxuZnVuY3Rpb24gaXNOYXRpdmVCbG9iKHApIHtcclxuICAgIHJldHVybiBpc05hdGl2ZUJsb2JEZWZpbmVkKCkgJiYgcCBpbnN0YW5jZW9mIEJsb2I7XHJcbn1cclxuZnVuY3Rpb24gaXNOYXRpdmVCbG9iRGVmaW5lZCgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCc7XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIoYXJndW1lbnQsIG1pblZhbHVlLCBtYXhWYWx1ZSwgdmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSA8IG1pblZhbHVlKSB7XHJcbiAgICAgICAgdGhyb3cgaW52YWxpZEFyZ3VtZW50KGBJbnZhbGlkIHZhbHVlIGZvciAnJHthcmd1bWVudH0nLiBFeHBlY3RlZCAke21pblZhbHVlfSBvciBncmVhdGVyLmApO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlID4gbWF4VmFsdWUpIHtcclxuICAgICAgICB0aHJvdyBpbnZhbGlkQXJndW1lbnQoYEludmFsaWQgdmFsdWUgZm9yICcke2FyZ3VtZW50fScuIEV4cGVjdGVkICR7bWF4VmFsdWV9IG9yIGxlc3MuYCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFrZVVybCh1cmxQYXJ0LCBob3N0KSB7XHJcbiAgICBjb25zdCBwcm90b2NvbE1hdGNoID0gaG9zdC5tYXRjaCgvXihcXHcrKTpcXC9cXC8uKy8pO1xyXG4gICAgY29uc3QgcHJvdG9jb2wgPSBwcm90b2NvbE1hdGNoID09PSBudWxsIHx8IHByb3RvY29sTWF0Y2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3RvY29sTWF0Y2hbMV07XHJcbiAgICBsZXQgb3JpZ2luID0gaG9zdDtcclxuICAgIGlmIChwcm90b2NvbCA9PSBudWxsKSB7XHJcbiAgICAgICAgb3JpZ2luID0gYGh0dHBzOi8vJHtob3N0fWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7b3JpZ2lufS92MCR7dXJsUGFydH1gO1xyXG59XHJcbmZ1bmN0aW9uIG1ha2VRdWVyeVN0cmluZyhwYXJhbXMpIHtcclxuICAgIGNvbnN0IGVuY29kZSA9IGVuY29kZVVSSUNvbXBvbmVudDtcclxuICAgIGxldCBxdWVyeVBhcnQgPSAnPyc7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXJhbXMpIHtcclxuICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV4dFBhcnQgPSBlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZShwYXJhbXNba2V5XSk7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFydCA9IHF1ZXJ5UGFydCArIG5leHRQYXJ0ICsgJyYnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENob3Agb2ZmIHRoZSBleHRyYSAnJicgb3IgJz8nIG9uIHRoZSBlbmRcclxuICAgIHF1ZXJ5UGFydCA9IHF1ZXJ5UGFydC5zbGljZSgwLCAtMSk7XHJcbiAgICByZXR1cm4gcXVlcnlQYXJ0O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE5ldHdvcmtSZXF1ZXN0IHtcclxuICAgIGNvbnN0cnVjdG9yKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBib2R5LCBzdWNjZXNzQ29kZXMsIGFkZGl0aW9uYWxSZXRyeUNvZGVzLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgdGltZW91dCwgcHJvZ3Jlc3NDYWxsYmFjaywgcG9vbCkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0Nvbm5lY3Rpb25fID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJhY2tvZmZJZF8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsZWRfID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hcHBEZWxldGVfID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy51cmxfID0gdXJsO1xyXG4gICAgICAgIHRoaXMubWV0aG9kXyA9IG1ldGhvZDtcclxuICAgICAgICB0aGlzLmhlYWRlcnNfID0gaGVhZGVycztcclxuICAgICAgICB0aGlzLmJvZHlfID0gYm9keTtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NDb2Rlc18gPSBzdWNjZXNzQ29kZXMuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLmFkZGl0aW9uYWxSZXRyeUNvZGVzXyA9IGFkZGl0aW9uYWxSZXRyeUNvZGVzLnNsaWNlKCk7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcclxuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2tfID0gZXJyb3JDYWxsYmFjaztcclxuICAgICAgICB0aGlzLnByb2dyZXNzQ2FsbGJhY2tfID0gcHJvZ3Jlc3NDYWxsYmFjaztcclxuICAgICAgICB0aGlzLnRpbWVvdXRfID0gdGltZW91dDtcclxuICAgICAgICB0aGlzLnBvb2xfID0gcG9vbDtcclxuICAgICAgICB0aGlzLnByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVfID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3RfID0gcmVqZWN0O1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0XygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3R1YWxseSBzdGFydHMgdGhlIHJldHJ5IGxvb3AuXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0XygpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBmdW5jdGlvbiBkb1RoZVJlcXVlc3QoYmFja29mZkNhbGxiYWNrLCBjYW5jZWxlZCkge1xyXG4gICAgICAgICAgICBpZiAoY2FuY2VsZWQpIHtcclxuICAgICAgICAgICAgICAgIGJhY2tvZmZDYWxsYmFjayhmYWxzZSwgbmV3IFJlcXVlc3RFbmRTdGF0dXMoZmFsc2UsIG51bGwsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gc2VsZi5wb29sXy5jcmVhdGVDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHNlbGYucGVuZGluZ0Nvbm5lY3Rpb25fID0gY29ubmVjdGlvbjtcclxuICAgICAgICAgICAgZnVuY3Rpb24gcHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzc0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkZWQgPSBwcm9ncmVzc0V2ZW50LmxvYWRlZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gcHJvZ3Jlc3NFdmVudC5sZW5ndGhDb21wdXRhYmxlID8gcHJvZ3Jlc3NFdmVudC50b3RhbCA6IC0xO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYucHJvZ3Jlc3NDYWxsYmFja18gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzQ2FsbGJhY2tfKGxvYWRlZCwgdG90YWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnByb2dyZXNzQ2FsbGJhY2tfICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmFkZFVwbG9hZFByb2dyZXNzTGlzdGVuZXIocHJvZ3Jlc3NMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAuc2VuZChzZWxmLnVybF8sIHNlbGYubWV0aG9kXywgc2VsZi5ib2R5Xywgc2VsZi5oZWFkZXJzXylcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLnByb2dyZXNzQ2FsbGJhY2tfICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVVcGxvYWRQcm9ncmVzc0xpc3RlbmVyKHByb2dyZXNzTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VsZi5wZW5kaW5nQ29ubmVjdGlvbl8gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGl0U2VydmVyID0gY29ubmVjdGlvbi5nZXRFcnJvckNvZGUoKSA9PT0gRXJyb3JDb2RlLk5PX0VSUk9SO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gY29ubmVjdGlvbi5nZXRTdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgIGlmICghaGl0U2VydmVyIHx8IHNlbGYuaXNSZXRyeVN0YXR1c0NvZGVfKHN0YXR1cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXNDYW5jZWxlZCA9IGNvbm5lY3Rpb24uZ2V0RXJyb3JDb2RlKCkgPT09IEVycm9yQ29kZS5BQk9SVDtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrb2ZmQ2FsbGJhY2soZmFsc2UsIG5ldyBSZXF1ZXN0RW5kU3RhdHVzKGZhbHNlLCBudWxsLCB3YXNDYW5jZWxlZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NDb2RlID0gc2VsZi5zdWNjZXNzQ29kZXNfLmluZGV4T2Yoc3RhdHVzKSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICBiYWNrb2ZmQ2FsbGJhY2sodHJ1ZSwgbmV3IFJlcXVlc3RFbmRTdGF0dXMoc3VjY2Vzc0NvZGUsIGNvbm5lY3Rpb24pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSByZXF1ZXN0V2VudFRocm91Z2ggLSBUcnVlIGlmIHRoZSByZXF1ZXN0IGV2ZW50dWFsbHkgd2VudFxyXG4gICAgICAgICAqICAgICB0aHJvdWdoLCBmYWxzZSBpZiBpdCBoaXQgdGhlIHJldHJ5IGxpbWl0IG9yIHdhcyBjYW5jZWxlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBiYWNrb2ZmRG9uZShyZXF1ZXN0V2VudFRocm91Z2gsIHN0YXR1cykge1xyXG4gICAgICAgICAgICBjb25zdCByZXNvbHZlID0gc2VsZi5yZXNvbHZlXztcclxuICAgICAgICAgICAgY29uc3QgcmVqZWN0ID0gc2VsZi5yZWplY3RfO1xyXG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gc3RhdHVzLmNvbm5lY3Rpb247XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMud2FzU3VjY2Vzc0NvZGUpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2VsZi5jYWxsYmFja18oY29ubmVjdGlvbiwgY29ubmVjdGlvbi5nZXRSZXNwb25zZVRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSnVzdERlZihyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gdW5rbm93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVyci5zZXJ2ZXJSZXNwb25zZSA9IGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZXJyb3JDYWxsYmFja18pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHNlbGYuZXJyb3JDYWxsYmFja18oY29ubmVjdGlvbiwgZXJyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLmNhbmNlbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IHNlbGYuYXBwRGVsZXRlXyA/IGFwcERlbGV0ZWQoKSA6IGNhbmNlbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gcmV0cnlMaW1pdEV4Y2VlZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxlZF8pIHtcclxuICAgICAgICAgICAgYmFja29mZkRvbmUoZmFsc2UsIG5ldyBSZXF1ZXN0RW5kU3RhdHVzKGZhbHNlLCBudWxsLCB0cnVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tvZmZJZF8gPSBzdGFydChkb1RoZVJlcXVlc3QsIGJhY2tvZmZEb25lLCB0aGlzLnRpbWVvdXRfKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIGdldFByb21pc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZV87XHJcbiAgICB9XHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIGNhbmNlbChhcHBEZWxldGUpIHtcclxuICAgICAgICB0aGlzLmNhbmNlbGVkXyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hcHBEZWxldGVfID0gYXBwRGVsZXRlIHx8IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmJhY2tvZmZJZF8gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgc3RvcCh0aGlzLmJhY2tvZmZJZF8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQ29ubmVjdGlvbl8gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29ubmVjdGlvbl8uYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc1JldHJ5U3RhdHVzQ29kZV8oc3RhdHVzKSB7XHJcbiAgICAgICAgLy8gVGhlIGNvZGVzIGZvciB3aGljaCB0byByZXRyeSBjYW1lIGZyb20gdGhpcyBwYWdlOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9zdG9yYWdlL2RvY3MvZXhwb25lbnRpYWwtYmFja29mZlxyXG4gICAgICAgIGNvbnN0IGlzRml2ZUh1bmRyZWRDb2RlID0gc3RhdHVzID49IDUwMCAmJiBzdGF0dXMgPCA2MDA7XHJcbiAgICAgICAgY29uc3QgZXh0cmFSZXRyeUNvZGVzID0gW1xyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0IFRpbWVvdXQ6IHdlYiBzZXJ2ZXIgZGlkbid0IHJlY2VpdmUgZnVsbCByZXF1ZXN0IGluIHRpbWUuXHJcbiAgICAgICAgICAgIDQwOCxcclxuICAgICAgICAgICAgLy8gVG9vIE1hbnkgUmVxdWVzdHM6IHlvdSdyZSBnZXR0aW5nIHJhdGUtbGltaXRlZCwgYmFzaWNhbGx5LlxyXG4gICAgICAgICAgICA0MjlcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGlzRXh0cmFSZXRyeUNvZGUgPSBleHRyYVJldHJ5Q29kZXMuaW5kZXhPZihzdGF0dXMpICE9PSAtMTtcclxuICAgICAgICBjb25zdCBpc1JlcXVlc3RTcGVjaWZpY1JldHJ5Q29kZSA9IHRoaXMuYWRkaXRpb25hbFJldHJ5Q29kZXNfLmluZGV4T2Yoc3RhdHVzKSAhPT0gLTE7XHJcbiAgICAgICAgcmV0dXJuIGlzRml2ZUh1bmRyZWRDb2RlIHx8IGlzRXh0cmFSZXRyeUNvZGUgfHwgaXNSZXF1ZXN0U3BlY2lmaWNSZXRyeUNvZGU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVzdWx0IG9mIGEgbmV0d29yayByZXF1ZXN0LlxyXG4gKiBAcGFyYW0gb3B0X2NhbmNlbGVkIC0gRGVmYXVsdHMgdG8gZmFsc2UuXHJcbiAqL1xyXG5jbGFzcyBSZXF1ZXN0RW5kU3RhdHVzIHtcclxuICAgIGNvbnN0cnVjdG9yKHdhc1N1Y2Nlc3NDb2RlLCBjb25uZWN0aW9uLCBjYW5jZWxlZCkge1xyXG4gICAgICAgIHRoaXMud2FzU3VjY2Vzc0NvZGUgPSB3YXNTdWNjZXNzQ29kZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsZWQgPSAhIWNhbmNlbGVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGFkZEF1dGhIZWFkZXJfKGhlYWRlcnMsIGF1dGhUb2tlbikge1xyXG4gICAgaWYgKGF1dGhUb2tlbiAhPT0gbnVsbCAmJiBhdXRoVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdGaXJlYmFzZSAnICsgYXV0aFRva2VuO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGFkZFZlcnNpb25IZWFkZXJfKGhlYWRlcnMsIGZpcmViYXNlVmVyc2lvbikge1xyXG4gICAgaGVhZGVyc1snWC1GaXJlYmFzZS1TdG9yYWdlLVZlcnNpb24nXSA9XHJcbiAgICAgICAgJ3dlYmpzLycgKyAoZmlyZWJhc2VWZXJzaW9uICE9PSBudWxsICYmIGZpcmViYXNlVmVyc2lvbiAhPT0gdm9pZCAwID8gZmlyZWJhc2VWZXJzaW9uIDogJ0FwcE1hbmFnZXInKTtcclxufVxyXG5mdW5jdGlvbiBhZGRHbXBpZEhlYWRlcl8oaGVhZGVycywgYXBwSWQpIHtcclxuICAgIGlmIChhcHBJZCkge1xyXG4gICAgICAgIGhlYWRlcnNbJ1gtRmlyZWJhc2UtR01QSUQnXSA9IGFwcElkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGFkZEFwcENoZWNrSGVhZGVyXyhoZWFkZXJzLCBhcHBDaGVja1Rva2VuKSB7XHJcbiAgICBpZiAoYXBwQ2hlY2tUb2tlbiAhPT0gbnVsbCkge1xyXG4gICAgICAgIGhlYWRlcnNbJ1gtRmlyZWJhc2UtQXBwQ2hlY2snXSA9IGFwcENoZWNrVG9rZW47XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGFwcElkLCBhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4sIHBvb2wsIGZpcmViYXNlVmVyc2lvbikge1xyXG4gICAgY29uc3QgcXVlcnlQYXJ0ID0gbWFrZVF1ZXJ5U3RyaW5nKHJlcXVlc3RJbmZvLnVybFBhcmFtcyk7XHJcbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0SW5mby51cmwgKyBxdWVyeVBhcnQ7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdEluZm8uaGVhZGVycyk7XHJcbiAgICBhZGRHbXBpZEhlYWRlcl8oaGVhZGVycywgYXBwSWQpO1xyXG4gICAgYWRkQXV0aEhlYWRlcl8oaGVhZGVycywgYXV0aFRva2VuKTtcclxuICAgIGFkZFZlcnNpb25IZWFkZXJfKGhlYWRlcnMsIGZpcmViYXNlVmVyc2lvbik7XHJcbiAgICBhZGRBcHBDaGVja0hlYWRlcl8oaGVhZGVycywgYXBwQ2hlY2tUb2tlbik7XHJcbiAgICByZXR1cm4gbmV3IE5ldHdvcmtSZXF1ZXN0KHVybCwgcmVxdWVzdEluZm8ubWV0aG9kLCBoZWFkZXJzLCByZXF1ZXN0SW5mby5ib2R5LCByZXF1ZXN0SW5mby5zdWNjZXNzQ29kZXMsIHJlcXVlc3RJbmZvLmFkZGl0aW9uYWxSZXRyeUNvZGVzLCByZXF1ZXN0SW5mby5oYW5kbGVyLCByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIsIHJlcXVlc3RJbmZvLnRpbWVvdXQsIHJlcXVlc3RJbmZvLnByb2dyZXNzQ2FsbGJhY2ssIHBvb2wpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEJsb2JCdWlsZGVyKCkge1xyXG4gICAgaWYgKHR5cGVvZiBCbG9iQnVpbGRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gQmxvYkJ1aWxkZXI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgV2ViS2l0QmxvYkJ1aWxkZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIFdlYktpdEJsb2JCdWlsZGVyO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ29uY2F0ZW5hdGVzIG9uZSBvciBtb3JlIHZhbHVlcyB0b2dldGhlciBhbmQgY29udmVydHMgdGhlbSB0byBhIEJsb2IuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcmdzIFRoZSB2YWx1ZXMgdGhhdCB3aWxsIG1ha2UgdXAgdGhlIHJlc3VsdGluZyBibG9iLlxyXG4gKiBAcmV0dXJuIFRoZSBibG9iLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QmxvYiguLi5hcmdzKSB7XHJcbiAgICBjb25zdCBCbG9iQnVpbGRlciA9IGdldEJsb2JCdWlsZGVyKCk7XHJcbiAgICBpZiAoQmxvYkJ1aWxkZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNvbnN0IGJiID0gbmV3IEJsb2JCdWlsZGVyKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJiLmFwcGVuZChhcmdzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJiLmdldEJsb2IoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChpc05hdGl2ZUJsb2JEZWZpbmVkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iKGFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0b3JhZ2VFcnJvcihcInVuc3VwcG9ydGVkLWVudmlyb25tZW50XCIgLyogVU5TVVBQT1JURURfRU5WSVJPTk1FTlQgKi8sIFwiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc2VlbSB0byBzdXBwb3J0IGNyZWF0aW5nIEJsb2JzXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2xpY2VzIHRoZSBibG9iLiBUaGUgcmV0dXJuZWQgYmxvYiBjb250YWlucyBkYXRhIGZyb20gdGhlIHN0YXJ0IGJ5dGVcclxuICogKGluY2x1c2l2ZSkgdGlsbCB0aGUgZW5kIGJ5dGUgKGV4Y2x1c2l2ZSkuIE5lZ2F0aXZlIGluZGljZXMgY2Fubm90IGJlIHVzZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBibG9iIFRoZSBibG9iIHRvIGJlIHNsaWNlZC5cclxuICogQHBhcmFtIHN0YXJ0IEluZGV4IG9mIHRoZSBzdGFydGluZyBieXRlLlxyXG4gKiBAcGFyYW0gZW5kIEluZGV4IG9mIHRoZSBlbmRpbmcgYnl0ZS5cclxuICogQHJldHVybiBUaGUgYmxvYiBzbGljZSBvciBudWxsIGlmIG5vdCBzdXBwb3J0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzbGljZUJsb2IoYmxvYiwgc3RhcnQsIGVuZCkge1xyXG4gICAgaWYgKGJsb2Iud2Via2l0U2xpY2UpIHtcclxuICAgICAgICByZXR1cm4gYmxvYi53ZWJraXRTbGljZShzdGFydCwgZW5kKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGJsb2IubW96U2xpY2UpIHtcclxuICAgICAgICByZXR1cm4gYmxvYi5tb3pTbGljZShzdGFydCwgZW5kKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGJsb2Iuc2xpY2UpIHtcclxuICAgICAgICByZXR1cm4gYmxvYi5zbGljZShzdGFydCwgZW5kKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBDb252ZXJ0cyBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byBhIGJpbmFyeSBzdHJpbmcuICovXHJcbmZ1bmN0aW9uIGRlY29kZUJhc2U2NChlbmNvZGVkKSB7XHJcbiAgICByZXR1cm4gYXRvYihlbmNvZGVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gZW51bWVyYXRpb24gb2YgdGhlIHBvc3NpYmxlIHN0cmluZyBmb3JtYXRzIGZvciB1cGxvYWQuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFN0cmluZ0Zvcm1hdCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoZSBzdHJpbmcgc2hvdWxkIGJlIGludGVycHJldGVkIFwicmF3XCIsIHRoYXQgaXMsIGFzIG5vcm1hbCB0ZXh0LlxyXG4gICAgICogVGhlIHN0cmluZyB3aWxsIGJlIGludGVycHJldGVkIGFzIFVURi0xNiwgdGhlbiB1cGxvYWRlZCBhcyBhIFVURi04IGJ5dGVcclxuICAgICAqIHNlcXVlbmNlLlxyXG4gICAgICogRXhhbXBsZTogVGhlIHN0cmluZyAnSGVsbG8hIFxcXFx1ZDgzZFxcXFx1ZGUwYScgYmVjb21lcyB0aGUgYnl0ZSBzZXF1ZW5jZVxyXG4gICAgICogNDggNjUgNmMgNmMgNmYgMjEgMjAgZjAgOWYgOTggOGFcclxuICAgICAqL1xyXG4gICAgUkFXOiAncmF3JyxcclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoZSBzdHJpbmcgc2hvdWxkIGJlIGludGVycHJldGVkIGFzIGJhc2U2NC1lbmNvZGVkIGRhdGEuXHJcbiAgICAgKiBQYWRkaW5nIGNoYXJhY3RlcnMgKHRyYWlsaW5nICc9J3MpIGFyZSBvcHRpb25hbC5cclxuICAgICAqIEV4YW1wbGU6IFRoZSBzdHJpbmcgJ3JXbU8rK0U2dDcvcmx3PT0nIGJlY29tZXMgdGhlIGJ5dGUgc2VxdWVuY2VcclxuICAgICAqIGFkIDY5IDhlIGZiIGUxIDNhIGI3IGJmIGViIDk3XHJcbiAgICAgKi9cclxuICAgIEJBU0U2NDogJ2Jhc2U2NCcsXHJcbiAgICAvKipcclxuICAgICAqIEluZGljYXRlcyB0aGUgc3RyaW5nIHNob3VsZCBiZSBpbnRlcnByZXRlZCBhcyBiYXNlNjR1cmwtZW5jb2RlZCBkYXRhLlxyXG4gICAgICogUGFkZGluZyBjaGFyYWN0ZXJzICh0cmFpbGluZyAnPSdzKSBhcmUgb3B0aW9uYWwuXHJcbiAgICAgKiBFeGFtcGxlOiBUaGUgc3RyaW5nICdyV21PLS1FNnQ3X3Jsdz09JyBiZWNvbWVzIHRoZSBieXRlIHNlcXVlbmNlXHJcbiAgICAgKiBhZCA2OSA4ZSBmYiBlMSAzYSBiNyBiZiBlYiA5N1xyXG4gICAgICovXHJcbiAgICBCQVNFNjRVUkw6ICdiYXNlNjR1cmwnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHN0cmluZyBpcyBhIGRhdGEgVVJMLCBzdWNoIGFzIG9uZSBvYnRhaW5lZCBmcm9tXHJcbiAgICAgKiBjYW52YXMudG9EYXRhVVJMKCkuXHJcbiAgICAgKiBFeGFtcGxlOiB0aGUgc3RyaW5nICdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsYWFhYSdcclxuICAgICAqIGJlY29tZXMgdGhlIGJ5dGUgc2VxdWVuY2VcclxuICAgICAqIDY5IGE2IDlhXHJcbiAgICAgKiAodGhlIGNvbnRlbnQtdHlwZSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiIGlzIGFsc28gYXBwbGllZCwgYnV0IGNhblxyXG4gICAgICogYmUgb3ZlcnJpZGRlbiBpbiB0aGUgbWV0YWRhdGEgb2JqZWN0KS5cclxuICAgICAqL1xyXG4gICAgREFUQV9VUkw6ICdkYXRhX3VybCdcclxufTtcclxuY2xhc3MgU3RyaW5nRGF0YSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBjb250ZW50VHlwZSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlIHx8IG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gZGF0YUZyb21TdHJpbmcoZm9ybWF0LCBzdHJpbmdEYXRhKSB7XHJcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xyXG4gICAgICAgIGNhc2UgU3RyaW5nRm9ybWF0LlJBVzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdEYXRhKHV0ZjhCeXRlc18oc3RyaW5nRGF0YSkpO1xyXG4gICAgICAgIGNhc2UgU3RyaW5nRm9ybWF0LkJBU0U2NDpcclxuICAgICAgICBjYXNlIFN0cmluZ0Zvcm1hdC5CQVNFNjRVUkw6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nRGF0YShiYXNlNjRCeXRlc18oZm9ybWF0LCBzdHJpbmdEYXRhKSk7XHJcbiAgICAgICAgY2FzZSBTdHJpbmdGb3JtYXQuREFUQV9VUkw6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nRGF0YShkYXRhVVJMQnl0ZXNfKHN0cmluZ0RhdGEpLCBkYXRhVVJMQ29udGVudFR5cGVfKHN0cmluZ0RhdGEpKTtcclxuICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICB9XHJcbiAgICAvLyBhc3NlcnQoZmFsc2UpO1xyXG4gICAgdGhyb3cgdW5rbm93bigpO1xyXG59XHJcbmZ1bmN0aW9uIHV0ZjhCeXRlc18odmFsdWUpIHtcclxuICAgIGNvbnN0IGIgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPD0gMTI3KSB7XHJcbiAgICAgICAgICAgIGIucHVzaChjKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjIDw9IDIwNDcpIHtcclxuICAgICAgICAgICAgICAgIGIucHVzaCgxOTIgfCAoYyA+PiA2KSwgMTI4IHwgKGMgJiA2MykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKChjICYgNjQ1MTIpID09PSA1NTI5Nikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzdGFydCBvZiBhIHN1cnJvZ2F0ZSBwYWlyLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gaSA8IHZhbHVlLmxlbmd0aCAtIDEgJiYgKHZhbHVlLmNoYXJDb2RlQXQoaSArIDEpICYgNjQ1MTIpID09PSA1NjMyMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBzZWNvbmQgc3Vycm9nYXRlIHdhc24ndCB0aGVyZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5wdXNoKDIzOSwgMTkxLCAxODkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGkgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsbyA9IHZhbHVlLmNoYXJDb2RlQXQoKytpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IDY1NTM2IHwgKChoaSAmIDEwMjMpIDw8IDEwKSB8IChsbyAmIDEwMjMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLnB1c2goMjQwIHwgKGMgPj4gMTgpLCAxMjggfCAoKGMgPj4gMTIpICYgNjMpLCAxMjggfCAoKGMgPj4gNikgJiA2MyksIDEyOCB8IChjICYgNjMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiA2NDUxMikgPT09IDU2MzIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgbG93IHN1cnJvZ2F0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5wdXNoKDIzOSwgMTkxLCAxODkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5wdXNoKDIyNCB8IChjID4+IDEyKSwgMTI4IHwgKChjID4+IDYpICYgNjMpLCAxMjggfCAoYyAmIDYzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGIpO1xyXG59XHJcbmZ1bmN0aW9uIHBlcmNlbnRFbmNvZGVkQnl0ZXNfKHZhbHVlKSB7XHJcbiAgICBsZXQgZGVjb2RlZDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZGVjb2RlZCA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHRocm93IGludmFsaWRGb3JtYXQoU3RyaW5nRm9ybWF0LkRBVEFfVVJMLCAnTWFsZm9ybWVkIGRhdGEgVVJMLicpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHV0ZjhCeXRlc18oZGVjb2RlZCk7XHJcbn1cclxuZnVuY3Rpb24gYmFzZTY0Qnl0ZXNfKGZvcm1hdCwgdmFsdWUpIHtcclxuICAgIHN3aXRjaCAoZm9ybWF0KSB7XHJcbiAgICAgICAgY2FzZSBTdHJpbmdGb3JtYXQuQkFTRTY0OiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc01pbnVzID0gdmFsdWUuaW5kZXhPZignLScpICE9PSAtMTtcclxuICAgICAgICAgICAgY29uc3QgaGFzVW5kZXIgPSB2YWx1ZS5pbmRleE9mKCdfJykgIT09IC0xO1xyXG4gICAgICAgICAgICBpZiAoaGFzTWludXMgfHwgaGFzVW5kZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRDaGFyID0gaGFzTWludXMgPyAnLScgOiAnXyc7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBpbnZhbGlkRm9ybWF0KGZvcm1hdCwgXCJJbnZhbGlkIGNoYXJhY3RlciAnXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRDaGFyICtcclxuICAgICAgICAgICAgICAgICAgICBcIicgZm91bmQ6IGlzIGl0IGJhc2U2NHVybCBlbmNvZGVkP1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBTdHJpbmdGb3JtYXQuQkFTRTY0VVJMOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc1BsdXMgPSB2YWx1ZS5pbmRleE9mKCcrJykgIT09IC0xO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNTbGFzaCA9IHZhbHVlLmluZGV4T2YoJy8nKSAhPT0gLTE7XHJcbiAgICAgICAgICAgIGlmIChoYXNQbHVzIHx8IGhhc1NsYXNoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkQ2hhciA9IGhhc1BsdXMgPyAnKycgOiAnLyc7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBpbnZhbGlkRm9ybWF0KGZvcm1hdCwgXCJJbnZhbGlkIGNoYXJhY3RlciAnXCIgKyBpbnZhbGlkQ2hhciArIFwiJyBmb3VuZDogaXMgaXQgYmFzZTY0IGVuY29kZWQ/XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgIH1cclxuICAgIGxldCBieXRlcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYnl0ZXMgPSBkZWNvZGVCYXNlNjQodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aHJvdyBpbnZhbGlkRm9ybWF0KGZvcm1hdCwgJ0ludmFsaWQgY2hhcmFjdGVyIGZvdW5kJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVzLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXJyYXlbaV0gPSBieXRlcy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG59XHJcbmNsYXNzIERhdGFVUkxQYXJ0cyB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhVVJMKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlNjQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRUeXBlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gZGF0YVVSTC5tYXRjaCgvXmRhdGE6KFteLF0rKT8sLyk7XHJcbiAgICAgICAgaWYgKG1hdGNoZXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgaW52YWxpZEZvcm1hdChTdHJpbmdGb3JtYXQuREFUQV9VUkwsIFwiTXVzdCBiZSBmb3JtYXR0ZWQgJ2RhdGE6WzxtZWRpYXR5cGU+XVs7YmFzZTY0XSw8ZGF0YT5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IG1hdGNoZXNbMV0gfHwgbnVsbDtcclxuICAgICAgICBpZiAobWlkZGxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5iYXNlNjQgPSBlbmRzV2l0aChtaWRkbGUsICc7YmFzZTY0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudFR5cGUgPSB0aGlzLmJhc2U2NFxyXG4gICAgICAgICAgICAgICAgPyBtaWRkbGUuc3Vic3RyaW5nKDAsIG1pZGRsZS5sZW5ndGggLSAnO2Jhc2U2NCcubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgOiBtaWRkbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzdCA9IGRhdGFVUkwuc3Vic3RyaW5nKGRhdGFVUkwuaW5kZXhPZignLCcpICsgMSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZGF0YVVSTEJ5dGVzXyhkYXRhVXJsKSB7XHJcbiAgICBjb25zdCBwYXJ0cyA9IG5ldyBEYXRhVVJMUGFydHMoZGF0YVVybCk7XHJcbiAgICBpZiAocGFydHMuYmFzZTY0KSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NEJ5dGVzXyhTdHJpbmdGb3JtYXQuQkFTRTY0LCBwYXJ0cy5yZXN0KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBwZXJjZW50RW5jb2RlZEJ5dGVzXyhwYXJ0cy5yZXN0KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBkYXRhVVJMQ29udGVudFR5cGVfKGRhdGFVcmwpIHtcclxuICAgIGNvbnN0IHBhcnRzID0gbmV3IERhdGFVUkxQYXJ0cyhkYXRhVXJsKTtcclxuICAgIHJldHVybiBwYXJ0cy5jb250ZW50VHlwZTtcclxufVxyXG5mdW5jdGlvbiBlbmRzV2l0aChzLCBlbmQpIHtcclxuICAgIGNvbnN0IGxvbmdFbm91Z2ggPSBzLmxlbmd0aCA+PSBlbmQubGVuZ3RoO1xyXG4gICAgaWYgKCFsb25nRW5vdWdoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHMuc3Vic3RyaW5nKHMubGVuZ3RoIC0gZW5kLmxlbmd0aCkgPT09IGVuZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQHBhcmFtIG9wdF9lbGlkZUNvcHkgLSBJZiB0cnVlLCBkb2Vzbid0IGNvcHkgbXV0YWJsZSBpbnB1dCBkYXRhXHJcbiAqICAgICAoZS5nLiBVaW50OEFycmF5cykuIFBhc3MgdHJ1ZSBvbmx5IGlmIHlvdSBrbm93IHRoZSBvYmplY3RzIHdpbGwgbm90IGJlXHJcbiAqICAgICBtb2RpZmllZCBhZnRlciB0aGlzIGJsb2IncyBjb25zdHJ1Y3Rpb24uXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgRmJzQmxvYiB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBlbGlkZUNvcHkpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICAgICAgbGV0IGJsb2JUeXBlID0gJyc7XHJcbiAgICAgICAgaWYgKGlzTmF0aXZlQmxvYihkYXRhKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFfID0gZGF0YTtcclxuICAgICAgICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTtcclxuICAgICAgICAgICAgYmxvYlR5cGUgPSBkYXRhLnR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgICAgICBpZiAoZWxpZGVDb3B5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFfID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFfID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5ieXRlTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YV8uc2V0KG5ldyBVaW50OEFycmF5KGRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaXplID0gdGhpcy5kYXRhXy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGlkZUNvcHkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YV8gPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhXyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YV8uc2V0KGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNpemUgPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaXplXyA9IHNpemU7XHJcbiAgICAgICAgdGhpcy50eXBlXyA9IGJsb2JUeXBlO1xyXG4gICAgfVxyXG4gICAgc2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplXztcclxuICAgIH1cclxuICAgIHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZV87XHJcbiAgICB9XHJcbiAgICBzbGljZShzdGFydEJ5dGUsIGVuZEJ5dGUpIHtcclxuICAgICAgICBpZiAoaXNOYXRpdmVCbG9iKHRoaXMuZGF0YV8pKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWxCbG9iID0gdGhpcy5kYXRhXztcclxuICAgICAgICAgICAgY29uc3Qgc2xpY2VkID0gc2xpY2VCbG9iKHJlYWxCbG9iLCBzdGFydEJ5dGUsIGVuZEJ5dGUpO1xyXG4gICAgICAgICAgICBpZiAoc2xpY2VkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZic0Jsb2Ioc2xpY2VkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWNlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhXy5idWZmZXIsIHN0YXJ0Qnl0ZSwgZW5kQnl0ZSAtIHN0YXJ0Qnl0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmJzQmxvYihzbGljZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldEJsb2IoLi4uYXJncykge1xyXG4gICAgICAgIGlmIChpc05hdGl2ZUJsb2JEZWZpbmVkKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgYmxvYmJ5ID0gYXJncy5tYXAoKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEZic0Jsb2IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsLmRhdGFfO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmJzQmxvYihnZXRCbG9iLmFwcGx5KG51bGwsIGJsb2JieSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdWludDhBcnJheXMgPSBhcmdzLm1hcCgodmFsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhRnJvbVN0cmluZyhTdHJpbmdGb3JtYXQuUkFXLCB2YWwpLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBCbG9icyBkb24ndCBleGlzdCwgc28gdGhpcyBoYXMgdG8gYmUgYSBVaW50OEFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwuZGF0YV87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsZXQgZmluYWxMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB1aW50OEFycmF5cy5mb3JFYWNoKChhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZmluYWxMZW5ndGggKz0gYXJyYXkuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KGZpbmFsTGVuZ3RoKTtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgdWludDhBcnJheXMuZm9yRWFjaCgoYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXJnZWRbaW5kZXgrK10gPSBhcnJheVtpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmJzQmxvYihtZXJnZWQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVwbG9hZERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YV87XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIE9iamVjdCByZXN1bHRpbmcgZnJvbSBwYXJzaW5nIHRoZSBnaXZlbiBKU09OLCBvciBudWxsIGlmIHRoZVxyXG4gKiBnaXZlbiBzdHJpbmcgZG9lcyBub3QgcmVwcmVzZW50IGEgSlNPTiBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uT2JqZWN0T3JOdWxsKHMpIHtcclxuICAgIGxldCBvYmo7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG9iaiA9IEpTT04ucGFyc2Uocyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzTm9uQXJyYXlPYmplY3Qob2JqKSkge1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBDb250YWlucyBoZWxwZXIgbWV0aG9kcyBmb3IgbWFuaXB1bGF0aW5nIHBhdGhzLlxyXG4gKi9cclxuLyoqXHJcbiAqIEByZXR1cm4gTnVsbCBpZiB0aGUgcGF0aCBpcyBhbHJlYWR5IGF0IHRoZSByb290LlxyXG4gKi9cclxuZnVuY3Rpb24gcGFyZW50KHBhdGgpIHtcclxuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW5kZXggPSBwYXRoLmxhc3RJbmRleE9mKCcvJyk7XHJcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3UGF0aCA9IHBhdGguc2xpY2UoMCwgaW5kZXgpO1xyXG4gICAgcmV0dXJuIG5ld1BhdGg7XHJcbn1cclxuZnVuY3Rpb24gY2hpbGQocGF0aCwgY2hpbGRQYXRoKSB7XHJcbiAgICBjb25zdCBjYW5vbmljYWxDaGlsZFBhdGggPSBjaGlsZFBhdGhcclxuICAgICAgICAuc3BsaXQoJy8nKVxyXG4gICAgICAgIC5maWx0ZXIoY29tcG9uZW50ID0+IGNvbXBvbmVudC5sZW5ndGggPiAwKVxyXG4gICAgICAgIC5qb2luKCcvJyk7XHJcbiAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gY2Fub25pY2FsQ2hpbGRQYXRoO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGggKyAnLycgKyBjYW5vbmljYWxDaGlsZFBhdGg7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGxhc3QgY29tcG9uZW50IG9mIGEgcGF0aC5cclxuICogJy9mb28vYmFyJyAtPiAnYmFyJ1xyXG4gKiAnL2Zvby9iYXIvYmF6LycgLT4gJ2Jhei8nXHJcbiAqICcvYScgLT4gJ2EnXHJcbiAqL1xyXG5mdW5jdGlvbiBsYXN0Q29tcG9uZW50KHBhdGgpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gcGF0aC5sYXN0SW5kZXhPZignLycsIHBhdGgubGVuZ3RoIC0gMik7XHJcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5zbGljZShpbmRleCArIDEpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIG5vWGZvcm1fKG1ldGFkYXRhLCB2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbmNsYXNzIE1hcHBpbmcge1xyXG4gICAgY29uc3RydWN0b3Ioc2VydmVyLCBsb2NhbCwgd3JpdGFibGUsIHhmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XHJcbiAgICAgICAgdGhpcy5sb2NhbCA9IGxvY2FsIHx8IHNlcnZlcjtcclxuICAgICAgICB0aGlzLndyaXRhYmxlID0gISF3cml0YWJsZTtcclxuICAgICAgICB0aGlzLnhmb3JtID0geGZvcm0gfHwgbm9YZm9ybV87XHJcbiAgICB9XHJcbn1cclxubGV0IG1hcHBpbmdzXyA9IG51bGw7XHJcbmZ1bmN0aW9uIHhmb3JtUGF0aChmdWxsUGF0aCkge1xyXG4gICAgaWYgKCFpc1N0cmluZyhmdWxsUGF0aCkgfHwgZnVsbFBhdGgubGVuZ3RoIDwgMikge1xyXG4gICAgICAgIHJldHVybiBmdWxsUGF0aDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBsYXN0Q29tcG9uZW50KGZ1bGxQYXRoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRNYXBwaW5ncygpIHtcclxuICAgIGlmIChtYXBwaW5nc18pIHtcclxuICAgICAgICByZXR1cm4gbWFwcGluZ3NfO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbWFwcGluZ3MgPSBbXTtcclxuICAgIG1hcHBpbmdzLnB1c2gobmV3IE1hcHBpbmcoJ2J1Y2tldCcpKTtcclxuICAgIG1hcHBpbmdzLnB1c2gobmV3IE1hcHBpbmcoJ2dlbmVyYXRpb24nKSk7XHJcbiAgICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdtZXRhZ2VuZXJhdGlvbicpKTtcclxuICAgIG1hcHBpbmdzLnB1c2gobmV3IE1hcHBpbmcoJ25hbWUnLCAnZnVsbFBhdGgnLCB0cnVlKSk7XHJcbiAgICBmdW5jdGlvbiBtYXBwaW5nc1hmb3JtUGF0aChfbWV0YWRhdGEsIGZ1bGxQYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHhmb3JtUGF0aChmdWxsUGF0aCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuYW1lTWFwcGluZyA9IG5ldyBNYXBwaW5nKCduYW1lJyk7XHJcbiAgICBuYW1lTWFwcGluZy54Zm9ybSA9IG1hcHBpbmdzWGZvcm1QYXRoO1xyXG4gICAgbWFwcGluZ3MucHVzaChuYW1lTWFwcGluZyk7XHJcbiAgICAvKipcclxuICAgICAqIENvZXJjZXMgdGhlIHNlY29uZCBwYXJhbSB0byBhIG51bWJlciwgaWYgaXQgaXMgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24geGZvcm1TaXplKF9tZXRhZGF0YSwgc2l6ZSkge1xyXG4gICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE51bWJlcihzaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXplO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHNpemVNYXBwaW5nID0gbmV3IE1hcHBpbmcoJ3NpemUnKTtcclxuICAgIHNpemVNYXBwaW5nLnhmb3JtID0geGZvcm1TaXplO1xyXG4gICAgbWFwcGluZ3MucHVzaChzaXplTWFwcGluZyk7XHJcbiAgICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCd0aW1lQ3JlYXRlZCcpKTtcclxuICAgIG1hcHBpbmdzLnB1c2gobmV3IE1hcHBpbmcoJ3VwZGF0ZWQnKSk7XHJcbiAgICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdtZDVIYXNoJywgbnVsbCwgdHJ1ZSkpO1xyXG4gICAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY2FjaGVDb250cm9sJywgbnVsbCwgdHJ1ZSkpO1xyXG4gICAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY29udGVudERpc3Bvc2l0aW9uJywgbnVsbCwgdHJ1ZSkpO1xyXG4gICAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY29udGVudEVuY29kaW5nJywgbnVsbCwgdHJ1ZSkpO1xyXG4gICAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY29udGVudExhbmd1YWdlJywgbnVsbCwgdHJ1ZSkpO1xyXG4gICAgbWFwcGluZ3MucHVzaChuZXcgTWFwcGluZygnY29udGVudFR5cGUnLCBudWxsLCB0cnVlKSk7XHJcbiAgICBtYXBwaW5ncy5wdXNoKG5ldyBNYXBwaW5nKCdtZXRhZGF0YScsICdjdXN0b21NZXRhZGF0YScsIHRydWUpKTtcclxuICAgIG1hcHBpbmdzXyA9IG1hcHBpbmdzO1xyXG4gICAgcmV0dXJuIG1hcHBpbmdzXztcclxufVxyXG5mdW5jdGlvbiBhZGRSZWYobWV0YWRhdGEsIHNlcnZpY2UpIHtcclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUmVmKCkge1xyXG4gICAgICAgIGNvbnN0IGJ1Y2tldCA9IG1ldGFkYXRhWydidWNrZXQnXTtcclxuICAgICAgICBjb25zdCBwYXRoID0gbWV0YWRhdGFbJ2Z1bGxQYXRoJ107XHJcbiAgICAgICAgY29uc3QgbG9jID0gbmV3IExvY2F0aW9uKGJ1Y2tldCwgcGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX21ha2VTdG9yYWdlUmVmZXJlbmNlKGxvYyk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobWV0YWRhdGEsICdyZWYnLCB7IGdldDogZ2VuZXJhdGVSZWYgfSk7XHJcbn1cclxuZnVuY3Rpb24gZnJvbVJlc291cmNlKHNlcnZpY2UsIHJlc291cmNlLCBtYXBwaW5ncykge1xyXG4gICAgY29uc3QgbWV0YWRhdGEgPSB7fTtcclxuICAgIG1ldGFkYXRhWyd0eXBlJ10gPSAnZmlsZSc7XHJcbiAgICBjb25zdCBsZW4gPSBtYXBwaW5ncy5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgbWFwcGluZyA9IG1hcHBpbmdzW2ldO1xyXG4gICAgICAgIG1ldGFkYXRhW21hcHBpbmcubG9jYWxdID0gbWFwcGluZy54Zm9ybShtZXRhZGF0YSwgcmVzb3VyY2VbbWFwcGluZy5zZXJ2ZXJdKTtcclxuICAgIH1cclxuICAgIGFkZFJlZihtZXRhZGF0YSwgc2VydmljZSk7XHJcbiAgICByZXR1cm4gbWV0YWRhdGE7XHJcbn1cclxuZnVuY3Rpb24gZnJvbVJlc291cmNlU3RyaW5nKHNlcnZpY2UsIHJlc291cmNlU3RyaW5nLCBtYXBwaW5ncykge1xyXG4gICAgY29uc3Qgb2JqID0ganNvbk9iamVjdE9yTnVsbChyZXNvdXJjZVN0cmluZyk7XHJcbiAgICBpZiAob2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNvdXJjZSA9IG9iajtcclxuICAgIHJldHVybiBmcm9tUmVzb3VyY2Uoc2VydmljZSwgcmVzb3VyY2UsIG1hcHBpbmdzKTtcclxufVxyXG5mdW5jdGlvbiBkb3dubG9hZFVybEZyb21SZXNvdXJjZVN0cmluZyhtZXRhZGF0YSwgcmVzb3VyY2VTdHJpbmcsIGhvc3QpIHtcclxuICAgIGNvbnN0IG9iaiA9IGpzb25PYmplY3RPck51bGwocmVzb3VyY2VTdHJpbmcpO1xyXG4gICAgaWYgKG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc1N0cmluZyhvYmpbJ2Rvd25sb2FkVG9rZW5zJ10pKSB7XHJcbiAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIG9iamVjdHMgYXJlIHVwbG9hZGVkIHRocm91Z2ggR0NTIGFuZCByZXRyaWV2ZWRcclxuICAgICAgICAvLyB0aHJvdWdoIGxpc3QsIHNvIHdlIGRvbid0IHdhbnQgdG8gdGhyb3cgYW4gRXJyb3IuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0b2tlbnMgPSBvYmpbJ2Rvd25sb2FkVG9rZW5zJ107XHJcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZW5jb2RlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xyXG4gICAgY29uc3QgdG9rZW5zTGlzdCA9IHRva2Vucy5zcGxpdCgnLCcpO1xyXG4gICAgY29uc3QgdXJscyA9IHRva2Vuc0xpc3QubWFwKCh0b2tlbikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ1Y2tldCA9IG1ldGFkYXRhWydidWNrZXQnXTtcclxuICAgICAgICBjb25zdCBwYXRoID0gbWV0YWRhdGFbJ2Z1bGxQYXRoJ107XHJcbiAgICAgICAgY29uc3QgdXJsUGFydCA9ICcvYi8nICsgZW5jb2RlKGJ1Y2tldCkgKyAnL28vJyArIGVuY29kZShwYXRoKTtcclxuICAgICAgICBjb25zdCBiYXNlID0gbWFrZVVybCh1cmxQYXJ0LCBob3N0KTtcclxuICAgICAgICBjb25zdCBxdWVyeVN0cmluZyA9IG1ha2VRdWVyeVN0cmluZyh7XHJcbiAgICAgICAgICAgIGFsdDogJ21lZGlhJyxcclxuICAgICAgICAgICAgdG9rZW5cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYmFzZSArIHF1ZXJ5U3RyaW5nO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXJsc1swXTtcclxufVxyXG5mdW5jdGlvbiB0b1Jlc291cmNlU3RyaW5nKG1ldGFkYXRhLCBtYXBwaW5ncykge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSB7fTtcclxuICAgIGNvbnN0IGxlbiA9IG1hcHBpbmdzLmxlbmd0aDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjb25zdCBtYXBwaW5nID0gbWFwcGluZ3NbaV07XHJcbiAgICAgICAgaWYgKG1hcHBpbmcud3JpdGFibGUpIHtcclxuICAgICAgICAgICAgcmVzb3VyY2VbbWFwcGluZy5zZXJ2ZXJdID0gbWV0YWRhdGFbbWFwcGluZy5sb2NhbF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJlc291cmNlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQUkVGSVhFU19LRVkgPSAncHJlZml4ZXMnO1xyXG5jb25zdCBJVEVNU19LRVkgPSAnaXRlbXMnO1xyXG5mdW5jdGlvbiBmcm9tQmFja2VuZFJlc3BvbnNlKHNlcnZpY2UsIGJ1Y2tldCwgcmVzb3VyY2UpIHtcclxuICAgIGNvbnN0IGxpc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgcHJlZml4ZXM6IFtdLFxyXG4gICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICBuZXh0UGFnZVRva2VuOiByZXNvdXJjZVsnbmV4dFBhZ2VUb2tlbiddXHJcbiAgICB9O1xyXG4gICAgaWYgKHJlc291cmNlW1BSRUZJWEVTX0tFWV0pIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhdGggb2YgcmVzb3VyY2VbUFJFRklYRVNfS0VZXSkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoV2l0aG91dFRyYWlsaW5nU2xhc2ggPSBwYXRoLnJlcGxhY2UoL1xcLyQvLCAnJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IHNlcnZpY2UuX21ha2VTdG9yYWdlUmVmZXJlbmNlKG5ldyBMb2NhdGlvbihidWNrZXQsIHBhdGhXaXRob3V0VHJhaWxpbmdTbGFzaCkpO1xyXG4gICAgICAgICAgICBsaXN0UmVzdWx0LnByZWZpeGVzLnB1c2gocmVmZXJlbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocmVzb3VyY2VbSVRFTVNfS0VZXSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXNvdXJjZVtJVEVNU19LRVldKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IHNlcnZpY2UuX21ha2VTdG9yYWdlUmVmZXJlbmNlKG5ldyBMb2NhdGlvbihidWNrZXQsIGl0ZW1bJ25hbWUnXSkpO1xyXG4gICAgICAgICAgICBsaXN0UmVzdWx0Lml0ZW1zLnB1c2gocmVmZXJlbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGlzdFJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBmcm9tUmVzcG9uc2VTdHJpbmcoc2VydmljZSwgYnVja2V0LCByZXNvdXJjZVN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ganNvbk9iamVjdE9yTnVsbChyZXNvdXJjZVN0cmluZyk7XHJcbiAgICBpZiAob2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNvdXJjZSA9IG9iajtcclxuICAgIHJldHVybiBmcm9tQmFja2VuZFJlc3BvbnNlKHNlcnZpY2UsIGJ1Y2tldCwgcmVzb3VyY2UpO1xyXG59XG5cbmNsYXNzIFJlcXVlc3RJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHVybCwgbWV0aG9kLCBcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgd2l0aCB3aGljaCB0byByZXNvbHZlIHRoZSByZXF1ZXN0J3MgcHJvbWlzZS4gT25seSBjYWxsZWRcclxuICAgICAqIGlmIHRoZSByZXF1ZXN0IGlzIHN1Y2Nlc3NmdWwuIFRocm93IGZyb20gdGhpcyBmdW5jdGlvbiB0byByZWplY3QgdGhlXHJcbiAgICAgKiByZXR1cm5lZCBSZXF1ZXN0J3MgcHJvbWlzZSB3aXRoIHRoZSB0aHJvd24gZXJyb3IuXHJcbiAgICAgKiBOb3RlOiBUaGUgWGhySW8gcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gbWF5IGJlIHJldXNlZCBhZnRlciB0aGlzIGNhbGxiYWNrXHJcbiAgICAgKiByZXR1cm5zLiBEbyBub3Qga2VlcCBhIHJlZmVyZW5jZSB0byBpdCBpbiBhbnkgd2F5LlxyXG4gICAgICovXHJcbiAgICBoYW5kbGVyLCB0aW1lb3V0KSB7XHJcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcclxuICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMudXJsUGFyYW1zID0ge307XHJcbiAgICAgICAgdGhpcy5oZWFkZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9ySGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGJ5dGVzIHVwbG9hZGVkIGFuZCB0b3RhbCBzaXplICgtMSBpZiBub3RcclxuICAgICAgICAgKiBjb21wdXRhYmxlKSBvZiB0aGUgcmVxdWVzdCBib2R5IChpLmUuIHVzZWQgdG8gcmVwb3J0IHVwbG9hZCBwcm9ncmVzcykuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm9ncmVzc0NhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NDb2RlcyA9IFsyMDBdO1xyXG4gICAgICAgIHRoaXMuYWRkaXRpb25hbFJldHJ5Q29kZXMgPSBbXTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIHRoZSBVTktOT1dOIFN0b3JhZ2VFcnJvciBpZiBjbmRuIGlzIGZhbHNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlckNoZWNrKGNuZG4pIHtcclxuICAgIGlmICghY25kbikge1xyXG4gICAgICAgIHRocm93IHVua25vd24oKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBtZXRhZGF0YUhhbmRsZXIoc2VydmljZSwgbWFwcGluZ3MpIHtcclxuICAgIGZ1bmN0aW9uIGhhbmRsZXIoeGhyLCB0ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBmcm9tUmVzb3VyY2VTdHJpbmcoc2VydmljZSwgdGV4dCwgbWFwcGluZ3MpO1xyXG4gICAgICAgIGhhbmRsZXJDaGVjayhtZXRhZGF0YSAhPT0gbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbmRsZXI7XHJcbn1cclxuZnVuY3Rpb24gbGlzdEhhbmRsZXIoc2VydmljZSwgYnVja2V0KSB7XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVyKHhociwgdGV4dCkge1xyXG4gICAgICAgIGNvbnN0IGxpc3RSZXN1bHQgPSBmcm9tUmVzcG9uc2VTdHJpbmcoc2VydmljZSwgYnVja2V0LCB0ZXh0KTtcclxuICAgICAgICBoYW5kbGVyQ2hlY2sobGlzdFJlc3VsdCAhPT0gbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFuZGxlcjtcclxufVxyXG5mdW5jdGlvbiBkb3dubG9hZFVybEhhbmRsZXIoc2VydmljZSwgbWFwcGluZ3MpIHtcclxuICAgIGZ1bmN0aW9uIGhhbmRsZXIoeGhyLCB0ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBmcm9tUmVzb3VyY2VTdHJpbmcoc2VydmljZSwgdGV4dCwgbWFwcGluZ3MpO1xyXG4gICAgICAgIGhhbmRsZXJDaGVjayhtZXRhZGF0YSAhPT0gbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkVXJsRnJvbVJlc291cmNlU3RyaW5nKG1ldGFkYXRhLCB0ZXh0LCBzZXJ2aWNlLmhvc3QpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbmRsZXI7XHJcbn1cclxuZnVuY3Rpb24gc2hhcmVkRXJyb3JIYW5kbGVyKGxvY2F0aW9uKSB7XHJcbiAgICBmdW5jdGlvbiBlcnJvckhhbmRsZXIoeGhyLCBlcnIpIHtcclxuICAgICAgICBsZXQgbmV3RXJyO1xyXG4gICAgICAgIGlmICh4aHIuZ2V0U3RhdHVzKCkgPT09IDQwMSkge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIC8vIFRoaXMgZXhhY3QgbWVzc2FnZSBzdHJpbmcgaXMgdGhlIG9ubHkgY29uc2lzdGVudCBwYXJ0IG9mIHRoZVxyXG4gICAgICAgICAgICAvLyBzZXJ2ZXIncyBlcnJvciByZXNwb25zZSB0aGF0IGlkZW50aWZpZXMgaXQgYXMgYW4gQXBwIENoZWNrIGVycm9yLlxyXG4gICAgICAgICAgICB4aHIuZ2V0UmVzcG9uc2VUZXh0KCkuaW5jbHVkZXMoJ0ZpcmViYXNlIEFwcCBDaGVjayB0b2tlbiBpcyBpbnZhbGlkJykpIHtcclxuICAgICAgICAgICAgICAgIG5ld0VyciA9IHVuYXV0aG9yaXplZEFwcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3RXJyID0gdW5hdXRoZW50aWNhdGVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh4aHIuZ2V0U3RhdHVzKCkgPT09IDQwMikge1xyXG4gICAgICAgICAgICAgICAgbmV3RXJyID0gcXVvdGFFeGNlZWRlZChsb2NhdGlvbi5idWNrZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5nZXRTdGF0dXMoKSA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RXJyID0gdW5hdXRob3JpemVkKGxvY2F0aW9uLnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RXJyID0gZXJyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0Vyci5zZXJ2ZXJSZXNwb25zZSA9IGVyci5zZXJ2ZXJSZXNwb25zZTtcclxuICAgICAgICByZXR1cm4gbmV3RXJyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVycm9ySGFuZGxlcjtcclxufVxyXG5mdW5jdGlvbiBvYmplY3RFcnJvckhhbmRsZXIobG9jYXRpb24pIHtcclxuICAgIGNvbnN0IHNoYXJlZCA9IHNoYXJlZEVycm9ySGFuZGxlcihsb2NhdGlvbik7XHJcbiAgICBmdW5jdGlvbiBlcnJvckhhbmRsZXIoeGhyLCBlcnIpIHtcclxuICAgICAgICBsZXQgbmV3RXJyID0gc2hhcmVkKHhociwgZXJyKTtcclxuICAgICAgICBpZiAoeGhyLmdldFN0YXR1cygpID09PSA0MDQpIHtcclxuICAgICAgICAgICAgbmV3RXJyID0gb2JqZWN0Tm90Rm91bmQobG9jYXRpb24ucGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0Vyci5zZXJ2ZXJSZXNwb25zZSA9IGVyci5zZXJ2ZXJSZXNwb25zZTtcclxuICAgICAgICByZXR1cm4gbmV3RXJyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVycm9ySGFuZGxlcjtcclxufVxyXG5mdW5jdGlvbiBnZXRNZXRhZGF0YSQyKHNlcnZpY2UsIGxvY2F0aW9uLCBtYXBwaW5ncykge1xyXG4gICAgY29uc3QgdXJsUGFydCA9IGxvY2F0aW9uLmZ1bGxTZXJ2ZXJVcmwoKTtcclxuICAgIGNvbnN0IHVybCA9IG1ha2VVcmwodXJsUGFydCwgc2VydmljZS5ob3N0KTtcclxuICAgIGNvbnN0IG1ldGhvZCA9ICdHRVQnO1xyXG4gICAgY29uc3QgdGltZW91dCA9IHNlcnZpY2UubWF4T3BlcmF0aW9uUmV0cnlUaW1lO1xyXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSBuZXcgUmVxdWVzdEluZm8odXJsLCBtZXRob2QsIG1ldGFkYXRhSGFuZGxlcihzZXJ2aWNlLCBtYXBwaW5ncyksIHRpbWVvdXQpO1xyXG4gICAgcmVxdWVzdEluZm8uZXJyb3JIYW5kbGVyID0gb2JqZWN0RXJyb3JIYW5kbGVyKGxvY2F0aW9uKTtcclxuICAgIHJldHVybiByZXF1ZXN0SW5mbztcclxufVxyXG5mdW5jdGlvbiBsaXN0JDIoc2VydmljZSwgbG9jYXRpb24sIGRlbGltaXRlciwgcGFnZVRva2VuLCBtYXhSZXN1bHRzKSB7XHJcbiAgICBjb25zdCB1cmxQYXJhbXMgPSB7fTtcclxuICAgIGlmIChsb2NhdGlvbi5pc1Jvb3QpIHtcclxuICAgICAgICB1cmxQYXJhbXNbJ3ByZWZpeCddID0gJyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB1cmxQYXJhbXNbJ3ByZWZpeCddID0gbG9jYXRpb24ucGF0aCArICcvJztcclxuICAgIH1cclxuICAgIGlmIChkZWxpbWl0ZXIgJiYgZGVsaW1pdGVyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB1cmxQYXJhbXNbJ2RlbGltaXRlciddID0gZGVsaW1pdGVyO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhZ2VUb2tlbikge1xyXG4gICAgICAgIHVybFBhcmFtc1sncGFnZVRva2VuJ10gPSBwYWdlVG9rZW47XHJcbiAgICB9XHJcbiAgICBpZiAobWF4UmVzdWx0cykge1xyXG4gICAgICAgIHVybFBhcmFtc1snbWF4UmVzdWx0cyddID0gbWF4UmVzdWx0cztcclxuICAgIH1cclxuICAgIGNvbnN0IHVybFBhcnQgPSBsb2NhdGlvbi5idWNrZXRPbmx5U2VydmVyVXJsKCk7XHJcbiAgICBjb25zdCB1cmwgPSBtYWtlVXJsKHVybFBhcnQsIHNlcnZpY2UuaG9zdCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSAnR0VUJztcclxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXJ2aWNlLm1heE9wZXJhdGlvblJldHJ5VGltZTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gbmV3IFJlcXVlc3RJbmZvKHVybCwgbWV0aG9kLCBsaXN0SGFuZGxlcihzZXJ2aWNlLCBsb2NhdGlvbi5idWNrZXQpLCB0aW1lb3V0KTtcclxuICAgIHJlcXVlc3RJbmZvLnVybFBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IHNoYXJlZEVycm9ySGFuZGxlcihsb2NhdGlvbik7XHJcbiAgICByZXR1cm4gcmVxdWVzdEluZm87XHJcbn1cclxuZnVuY3Rpb24gZ2V0RG93bmxvYWRVcmwoc2VydmljZSwgbG9jYXRpb24sIG1hcHBpbmdzKSB7XHJcbiAgICBjb25zdCB1cmxQYXJ0ID0gbG9jYXRpb24uZnVsbFNlcnZlclVybCgpO1xyXG4gICAgY29uc3QgdXJsID0gbWFrZVVybCh1cmxQYXJ0LCBzZXJ2aWNlLmhvc3QpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gJ0dFVCc7XHJcbiAgICBjb25zdCB0aW1lb3V0ID0gc2VydmljZS5tYXhPcGVyYXRpb25SZXRyeVRpbWU7XHJcbiAgICBjb25zdCByZXF1ZXN0SW5mbyA9IG5ldyBSZXF1ZXN0SW5mbyh1cmwsIG1ldGhvZCwgZG93bmxvYWRVcmxIYW5kbGVyKHNlcnZpY2UsIG1hcHBpbmdzKSwgdGltZW91dCk7XHJcbiAgICByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIgPSBvYmplY3RFcnJvckhhbmRsZXIobG9jYXRpb24pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3RJbmZvO1xyXG59XHJcbmZ1bmN0aW9uIHVwZGF0ZU1ldGFkYXRhJDIoc2VydmljZSwgbG9jYXRpb24sIG1ldGFkYXRhLCBtYXBwaW5ncykge1xyXG4gICAgY29uc3QgdXJsUGFydCA9IGxvY2F0aW9uLmZ1bGxTZXJ2ZXJVcmwoKTtcclxuICAgIGNvbnN0IHVybCA9IG1ha2VVcmwodXJsUGFydCwgc2VydmljZS5ob3N0KTtcclxuICAgIGNvbnN0IG1ldGhvZCA9ICdQQVRDSCc7XHJcbiAgICBjb25zdCBib2R5ID0gdG9SZXNvdXJjZVN0cmluZyhtZXRhZGF0YSwgbWFwcGluZ3MpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyB9O1xyXG4gICAgY29uc3QgdGltZW91dCA9IHNlcnZpY2UubWF4T3BlcmF0aW9uUmV0cnlUaW1lO1xyXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSBuZXcgUmVxdWVzdEluZm8odXJsLCBtZXRob2QsIG1ldGFkYXRhSGFuZGxlcihzZXJ2aWNlLCBtYXBwaW5ncyksIHRpbWVvdXQpO1xyXG4gICAgcmVxdWVzdEluZm8uaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICByZXF1ZXN0SW5mby5ib2R5ID0gYm9keTtcclxuICAgIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IG9iamVjdEVycm9ySGFuZGxlcihsb2NhdGlvbik7XHJcbiAgICByZXR1cm4gcmVxdWVzdEluZm87XHJcbn1cclxuZnVuY3Rpb24gZGVsZXRlT2JqZWN0JDIoc2VydmljZSwgbG9jYXRpb24pIHtcclxuICAgIGNvbnN0IHVybFBhcnQgPSBsb2NhdGlvbi5mdWxsU2VydmVyVXJsKCk7XHJcbiAgICBjb25zdCB1cmwgPSBtYWtlVXJsKHVybFBhcnQsIHNlcnZpY2UuaG9zdCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSAnREVMRVRFJztcclxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXJ2aWNlLm1heE9wZXJhdGlvblJldHJ5VGltZTtcclxuICAgIGZ1bmN0aW9uIGhhbmRsZXIoX3hociwgX3RleHQpIHsgfVxyXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSBuZXcgUmVxdWVzdEluZm8odXJsLCBtZXRob2QsIGhhbmRsZXIsIHRpbWVvdXQpO1xyXG4gICAgcmVxdWVzdEluZm8uc3VjY2Vzc0NvZGVzID0gWzIwMCwgMjA0XTtcclxuICAgIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IG9iamVjdEVycm9ySGFuZGxlcihsb2NhdGlvbik7XHJcbiAgICByZXR1cm4gcmVxdWVzdEluZm87XHJcbn1cclxuZnVuY3Rpb24gZGV0ZXJtaW5lQ29udGVudFR5cGVfKG1ldGFkYXRhLCBibG9iKSB7XHJcbiAgICByZXR1cm4gKChtZXRhZGF0YSAmJiBtZXRhZGF0YVsnY29udGVudFR5cGUnXSkgfHxcclxuICAgICAgICAoYmxvYiAmJiBibG9iLnR5cGUoKSkgfHxcclxuICAgICAgICAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7XHJcbn1cclxuZnVuY3Rpb24gbWV0YWRhdGFGb3JVcGxvYWRfKGxvY2F0aW9uLCBibG9iLCBtZXRhZGF0YSkge1xyXG4gICAgY29uc3QgbWV0YWRhdGFDbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcclxuICAgIG1ldGFkYXRhQ2xvbmVbJ2Z1bGxQYXRoJ10gPSBsb2NhdGlvbi5wYXRoO1xyXG4gICAgbWV0YWRhdGFDbG9uZVsnc2l6ZSddID0gYmxvYi5zaXplKCk7XHJcbiAgICBpZiAoIW1ldGFkYXRhQ2xvbmVbJ2NvbnRlbnRUeXBlJ10pIHtcclxuICAgICAgICBtZXRhZGF0YUNsb25lWydjb250ZW50VHlwZSddID0gZGV0ZXJtaW5lQ29udGVudFR5cGVfKG51bGwsIGJsb2IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1ldGFkYXRhQ2xvbmU7XHJcbn1cclxuLyoqXHJcbiAqIFByZXBhcmUgUmVxdWVzdEluZm8gZm9yIHVwbG9hZHMgYXMgQ29udGVudC1UeXBlOiBtdWx0aXBhcnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBtdWx0aXBhcnRVcGxvYWQoc2VydmljZSwgbG9jYXRpb24sIG1hcHBpbmdzLCBibG9iLCBtZXRhZGF0YSkge1xyXG4gICAgY29uc3QgdXJsUGFydCA9IGxvY2F0aW9uLmJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAgICAgJ1gtR29vZy1VcGxvYWQtUHJvdG9jb2wnOiAnbXVsdGlwYXJ0J1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIGdlbkJvdW5kYXJ5KCkge1xyXG4gICAgICAgIGxldCBzdHIgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xyXG4gICAgICAgICAgICBzdHIgPSBzdHIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc2xpY2UoMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBib3VuZGFyeSA9IGdlbkJvdW5kYXJ5KCk7XHJcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvcmVsYXRlZDsgYm91bmRhcnk9JyArIGJvdW5kYXJ5O1xyXG4gICAgY29uc3QgbWV0YWRhdGFfID0gbWV0YWRhdGFGb3JVcGxvYWRfKGxvY2F0aW9uLCBibG9iLCBtZXRhZGF0YSk7XHJcbiAgICBjb25zdCBtZXRhZGF0YVN0cmluZyA9IHRvUmVzb3VyY2VTdHJpbmcobWV0YWRhdGFfLCBtYXBwaW5ncyk7XHJcbiAgICBjb25zdCBwcmVCbG9iUGFydCA9ICctLScgK1xyXG4gICAgICAgIGJvdW5kYXJ5ICtcclxuICAgICAgICAnXFxyXFxuJyArXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFxcclxcblxcclxcbicgK1xyXG4gICAgICAgIG1ldGFkYXRhU3RyaW5nICtcclxuICAgICAgICAnXFxyXFxuLS0nICtcclxuICAgICAgICBib3VuZGFyeSArXHJcbiAgICAgICAgJ1xcclxcbicgK1xyXG4gICAgICAgICdDb250ZW50LVR5cGU6ICcgK1xyXG4gICAgICAgIG1ldGFkYXRhX1snY29udGVudFR5cGUnXSArXHJcbiAgICAgICAgJ1xcclxcblxcclxcbic7XHJcbiAgICBjb25zdCBwb3N0QmxvYlBhcnQgPSAnXFxyXFxuLS0nICsgYm91bmRhcnkgKyAnLS0nO1xyXG4gICAgY29uc3QgYm9keSA9IEZic0Jsb2IuZ2V0QmxvYihwcmVCbG9iUGFydCwgYmxvYiwgcG9zdEJsb2JQYXJ0KTtcclxuICAgIGlmIChib2R5ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgY2Fubm90U2xpY2VCbG9iKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB1cmxQYXJhbXMgPSB7IG5hbWU6IG1ldGFkYXRhX1snZnVsbFBhdGgnXSB9O1xyXG4gICAgY29uc3QgdXJsID0gbWFrZVVybCh1cmxQYXJ0LCBzZXJ2aWNlLmhvc3QpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gJ1BPU1QnO1xyXG4gICAgY29uc3QgdGltZW91dCA9IHNlcnZpY2UubWF4VXBsb2FkUmV0cnlUaW1lO1xyXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSBuZXcgUmVxdWVzdEluZm8odXJsLCBtZXRob2QsIG1ldGFkYXRhSGFuZGxlcihzZXJ2aWNlLCBtYXBwaW5ncyksIHRpbWVvdXQpO1xyXG4gICAgcmVxdWVzdEluZm8udXJsUGFyYW1zID0gdXJsUGFyYW1zO1xyXG4gICAgcmVxdWVzdEluZm8uaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICByZXF1ZXN0SW5mby5ib2R5ID0gYm9keS51cGxvYWREYXRhKCk7XHJcbiAgICByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIgPSBzaGFyZWRFcnJvckhhbmRsZXIobG9jYXRpb24pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3RJbmZvO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gY3VycmVudCBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRoYXQgaGF2ZSBiZWVuIHVwbG9hZGVkIHNvIGZhci5cclxuICogQHBhcmFtIHRvdGFsIFRoZSB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHVwbG9hZC5cclxuICogQHBhcmFtIG9wdF9maW5hbGl6ZWQgVHJ1ZSBpZiB0aGUgc2VydmVyIGhhcyBmaW5pc2hlZCB0aGUgdXBsb2FkLlxyXG4gKiBAcGFyYW0gb3B0X21ldGFkYXRhIFRoZSB1cGxvYWQgbWV0YWRhdGEsIHNob3VsZFxyXG4gKiAgICAgb25seSBiZSBwYXNzZWQgaWYgb3B0X2ZpbmFsaXplZCBpcyB0cnVlLlxyXG4gKi9cclxuY2xhc3MgUmVzdW1hYmxlVXBsb2FkU3RhdHVzIHtcclxuICAgIGNvbnN0cnVjdG9yKGN1cnJlbnQsIHRvdGFsLCBmaW5hbGl6ZWQsIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gY3VycmVudDtcclxuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSAhIWZpbmFsaXplZDtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGEgfHwgbnVsbDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjaGVja1Jlc3VtZUhlYWRlcl8oeGhyLCBhbGxvd2VkKSB7XHJcbiAgICBsZXQgc3RhdHVzID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgc3RhdHVzID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLUdvb2ctVXBsb2FkLVN0YXR1cycpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBoYW5kbGVyQ2hlY2soZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWxsb3dlZFN0YXR1cyA9IGFsbG93ZWQgfHwgWydhY3RpdmUnXTtcclxuICAgIGhhbmRsZXJDaGVjayghIXN0YXR1cyAmJiBhbGxvd2VkU3RhdHVzLmluZGV4T2Yoc3RhdHVzKSAhPT0gLTEpO1xyXG4gICAgcmV0dXJuIHN0YXR1cztcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVSZXN1bWFibGVVcGxvYWQoc2VydmljZSwgbG9jYXRpb24sIG1hcHBpbmdzLCBibG9iLCBtZXRhZGF0YSkge1xyXG4gICAgY29uc3QgdXJsUGFydCA9IGxvY2F0aW9uLmJ1Y2tldE9ubHlTZXJ2ZXJVcmwoKTtcclxuICAgIGNvbnN0IG1ldGFkYXRhRm9yVXBsb2FkID0gbWV0YWRhdGFGb3JVcGxvYWRfKGxvY2F0aW9uLCBibG9iLCBtZXRhZGF0YSk7XHJcbiAgICBjb25zdCB1cmxQYXJhbXMgPSB7IG5hbWU6IG1ldGFkYXRhRm9yVXBsb2FkWydmdWxsUGF0aCddIH07XHJcbiAgICBjb25zdCB1cmwgPSBtYWtlVXJsKHVybFBhcnQsIHNlcnZpY2UuaG9zdCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSAnUE9TVCc7XHJcbiAgICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgICAgICdYLUdvb2ctVXBsb2FkLVByb3RvY29sJzogJ3Jlc3VtYWJsZScsXHJcbiAgICAgICAgJ1gtR29vZy1VcGxvYWQtQ29tbWFuZCc6ICdzdGFydCcsXHJcbiAgICAgICAgJ1gtR29vZy1VcGxvYWQtSGVhZGVyLUNvbnRlbnQtTGVuZ3RoJzogYCR7YmxvYi5zaXplKCl9YCxcclxuICAgICAgICAnWC1Hb29nLVVwbG9hZC1IZWFkZXItQ29udGVudC1UeXBlJzogbWV0YWRhdGFGb3JVcGxvYWRbJ2NvbnRlbnRUeXBlJ10sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04J1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGJvZHkgPSB0b1Jlc291cmNlU3RyaW5nKG1ldGFkYXRhRm9yVXBsb2FkLCBtYXBwaW5ncyk7XHJcbiAgICBjb25zdCB0aW1lb3V0ID0gc2VydmljZS5tYXhVcGxvYWRSZXRyeVRpbWU7XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVyKHhocikge1xyXG4gICAgICAgIGNoZWNrUmVzdW1lSGVhZGVyXyh4aHIpO1xyXG4gICAgICAgIGxldCB1cmw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdXJsID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLUdvb2ctVXBsb2FkLVVSTCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBoYW5kbGVyQ2hlY2soZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBoYW5kbGVyQ2hlY2soaXNTdHJpbmcodXJsKSk7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gbmV3IFJlcXVlc3RJbmZvKHVybCwgbWV0aG9kLCBoYW5kbGVyLCB0aW1lb3V0KTtcclxuICAgIHJlcXVlc3RJbmZvLnVybFBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgIHJlcXVlc3RJbmZvLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgcmVxdWVzdEluZm8uYm9keSA9IGJvZHk7XHJcbiAgICByZXF1ZXN0SW5mby5lcnJvckhhbmRsZXIgPSBzaGFyZWRFcnJvckhhbmRsZXIobG9jYXRpb24pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3RJbmZvO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gdXJsIEZyb20gYSBjYWxsIHRvIGZicy5yZXF1ZXN0cy5jcmVhdGVSZXN1bWFibGVVcGxvYWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRSZXN1bWFibGVVcGxvYWRTdGF0dXMoc2VydmljZSwgbG9jYXRpb24sIHVybCwgYmxvYikge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IHsgJ1gtR29vZy1VcGxvYWQtQ29tbWFuZCc6ICdxdWVyeScgfTtcclxuICAgIGZ1bmN0aW9uIGhhbmRsZXIoeGhyKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gY2hlY2tSZXN1bWVIZWFkZXJfKHhociwgWydhY3RpdmUnLCAnZmluYWwnXSk7XHJcbiAgICAgICAgbGV0IHNpemVTdHJpbmcgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHNpemVTdHJpbmcgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtR29vZy1VcGxvYWQtU2l6ZS1SZWNlaXZlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBoYW5kbGVyQ2hlY2soZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNpemVTdHJpbmcpIHtcclxuICAgICAgICAgICAgLy8gbnVsbCBvciBlbXB0eSBzdHJpbmdcclxuICAgICAgICAgICAgaGFuZGxlckNoZWNrKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IE51bWJlcihzaXplU3RyaW5nKTtcclxuICAgICAgICBoYW5kbGVyQ2hlY2soIWlzTmFOKHNpemUpKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc3VtYWJsZVVwbG9hZFN0YXR1cyhzaXplLCBibG9iLnNpemUoKSwgc3RhdHVzID09PSAnZmluYWwnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG1ldGhvZCA9ICdQT1NUJztcclxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXJ2aWNlLm1heFVwbG9hZFJldHJ5VGltZTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gbmV3IFJlcXVlc3RJbmZvKHVybCwgbWV0aG9kLCBoYW5kbGVyLCB0aW1lb3V0KTtcclxuICAgIHJlcXVlc3RJbmZvLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgcmVxdWVzdEluZm8uZXJyb3JIYW5kbGVyID0gc2hhcmVkRXJyb3JIYW5kbGVyKGxvY2F0aW9uKTtcclxuICAgIHJldHVybiByZXF1ZXN0SW5mbztcclxufVxyXG4vKipcclxuICogQW55IHVwbG9hZHMgdmlhIHRoZSByZXN1bWFibGUgdXBsb2FkIEFQSSBtdXN0IHRyYW5zZmVyIGEgbnVtYmVyIG9mIGJ5dGVzXHJcbiAqIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiB0aGlzIG51bWJlci5cclxuICovXHJcbmNvbnN0IFJFU1VNQUJMRV9VUExPQURfQ0hVTktfU0laRSA9IDI1NiAqIDEwMjQ7XHJcbi8qKlxyXG4gKiBAcGFyYW0gdXJsIEZyb20gYSBjYWxsIHRvIGZicy5yZXF1ZXN0cy5jcmVhdGVSZXN1bWFibGVVcGxvYWQuXHJcbiAqIEBwYXJhbSBjaHVua1NpemUgTnVtYmVyIG9mIGJ5dGVzIHRvIHVwbG9hZC5cclxuICogQHBhcmFtIHN0YXR1cyBUaGUgcHJldmlvdXMgc3RhdHVzLlxyXG4gKiAgICAgSWYgbm90IHBhc3NlZCBvciBudWxsLCB3ZSBzdGFydCBmcm9tIHRoZSBiZWdpbm5pbmcuXHJcbiAqIEB0aHJvd3MgZmJzLkVycm9yIElmIHRoZSB1cGxvYWQgaXMgYWxyZWFkeSBjb21wbGV0ZSwgdGhlIHBhc3NlZCBpbiBzdGF0dXNcclxuICogICAgIGhhcyBhIGZpbmFsIHNpemUgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJsb2IsIG9yIHRoZSBibG9iIGNhbm5vdCBiZSBzbGljZWRcclxuICogICAgIGZvciB1cGxvYWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250aW51ZVJlc3VtYWJsZVVwbG9hZChsb2NhdGlvbiwgc2VydmljZSwgdXJsLCBibG9iLCBjaHVua1NpemUsIG1hcHBpbmdzLCBzdGF0dXMsIHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgIC8vIFRPRE8oYW5keXNvdG8pOiBzdGFuZGFyZGl6ZSBvbiBpbnRlcm5hbCBhc3NlcnRzXHJcbiAgICAvLyBhc3NlcnQoIShvcHRfc3RhdHVzICYmIG9wdF9zdGF0dXMuZmluYWxpemVkKSk7XHJcbiAgICBjb25zdCBzdGF0dXNfID0gbmV3IFJlc3VtYWJsZVVwbG9hZFN0YXR1cygwLCAwKTtcclxuICAgIGlmIChzdGF0dXMpIHtcclxuICAgICAgICBzdGF0dXNfLmN1cnJlbnQgPSBzdGF0dXMuY3VycmVudDtcclxuICAgICAgICBzdGF0dXNfLnRvdGFsID0gc3RhdHVzLnRvdGFsO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc3RhdHVzXy5jdXJyZW50ID0gMDtcclxuICAgICAgICBzdGF0dXNfLnRvdGFsID0gYmxvYi5zaXplKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoYmxvYi5zaXplKCkgIT09IHN0YXR1c18udG90YWwpIHtcclxuICAgICAgICB0aHJvdyBzZXJ2ZXJGaWxlV3JvbmdTaXplKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBieXRlc0xlZnQgPSBzdGF0dXNfLnRvdGFsIC0gc3RhdHVzXy5jdXJyZW50O1xyXG4gICAgbGV0IGJ5dGVzVG9VcGxvYWQgPSBieXRlc0xlZnQ7XHJcbiAgICBpZiAoY2h1bmtTaXplID4gMCkge1xyXG4gICAgICAgIGJ5dGVzVG9VcGxvYWQgPSBNYXRoLm1pbihieXRlc1RvVXBsb2FkLCBjaHVua1NpemUpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RhcnRCeXRlID0gc3RhdHVzXy5jdXJyZW50O1xyXG4gICAgY29uc3QgZW5kQnl0ZSA9IHN0YXJ0Qnl0ZSArIGJ5dGVzVG9VcGxvYWQ7XHJcbiAgICBjb25zdCB1cGxvYWRDb21tYW5kID0gYnl0ZXNUb1VwbG9hZCA9PT0gYnl0ZXNMZWZ0ID8gJ3VwbG9hZCwgZmluYWxpemUnIDogJ3VwbG9hZCc7XHJcbiAgICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgICAgICdYLUdvb2ctVXBsb2FkLUNvbW1hbmQnOiB1cGxvYWRDb21tYW5kLFxyXG4gICAgICAgICdYLUdvb2ctVXBsb2FkLU9mZnNldCc6IGAke3N0YXR1c18uY3VycmVudH1gXHJcbiAgICB9O1xyXG4gICAgY29uc3QgYm9keSA9IGJsb2Iuc2xpY2Uoc3RhcnRCeXRlLCBlbmRCeXRlKTtcclxuICAgIGlmIChib2R5ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgY2Fubm90U2xpY2VCbG9iKCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVyKHhociwgdGV4dCkge1xyXG4gICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOiBWZXJpZnkgdGhlIE1ENSBvZiBlYWNoIHVwbG9hZGVkIHJhbmdlOlxyXG4gICAgICAgIC8vIHRoZSAneC1yYW5nZS1tZDUnIGhlYWRlciBjb21lcyBiYWNrIHdpdGggc3RhdHVzIGNvZGUgMzA4IHJlc3BvbnNlcy5cclxuICAgICAgICAvLyBXZSdsbCBvbmx5IGJlIGFibGUgdG8gYmFpbCBvdXQgdGhvdWdoLCBiZWNhdXNlIHlvdSBjYW4ndCByZS11cGxvYWQgYVxyXG4gICAgICAgIC8vIHJhbmdlIHRoYXQgeW91IHByZXZpb3VzbHkgdXBsb2FkZWQuXHJcbiAgICAgICAgY29uc3QgdXBsb2FkU3RhdHVzID0gY2hlY2tSZXN1bWVIZWFkZXJfKHhociwgWydhY3RpdmUnLCAnZmluYWwnXSk7XHJcbiAgICAgICAgY29uc3QgbmV3Q3VycmVudCA9IHN0YXR1c18uY3VycmVudCArIGJ5dGVzVG9VcGxvYWQ7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGJsb2Iuc2l6ZSgpO1xyXG4gICAgICAgIGxldCBtZXRhZGF0YTtcclxuICAgICAgICBpZiAodXBsb2FkU3RhdHVzID09PSAnZmluYWwnKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhID0gbWV0YWRhdGFIYW5kbGVyKHNlcnZpY2UsIG1hcHBpbmdzKSh4aHIsIHRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFJlc3VtYWJsZVVwbG9hZFN0YXR1cyhuZXdDdXJyZW50LCBzaXplLCB1cGxvYWRTdGF0dXMgPT09ICdmaW5hbCcsIG1ldGFkYXRhKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG1ldGhvZCA9ICdQT1NUJztcclxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXJ2aWNlLm1heFVwbG9hZFJldHJ5VGltZTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gbmV3IFJlcXVlc3RJbmZvKHVybCwgbWV0aG9kLCBoYW5kbGVyLCB0aW1lb3V0KTtcclxuICAgIHJlcXVlc3RJbmZvLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgcmVxdWVzdEluZm8uYm9keSA9IGJvZHkudXBsb2FkRGF0YSgpO1xyXG4gICAgcmVxdWVzdEluZm8ucHJvZ3Jlc3NDYWxsYmFjayA9IHByb2dyZXNzQ2FsbGJhY2sgfHwgbnVsbDtcclxuICAgIHJlcXVlc3RJbmZvLmVycm9ySGFuZGxlciA9IHNoYXJlZEVycm9ySGFuZGxlcihsb2NhdGlvbik7XHJcbiAgICByZXR1cm4gcmVxdWVzdEluZm87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGV2ZW50IHRoYXQgaXMgdHJpZ2dlcmVkIG9uIGEgdGFzay5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBUYXNrRXZlbnQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEZvciB0aGlzIGV2ZW50LFxyXG4gICAgICogPHVsPlxyXG4gICAgICogICA8bGk+VGhlIGBuZXh0YCBmdW5jdGlvbiBpcyB0cmlnZ2VyZWQgb24gcHJvZ3Jlc3MgdXBkYXRlcyBhbmQgd2hlbiB0aGVcclxuICAgICAqICAgICAgIHRhc2sgaXMgcGF1c2VkL3Jlc3VtZWQgd2l0aCBhbiBgVXBsb2FkVGFza1NuYXBzaG90YCBhcyB0aGUgZmlyc3RcclxuICAgICAqICAgICAgIGFyZ3VtZW50LjwvbGk+XHJcbiAgICAgKiAgIDxsaT5UaGUgYGVycm9yYCBmdW5jdGlvbiBpcyB0cmlnZ2VyZWQgaWYgdGhlIHVwbG9hZCBpcyBjYW5jZWxlZCBvciBmYWlsc1xyXG4gICAgICogICAgICAgZm9yIGFub3RoZXIgcmVhc29uLjwvbGk+XHJcbiAgICAgKiAgIDxsaT5UaGUgYGNvbXBsZXRlYCBmdW5jdGlvbiBpcyB0cmlnZ2VyZWQgaWYgdGhlIHVwbG9hZCBjb21wbGV0ZXNcclxuICAgICAqICAgICAgIHN1Y2Nlc3NmdWxseS48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqL1xyXG4gICAgU1RBVEVfQ0hBTkdFRDogJ3N0YXRlX2NoYW5nZWQnXHJcbn07XHJcbi8vIHR5cGUga2V5cyA9IGtleW9mIFRhc2tTdGF0ZVxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgY3VycmVudCBzdGF0ZSBvZiBhIHJ1bm5pbmcgdXBsb2FkLlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IFRhc2tTdGF0ZSA9IHtcclxuICAgIC8qKiBUaGUgdGFzayBpcyBjdXJyZW50bHkgdHJhbnNmZXJyaW5nIGRhdGEuICovXHJcbiAgICBSVU5OSU5HOiAncnVubmluZycsXHJcbiAgICAvKiogVGhlIHRhc2sgd2FzIHBhdXNlZCBieSB0aGUgdXNlci4gKi9cclxuICAgIFBBVVNFRDogJ3BhdXNlZCcsXHJcbiAgICAvKiogVGhlIHRhc2sgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gKi9cclxuICAgIFNVQ0NFU1M6ICdzdWNjZXNzJyxcclxuICAgIC8qKiBUaGUgdGFzayB3YXMgY2FuY2VsZWQuICovXHJcbiAgICBDQU5DRUxFRDogJ2NhbmNlbGVkJyxcclxuICAgIC8qKiBUaGUgdGFzayBmYWlsZWQgd2l0aCBhbiBlcnJvci4gKi9cclxuICAgIEVSUk9SOiAnZXJyb3InXHJcbn07XHJcbmZ1bmN0aW9uIHRhc2tTdGF0ZUZyb21JbnRlcm5hbFRhc2tTdGF0ZShzdGF0ZSkge1xyXG4gICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgIGNhc2UgXCJydW5uaW5nXCIgLyogUlVOTklORyAqLzpcclxuICAgICAgICBjYXNlIFwicGF1c2luZ1wiIC8qIFBBVVNJTkcgKi86XHJcbiAgICAgICAgY2FzZSBcImNhbmNlbGluZ1wiIC8qIENBTkNFTElORyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2tTdGF0ZS5SVU5OSU5HO1xyXG4gICAgICAgIGNhc2UgXCJwYXVzZWRcIiAvKiBQQVVTRUQgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBUYXNrU3RhdGUuUEFVU0VEO1xyXG4gICAgICAgIGNhc2UgXCJzdWNjZXNzXCIgLyogU1VDQ0VTUyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIFRhc2tTdGF0ZS5TVUNDRVNTO1xyXG4gICAgICAgIGNhc2UgXCJjYW5jZWxlZFwiIC8qIENBTkNFTEVEICovOlxyXG4gICAgICAgICAgICByZXR1cm4gVGFza1N0YXRlLkNBTkNFTEVEO1xyXG4gICAgICAgIGNhc2UgXCJlcnJvclwiIC8qIEVSUk9SICovOlxyXG4gICAgICAgICAgICByZXR1cm4gVGFza1N0YXRlLkVSUk9SO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOiBhc3NlcnQoZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gVGFza1N0YXRlLkVSUk9SO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBjb25zdCBhc0Z1bmN0aW9ucyA9IGlzRnVuY3Rpb24obmV4dE9yT2JzZXJ2ZXIpIHx8IGVycm9yICE9IG51bGwgfHwgY29tcGxldGUgIT0gbnVsbDtcclxuICAgICAgICBpZiAoYXNGdW5jdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5uZXh0ID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvciAhPT0gbnVsbCAmJiBlcnJvciAhPT0gdm9pZCAwID8gZXJyb3IgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGUgPSBjb21wbGV0ZSAhPT0gbnVsbCAmJiBjb21wbGV0ZSAhPT0gdm9pZCAwID8gY29tcGxldGUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgICAgICB0aGlzLm5leHQgPSBvYnNlcnZlci5uZXh0O1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gb2JzZXJ2ZXIuZXJyb3I7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGUgPSBvYnNlcnZlci5jb21wbGV0ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgZiB3aXRoIGl0cyBhcmd1bWVudHMgYXN5bmNocm9ub3VzbHkgYXMgYVxyXG4gKiBtaWNyb3Rhc2ssIGkuZS4gYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciB0aGUgY3VycmVudCBzY3JpcHQgcmV0dXJucyBiYWNrXHJcbiAqIGludG8gYnJvd3NlciBjb2RlLlxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzVG9Gb3J3YXJkKSA9PiB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gZiguLi5hcmdzVG9Gb3J3YXJkKSk7XHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgYmxvYiBiZWluZyB1cGxvYWRlZC4gQ2FuIGJlIHVzZWQgdG8gcGF1c2UvcmVzdW1lL2NhbmNlbCB0aGVcclxuICogdXBsb2FkIGFuZCBtYW5hZ2UgY2FsbGJhY2tzIGZvciB2YXJpb3VzIGV2ZW50cy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jbGFzcyBVcGxvYWRUYXNrIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHJlZiAtIFRoZSBmaXJlYmFzZVN0b3JhZ2UuUmVmZXJlbmNlIG9iamVjdCB0aGlzIHRhc2sgY2FtZVxyXG4gICAgICogICAgIGZyb20sIHVudHlwZWQgdG8gYXZvaWQgY3ljbGljIGRlcGVuZGVuY2llcy5cclxuICAgICAqIEBwYXJhbSBibG9iIC0gVGhlIGJsb2IgdG8gdXBsb2FkLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihyZWYsIGJsb2IsIG1ldGFkYXRhID0gbnVsbCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE51bWJlciBvZiBieXRlcyB0cmFuc2ZlcnJlZCBzbyBmYXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdHJhbnNmZXJyZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuX25lZWRUb0ZldGNoU3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbmVlZFRvRmV0Y2hNZXRhZGF0YSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX29ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX3VwbG9hZFVybCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2NodW5rTXVsdGlwbGllciA9IDE7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9yZWplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fcmVmID0gcmVmO1xyXG4gICAgICAgIHRoaXMuX2Jsb2IgPSBibG9iO1xyXG4gICAgICAgIHRoaXMuX21ldGFkYXRhID0gbWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5fbWFwcGluZ3MgPSBnZXRNYXBwaW5ncygpO1xyXG4gICAgICAgIHRoaXMuX3Jlc3VtYWJsZSA9IHRoaXMuX3Nob3VsZERvUmVzdW1hYmxlKHRoaXMuX2Jsb2IpO1xyXG4gICAgICAgIHRoaXMuX3N0YXRlID0gXCJydW5uaW5nXCIgLyogUlVOTklORyAqLztcclxuICAgICAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2NodW5rTXVsdGlwbGllciA9IDE7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5fY29kZUVxdWFscyhcImNhbmNlbGVkXCIgLyogQ0FOQ0VMRUQgKi8pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9uZWVkVG9GZXRjaFN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlVHJhbnNpdGlvbnNfKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcImVycm9yXCIgLyogRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9tZXRhZGF0YUVycm9ySGFuZGxlciA9IGVycm9yID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKGVycm9yLl9jb2RlRXF1YWxzKFwiY2FuY2VsZWRcIiAvKiBDQU5DRUxFRCAqLykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGVUcmFuc2l0aW9uc18oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uKFwiZXJyb3JcIiAvKiBFUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUHJldmVudCB1bmNhdWdodCByZWplY3Rpb25zIG9uIHRoZSBpbnRlcm5hbCBwcm9taXNlIGZyb20gYnViYmxpbmcgb3V0XHJcbiAgICAgICAgLy8gdG8gdGhlIHRvcCBsZXZlbCB3aXRoIGEgZHVtbXkgaGFuZGxlci5cclxuICAgICAgICB0aGlzLl9wcm9taXNlLnRoZW4obnVsbCwgKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIF9tYWtlUHJvZ3Jlc3NDYWxsYmFjaygpIHtcclxuICAgICAgICBjb25zdCBzaXplQmVmb3JlID0gdGhpcy5fdHJhbnNmZXJyZWQ7XHJcbiAgICAgICAgcmV0dXJuIGxvYWRlZCA9PiB0aGlzLl91cGRhdGVQcm9ncmVzcyhzaXplQmVmb3JlICsgbG9hZGVkKTtcclxuICAgIH1cclxuICAgIF9zaG91bGREb1Jlc3VtYWJsZShibG9iKSB7XHJcbiAgICAgICAgcmV0dXJuIGJsb2Iuc2l6ZSgpID4gMjU2ICogMTAyNDtcclxuICAgIH1cclxuICAgIF9zdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgIT09IFwicnVubmluZ1wiIC8qIFJVTk5JTkcgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHNvbWVvbmUgcGF1c2VzIHVzIGluIGEgcmVzdW1lIGNhbGxiYWNrLCBmb3IgZXhhbXBsZS5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fcmVxdWVzdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3Jlc3VtYWJsZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdXBsb2FkVXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVJlc3VtYWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX25lZWRUb0ZldGNoU3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmV0Y2hTdGF0dXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9uZWVkVG9GZXRjaE1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhcHBlbnMgaWYgd2UgbWlzcyB0aGUgbWV0YWRhdGEgb24gdXBsb2FkIGNvbXBsZXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZldGNoTWV0YWRhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRpbnVlVXBsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9vbmVTaG90VXBsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3Jlc29sdmVUb2tlbihjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIHRoaXMuX3JlZi5zdG9yYWdlLl9nZXRBdXRoVG9rZW4oKSxcclxuICAgICAgICAgICAgdGhpcy5fcmVmLnN0b3JhZ2UuX2dldEFwcENoZWNrVG9rZW4oKVxyXG4gICAgICAgIF0pLnRoZW4oKFthdXRoVG9rZW4sIGFwcENoZWNrVG9rZW5dKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJydW5uaW5nXCIgLyogUlVOTklORyAqLzpcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImNhbmNlbGluZ1wiIC8qIENBTkNFTElORyAqLzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uKFwiY2FuY2VsZWRcIiAvKiBDQU5DRUxFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicGF1c2luZ1wiIC8qIFBBVVNJTkcgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcInBhdXNlZFwiIC8qIFBBVVNFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIFRPRE8oYW5keXNvdG8pOiBhc3NlcnQgZmFsc2VcclxuICAgIF9jcmVhdGVSZXN1bWFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVRva2VuKChhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEluZm8gPSBjcmVhdGVSZXN1bWFibGVVcGxvYWQodGhpcy5fcmVmLnN0b3JhZ2UsIHRoaXMuX3JlZi5fbG9jYXRpb24sIHRoaXMuX21hcHBpbmdzLCB0aGlzLl9ibG9iLCB0aGlzLl9tZXRhZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZVJlcXVlc3QgPSB0aGlzLl9yZWYuc3RvcmFnZS5fbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0O1xyXG4gICAgICAgICAgICBjcmVhdGVSZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKCh1cmwpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGxvYWRVcmwgPSB1cmw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9uZWVkVG9GZXRjaFN0YXR1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVRyYW5zaXRpb25zXygpO1xyXG4gICAgICAgICAgICB9LCB0aGlzLl9lcnJvckhhbmRsZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2ZldGNoU3RhdHVzKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOiBhc3NlcnQodGhpcy51cGxvYWRVcmxfICE9PSBudWxsKTtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLl91cGxvYWRVcmw7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVRva2VuKChhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEluZm8gPSBnZXRSZXN1bWFibGVVcGxvYWRTdGF0dXModGhpcy5fcmVmLnN0b3JhZ2UsIHRoaXMuX3JlZi5fbG9jYXRpb24sIHVybCwgdGhpcy5fYmxvYik7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c1JlcXVlc3QgPSB0aGlzLl9yZWYuc3RvcmFnZS5fbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSBzdGF0dXNSZXF1ZXN0O1xyXG4gICAgICAgICAgICBzdGF0dXNSZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKHN0YXR1cyA9PiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlUHJvZ3Jlc3Moc3RhdHVzLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbmVlZFRvRmV0Y2hTdGF0dXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbmVlZFRvRmV0Y2hNZXRhZGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlVHJhbnNpdGlvbnNfKCk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMuX2Vycm9ySGFuZGxlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfY29udGludWVVcGxvYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2h1bmtTaXplID0gUkVTVU1BQkxFX1VQTE9BRF9DSFVOS19TSVpFICogdGhpcy5fY2h1bmtNdWx0aXBsaWVyO1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBSZXN1bWFibGVVcGxvYWRTdGF0dXModGhpcy5fdHJhbnNmZXJyZWQsIHRoaXMuX2Jsb2Iuc2l6ZSgpKTtcclxuICAgICAgICAvLyBUT0RPKGFuZHlzb3RvKTogYXNzZXJ0KHRoaXMudXBsb2FkVXJsXyAhPT0gbnVsbCk7XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5fdXBsb2FkVXJsO1xyXG4gICAgICAgIHRoaXMuX3Jlc29sdmVUb2tlbigoYXV0aFRva2VuLCBhcHBDaGVja1Rva2VuKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXF1ZXN0SW5mbztcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RJbmZvID0gY29udGludWVSZXN1bWFibGVVcGxvYWQodGhpcy5fcmVmLl9sb2NhdGlvbiwgdGhpcy5fcmVmLnN0b3JhZ2UsIHVybCwgdGhpcy5fYmxvYiwgY2h1bmtTaXplLCB0aGlzLl9tYXBwaW5ncywgc3RhdHVzLCB0aGlzLl9tYWtlUHJvZ3Jlc3NDYWxsYmFjaygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXJyb3IgPSBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcImVycm9yXCIgLyogRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHVwbG9hZFJlcXVlc3QgPSB0aGlzLl9yZWYuc3RvcmFnZS5fbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSB1cGxvYWRSZXF1ZXN0O1xyXG4gICAgICAgICAgICB1cGxvYWRSZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKChuZXdTdGF0dXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luY3JlYXNlTXVsdGlwbGllcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKG5ld1N0YXR1cy5jdXJyZW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdTdGF0dXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBuZXdTdGF0dXMubWV0YWRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcInN1Y2Nlc3NcIiAvKiBTVUNDRVNTICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGVUcmFuc2l0aW9uc18oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGhpcy5fZXJyb3JIYW5kbGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9pbmNyZWFzZU11bHRpcGxpZXIoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFNpemUgPSBSRVNVTUFCTEVfVVBMT0FEX0NIVU5LX1NJWkUgKiB0aGlzLl9jaHVua011bHRpcGxpZXI7XHJcbiAgICAgICAgLy8gTWF4IGNodW5rIHNpemUgaXMgMzJNLlxyXG4gICAgICAgIGlmIChjdXJyZW50U2l6ZSA8IDMyICogMTAyNCAqIDEwMjQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2h1bmtNdWx0aXBsaWVyICo9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2ZldGNoTWV0YWRhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVRva2VuKChhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEluZm8gPSBnZXRNZXRhZGF0YSQyKHRoaXMuX3JlZi5zdG9yYWdlLCB0aGlzLl9yZWYuX2xvY2F0aW9uLCB0aGlzLl9tYXBwaW5ncyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhUmVxdWVzdCA9IHRoaXMuX3JlZi5zdG9yYWdlLl9tYWtlUmVxdWVzdChyZXF1ZXN0SW5mbywgYXV0aFRva2VuLCBhcHBDaGVja1Rva2VuKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdCA9IG1ldGFkYXRhUmVxdWVzdDtcclxuICAgICAgICAgICAgbWV0YWRhdGFSZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKG1ldGFkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXRhZGF0YSA9IG1ldGFkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcInN1Y2Nlc3NcIiAvKiBTVUNDRVNTICovKTtcclxuICAgICAgICAgICAgfSwgdGhpcy5fbWV0YWRhdGFFcnJvckhhbmRsZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX29uZVNob3RVcGxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVRva2VuKChhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEluZm8gPSBtdWx0aXBhcnRVcGxvYWQodGhpcy5fcmVmLnN0b3JhZ2UsIHRoaXMuX3JlZi5fbG9jYXRpb24sIHRoaXMuX21hcHBpbmdzLCB0aGlzLl9ibG9iLCB0aGlzLl9tZXRhZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG11bHRpcGFydFJlcXVlc3QgPSB0aGlzLl9yZWYuc3RvcmFnZS5fbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSBtdWx0aXBhcnRSZXF1ZXN0O1xyXG4gICAgICAgICAgICBtdWx0aXBhcnRSZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKG1ldGFkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXRhZGF0YSA9IG1ldGFkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlUHJvZ3Jlc3ModGhpcy5fYmxvYi5zaXplKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcInN1Y2Nlc3NcIiAvKiBTVUNDRVNTICovKTtcclxuICAgICAgICAgICAgfSwgdGhpcy5fZXJyb3JIYW5kbGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF91cGRhdGVQcm9ncmVzcyh0cmFuc2ZlcnJlZCkge1xyXG4gICAgICAgIGNvbnN0IG9sZCA9IHRoaXMuX3RyYW5zZmVycmVkO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zZmVycmVkID0gdHJhbnNmZXJyZWQ7XHJcbiAgICAgICAgLy8gQSBwcm9ncmVzcyB1cGRhdGUgY2FuIG1ha2UgdGhlIFwidHJhbnNmZXJyZWRcIiB2YWx1ZSBzbWFsbGVyIChlLmcuIGFcclxuICAgICAgICAvLyBwYXJ0aWFsIHVwbG9hZCBub3QgY29tcGxldGVkIGJ5IHNlcnZlciwgYWZ0ZXIgd2hpY2ggdGhlIFwidHJhbnNmZXJyZWRcIlxyXG4gICAgICAgIC8vIHZhbHVlIG1heSByZXNldCB0byB0aGUgdmFsdWUgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgcmVxdWVzdCkuXHJcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zZmVycmVkICE9PSBvbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3RyYW5zaXRpb24oc3RhdGUpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiY2FuY2VsaW5nXCIgLyogQ0FOQ0VMSU5HICovOlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhhbmR5c290byk6XHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQodGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLlJVTk5JTkcgfHxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlcXVlc3QgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3QuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInBhdXNpbmdcIiAvKiBQQVVTSU5HICovOlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhhbmR5c290byk6XHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQodGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLlJVTk5JTkcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0LmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJydW5uaW5nXCIgLyogUlVOTklORyAqLzpcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOlxyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTRUQgfHxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUEFVU0lORyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3YXNQYXVzZWQgPSB0aGlzLl9zdGF0ZSA9PT0gXCJwYXVzZWRcIiAvKiBQQVVTRUQgKi87XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdhc1BhdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeU9ic2VydmVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInBhdXNlZFwiIC8qIFBBVVNFRCAqLzpcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOlxyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTSU5HKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiY2FuY2VsZWRcIiAvKiBDQU5DRUxFRCAqLzpcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOlxyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTRUQgfHxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuQ0FOQ0VMSU5HKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gY2FuY2VsZWQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZXJyb3JcIiAvKiBFUlJPUiAqLzpcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYW5keXNvdG8pOlxyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0KHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5SVU5OSU5HIHx8XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgdGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLlBBVVNJTkcgfHxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICB0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuQ0FOQ0VMSU5HKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3VjY2Vzc1wiIC8qIFNVQ0NFU1MgKi86XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGFuZHlzb3RvKTpcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCh0aGlzLnN0YXRlXyA9PT0gSW50ZXJuYWxUYXNrU3RhdGUuUlVOTklORyB8fFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHRoaXMuc3RhdGVfID09PSBJbnRlcm5hbFRhc2tTdGF0ZS5QQVVTSU5HIHx8XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgdGhpcy5zdGF0ZV8gPT09IEludGVybmFsVGFza1N0YXRlLkNBTkNFTElORyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZVRyYW5zaXRpb25zXygpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuX3N0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXVzaW5nXCIgLyogUEFVU0lORyAqLzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb24oXCJwYXVzZWRcIiAvKiBQQVVTRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjYW5jZWxpbmdcIiAvKiBDQU5DRUxJTkcgKi86XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uKFwiY2FuY2VsZWRcIiAvKiBDQU5DRUxFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJ1bm5pbmdcIiAvKiBSVU5OSU5HICovOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCB0YXNrIHN0YXRlLlxyXG4gICAgICovXHJcbiAgICBnZXQgc25hcHNob3QoKSB7XHJcbiAgICAgICAgY29uc3QgZXh0ZXJuYWxTdGF0ZSA9IHRhc2tTdGF0ZUZyb21JbnRlcm5hbFRhc2tTdGF0ZSh0aGlzLl9zdGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYnl0ZXNUcmFuc2ZlcnJlZDogdGhpcy5fdHJhbnNmZXJyZWQsXHJcbiAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHRoaXMuX2Jsb2Iuc2l6ZSgpLFxyXG4gICAgICAgICAgICBzdGF0ZTogZXh0ZXJuYWxTdGF0ZSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMuX21ldGFkYXRhLFxyXG4gICAgICAgICAgICB0YXNrOiB0aGlzLFxyXG4gICAgICAgICAgICByZWY6IHRoaXMuX3JlZlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBjYWxsYmFjayBmb3IgYW4gZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG9mIGV2ZW50IHRvIGxpc3RlbiBmb3IuXHJcbiAgICAgKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLVxyXG4gICAgICogICAgIFRoZSBgbmV4dGAgZnVuY3Rpb24sIHdoaWNoIGdldHMgY2FsbGVkIGZvciBlYWNoIGl0ZW0gaW5cclxuICAgICAqICAgICB0aGUgZXZlbnQgc3RyZWFtLCBvciBhbiBvYnNlcnZlciBvYmplY3Qgd2l0aCBzb21lIG9yIGFsbCBvZiB0aGVzZSB0aHJlZVxyXG4gICAgICogICAgIHByb3BlcnRpZXMgKGBuZXh0YCwgYGVycm9yYCwgYGNvbXBsZXRlYCkuXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBBIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgd2l0aCBhIGBTdG9yYWdlRXJyb3JgXHJcbiAgICAgKiAgICAgaWYgdGhlIGV2ZW50IHN0cmVhbSBlbmRzIGR1ZSB0byBhbiBlcnJvci5cclxuICAgICAqIEBwYXJhbSBjb21wbGV0ZWQgLSBBIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgaWYgdGhlXHJcbiAgICAgKiAgICAgZXZlbnQgc3RyZWFtIGVuZHMgbm9ybWFsbHkuXHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICogICAgIElmIG9ubHkgdGhlIGV2ZW50IGFyZ3VtZW50IGlzIHBhc3NlZCwgcmV0dXJucyBhIGZ1bmN0aW9uIHlvdSBjYW4gdXNlIHRvXHJcbiAgICAgKiAgICAgYWRkIGNhbGxiYWNrcyAoc2VlIHRoZSBleGFtcGxlcyBhYm92ZSkuIElmIG1vcmUgdGhhbiBqdXN0IHRoZSBldmVudFxyXG4gICAgICogICAgIGFyZ3VtZW50IGlzIHBhc3NlZCwgcmV0dXJucyBhIGZ1bmN0aW9uIHlvdSBjYW4gY2FsbCB0byB1bnJlZ2lzdGVyIHRoZVxyXG4gICAgICogICAgIGNhbGxiYWNrcy5cclxuICAgICAqL1xyXG4gICAgb24odHlwZSwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBPYnNlcnZlcihuZXh0T3JPYnNlcnZlciB8fCB1bmRlZmluZWQsIGVycm9yIHx8IHVuZGVmaW5lZCwgY29tcGxldGVkIHx8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgdGhpcy5fYWRkT2JzZXJ2ZXIob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZU9ic2VydmVyKG9ic2VydmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG9iamVjdCBiZWhhdmVzIGxpa2UgYSBQcm9taXNlLCBhbmQgcmVzb2x2ZXMgd2l0aCBpdHMgc25hcHNob3QgZGF0YVxyXG4gICAgICogd2hlbiB0aGUgdXBsb2FkIGNvbXBsZXRlcy5cclxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIFRoZSBmdWxmaWxsbWVudCBjYWxsYmFjay4gUHJvbWlzZSBjaGFpbmluZyB3b3JrcyBhcyBub3JtYWwuXHJcbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIFRoZSByZWplY3Rpb24gY2FsbGJhY2suXHJcbiAgICAgKi9cclxuICAgIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcclxuICAgICAgICAvLyBUaGVzZSBjYXN0cyBhcmUgbmVlZGVkIHNvIHRoYXQgVHlwZVNjcmlwdCBjYW4gaW5mZXIgdGhlIHR5cGVzIG9mIHRoZVxyXG4gICAgICAgIC8vIHJlc3VsdGluZyBQcm9taXNlLlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBFcXVpdmFsZW50IHRvIGNhbGxpbmcgYHRoZW4obnVsbCwgb25SZWplY3RlZClgLlxyXG4gICAgICovXHJcbiAgICBjYXRjaChvblJlamVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gb2JzZXJ2ZXIuXHJcbiAgICAgKi9cclxuICAgIF9hZGRPYnNlcnZlcihvYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMuX29ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICB0aGlzLl9ub3RpZnlPYnNlcnZlcihvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIG9ic2VydmVyLlxyXG4gICAgICovXHJcbiAgICBfcmVtb3ZlT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy5fb2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xyXG4gICAgICAgIGlmIChpICE9PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vYnNlcnZlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9ub3RpZnlPYnNlcnZlcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZmluaXNoUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVycyA9IHRoaXMuX29ic2VydmVycy5zbGljZSgpO1xyXG4gICAgICAgIG9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbm90aWZ5T2JzZXJ2ZXIob2JzZXJ2ZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2ZpbmlzaFByb21pc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Jlc29sdmUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgdHJpZ2dlcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgc3dpdGNoICh0YXNrU3RhdGVGcm9tSW50ZXJuYWxUYXNrU3RhdGUodGhpcy5fc3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRhc2tTdGF0ZS5TVUNDRVNTOlxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKHRoaXMuX3Jlc29sdmUuYmluZChudWxsLCB0aGlzLnNuYXBzaG90KSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgVGFza1N0YXRlLkNBTkNFTEVEOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBUYXNrU3RhdGUuRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9DYWxsID0gdGhpcy5fcmVqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKHRvQ2FsbC5iaW5kKG51bGwsIHRoaXMuX2Vycm9yKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRyaWdnZXJlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9ub3RpZnlPYnNlcnZlcihvYnNlcnZlcikge1xyXG4gICAgICAgIGNvbnN0IGV4dGVybmFsU3RhdGUgPSB0YXNrU3RhdGVGcm9tSW50ZXJuYWxUYXNrU3RhdGUodGhpcy5fc3RhdGUpO1xyXG4gICAgICAgIHN3aXRjaCAoZXh0ZXJuYWxTdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRhc2tTdGF0ZS5SVU5OSU5HOlxyXG4gICAgICAgICAgICBjYXNlIFRhc2tTdGF0ZS5QQVVTRUQ6XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKG9ic2VydmVyLm5leHQuYmluZChvYnNlcnZlciwgdGhpcy5zbmFwc2hvdCkpKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUYXNrU3RhdGUuU1VDQ0VTUzpcclxuICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKG9ic2VydmVyLmNvbXBsZXRlLmJpbmQob2JzZXJ2ZXIpKSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVGFza1N0YXRlLkNBTkNFTEVEOlxyXG4gICAgICAgICAgICBjYXNlIFRhc2tTdGF0ZS5FUlJPUjpcclxuICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlci5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIsIHRoaXMuX2Vycm9yKSkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhhbmR5c290byk6IGFzc2VydChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyhvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyLCB0aGlzLl9lcnJvcikpKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXN1bWVzIGEgcGF1c2VkIHRhc2suIEhhcyBubyBlZmZlY3Qgb24gYSBjdXJyZW50bHkgcnVubmluZyBvciBmYWlsZWQgdGFzay5cclxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB0b29rIGVmZmVjdCwgZmFsc2UgaWYgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkID0gdGhpcy5fc3RhdGUgPT09IFwicGF1c2VkXCIgLyogUEFVU0VEICovIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID09PSBcInBhdXNpbmdcIiAvKiBQQVVTSU5HICovO1xyXG4gICAgICAgIGlmICh2YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uKFwicnVubmluZ1wiIC8qIFJVTk5JTkcgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhdXNlcyBhIGN1cnJlbnRseSBydW5uaW5nIHRhc2suIEhhcyBubyBlZmZlY3Qgb24gYSBwYXVzZWQgb3IgZmFpbGVkIHRhc2suXHJcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBvcGVyYXRpb24gdG9vayBlZmZlY3QsIGZhbHNlIGlmIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIHBhdXNlKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkID0gdGhpcy5fc3RhdGUgPT09IFwicnVubmluZ1wiIC8qIFJVTk5JTkcgKi87XHJcbiAgICAgICAgaWYgKHZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb24oXCJwYXVzaW5nXCIgLyogUEFVU0lORyAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWxpZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VscyBhIGN1cnJlbnRseSBydW5uaW5nIG9yIHBhdXNlZCB0YXNrLiBIYXMgbm8gZWZmZWN0IG9uIGEgY29tcGxldGUgb3JcclxuICAgICAqIGZhaWxlZCB0YXNrLlxyXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHRvb2sgZWZmZWN0LCBmYWxzZSBpZiBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgY29uc3QgdmFsaWQgPSB0aGlzLl9zdGF0ZSA9PT0gXCJydW5uaW5nXCIgLyogUlVOTklORyAqLyB8fFxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9PT0gXCJwYXVzaW5nXCIgLyogUEFVU0lORyAqLztcclxuICAgICAgICBpZiAodmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvbihcImNhbmNlbGluZ1wiIC8qIENBTkNFTElORyAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWxpZDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXMgbWV0aG9kcyB0byBpbnRlcmFjdCB3aXRoIGEgYnVja2V0IGluIHRoZSBGaXJlYmFzZSBTdG9yYWdlIHNlcnZpY2UuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKiBAcGFyYW0gX2xvY2F0aW9uIC0gQW4gZmJzLmxvY2F0aW9uLCBvciB0aGUgVVJMIGF0XHJcbiAqICAgICB3aGljaCB0byBiYXNlIHRoaXMgb2JqZWN0LCBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcclxuICogICAgICAgICBnczovLzxidWNrZXQ+LzxvYmplY3QtcGF0aD5cclxuICogICAgICAgICBodHRwW3NdOi8vZmlyZWJhc2VzdG9yYWdlLmdvb2dsZWFwaXMuY29tL1xyXG4gKiAgICAgICAgICAgICAgICAgICAgIDxhcGktdmVyc2lvbj4vYi88YnVja2V0Pi9vLzxvYmplY3QtcGF0aD5cclxuICogICAgIEFueSBxdWVyeSBvciBmcmFnbWVudCBzdHJpbmdzIHdpbGwgYmUgaWdub3JlZCBpbiB0aGUgaHR0cFtzXVxyXG4gKiAgICAgZm9ybWF0LiBJZiBubyB2YWx1ZSBpcyBwYXNzZWQsIHRoZSBzdG9yYWdlIG9iamVjdCB3aWxsIHVzZSBhIFVSTCBiYXNlZCBvblxyXG4gKiAgICAgdGhlIHByb2plY3QgSUQgb2YgdGhlIGJhc2UgZmlyZWJhc2UuQXBwIGluc3RhbmNlLlxyXG4gKi9cclxuY2xhc3MgUmVmZXJlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKF9zZXJ2aWNlLCBsb2NhdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3NlcnZpY2UgPSBfc2VydmljZTtcclxuICAgICAgICBpZiAobG9jYXRpb24gaW5zdGFuY2VvZiBMb2NhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2NhdGlvbiA9IGxvY2F0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9jYXRpb24gPSBMb2NhdGlvbi5tYWtlRnJvbVVybChsb2NhdGlvbiwgX3NlcnZpY2UuaG9zdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBVUkwgZm9yIHRoZSBidWNrZXQgYW5kIHBhdGggdGhpcyBvYmplY3QgcmVmZXJlbmNlcyxcclxuICAgICAqICAgICBpbiB0aGUgZm9ybSBnczovLzxidWNrZXQ+LzxvYmplY3QtcGF0aD5cclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICovXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gJ2dzOi8vJyArIHRoaXMuX2xvY2F0aW9uLmJ1Y2tldCArICcvJyArIHRoaXMuX2xvY2F0aW9uLnBhdGg7XHJcbiAgICB9XHJcbiAgICBfbmV3UmVmKHNlcnZpY2UsIGxvY2F0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZlcmVuY2Uoc2VydmljZSwgbG9jYXRpb24pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBvZiB0aGlzIG9iamVjdCdzIGJ1Y2tldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IHJvb3QoKSB7XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24odGhpcy5fbG9jYXRpb24uYnVja2V0LCAnJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25ld1JlZih0aGlzLl9zZXJ2aWNlLCBsb2NhdGlvbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBidWNrZXQgY29udGFpbmluZyB0aGlzIHJlZmVyZW5jZSdzIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgZ2V0IGJ1Y2tldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9jYXRpb24uYnVja2V0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVsbCBwYXRoIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBnZXQgZnVsbFBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2F0aW9uLnBhdGg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzaG9ydCBuYW1lIG9mIHRoaXMgb2JqZWN0LCB3aGljaCBpcyB0aGUgbGFzdCBjb21wb25lbnQgb2YgdGhlIGZ1bGwgcGF0aC5cclxuICAgICAqIEZvciBleGFtcGxlLCBpZiBmdWxsUGF0aCBpcyAnZnVsbC9wYXRoL2ltYWdlLnBuZycsIG5hbWUgaXMgJ2ltYWdlLnBuZycuXHJcbiAgICAgKi9cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBsYXN0Q29tcG9uZW50KHRoaXMuX2xvY2F0aW9uLnBhdGgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYFN0b3JhZ2VTZXJ2aWNlYCBpbnN0YW5jZSB0aGlzIGBTdG9yYWdlUmVmZXJlbmNlYCBpcyBhc3NvY2lhdGVkIHdpdGguXHJcbiAgICAgKi9cclxuICAgIGdldCBzdG9yYWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGBTdG9yYWdlUmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGUgcGFyZW50IGxvY2F0aW9uIG9mIHRoaXMgYFN0b3JhZ2VSZWZlcmVuY2VgLCBvciBudWxsIGlmXHJcbiAgICAgKiB0aGlzIHJlZmVyZW5jZSBpcyB0aGUgcm9vdC5cclxuICAgICAqL1xyXG4gICAgZ2V0IHBhcmVudCgpIHtcclxuICAgICAgICBjb25zdCBuZXdQYXRoID0gcGFyZW50KHRoaXMuX2xvY2F0aW9uLnBhdGgpO1xyXG4gICAgICAgIGlmIChuZXdQYXRoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IG5ldyBMb2NhdGlvbih0aGlzLl9sb2NhdGlvbi5idWNrZXQsIG5ld1BhdGgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVmZXJlbmNlKHRoaXMuX3NlcnZpY2UsIGxvY2F0aW9uKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXRpbGl0eSBmdW5jdGlvbiB0byB0aHJvdyBhbiBlcnJvciBpbiBtZXRob2RzIHRoYXQgZG8gbm90IGFjY2VwdCBhIHJvb3QgcmVmZXJlbmNlLlxyXG4gICAgICovXHJcbiAgICBfdGhyb3dJZlJvb3QobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9sb2NhdGlvbi5wYXRoID09PSAnJykge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkUm9vdE9wZXJhdGlvbihuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVwbG9hZHMgZGF0YSB0byB0aGlzIG9iamVjdCdzIGxvY2F0aW9uLlxyXG4gKiBUaGUgdXBsb2FkIGlzIG5vdCByZXN1bWFibGUuXHJcbiAqXHJcbiAqIEBwYXJhbSByZWYgLSBTdG9yYWdlUmVmZXJlbmNlIHdoZXJlIGRhdGEgc2hvdWxkIGJlIHVwbG9hZGVkLlxyXG4gKiBAcGFyYW0gZGF0YSAtIFRoZSBkYXRhIHRvIHVwbG9hZC5cclxuICogQHBhcmFtIG1ldGFkYXRhIC0gTWV0YWRhdGEgZm9yIHRoZSBuZXdseSB1cGxvYWRlZCBkYXRhLlxyXG4gKiBAcmV0dXJucyBBIFByb21pc2UgY29udGFpbmluZyBhbiBVcGxvYWRSZXN1bHRcclxuICovXHJcbmZ1bmN0aW9uIHVwbG9hZEJ5dGVzJDEocmVmLCBkYXRhLCBtZXRhZGF0YSkge1xyXG4gICAgcmVmLl90aHJvd0lmUm9vdCgndXBsb2FkQnl0ZXMnKTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gbXVsdGlwYXJ0VXBsb2FkKHJlZi5zdG9yYWdlLCByZWYuX2xvY2F0aW9uLCBnZXRNYXBwaW5ncygpLCBuZXcgRmJzQmxvYihkYXRhLCB0cnVlKSwgbWV0YWRhdGEpO1xyXG4gICAgcmV0dXJuIHJlZi5zdG9yYWdlXHJcbiAgICAgICAgLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhyZXF1ZXN0SW5mbylcclxuICAgICAgICAudGhlbihyZXF1ZXN0ID0+IHJlcXVlc3QuZ2V0UHJvbWlzZSgpKVxyXG4gICAgICAgIC50aGVuKGZpbmFsTWV0YWRhdGEgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhOiBmaW5hbE1ldGFkYXRhLFxyXG4gICAgICAgICAgICByZWZcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFVwbG9hZHMgZGF0YSB0byB0aGlzIG9iamVjdCdzIGxvY2F0aW9uLlxyXG4gKiBUaGUgdXBsb2FkIGNhbiBiZSBwYXVzZWQgYW5kIHJlc3VtZWQsIGFuZCBleHBvc2VzIHByb2dyZXNzIHVwZGF0ZXMuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIFN0b3JhZ2VSZWZlcmVuY2Ugd2hlcmUgZGF0YSBzaG91bGQgYmUgdXBsb2FkZWQuXHJcbiAqIEBwYXJhbSBkYXRhIC0gVGhlIGRhdGEgdG8gdXBsb2FkLlxyXG4gKiBAcGFyYW0gbWV0YWRhdGEgLSBNZXRhZGF0YSBmb3IgdGhlIG5ld2x5IHVwbG9hZGVkIGRhdGEuXHJcbiAqIEByZXR1cm5zIEFuIFVwbG9hZFRhc2tcclxuICovXHJcbmZ1bmN0aW9uIHVwbG9hZEJ5dGVzUmVzdW1hYmxlJDEocmVmLCBkYXRhLCBtZXRhZGF0YSkge1xyXG4gICAgcmVmLl90aHJvd0lmUm9vdCgndXBsb2FkQnl0ZXNSZXN1bWFibGUnKTtcclxuICAgIHJldHVybiBuZXcgVXBsb2FkVGFzayhyZWYsIG5ldyBGYnNCbG9iKGRhdGEpLCBtZXRhZGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIFVwbG9hZHMgYSBzdHJpbmcgdG8gdGhpcyBvYmplY3QncyBsb2NhdGlvbi5cclxuICogVGhlIHVwbG9hZCBpcyBub3QgcmVzdW1hYmxlLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSByZWYgLSBTdG9yYWdlUmVmZXJlbmNlIHdoZXJlIHN0cmluZyBzaG91bGQgYmUgdXBsb2FkZWQuXHJcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBzdHJpbmcgdG8gdXBsb2FkLlxyXG4gKiBAcGFyYW0gZm9ybWF0IC0gVGhlIGZvcm1hdCBvZiB0aGUgc3RyaW5nIHRvIHVwbG9hZC5cclxuICogQHBhcmFtIG1ldGFkYXRhIC0gTWV0YWRhdGEgZm9yIHRoZSBuZXdseSB1cGxvYWRlZCBzdHJpbmcuXHJcbiAqIEByZXR1cm5zIEEgUHJvbWlzZSBjb250YWluaW5nIGFuIFVwbG9hZFJlc3VsdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBsb2FkU3RyaW5nJDEocmVmLCB2YWx1ZSwgZm9ybWF0ID0gU3RyaW5nRm9ybWF0LlJBVywgbWV0YWRhdGEpIHtcclxuICAgIHJlZi5fdGhyb3dJZlJvb3QoJ3VwbG9hZFN0cmluZycpO1xyXG4gICAgY29uc3QgZGF0YSA9IGRhdGFGcm9tU3RyaW5nKGZvcm1hdCwgdmFsdWUpO1xyXG4gICAgY29uc3QgbWV0YWRhdGFDbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcclxuICAgIGlmIChtZXRhZGF0YUNsb25lWydjb250ZW50VHlwZSddID09IG51bGwgJiYgZGF0YS5jb250ZW50VHlwZSAhPSBudWxsKSB7XHJcbiAgICAgICAgbWV0YWRhdGFDbG9uZVsnY29udGVudFR5cGUnXSA9IGRhdGEuY29udGVudFR5cGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXBsb2FkQnl0ZXMkMShyZWYsIGRhdGEuZGF0YSwgbWV0YWRhdGFDbG9uZSk7XHJcbn1cclxuLyoqXHJcbiAqIExpc3QgYWxsIGl0ZW1zIChmaWxlcykgYW5kIHByZWZpeGVzIChmb2xkZXJzKSB1bmRlciB0aGlzIHN0b3JhZ2UgcmVmZXJlbmNlLlxyXG4gKlxyXG4gKiBUaGlzIGlzIGEgaGVscGVyIG1ldGhvZCBmb3IgY2FsbGluZyBsaXN0KCkgcmVwZWF0ZWRseSB1bnRpbCB0aGVyZSBhcmVcclxuICogbm8gbW9yZSByZXN1bHRzLiBUaGUgZGVmYXVsdCBwYWdpbmF0aW9uIHNpemUgaXMgMTAwMC5cclxuICpcclxuICogTm90ZTogVGhlIHJlc3VsdHMgbWF5IG5vdCBiZSBjb25zaXN0ZW50IGlmIG9iamVjdHMgYXJlIGNoYW5nZWQgd2hpbGUgdGhpc1xyXG4gKiBvcGVyYXRpb24gaXMgcnVubmluZy5cclxuICpcclxuICogV2FybmluZzogbGlzdEFsbCBtYXkgcG90ZW50aWFsbHkgY29uc3VtZSB0b28gbWFueSByZXNvdXJjZXMgaWYgdGhlcmUgYXJlXHJcbiAqIHRvbyBtYW55IHJlc3VsdHMuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIFN0b3JhZ2VSZWZlcmVuY2UgdG8gZ2V0IGxpc3QgZnJvbS5cclxuICpcclxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbGwgdGhlIGl0ZW1zIGFuZCBwcmVmaXhlcyB1bmRlclxyXG4gKiAgICAgIHRoZSBjdXJyZW50IHN0b3JhZ2UgcmVmZXJlbmNlLiBgcHJlZml4ZXNgIGNvbnRhaW5zIHJlZmVyZW5jZXMgdG9cclxuICogICAgICBzdWItZGlyZWN0b3JpZXMgYW5kIGBpdGVtc2AgY29udGFpbnMgcmVmZXJlbmNlcyB0byBvYmplY3RzIGluIHRoaXNcclxuICogICAgICBmb2xkZXIuIGBuZXh0UGFnZVRva2VuYCBpcyBuZXZlciByZXR1cm5lZC5cclxuICovXHJcbmZ1bmN0aW9uIGxpc3RBbGwkMShyZWYpIHtcclxuICAgIGNvbnN0IGFjY3VtdWxhdG9yID0ge1xyXG4gICAgICAgIHByZWZpeGVzOiBbXSxcclxuICAgICAgICBpdGVtczogW11cclxuICAgIH07XHJcbiAgICByZXR1cm4gbGlzdEFsbEhlbHBlcihyZWYsIGFjY3VtdWxhdG9yKS50aGVuKCgpID0+IGFjY3VtdWxhdG9yKTtcclxufVxyXG4vKipcclxuICogU2VwYXJhdGVkIGZyb20gbGlzdEFsbCBiZWNhdXNlIGFzeW5jIGZ1bmN0aW9ucyBjYW4ndCB1c2UgXCJhcmd1bWVudHNcIi5cclxuICogQHBhcmFtIHJlZlxyXG4gKiBAcGFyYW0gYWNjdW11bGF0b3JcclxuICogQHBhcmFtIHBhZ2VUb2tlblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlzdEFsbEhlbHBlcihyZWYsIGFjY3VtdWxhdG9yLCBwYWdlVG9rZW4pIHtcclxuICAgIGNvbnN0IG9wdCA9IHtcclxuICAgICAgICAvLyBtYXhSZXN1bHRzIGlzIDEwMDAgYnkgZGVmYXVsdC5cclxuICAgICAgICBwYWdlVG9rZW5cclxuICAgIH07XHJcbiAgICBjb25zdCBuZXh0UGFnZSA9IGF3YWl0IGxpc3QkMShyZWYsIG9wdCk7XHJcbiAgICBhY2N1bXVsYXRvci5wcmVmaXhlcy5wdXNoKC4uLm5leHRQYWdlLnByZWZpeGVzKTtcclxuICAgIGFjY3VtdWxhdG9yLml0ZW1zLnB1c2goLi4ubmV4dFBhZ2UuaXRlbXMpO1xyXG4gICAgaWYgKG5leHRQYWdlLm5leHRQYWdlVG9rZW4gIT0gbnVsbCkge1xyXG4gICAgICAgIGF3YWl0IGxpc3RBbGxIZWxwZXIocmVmLCBhY2N1bXVsYXRvciwgbmV4dFBhZ2UubmV4dFBhZ2VUb2tlbik7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIExpc3QgaXRlbXMgKGZpbGVzKSBhbmQgcHJlZml4ZXMgKGZvbGRlcnMpIHVuZGVyIHRoaXMgc3RvcmFnZSByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIExpc3QgQVBJIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBGaXJlYmFzZSBSdWxlcyBWZXJzaW9uIDIuXHJcbiAqXHJcbiAqIEdDUyBpcyBhIGtleS1ibG9iIHN0b3JlLiBGaXJlYmFzZSBTdG9yYWdlIGltcG9zZXMgdGhlIHNlbWFudGljIG9mICcvJ1xyXG4gKiBkZWxpbWl0ZWQgZm9sZGVyIHN0cnVjdHVyZS5cclxuICogUmVmZXIgdG8gR0NTJ3MgTGlzdCBBUEkgaWYgeW91IHdhbnQgdG8gbGVhcm4gbW9yZS5cclxuICpcclxuICogVG8gYWRoZXJlIHRvIEZpcmViYXNlIFJ1bGVzJ3MgU2VtYW50aWNzLCBGaXJlYmFzZSBTdG9yYWdlIGRvZXMgbm90XHJcbiAqIHN1cHBvcnQgb2JqZWN0cyB3aG9zZSBwYXRocyBlbmQgd2l0aCBcIi9cIiBvciBjb250YWluIHR3byBjb25zZWN1dGl2ZVxyXG4gKiBcIi9cInMuIEZpcmViYXNlIFN0b3JhZ2UgTGlzdCBBUEkgd2lsbCBmaWx0ZXIgdGhlc2UgdW5zdXBwb3J0ZWQgb2JqZWN0cy5cclxuICogbGlzdCgpIG1heSBmYWlsIGlmIHRoZXJlIGFyZSB0b28gbWFueSB1bnN1cHBvcnRlZCBvYmplY3RzIGluIHRoZSBidWNrZXQuXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIHJlZiAtIFN0b3JhZ2VSZWZlcmVuY2UgdG8gZ2V0IGxpc3QgZnJvbS5cclxuICogQHBhcmFtIG9wdGlvbnMgLSBTZWUgTGlzdE9wdGlvbnMgZm9yIGRldGFpbHMuXHJcbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGl0ZW1zIGFuZCBwcmVmaXhlcy5cclxuICogICAgICBgcHJlZml4ZXNgIGNvbnRhaW5zIHJlZmVyZW5jZXMgdG8gc3ViLWZvbGRlcnMgYW5kIGBpdGVtc2BcclxuICogICAgICBjb250YWlucyByZWZlcmVuY2VzIHRvIG9iamVjdHMgaW4gdGhpcyBmb2xkZXIuIGBuZXh0UGFnZVRva2VuYFxyXG4gKiAgICAgIGNhbiBiZSB1c2VkIHRvIGdldCB0aGUgcmVzdCBvZiB0aGUgcmVzdWx0cy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpc3QkMShyZWYsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICE9IG51bGwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWF4UmVzdWx0cyA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVOdW1iZXIoJ29wdGlvbnMubWF4UmVzdWx0cycsIFxyXG4gICAgICAgICAgICAvKiBtaW5WYWx1ZT0gKi8gMSwgXHJcbiAgICAgICAgICAgIC8qIG1heFZhbHVlPSAqLyAxMDAwLCBvcHRpb25zLm1heFJlc3VsdHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IG9wID0gb3B0aW9ucyB8fCB7fTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gbGlzdCQyKHJlZi5zdG9yYWdlLCByZWYuX2xvY2F0aW9uLCBcclxuICAgIC8qZGVsaW1pdGVyPSAqLyAnLycsIG9wLnBhZ2VUb2tlbiwgb3AubWF4UmVzdWx0cyk7XHJcbiAgICByZXR1cm4gKGF3YWl0IHJlZi5zdG9yYWdlLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhyZXF1ZXN0SW5mbykpLmdldFByb21pc2UoKTtcclxufVxyXG4vKipcclxuICogQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBtZXRhZGF0YSBmb3IgdGhpcyBvYmplY3QuIElmIHRoaXNcclxuICogb2JqZWN0IGRvZXNuJ3QgZXhpc3Qgb3IgbWV0YWRhdGEgY2Fubm90IGJlIHJldHJlaXZlZCwgdGhlIHByb21pc2UgaXNcclxuICogcmVqZWN0ZWQuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIFN0b3JhZ2VSZWZlcmVuY2UgdG8gZ2V0IG1ldGFkYXRhIGZyb20uXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRNZXRhZGF0YSQxKHJlZikge1xyXG4gICAgcmVmLl90aHJvd0lmUm9vdCgnZ2V0TWV0YWRhdGEnKTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gZ2V0TWV0YWRhdGEkMihyZWYuc3RvcmFnZSwgcmVmLl9sb2NhdGlvbiwgZ2V0TWFwcGluZ3MoKSk7XHJcbiAgICByZXR1cm4gKGF3YWl0IHJlZi5zdG9yYWdlLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhyZXF1ZXN0SW5mbykpLmdldFByb21pc2UoKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgbWV0YWRhdGEgZm9yIHRoaXMgb2JqZWN0LlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSByZWYgLSBTdG9yYWdlUmVmZXJlbmNlIHRvIHVwZGF0ZSBtZXRhZGF0YSBmb3IuXHJcbiAqIEBwYXJhbSBtZXRhZGF0YSAtIFRoZSBuZXcgbWV0YWRhdGEgZm9yIHRoZSBvYmplY3QuXHJcbiAqICAgICBPbmx5IHZhbHVlcyB0aGF0IGhhdmUgYmVlbiBleHBsaWNpdGx5IHNldCB3aWxsIGJlIGNoYW5nZWQuIEV4cGxpY2l0bHlcclxuICogICAgIHNldHRpbmcgYSB2YWx1ZSB0byBudWxsIHdpbGwgcmVtb3ZlIHRoZSBtZXRhZGF0YS5cclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlc1xyXG4gKiAgICAgd2l0aCB0aGUgbmV3IG1ldGFkYXRhIGZvciB0aGlzIG9iamVjdC5cclxuICogICAgIFNlZSBgZmlyZWJhc2VTdG9yYWdlLlJlZmVyZW5jZS5wcm90b3R5cGUuZ2V0TWV0YWRhdGFgXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXRhZGF0YSQxKHJlZiwgbWV0YWRhdGEpIHtcclxuICAgIHJlZi5fdGhyb3dJZlJvb3QoJ3VwZGF0ZU1ldGFkYXRhJyk7XHJcbiAgICBjb25zdCByZXF1ZXN0SW5mbyA9IHVwZGF0ZU1ldGFkYXRhJDIocmVmLnN0b3JhZ2UsIHJlZi5fbG9jYXRpb24sIG1ldGFkYXRhLCBnZXRNYXBwaW5ncygpKTtcclxuICAgIHJldHVybiAoYXdhaXQgcmVmLnN0b3JhZ2UubWFrZVJlcXVlc3RXaXRoVG9rZW5zKHJlcXVlc3RJbmZvKSkuZ2V0UHJvbWlzZSgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBkb3dubG9hZCBVUkwgZm9yIHRoZSBnaXZlbiBSZWZlcmVuY2UuXHJcbiAqIEBwdWJsaWNcclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBkb3dubG9hZFxyXG4gKiAgICAgVVJMIGZvciB0aGlzIG9iamVjdC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldERvd25sb2FkVVJMJDEocmVmKSB7XHJcbiAgICByZWYuX3Rocm93SWZSb290KCdnZXREb3dubG9hZFVSTCcpO1xyXG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSBnZXREb3dubG9hZFVybChyZWYuc3RvcmFnZSwgcmVmLl9sb2NhdGlvbiwgZ2V0TWFwcGluZ3MoKSk7XHJcbiAgICByZXR1cm4gKGF3YWl0IHJlZi5zdG9yYWdlLm1ha2VSZXF1ZXN0V2l0aFRva2VucyhyZXF1ZXN0SW5mbykpXHJcbiAgICAgICAgLmdldFByb21pc2UoKVxyXG4gICAgICAgIC50aGVuKHVybCA9PiB7XHJcbiAgICAgICAgaWYgKHVybCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBub0Rvd25sb2FkVVJMKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyB0aGUgb2JqZWN0IGF0IHRoaXMgbG9jYXRpb24uXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIFN0b3JhZ2VSZWZlcmVuY2UgZm9yIG9iamVjdCB0byBkZWxldGUuXHJcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgaWYgdGhlIGRlbGV0aW9uIHN1Y2NlZWRzLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlT2JqZWN0JDEocmVmKSB7XHJcbiAgICByZWYuX3Rocm93SWZSb290KCdkZWxldGVPYmplY3QnKTtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvID0gZGVsZXRlT2JqZWN0JDIocmVmLnN0b3JhZ2UsIHJlZi5fbG9jYXRpb24pO1xyXG4gICAgcmV0dXJuIChhd2FpdCByZWYuc3RvcmFnZS5tYWtlUmVxdWVzdFdpdGhUb2tlbnMocmVxdWVzdEluZm8pKS5nZXRQcm9taXNlKCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgcmVmZXJlbmNlIGZvciBvYmplY3Qgb2J0YWluZWQgYnkgYXBwZW5kaW5nIGBjaGlsZFBhdGhgIHRvIGByZWZgLlxyXG4gKlxyXG4gKiBAcGFyYW0gcmVmIC0gU3RvcmFnZVJlZmVyZW5jZSB0byBnZXQgY2hpbGQgb2YuXHJcbiAqIEBwYXJhbSBjaGlsZFBhdGggLSBDaGlsZCBwYXRoIGZyb20gcHJvdmlkZWQgcmVmLlxyXG4gKiBAcmV0dXJucyBBIHJlZmVyZW5jZSB0byB0aGUgb2JqZWN0IG9idGFpbmVkIGJ5XHJcbiAqIGFwcGVuZGluZyBjaGlsZFBhdGgsIHJlbW92aW5nIGFueSBkdXBsaWNhdGUsIGJlZ2lubmluZywgb3IgdHJhaWxpbmdcclxuICogc2xhc2hlcy5cclxuICpcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDaGlsZCQxKHJlZiwgY2hpbGRQYXRoKSB7XHJcbiAgICBjb25zdCBuZXdQYXRoID0gY2hpbGQocmVmLl9sb2NhdGlvbi5wYXRoLCBjaGlsZFBhdGgpO1xyXG4gICAgY29uc3QgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24ocmVmLl9sb2NhdGlvbi5idWNrZXQsIG5ld1BhdGgpO1xyXG4gICAgcmV0dXJuIG5ldyBSZWZlcmVuY2UocmVmLnN0b3JhZ2UsIGxvY2F0aW9uKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1VybChwYXRoKSB7XHJcbiAgICByZXR1cm4gL15bQS1aYS16XSs6XFwvXFwvLy50ZXN0KHBhdGgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZmlyZWJhc2VTdG9yYWdlLlJlZmVyZW5jZSBmb3IgdGhlIGdpdmVuIHVybC5cclxuICovXHJcbmZ1bmN0aW9uIHJlZkZyb21VUkwoc2VydmljZSwgdXJsKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZmVyZW5jZShzZXJ2aWNlLCB1cmwpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZmlyZWJhc2VTdG9yYWdlLlJlZmVyZW5jZSBmb3IgdGhlIGdpdmVuIHBhdGggaW4gdGhlIGRlZmF1bHRcclxuICogYnVja2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gcmVmRnJvbVBhdGgocmVmLCBwYXRoKSB7XHJcbiAgICBpZiAocmVmIGluc3RhbmNlb2YgRmlyZWJhc2VTdG9yYWdlSW1wbCkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2UgPSByZWY7XHJcbiAgICAgICAgaWYgKHNlcnZpY2UuX2J1Y2tldCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5vRGVmYXVsdEJ1Y2tldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZWZlcmVuY2UgPSBuZXcgUmVmZXJlbmNlKHNlcnZpY2UsIHNlcnZpY2UuX2J1Y2tldCk7XHJcbiAgICAgICAgaWYgKHBhdGggIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVmRnJvbVBhdGgocmVmZXJlbmNlLCBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWZlcmVuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gcmVmIGlzIGEgUmVmZXJlbmNlXHJcbiAgICAgICAgaWYgKHBhdGggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2dldENoaWxkJDEocmVmLCBwYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlZiQxKHNlcnZpY2VPclJlZiwgcGF0aE9yVXJsKSB7XHJcbiAgICBpZiAocGF0aE9yVXJsICYmIGlzVXJsKHBhdGhPclVybCkpIHtcclxuICAgICAgICBpZiAoc2VydmljZU9yUmVmIGluc3RhbmNlb2YgRmlyZWJhc2VTdG9yYWdlSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVmRnJvbVVSTChzZXJ2aWNlT3JSZWYsIHBhdGhPclVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQXJndW1lbnQoJ1RvIHVzZSByZWYoc2VydmljZSwgdXJsKSwgdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdG9yYWdlIGluc3RhbmNlLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZWZGcm9tUGF0aChzZXJ2aWNlT3JSZWYsIHBhdGhPclVybCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEJ1Y2tldChob3N0LCBjb25maWcpIHtcclxuICAgIGNvbnN0IGJ1Y2tldFN0cmluZyA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZ1tDT05GSUdfU1RPUkFHRV9CVUNLRVRfS0VZXTtcclxuICAgIGlmIChidWNrZXRTdHJpbmcgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIExvY2F0aW9uLm1ha2VGcm9tQnVja2V0U3BlYyhidWNrZXRTdHJpbmcsIGhvc3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbm5lY3RTdG9yYWdlRW11bGF0b3IkMShzdG9yYWdlLCBob3N0LCBwb3J0LCBvcHRpb25zID0ge30pIHtcclxuICAgIHN0b3JhZ2UuaG9zdCA9IGBodHRwOi8vJHtob3N0fToke3BvcnR9YDtcclxuICAgIGNvbnN0IHsgbW9ja1VzZXJUb2tlbiB9ID0gb3B0aW9ucztcclxuICAgIGlmIChtb2NrVXNlclRva2VuKSB7XHJcbiAgICAgICAgc3RvcmFnZS5fb3ZlcnJpZGVBdXRoVG9rZW4gPVxyXG4gICAgICAgICAgICB0eXBlb2YgbW9ja1VzZXJUb2tlbiA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgICAgID8gbW9ja1VzZXJUb2tlblxyXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVNb2NrVXNlclRva2VuKG1vY2tVc2VyVG9rZW4sIHN0b3JhZ2UuYXBwLm9wdGlvbnMucHJvamVjdElkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQSBzZXJ2aWNlIHRoYXQgcHJvdmlkZXMgRmlyZWJhc2UgU3RvcmFnZSBSZWZlcmVuY2UgaW5zdGFuY2VzLlxyXG4gKiBAcGFyYW0gb3B0X3VybCAtIGdzOi8vIHVybCB0byBhIGN1c3RvbSBTdG9yYWdlIEJ1Y2tldFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIEZpcmViYXNlU3RvcmFnZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlQXBwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIFN0b3JhZ2VTZXJ2aWNlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBhcHAsIF9hdXRoUHJvdmlkZXIsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX2FwcENoZWNrUHJvdmlkZXIsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX3Bvb2wsIF91cmwsIF9maXJlYmFzZVZlcnNpb24pIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9hdXRoUHJvdmlkZXIgPSBfYXV0aFByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuX2FwcENoZWNrUHJvdmlkZXIgPSBfYXBwQ2hlY2tQcm92aWRlcjtcclxuICAgICAgICB0aGlzLl9wb29sID0gX3Bvb2w7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gX3VybDtcclxuICAgICAgICB0aGlzLl9maXJlYmFzZVZlcnNpb24gPSBfZmlyZWJhc2VWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMuX2J1Y2tldCA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBzdHJpbmcgY2FuIGJlIGluIHRoZSBmb3JtYXRzOlxyXG4gICAgICAgICAqIC0gaG9zdFxyXG4gICAgICAgICAqIC0gaG9zdDpwb3J0XHJcbiAgICAgICAgICogLSBwcm90b2NvbDovL2hvc3Q6cG9ydFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hvc3QgPSBERUZBVUxUX0hPU1Q7XHJcbiAgICAgICAgdGhpcy5fYXBwSWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tYXhPcGVyYXRpb25SZXRyeVRpbWUgPSBERUZBVUxUX01BWF9PUEVSQVRJT05fUkVUUllfVElNRTtcclxuICAgICAgICB0aGlzLl9tYXhVcGxvYWRSZXRyeVRpbWUgPSBERUZBVUxUX01BWF9VUExPQURfUkVUUllfVElNRTtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0cyA9IG5ldyBTZXQoKTtcclxuICAgICAgICBpZiAoX3VybCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1Y2tldCA9IExvY2F0aW9uLm1ha2VGcm9tQnVja2V0U3BlYyhfdXJsLCB0aGlzLl9ob3N0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1Y2tldCA9IGV4dHJhY3RCdWNrZXQodGhpcy5faG9zdCwgdGhpcy5hcHAub3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGhvc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3Q7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCBob3N0IHN0cmluZyBmb3IgdGhpcyBzZXJ2aWNlLlxyXG4gICAgICogQHBhcmFtIGhvc3QgLSBob3N0IHN0cmluZyBpbiB0aGUgZm9ybSBvZiBob3N0LCBob3N0OnBvcnQsXHJcbiAgICAgKiBvciBwcm90b2NvbDovL2hvc3Q6cG9ydFxyXG4gICAgICovXHJcbiAgICBzZXQgaG9zdChob3N0KSB7XHJcbiAgICAgICAgdGhpcy5faG9zdCA9IGhvc3Q7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VybCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1Y2tldCA9IExvY2F0aW9uLm1ha2VGcm9tQnVja2V0U3BlYyh0aGlzLl91cmwsIGhvc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnVja2V0ID0gZXh0cmFjdEJ1Y2tldChob3N0LCB0aGlzLmFwcC5vcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIHRpbWUgdG8gcmV0cnkgdXBsb2FkcyBpbiBtaWxsaXNlY29uZHMuXHJcbiAgICAgKi9cclxuICAgIGdldCBtYXhVcGxvYWRSZXRyeVRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21heFVwbG9hZFJldHJ5VGltZTtcclxuICAgIH1cclxuICAgIHNldCBtYXhVcGxvYWRSZXRyeVRpbWUodGltZSkge1xyXG4gICAgICAgIHZhbGlkYXRlTnVtYmVyKCd0aW1lJywgXHJcbiAgICAgICAgLyogbWluVmFsdWU9Ki8gMCwgXHJcbiAgICAgICAgLyogbWF4VmFsdWU9ICovIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgdGltZSk7XHJcbiAgICAgICAgdGhpcy5fbWF4VXBsb2FkUmV0cnlUaW1lID0gdGltZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gdGltZSB0byByZXRyeSBvcGVyYXRpb25zIG90aGVyIHRoYW4gdXBsb2FkcyBvciBkb3dubG9hZHMgaW5cclxuICAgICAqIG1pbGxpc2Vjb25kcy5cclxuICAgICAqL1xyXG4gICAgZ2V0IG1heE9wZXJhdGlvblJldHJ5VGltZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4T3BlcmF0aW9uUmV0cnlUaW1lO1xyXG4gICAgfVxyXG4gICAgc2V0IG1heE9wZXJhdGlvblJldHJ5VGltZSh0aW1lKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOdW1iZXIoJ3RpbWUnLCBcclxuICAgICAgICAvKiBtaW5WYWx1ZT0qLyAwLCBcclxuICAgICAgICAvKiBtYXhWYWx1ZT0gKi8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCB0aW1lKTtcclxuICAgICAgICB0aGlzLl9tYXhPcGVyYXRpb25SZXRyeVRpbWUgPSB0aW1lO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldEF1dGhUb2tlbigpIHtcclxuICAgICAgICBpZiAodGhpcy5fb3ZlcnJpZGVBdXRoVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX292ZXJyaWRlQXV0aFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhdXRoID0gdGhpcy5fYXV0aFByb3ZpZGVyLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG4gICAgICAgIGlmIChhdXRoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IGF1dGguZ2V0VG9rZW4oKTtcclxuICAgICAgICAgICAgaWYgKHRva2VuRGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuRGF0YS5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXRBcHBDaGVja1Rva2VuKCkge1xyXG4gICAgICAgIGNvbnN0IGFwcENoZWNrID0gdGhpcy5fYXBwQ2hlY2tQcm92aWRlci5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgICAgICBpZiAoYXBwQ2hlY2spIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwQ2hlY2suZ2V0VG9rZW4oKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogV2hhdCBkbyB3ZSB3YW50IHRvIGRvIGlmIHRoZXJlIGlzIGFuIGVycm9yIGdldHRpbmcgdGhlIHRva2VuP1xyXG4gICAgICAgICAgICAvLyBDb250ZXh0OiBhcHBDaGVjay5nZXRUb2tlbigpIHdpbGwgbmV2ZXIgdGhyb3cgZXZlbiBpZiBhbiBlcnJvciBoYXBwZW5lZC4gSW4gdGhlIGVycm9yIGNhc2UsIGEgZHVtbXkgdG9rZW4gd2lsbCBiZVxyXG4gICAgICAgICAgICAvLyByZXR1cm5lZCBhbG9uZyB3aXRoIGFuIGVycm9yIGZpZWxkIGRlc2NyaWJpbmcgdGhlIGVycm9yLiBJbiBnZW5lcmFsLCB3ZSBzaG91bGRuJ3QgY2FyZSBhYm91dCB0aGUgZXJyb3IgY29uZGl0aW9uIGFuZCBqdXN0IHVzZVxyXG4gICAgICAgICAgICAvLyB0aGUgdG9rZW4gKGFjdHVhbCBvciBkdW1teSkgdG8gc2VuZCByZXF1ZXN0cy5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50b2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0b3AgcnVubmluZyByZXF1ZXN0cyBhbmQgcHJldmVudCBtb3JlIGZyb20gYmVpbmcgY3JlYXRlZC5cclxuICAgICAqL1xyXG4gICAgX2RlbGV0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RzLmZvckVhY2gocmVxdWVzdCA9PiByZXF1ZXN0LmNhbmNlbCgpKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGZpcmViYXNlU3RvcmFnZS5SZWZlcmVuY2Ugb2JqZWN0IHJlZmVyZW5jaW5nIHRoaXMgU3RvcmFnZVNlcnZpY2VcclxuICAgICAqIGF0IHRoZSBnaXZlbiBMb2NhdGlvbi5cclxuICAgICAqL1xyXG4gICAgX21ha2VTdG9yYWdlUmVmZXJlbmNlKGxvYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVmZXJlbmNlKHRoaXMsIGxvYyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0SW5mbyAtIEhUVFAgUmVxdWVzdEluZm8gb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gYXV0aFRva2VuIC0gRmlyZWJhc2UgYXV0aCB0b2tlblxyXG4gICAgICovXHJcbiAgICBfbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbikge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIHRoaXMuX2FwcElkLCBhdXRoVG9rZW4sIGFwcENoZWNrVG9rZW4sIHRoaXMuX3Bvb2wsIHRoaXMuX2ZpcmViYXNlVmVyc2lvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RzLmFkZChyZXF1ZXN0KTtcclxuICAgICAgICAgICAgLy8gUmVxdWVzdCByZW1vdmVzIGl0c2VsZiBmcm9tIHNldCB3aGVuIGNvbXBsZXRlLlxyXG4gICAgICAgICAgICByZXF1ZXN0LmdldFByb21pc2UoKS50aGVuKCgpID0+IHRoaXMuX3JlcXVlc3RzLmRlbGV0ZShyZXF1ZXN0KSwgKCkgPT4gdGhpcy5fcmVxdWVzdHMuZGVsZXRlKHJlcXVlc3QpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhaWxSZXF1ZXN0KGFwcERlbGV0ZWQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgbWFrZVJlcXVlc3RXaXRoVG9rZW5zKHJlcXVlc3RJbmZvKSB7XHJcbiAgICAgICAgY29uc3QgW2F1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIHRoaXMuX2dldEF1dGhUb2tlbigpLFxyXG4gICAgICAgICAgICB0aGlzLl9nZXRBcHBDaGVja1Rva2VuKClcclxuICAgICAgICBdKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QocmVxdWVzdEluZm8sIGF1dGhUb2tlbiwgYXBwQ2hlY2tUb2tlbik7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuOC4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUeXBlIGNvbnN0YW50IGZvciBGaXJlYmFzZSBTdG9yYWdlLlxyXG4gKi9cclxuY29uc3QgU1RPUkFHRV9UWVBFID0gJ3N0b3JhZ2UnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBsb2FkcyBkYXRhIHRvIHRoaXMgb2JqZWN0J3MgbG9jYXRpb24uXHJcbiAqIFRoZSB1cGxvYWQgaXMgbm90IHJlc3VtYWJsZS5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0gcmVmIC0gU3RvcmFnZVJlZmVyZW5jZSB3aGVyZSBkYXRhIHNob3VsZCBiZSB1cGxvYWRlZC5cclxuICogQHBhcmFtIGRhdGEgLSBUaGUgZGF0YSB0byB1cGxvYWQuXHJcbiAqIEBwYXJhbSBtZXRhZGF0YSAtIE1ldGFkYXRhIGZvciB0aGUgZGF0YSB0byB1cGxvYWQuXHJcbiAqIEByZXR1cm5zIEEgUHJvbWlzZSBjb250YWluaW5nIGFuIFVwbG9hZFJlc3VsdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBsb2FkQnl0ZXMocmVmLCBkYXRhLCBtZXRhZGF0YSkge1xyXG4gICAgcmVmID0gZ2V0TW9kdWxhckluc3RhbmNlKHJlZik7XHJcbiAgICByZXR1cm4gdXBsb2FkQnl0ZXMkMShyZWYsIGRhdGEsIG1ldGFkYXRhKTtcclxufVxyXG4vKipcclxuICogVXBsb2FkcyBhIHN0cmluZyB0byB0aGlzIG9iamVjdCdzIGxvY2F0aW9uLlxyXG4gKiBUaGUgdXBsb2FkIGlzIG5vdCByZXN1bWFibGUuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIFN0b3JhZ2VSZWZlcmVuY2Ugd2hlcmUgc3RyaW5nIHNob3VsZCBiZSB1cGxvYWRlZC5cclxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHN0cmluZyB0byB1cGxvYWQuXHJcbiAqIEBwYXJhbSBmb3JtYXQgLSBUaGUgZm9ybWF0IG9mIHRoZSBzdHJpbmcgdG8gdXBsb2FkLlxyXG4gKiBAcGFyYW0gbWV0YWRhdGEgLSBNZXRhZGF0YSBmb3IgdGhlIHN0cmluZyB0byB1cGxvYWQuXHJcbiAqIEByZXR1cm5zIEEgUHJvbWlzZSBjb250YWluaW5nIGFuIFVwbG9hZFJlc3VsdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBsb2FkU3RyaW5nKHJlZiwgdmFsdWUsIGZvcm1hdCwgbWV0YWRhdGEpIHtcclxuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xyXG4gICAgcmV0dXJuIHVwbG9hZFN0cmluZyQxKHJlZiwgdmFsdWUsIGZvcm1hdCwgbWV0YWRhdGEpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGxvYWRzIGRhdGEgdG8gdGhpcyBvYmplY3QncyBsb2NhdGlvbi5cclxuICogVGhlIHVwbG9hZCBjYW4gYmUgcGF1c2VkIGFuZCByZXN1bWVkLCBhbmQgZXhwb3NlcyBwcm9ncmVzcyB1cGRhdGVzLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSByZWYgLSBTdG9yYWdlUmVmZXJlbmNlIHdoZXJlIGRhdGEgc2hvdWxkIGJlIHVwbG9hZGVkLlxyXG4gKiBAcGFyYW0gZGF0YSAtIFRoZSBkYXRhIHRvIHVwbG9hZC5cclxuICogQHBhcmFtIG1ldGFkYXRhIC0gTWV0YWRhdGEgZm9yIHRoZSBkYXRhIHRvIHVwbG9hZC5cclxuICogQHJldHVybnMgQW4gVXBsb2FkVGFza1xyXG4gKi9cclxuZnVuY3Rpb24gdXBsb2FkQnl0ZXNSZXN1bWFibGUocmVmLCBkYXRhLCBtZXRhZGF0YSkge1xyXG4gICAgcmVmID0gZ2V0TW9kdWxhckluc3RhbmNlKHJlZik7XHJcbiAgICByZXR1cm4gdXBsb2FkQnl0ZXNSZXN1bWFibGUkMShyZWYsIGRhdGEsIG1ldGFkYXRhKTtcclxufVxyXG4vKipcclxuICogQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBtZXRhZGF0YSBmb3IgdGhpcyBvYmplY3QuIElmIHRoaXNcclxuICogb2JqZWN0IGRvZXNuJ3QgZXhpc3Qgb3IgbWV0YWRhdGEgY2Fubm90IGJlIHJldHJlaXZlZCwgdGhlIHByb21pc2UgaXNcclxuICogcmVqZWN0ZWQuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIHtAbGluayBTdG9yYWdlUmVmZXJlbmNlfSB0byBnZXQgbWV0YWRhdGEgZnJvbS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1ldGFkYXRhKHJlZikge1xyXG4gICAgcmVmID0gZ2V0TW9kdWxhckluc3RhbmNlKHJlZik7XHJcbiAgICByZXR1cm4gZ2V0TWV0YWRhdGEkMShyZWYpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSBtZXRhZGF0YSBmb3IgdGhpcyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIHtAbGluayBTdG9yYWdlUmVmZXJlbmNlfSB0byB1cGRhdGUgbWV0YWRhdGEgZm9yLlxyXG4gKiBAcGFyYW0gbWV0YWRhdGEgLSBUaGUgbmV3IG1ldGFkYXRhIGZvciB0aGUgb2JqZWN0LlxyXG4gKiAgICAgT25seSB2YWx1ZXMgdGhhdCBoYXZlIGJlZW4gZXhwbGljaXRseSBzZXQgd2lsbCBiZSBjaGFuZ2VkLiBFeHBsaWNpdGx5XHJcbiAqICAgICBzZXR0aW5nIGEgdmFsdWUgdG8gbnVsbCB3aWxsIHJlbW92ZSB0aGUgbWV0YWRhdGEuXHJcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbmV3IG1ldGFkYXRhIGZvciB0aGlzIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU1ldGFkYXRhKHJlZiwgbWV0YWRhdGEpIHtcclxuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xyXG4gICAgcmV0dXJuIHVwZGF0ZU1ldGFkYXRhJDEocmVmLCBtZXRhZGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIExpc3QgaXRlbXMgKGZpbGVzKSBhbmQgcHJlZml4ZXMgKGZvbGRlcnMpIHVuZGVyIHRoaXMgc3RvcmFnZSByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIExpc3QgQVBJIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBGaXJlYmFzZSBSdWxlcyBWZXJzaW9uIDIuXHJcbiAqXHJcbiAqIEdDUyBpcyBhIGtleS1ibG9iIHN0b3JlLiBGaXJlYmFzZSBTdG9yYWdlIGltcG9zZXMgdGhlIHNlbWFudGljIG9mICcvJ1xyXG4gKiBkZWxpbWl0ZWQgZm9sZGVyIHN0cnVjdHVyZS5cclxuICogUmVmZXIgdG8gR0NTJ3MgTGlzdCBBUEkgaWYgeW91IHdhbnQgdG8gbGVhcm4gbW9yZS5cclxuICpcclxuICogVG8gYWRoZXJlIHRvIEZpcmViYXNlIFJ1bGVzJ3MgU2VtYW50aWNzLCBGaXJlYmFzZSBTdG9yYWdlIGRvZXMgbm90XHJcbiAqIHN1cHBvcnQgb2JqZWN0cyB3aG9zZSBwYXRocyBlbmQgd2l0aCBcIi9cIiBvciBjb250YWluIHR3byBjb25zZWN1dGl2ZVxyXG4gKiBcIi9cInMuIEZpcmViYXNlIFN0b3JhZ2UgTGlzdCBBUEkgd2lsbCBmaWx0ZXIgdGhlc2UgdW5zdXBwb3J0ZWQgb2JqZWN0cy5cclxuICogbGlzdCgpIG1heSBmYWlsIGlmIHRoZXJlIGFyZSB0b28gbWFueSB1bnN1cHBvcnRlZCBvYmplY3RzIGluIHRoZSBidWNrZXQuXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIHJlZiAtIHtAbGluayBTdG9yYWdlUmVmZXJlbmNlfSB0byBnZXQgbGlzdCBmcm9tLlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFNlZSB7QGxpbmsgTGlzdE9wdGlvbnN9IGZvciBkZXRhaWxzLlxyXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGl0ZW1zIGFuZCBwcmVmaXhlcy5cclxuICogICAgICBgcHJlZml4ZXNgIGNvbnRhaW5zIHJlZmVyZW5jZXMgdG8gc3ViLWZvbGRlcnMgYW5kIGBpdGVtc2BcclxuICogICAgICBjb250YWlucyByZWZlcmVuY2VzIHRvIG9iamVjdHMgaW4gdGhpcyBmb2xkZXIuIGBuZXh0UGFnZVRva2VuYFxyXG4gKiAgICAgIGNhbiBiZSB1c2VkIHRvIGdldCB0aGUgcmVzdCBvZiB0aGUgcmVzdWx0cy5cclxuICovXHJcbmZ1bmN0aW9uIGxpc3QocmVmLCBvcHRpb25zKSB7XHJcbiAgICByZWYgPSBnZXRNb2R1bGFySW5zdGFuY2UocmVmKTtcclxuICAgIHJldHVybiBsaXN0JDEocmVmLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogTGlzdCBhbGwgaXRlbXMgKGZpbGVzKSBhbmQgcHJlZml4ZXMgKGZvbGRlcnMpIHVuZGVyIHRoaXMgc3RvcmFnZSByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIFRoaXMgaXMgYSBoZWxwZXIgbWV0aG9kIGZvciBjYWxsaW5nIGxpc3QoKSByZXBlYXRlZGx5IHVudGlsIHRoZXJlIGFyZVxyXG4gKiBubyBtb3JlIHJlc3VsdHMuIFRoZSBkZWZhdWx0IHBhZ2luYXRpb24gc2l6ZSBpcyAxMDAwLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgcmVzdWx0cyBtYXkgbm90IGJlIGNvbnNpc3RlbnQgaWYgb2JqZWN0cyBhcmUgY2hhbmdlZCB3aGlsZSB0aGlzXHJcbiAqIG9wZXJhdGlvbiBpcyBydW5uaW5nLlxyXG4gKlxyXG4gKiBXYXJuaW5nOiBgbGlzdEFsbGAgbWF5IHBvdGVudGlhbGx5IGNvbnN1bWUgdG9vIG1hbnkgcmVzb3VyY2VzIGlmIHRoZXJlIGFyZVxyXG4gKiB0b28gbWFueSByZXN1bHRzLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSByZWYgLSB7QGxpbmsgU3RvcmFnZVJlZmVyZW5jZX0gdG8gZ2V0IGxpc3QgZnJvbS5cclxuICpcclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIGFsbCB0aGUgaXRlbXMgYW5kIHByZWZpeGVzIHVuZGVyXHJcbiAqICAgICAgdGhlIGN1cnJlbnQgc3RvcmFnZSByZWZlcmVuY2UuIGBwcmVmaXhlc2AgY29udGFpbnMgcmVmZXJlbmNlcyB0b1xyXG4gKiAgICAgIHN1Yi1kaXJlY3RvcmllcyBhbmQgYGl0ZW1zYCBjb250YWlucyByZWZlcmVuY2VzIHRvIG9iamVjdHMgaW4gdGhpc1xyXG4gKiAgICAgIGZvbGRlci4gYG5leHRQYWdlVG9rZW5gIGlzIG5ldmVyIHJldHVybmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gbGlzdEFsbChyZWYpIHtcclxuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xyXG4gICAgcmV0dXJuIGxpc3RBbGwkMShyZWYpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBkb3dubG9hZCBVUkwgZm9yIHRoZSBnaXZlbiB7QGxpbmsgU3RvcmFnZVJlZmVyZW5jZX0uXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIHtAbGluayBTdG9yYWdlUmVmZXJlbmNlfSB0byBnZXQgdGhlIGRvd25sb2FkIFVSTCBmb3IuXHJcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZG93bmxvYWRcclxuICogICAgIFVSTCBmb3IgdGhpcyBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXREb3dubG9hZFVSTChyZWYpIHtcclxuICAgIHJlZiA9IGdldE1vZHVsYXJJbnN0YW5jZShyZWYpO1xyXG4gICAgcmV0dXJuIGdldERvd25sb2FkVVJMJDEocmVmKTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyB0aGUgb2JqZWN0IGF0IHRoaXMgbG9jYXRpb24uXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHJlZiAtIHtAbGluayBTdG9yYWdlUmVmZXJlbmNlfSBmb3Igb2JqZWN0IHRvIGRlbGV0ZS5cclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBpZiB0aGUgZGVsZXRpb24gc3VjY2VlZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxldGVPYmplY3QocmVmKSB7XHJcbiAgICByZWYgPSBnZXRNb2R1bGFySW5zdGFuY2UocmVmKTtcclxuICAgIHJldHVybiBkZWxldGVPYmplY3QkMShyZWYpO1xyXG59XHJcbmZ1bmN0aW9uIHJlZihzZXJ2aWNlT3JSZWYsIHBhdGhPclVybCkge1xyXG4gICAgc2VydmljZU9yUmVmID0gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2VPclJlZik7XHJcbiAgICByZXR1cm4gcmVmJDEoc2VydmljZU9yUmVmLCBwYXRoT3JVcmwpO1xyXG59XHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDaGlsZChyZWYsIGNoaWxkUGF0aCkge1xyXG4gICAgcmV0dXJuIF9nZXRDaGlsZCQxKHJlZiwgY2hpbGRQYXRoKTtcclxufVxyXG4vKipcclxuICogR2V0cyBhIHtAbGluayBGaXJlYmFzZVN0b3JhZ2V9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gRmlyZWJhc2UgYXBwLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZSBhcHAgdG8gZ2V0IHtAbGluayBGaXJlYmFzZVN0b3JhZ2V9IGluc3RhbmNlIGZvci5cclxuICogQHBhcmFtIGJ1Y2tldFVybCAtIFRoZSBnczovLyB1cmwgdG8geW91ciBGaXJlYmFzZSBTdG9yYWdlIEJ1Y2tldC5cclxuICogSWYgbm90IHBhc3NlZCwgdXNlcyB0aGUgYXBwJ3MgZGVmYXVsdCBTdG9yYWdlIEJ1Y2tldC5cclxuICogQHJldHVybnMgQSB7QGxpbmsgRmlyZWJhc2VTdG9yYWdlfSBpbnN0YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFN0b3JhZ2UoYXBwID0gZ2V0QXBwKCksIGJ1Y2tldFVybCkge1xyXG4gICAgYXBwID0gZ2V0TW9kdWxhckluc3RhbmNlKGFwcCk7XHJcbiAgICBjb25zdCBzdG9yYWdlUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCBTVE9SQUdFX1RZUEUpO1xyXG4gICAgY29uc3Qgc3RvcmFnZUluc3RhbmNlID0gc3RvcmFnZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgaWRlbnRpZmllcjogYnVja2V0VXJsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdG9yYWdlSW5zdGFuY2U7XHJcbn1cclxuLyoqXHJcbiAqIE1vZGlmeSB0aGlzIHtAbGluayBGaXJlYmFzZVN0b3JhZ2V9IGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIFN0b3JhZ2UgZW11bGF0b3IuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdG9yYWdlIC0gVGhlIHtAbGluayBGaXJlYmFzZVN0b3JhZ2V9IGluc3RhbmNlXHJcbiAqIEBwYXJhbSBob3N0IC0gVGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpXHJcbiAqIEBwYXJhbSBwb3J0IC0gVGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA1MDAxKVxyXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZyBTZWN1cml0eSBSdWxlcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gY29ubmVjdFN0b3JhZ2VFbXVsYXRvcihzdG9yYWdlLCBob3N0LCBwb3J0LCBvcHRpb25zID0ge30pIHtcclxuICAgIGNvbm5lY3RTdG9yYWdlRW11bGF0b3IkMShzdG9yYWdlLCBob3N0LCBwb3J0LCBvcHRpb25zKTtcclxufVxuXG4vKipcclxuICogQ2xvdWQgU3RvcmFnZSBmb3IgRmlyZWJhc2VcclxuICpcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBmYWN0b3J5KGNvbnRhaW5lciwgeyBpbnN0YW5jZUlkZW50aWZpZXI6IHVybCB9KSB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgY29uc3QgYXV0aFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhdXRoLWludGVybmFsJyk7XHJcbiAgICBjb25zdCBhcHBDaGVja1Byb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAtY2hlY2staW50ZXJuYWwnKTtcclxuICAgIHJldHVybiBuZXcgRmlyZWJhc2VTdG9yYWdlSW1wbChhcHAsIGF1dGhQcm92aWRlciwgYXBwQ2hlY2tQcm92aWRlciwgbmV3IENvbm5lY3Rpb25Qb29sKCksIHVybCwgU0RLX1ZFUlNJT04pO1xyXG59XHJcbmZ1bmN0aW9uIHJlZ2lzdGVyU3RvcmFnZSgpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFNUT1JBR0VfVFlQRSwgZmFjdG9yeSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pLnNldE11bHRpcGxlSW5zdGFuY2VzKHRydWUpKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3RlclN0b3JhZ2UoKTtcblxuZXhwb3J0IHsgU3RyaW5nRm9ybWF0LCBGYnNCbG9iIGFzIF9GYnNCbG9iLCBMb2NhdGlvbiBhcyBfTG9jYXRpb24sIFRhc2tFdmVudCBhcyBfVGFza0V2ZW50LCBUYXNrU3RhdGUgYXMgX1Rhc2tTdGF0ZSwgVXBsb2FkVGFzayBhcyBfVXBsb2FkVGFzaywgZGF0YUZyb21TdHJpbmcgYXMgX2RhdGFGcm9tU3RyaW5nLCBfZ2V0Q2hpbGQsIGludmFsaWRBcmd1bWVudCBhcyBfaW52YWxpZEFyZ3VtZW50LCBpbnZhbGlkUm9vdE9wZXJhdGlvbiBhcyBfaW52YWxpZFJvb3RPcGVyYXRpb24sIGNvbm5lY3RTdG9yYWdlRW11bGF0b3IsIGRlbGV0ZU9iamVjdCwgZ2V0RG93bmxvYWRVUkwsIGdldE1ldGFkYXRhLCBnZXRTdG9yYWdlLCBsaXN0LCBsaXN0QWxsLCByZWYsIHVwZGF0ZU1ldGFkYXRhLCB1cGxvYWRCeXRlcywgdXBsb2FkQnl0ZXNSZXN1bWFibGUsIHVwbG9hZFN0cmluZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjcuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjAuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCB2YXJpYW50KTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYTtcclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbnZhciBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxudmFyIGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxudmFyIGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG52YXIgQ29uc29sZU1ldGhvZCA9IChfYSA9IHt9LFxyXG4gICAgX2FbTG9nTGV2ZWwuREVCVUddID0gJ2xvZycsXHJcbiAgICBfYVtMb2dMZXZlbC5WRVJCT1NFXSA9ICdsb2cnLFxyXG4gICAgX2FbTG9nTGV2ZWwuSU5GT10gPSAnaW5mbycsXHJcbiAgICBfYVtMb2dMZXZlbC5XQVJOXSA9ICd3YXJuJyxcclxuICAgIF9hW0xvZ0xldmVsLkVSUk9SXSA9ICdlcnJvcicsXHJcbiAgICBfYSk7XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxudmFyIGRlZmF1bHRMb2dIYW5kbGVyID0gZnVuY3Rpb24gKGluc3RhbmNlLCBsb2dUeXBlKSB7XHJcbiAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICB2YXIgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0uYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogXCIgKyBsb2dUeXBlICsgXCIpXCIpO1xyXG4gICAgfVxyXG59O1xyXG52YXIgTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBMb2dnZXIobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJsb2dMZXZlbFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB2YWx1ZSBcXFwiXCIgKyB2YWwgKyBcIlxcXCIgYXNzaWduZWQgdG8gYGxvZ0xldmVsYFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5zZXRMb2dMZXZlbCA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTG9nZ2VyLnByb3RvdHlwZSwgXCJsb2dIYW5kbGVyXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2dnZXIucHJvdG90eXBlLCBcInVzZXJMb2dIYW5kbGVyXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5ERUJVR10sIGFyZ3MpKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5ERUJVR10sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLlZFUkJPU0VdLCBhcmdzKSk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuVkVSQk9TRV0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5JTkZPXSwgYXJncykpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLklORk9dLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS53YXJuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuV0FSTl0sIGFyZ3MpKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5XQVJOXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5FUlJPUl0sIGFyZ3MpKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5FUlJPUl0sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTG9nZ2VyO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKGluc3QpIHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYXJnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZzsgfSlcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIGluc3RhbmNlc18xID0gaW5zdGFuY2VzOyBfaSA8IGluc3RhbmNlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBpbnN0YW5jZSA9IGluc3RhbmNlc18xW19pXTtcclxuICAgICAgICBfbG9vcF8xKGluc3RhbmNlKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tICd0c2xpYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG52YXIgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG52YXIgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbnZhciBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG52YXIgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICB2YXIgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICB2YXIgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgdmFyIGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG52YXIgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXk6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgdmFyIGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIHZhciBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nOiBmdW5jdGlvbiAoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmc6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheTogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIHZhciBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIHZhciBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG52YXIgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxudmFyIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxyXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbnZhciBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIHZhciBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCAhaXNWYWxpZEtleShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XHJcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRGVmZXJyZWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICBfdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgRGVmZXJyZWQucHJvdG90eXBlLndyYXBDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVmZXJyZWQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICB2YXIgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgdmFyIHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICB2YXIgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICB2YXIgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICB2YXIgcGF5bG9hZCA9IF9fYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBcImh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9cIiArIHByb2plY3QsIGF1ZDogcHJvamVjdCwgaWF0OiBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1Yjogc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICB2YXIgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICB2YXIgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIHZhciB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgcmV0dXJuICdpbmRleGVkREInIGluIHNlbGYgJiYgaW5kZXhlZERCICE9IG51bGw7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBwcmVFeGlzdF8xID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIERCX0NIRUNLX05BTUVfMSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3RfMSA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRV8xKTtcclxuICAgICAgICAgICAgcmVxdWVzdF8xLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfMS5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3RfMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUVfMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0XzEub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3RfMSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0XzEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdF8xLmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAoIW5hdmlnYXRvciB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG52YXIgRmlyZWJhc2VFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhGaXJlYmFzZUVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmlyZWJhc2VFcnJvcihjb2RlLCBtZXNzYWdlLCBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICBfdGhpcy5jdXN0b21EYXRhID0gY3VzdG9tRGF0YTtcclxuICAgICAgICBfdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKF90aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlYmFzZUVycm9yO1xyXG59KEVycm9yKSk7XHJcbnZhciBFcnJvckZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFcnJvckZhY3Rvcnkoc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoY29kZSkge1xyXG4gICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZGF0YVtfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIHZhciBmdWxsQ29kZSA9IHRoaXMuc2VydmljZSArIFwiL1wiICsgY29kZTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIHZhciBmdWxsTWVzc2FnZSA9IHRoaXMuc2VydmljZU5hbWUgKyBcIjogXCIgKyBtZXNzYWdlICsgXCIgKFwiICsgZnVsbENvZGUgKyBcIikuXCI7XHJcbiAgICAgICAgdmFyIGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVycm9yRmFjdG9yeTtcclxufSgpKTtcclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCBmdW5jdGlvbiAoXywga2V5KSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IFwiPFwiICsga2V5ICsgXCI/PlwiO1xyXG4gICAgfSk7XHJcbn1cclxudmFyIFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcjogaGVhZGVyLFxyXG4gICAgICAgIGNsYWltczogY2xhaW1zLFxyXG4gICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgdmFyIG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIHZhciB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICB2YXIgcmVzID0ge307XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgdmFyIGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIGFLZXlzXzEgPSBhS2V5czsgX2kgPCBhS2V5c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBrID0gYUtleXNfMVtfaV07XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhUHJvcCA9IGFba107XHJcbiAgICAgICAgdmFyIGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBfYSA9IDAsIGJLZXlzXzEgPSBiS2V5czsgX2EgPCBiS2V5c18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgIHZhciBrID0gYktleXNfMVtfYV07XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICB2YXIgcGFyYW1zID0gW107XHJcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGFycmF5VmFsKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIF9iID0gX2FbX2ldLCBrZXkgPSBfYlswXSwgdmFsdWUgPSBfYlsxXTtcclxuICAgICAgICBfbG9vcF8xKGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIHZhciB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaChmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gdG9rZW4uc3BsaXQoJz0nKSwga2V5ID0gX2FbMF0sIHZhbHVlID0gX2FbMV07XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIHZhciBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIHZhciBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxudmFyIFNoYTEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaGExKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICBTaGExLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBTaGExLnByb3RvdHlwZS5jb21wcmVzc18gPSBmdW5jdGlvbiAoYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICB2YXIgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIHZhciBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICB2YXIgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH07XHJcbiAgICBTaGExLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICB2YXIgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIHZhciBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgU2hhMS5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaWdlc3QgPSBbXTtcclxuICAgICAgICB2YXIgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2hhMTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgdmFyIHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbnZhciBPYnNlcnZlclByb3h5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZXhlY3V0b3IoX3RoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoX3RoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfTtcclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUudW5zdWJzY3JpYmVPbmUgPSBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmZvckVhY2hPYnNlcnZlciA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLnNlbmRPbmUgPSBmdW5jdGlvbiAoaSwgZm4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIF90aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKF90aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIF90aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9ic2VydmVyUHJveHk7XHJcbn0oKSk7XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZuLmFwcGx5KHZvaWQgMCwgYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBtZXRob2RzXzEgPSBtZXRob2RzOyBfaSA8IG1ldGhvZHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kc18xW19pXTtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG52YXIgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIHZhciBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIHZhciBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gZm5OYW1lICsgXCIgZmFpbGVkOiBcIiArIGFyZ05hbWUgKyBcIiBhcmd1bWVudCBcIjtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxudmFyIHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIG91dCA9IFtdO1xyXG4gICAgdmFyIHAgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIHZhciBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgdmFyIGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbnZhciBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB2YXIgcCA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbnZhciBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbnZhciBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMsIGJhY2tvZmZGYWN0b3IpIHtcclxuICAgIGlmIChpbnRlcnZhbE1pbGxpcyA9PT0gdm9pZCAwKSB7IGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVM7IH1cclxuICAgIGlmIChiYWNrb2ZmRmFjdG9yID09PSB2b2lkIDApIHsgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1I7IH1cclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIHZhciBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgdmFyIHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBcIlwiICsgaTtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICB2YXIgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICB2YXIgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHZhbGlkYXRlQXJnQ291bnQsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQ29udGV4dE9iamVjdCwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgdmFsaWRhdGVOYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XG4gIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XG4gIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59XG5cbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0O1xuICB9XG4gIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICB9XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcbiAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XG4gIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XG4gIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xuICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcbiAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBjb250ZXh0ID0ge307XG4gICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xuICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcbiAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xuICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XG4gICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xuICAgICAgfVxuICB9XG4gIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcbiAgZG9uZSA9IHRydWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xuICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcbiAgfVxuICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gIH1cbn1cblxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcbiAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xuICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xuICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gIGlmICghbSkgcmV0dXJuIG87XG4gIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICB0cnkge1xuICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gIGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgIH1cbiAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICB9XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XG4gIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xuICByZXR1cm4gYXI7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xuICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcbiAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgcltrXSA9IGFbal07XG4gIHJldHVybiByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xuICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgfVxuICB9XG4gIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XG4gIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcbiAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XG4gIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cbiAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XG4gIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cbiAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcbiAgdmFyIGksIHA7XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XG4gIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcbiAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XG4gIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XG4gIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XG4gIHJldHVybiBjb29rZWQ7XG59O1xuXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59O1xuXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcbiAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIGFyID0gW107XG4gICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcbiAgICByZXR1cm4gYXI7XG4gIH07XG4gIHJldHVybiBvd25LZXlzKG8pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcbiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xuICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xuICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XG4gIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xuICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcbiAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xuICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XG4gICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xuICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xuICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gIH1cbiAgZWxzZSBpZiAoYXN5bmMpIHtcbiAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xuICBmdW5jdGlvbiBmYWlsKGUpIHtcbiAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XG4gICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgfVxuICB2YXIgciwgcyA9IDA7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xuICAgICAgICBpZiAoci5kaXNwb3NlKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHIuZGlzcG9zZS5jYWxsKHIudmFsdWUpO1xuICAgICAgICAgIGlmIChyLmFzeW5jKSByZXR1cm4gcyB8PSAyLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBzIHw9IDE7XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBmYWlsKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocyA9PT0gMSkgcmV0dXJuIGVudi5oYXNFcnJvciA/IFByb21pc2UucmVqZWN0KGVudi5lcnJvcikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAvXlxcLlxcLj9cXC8vLnRlc3QocGF0aCkpIHtcbiAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XG4gICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcbiAgICAgIH0pO1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIF9fZXh0ZW5kcyxcbiAgX19hc3NpZ24sXG4gIF9fcmVzdCxcbiAgX19kZWNvcmF0ZSxcbiAgX19wYXJhbSxcbiAgX19lc0RlY29yYXRlLFxuICBfX3J1bkluaXRpYWxpemVycyxcbiAgX19wcm9wS2V5LFxuICBfX3NldEZ1bmN0aW9uTmFtZSxcbiAgX19tZXRhZGF0YSxcbiAgX19hd2FpdGVyLFxuICBfX2dlbmVyYXRvcixcbiAgX19jcmVhdGVCaW5kaW5nLFxuICBfX2V4cG9ydFN0YXIsXG4gIF9fdmFsdWVzLFxuICBfX3JlYWQsXG4gIF9fc3ByZWFkLFxuICBfX3NwcmVhZEFycmF5cyxcbiAgX19zcHJlYWRBcnJheSxcbiAgX19hd2FpdCxcbiAgX19hc3luY0dlbmVyYXRvcixcbiAgX19hc3luY0RlbGVnYXRvcixcbiAgX19hc3luY1ZhbHVlcyxcbiAgX19tYWtlVGVtcGxhdGVPYmplY3QsXG4gIF9faW1wb3J0U3RhcixcbiAgX19pbXBvcnREZWZhdWx0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXG4gIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlLFxuICBfX2Rpc3Bvc2VSZXNvdXJjZXMsXG4gIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxufTtcbiIsImltcG9ydCB7IF9nZXRQcm92aWRlciBhcyB0LCBnZXRBcHAgYXMgZSwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSBhcyBuLCBfcmVnaXN0ZXJDb21wb25lbnQgYXMgcywgcmVnaXN0ZXJWZXJzaW9uIGFzIGksIFNES19WRVJTSU9OIGFzIHIgfSBmcm9tIFwiQGZpcmViYXNlL2FwcFwiO1xuXG5pbXBvcnQgeyBDb21wb25lbnQgYXMgbyB9IGZyb20gXCJAZmlyZWJhc2UvY29tcG9uZW50XCI7XG5cbmltcG9ydCB7IExvZ2dlciBhcyBhLCBMb2dMZXZlbCBhcyBjIH0gZnJvbSBcIkBmaXJlYmFzZS9sb2dnZXJcIjtcblxuaW1wb3J0IHsgZ2V0VUEgYXMgdSwgaXNTYWZhcmkgYXMgaCwgaXNNb2JpbGVDb3Jkb3ZhIGFzIGwsIGlzUmVhY3ROYXRpdmUgYXMgZiwgaXNFbGVjdHJvbiBhcyBkLCBpc0lFIGFzIHcsIGlzVVdQIGFzIF8sIGlzQnJvd3NlckV4dGVuc2lvbiBhcyBtLCBjcmVhdGVNb2NrVXNlclRva2VuIGFzIGcsIGdldE1vZHVsYXJJbnN0YW5jZSBhcyB5LCBkZWVwRXF1YWwgYXMgcCB9IGZyb20gXCJAZmlyZWJhc2UvdXRpbFwiO1xuXG5pbXBvcnQgeyBYaHJJbyBhcyBFLCBFdmVudFR5cGUgYXMgVCwgRXJyb3JDb2RlIGFzIEksIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgYXMgQSwgZ2V0U3RhdEV2ZW50VGFyZ2V0IGFzIFIsIEZldGNoWG1sSHR0cEZhY3RvcnkgYXMgUCwgV2ViQ2hhbm5lbCBhcyBiLCBFdmVudCBhcyB2LCBTdGF0IGFzIFYgfSBmcm9tIFwiQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlclwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBTIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBTLlVOQVVUSEVOVElDQVRFRCA9IG5ldyBTKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cblMuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IFMoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBTLkZJUlNUX1BBUlRZID0gbmV3IFMoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuUy5NT0NLX1VTRVIgPSBuZXcgUyhcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBEID0gXCI5LjAuMVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgQyA9IG5ldyBhKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXG5mdW5jdGlvbiBOKCkge1xuICAgIHJldHVybiBDLmxvZ0xldmVsO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHZlcmJvc2l0eSBvZiBDbG91ZCBGaXJlc3RvcmUgbG9ncyAoZGVidWcsIGVycm9yLCBvciBzaWxlbnQpLlxuICpcbiAqIEBwYXJhbSBsb2dMZXZlbCAtIFRoZSB2ZXJib3NpdHkgeW91IHNldCBmb3IgYWN0aXZpdHkgYW5kIGVycm9yIGxvZ2dpbmcuIENhblxuICogICBiZSBhbnkgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gKlxuICogICA8dWw+XG4gKiAgICAgPGxpPmBkZWJ1Z2AgZm9yIHRoZSBtb3N0IHZlcmJvc2UgbG9nZ2luZyBsZXZlbCwgcHJpbWFyaWx5IGZvclxuICogICAgIGRlYnVnZ2luZy48L2xpPlxuICogICAgIDxsaT5gZXJyb3JgIHRvIGxvZyBlcnJvcnMgb25seS48L2xpPlxuICogICAgIDxsaT48Y29kZT5gc2lsZW50YCB0byB0dXJuIG9mZiBsb2dnaW5nLjwvbGk+XG4gKiAgIDwvdWw+XG4gKi8gZnVuY3Rpb24geCh0KSB7XG4gICAgQy5zZXRMb2dMZXZlbCh0KTtcbn1cblxuZnVuY3Rpb24gayh0LCAuLi5lKSB7XG4gICAgaWYgKEMubG9nTGV2ZWwgPD0gYy5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoRik7XG4gICAgICAgIEMuZGVidWcoYEZpcmVzdG9yZSAoJHtEfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uICQodCwgLi4uZSkge1xuICAgIGlmIChDLmxvZ0xldmVsIDw9IGMuRVJST1IpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKEYpO1xuICAgICAgICBDLmVycm9yKGBGaXJlc3RvcmUgKCR7RH0pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIE8odCwgLi4uZSkge1xuICAgIGlmIChDLmxvZ0xldmVsIDw9IGMuV0FSTikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoRik7XG4gICAgICAgIEMud2FybihgRmlyZXN0b3JlICgke0R9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhZGRpdGlvbmFsIGxvZyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gRih0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0O1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBlID0gdCwgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICB2YXIgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICpcbiAqIFJldHVybnMgYG5ldmVyYCBhbmQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XG4gKiBAZXhhbXBsZVxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAqLyBmdW5jdGlvbiBNKHQgPSBcIlVuZXhwZWN0ZWQgc3RhdGVcIikge1xuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxuICAgIGNvbnN0IGUgPSBgRklSRVNUT1JFICgke0R9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgdDtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcbiAgICB0aHJvdyAkKGUpLCBuZXcgRXJyb3IoZSk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKi8gZnVuY3Rpb24gTCh0LCBlKSB7XG4gICAgdCB8fCBNKCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBUaGUgY29kZSBvZiBjYWxsc2l0ZXMgaW52b2tpbmcgdGhpcyBmdW5jdGlvbiBhcmUgc3RyaXBwZWQgb3V0IGluIHByb2R1Y3Rpb25cbiAqIGJ1aWxkcy4gQW55IHNpZGUtZWZmZWN0cyBvZiBjb2RlIHdpdGhpbiB0aGUgZGVidWdBc3NlcnQoKSBpbnZvY2F0aW9uIHdpbGwgbm90XG4gKiBoYXBwZW4gaW4gdGhpcyBjYXNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIEIodCwgZSkge1xuICAgIHQgfHwgTSgpO1xufVxuXG4vKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYC4gSW4gbm9uLXByb2R1Y3Rpb24gYnVpbGRzLCB2ZXJpZmllcyB0aGF0IGBvYmpgIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBgVGAgYmVmb3JlIGNhc3RpbmcuXG4gKi8gZnVuY3Rpb24gVSh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHEgPSB7XG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXG4gICAgT0s6IFwib2tcIixcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXG4gICAgQ0FOQ0VMTEVEOiBcImNhbmNlbGxlZFwiLFxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xuICAgIFVOS05PV046IFwidW5rbm93blwiLFxuICAgIC8qKlxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxuICAgICAqIG5hbWUpLlxuICAgICAqL1xuICAgIElOVkFMSURfQVJHVU1FTlQ6IFwiaW52YWxpZC1hcmd1bWVudFwiLFxuICAgIC8qKlxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cbiAgICAgKiBleHBpcmUuXG4gICAgICovXG4gICAgREVBRExJTkVfRVhDRUVERUQ6IFwiZGVhZGxpbmUtZXhjZWVkZWRcIixcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cbiAgICBOT1RfRk9VTkQ6IFwibm90LWZvdW5kXCIsXG4gICAgLyoqXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBBTFJFQURZX0VYSVNUUzogXCJhbHJlYWR5LWV4aXN0c1wiLFxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2FuIG5vdCBiZSBpZGVudGlmaWVkXG4gICAgICogKHVzZSBVTkFVVEhFTlRJQ0FURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKi9cbiAgICBQRVJNSVNTSU9OX0RFTklFRDogXCJwZXJtaXNzaW9uLWRlbmllZFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0IGRvZXMgbm90IGhhdmUgdmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZVxuICAgICAqIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBVTkFVVEhFTlRJQ0FURUQ6IFwidW5hdXRoZW50aWNhdGVkXCIsXG4gICAgLyoqXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcbiAgICAgKiBlbnRpcmUgZmlsZSBzeXN0ZW0gaXMgb3V0IG9mIHNwYWNlLlxuICAgICAqL1xuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogXCJyZXNvdXJjZS1leGhhdXN0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIHJlamVjdGVkIGJlY2F1c2UgdGhlIHN5c3RlbSBpcyBub3QgaW4gYSBzdGF0ZSByZXF1aXJlZCBmb3JcbiAgICAgKiB0aGUgb3BlcmF0aW9uJ3MgZXhlY3V0aW9uLiBGb3IgZXhhbXBsZSwgZGlyZWN0b3J5IHRvIGJlIGRlbGV0ZWQgbWF5IGJlXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cbiAgICAgKlxuICAgICAqIEEgbGl0bXVzIHRlc3QgdGhhdCBtYXkgaGVscCBhIHNlcnZpY2UgaW1wbGVtZW50b3IgaW4gZGVjaWRpbmdcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcbiAgICAgKiAgKGEpIFVzZSBVTkFWQUlMQUJMRSBpZiB0aGUgY2xpZW50IGNhbiByZXRyeSBqdXN0IHRoZSBmYWlsaW5nIGNhbGwuXG4gICAgICogIChiKSBVc2UgQUJPUlRFRCBpZiB0aGUgY2xpZW50IHNob3VsZCByZXRyeSBhdCBhIGhpZ2hlci1sZXZlbFxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXG4gICAgICogIChjKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW50aWxcbiAgICAgKiAgICAgIHRoZSBzeXN0ZW0gc3RhdGUgaGFzIGJlZW4gZXhwbGljaXRseSBmaXhlZC4gRS5nLiwgaWYgYW4gXCJybWRpclwiXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXG4gICAgICogICAgICBzaG91bGQgYmUgcmV0dXJuZWQgc2luY2UgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVubGVzc1xuICAgICAqICAgICAgdGhleSBoYXZlIGZpcnN0IGZpeGVkIHVwIHRoZSBkaXJlY3RvcnkgYnkgZGVsZXRpbmcgZmlsZXMgZnJvbSBpdC5cbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcbiAgICAgKiAgICAgIFJFU1QgR2V0L1VwZGF0ZS9EZWxldGUgb24gYSByZXNvdXJjZSBhbmQgdGhlIHJlc291cmNlIG9uIHRoZVxuICAgICAqICAgICAgc2VydmVyIGRvZXMgbm90IG1hdGNoIHRoZSBjb25kaXRpb24uIEUuZy4sIGNvbmZsaWN0aW5nXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiBcImZhaWxlZC1wcmVjb25kaXRpb25cIixcbiAgICAvKipcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxuICAgICAqIHNlcXVlbmNlciBjaGVjayBmYWlsdXJlcywgdHJhbnNhY3Rpb24gYWJvcnRzLCBldGMuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgQUJPUlRFRDogXCJhYm9ydGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQgcGFzdCB0aGUgdmFsaWQgcmFuZ2UuIEUuZy4sIHNlZWtpbmcgb3IgcmVhZGluZ1xuICAgICAqIHBhc3QgZW5kIG9mIGZpbGUuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgSU5WQUxJRF9BUkdVTUVOVCwgdGhpcyBlcnJvciBpbmRpY2F0ZXMgYSBwcm9ibGVtIHRoYXQgbWF5IGJlIGZpeGVkXG4gICAgICogaWYgdGhlIHN5c3RlbSBzdGF0ZSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSAzMi1iaXQgZmlsZSBzeXN0ZW0gd2lsbFxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXG4gICAgICogcmFuZ2UgWzAsMl4zMi0xXSwgYnV0IGl0IHdpbGwgZ2VuZXJhdGUgT1VUX09GX1JBTkdFIGlmIGFza2VkIHRvIHJlYWQgZnJvbVxuICAgICAqIGFuIG9mZnNldCBwYXN0IHRoZSBjdXJyZW50IGZpbGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIFRoZXJlIGlzIGEgZmFpciBiaXQgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICogT1VUX09GX1JBTkdFLiBXZSByZWNvbW1lbmQgdXNpbmcgT1VUX09GX1JBTkdFICh0aGUgbW9yZSBzcGVjaWZpYyBlcnJvcilcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cbiAgICAgKiBlYXNpbHkgbG9vayBmb3IgYW4gT1VUX09GX1JBTkdFIGVycm9yIHRvIGRldGVjdCB3aGVuIHRoZXkgYXJlIGRvbmUuXG4gICAgICovXG4gICAgT1VUX09GX1JBTkdFOiBcIm91dC1vZi1yYW5nZVwiLFxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXG4gICAgVU5JTVBMRU1FTlRFRDogXCJ1bmltcGxlbWVudGVkXCIsXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZXJyb3JzLiBNZWFucyBzb21lIGludmFyaWFudHMgZXhwZWN0ZWQgYnkgdW5kZXJseWluZyBTeXN0ZW0gaGFzXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxuICAgICAqL1xuICAgIElOVEVSTkFMOiBcImludGVybmFsXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcbiAgICAgKiBjb25kaXRpb24gYW5kIG1heSBiZSBjb3JyZWN0ZWQgYnkgcmV0cnlpbmcgd2l0aCBhIGJhY2tvZmYuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgVU5BVkFJTEFCTEU6IFwidW5hdmFpbGFibGVcIixcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cbiAgICBEQVRBX0xPU1M6IFwiZGF0YS1sb3NzXCJcbn07XG5cbi8qKiBBbiBlcnJvciByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBvcGVyYXRpb24uICovIGNsYXNzIEsgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgYmFja2VuZCBlcnJvciBjb2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVycm9yLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgY3VzdG9tIGVycm9yIGRlc2NyaXB0aW9uLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuY29kZSA9IHQsIHRoaXMubWVzc2FnZSA9IGUsIFxuICAgICAgICAvKiogVGhlIGN1c3RvbSBuYW1lIGZvciBhbGwgRmlyZXN0b3JlRXJyb3JzLiAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkZpcmViYXNlRXJyb3JcIiwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGoge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHQsIHRoaXMucmVqZWN0ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgUSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuYXV0aEhlYWRlcnMgPSB7fSwgXG4gICAgICAgIC8vIFNldCB0aGUgaGVhZGVycyB1c2luZyBPYmplY3QgTGl0ZXJhbCBub3RhdGlvbiB0byBhdm9pZCBtaW5pZmljYXRpb25cbiAgICAgICAgdGhpcy5hdXRoSGVhZGVycy5BdXRob3JpemF0aW9uID0gYEJlYXJlciAke3R9YDtcbiAgICB9XG59XG5cbi8qKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLiAqLyBjbGFzcyBXIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShTLlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIEcge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGUsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyB6IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudCA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBTLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdCA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgZSh0KSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCBpID0gbmV3IGo7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIGkucmVzb2x2ZSgpLCBpID0gbmV3IGosIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gcyh0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gZSA9PiB7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBrKFwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gZSwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgICAgIC8vIENhbGwgdGhlIGNoYW5nZSBsaXN0ZW5lciBpbmxpbmUgdG8gYmxvY2sgb24gdGhlIHVzZXIgY2hhbmdlLlxuICAgICAgICAgICAgICAgIGF3YWl0IGkucHJvbWlzZSwgYXdhaXQgcyh0aGlzLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50Lm9uSW5pdCgodCA9PiByKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXV0aCByaWdodCBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsgYmVmb3JlIHdlXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRvIHN0YXJ0IHVwIGluIHVuYXV0aGVudGljYXRlZCBtb2RlLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnQuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IHIodCkgOiAoXG4gICAgICAgICAgICAgICAgLy8gSWYgYXV0aCBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGggYG51bGxgIHVzZXJcbiAgICAgICAgICAgICAgICBrKFwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbm90IHJlY2VpdmVkIGEgdG9rZW4sIHdhaXQgZm9yIHRoZSBmaXJzdCBvbmUuXG4gICAgICAgICAgICAwID09PSB0aGlzLmkgJiYgKGF3YWl0IGkucHJvbWlzZSwgYXdhaXQgcyh0aGlzLmN1cnJlbnRVc2VyKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmksIGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbihlKS50aGVuKChlID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSB0ID8gKGsoXCJGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IGUgPyAoTChcInN0cmluZ1wiID09IHR5cGVvZiBlLmFjY2Vzc1Rva2VuKSwgbmV3IFEoZS5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBMKG51bGwgPT09IHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCksIG5ldyBTKHQpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIEgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbiwgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IFMuRklSU1RfUEFSVFk7XG4gICAgfVxuICAgIGdldCBhdXRoSGVhZGVycygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIFwiWC1Hb29nLUF1dGhVc2VyXCI6IHRoaXMubFxuICAgICAgICB9LCBlID0gdGhpcy5oLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eShbXSk7XG4gICAgICAgIC8vIFVzZSBhcnJheSBub3RhdGlvbiB0byBwcmV2ZW50IG1pbmlmaWNhdGlvblxuICAgICAgICAgICAgICAgIHJldHVybiBlICYmICh0LkF1dGhvcml6YXRpb24gPSBlKSwgdGhpcy5tICYmICh0W1wiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCJdID0gdGhpcy5tKSwgXG4gICAgICAgIHQ7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgSiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgSCh0aGlzLmgsIHRoaXMubCwgdGhpcy5tKSk7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoUy5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovXG5jbGFzcyBZIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLmcodCksIHRoaXMucCA9IHQgPT4gZS53cml0ZVNlcXVlbmNlTnVtYmVyKHQpKTtcbiAgICB9XG4gICAgZyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucCAmJiB0aGlzLnAodCksIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBYKHQpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCBlID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgIGlmIChlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpIGUuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgbltlXSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIFkuVCA9IC0xO1xuXG5jbGFzcyBaIHtcbiAgICBzdGF0aWMgSSgpIHtcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgdCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIiwgZSA9IE1hdGguZmxvb3IoMjU2IC8gdC5sZW5ndGgpICogdC5sZW5ndGg7XG4gICAgICAgIC8vIFRoZSBsYXJnZXN0IGJ5dGUgdmFsdWUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIGBjaGFyLmxlbmd0aGAuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBcIlwiO1xuICAgICAgICBmb3IgKDtuLmxlbmd0aCA8IDIwOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBYKDQwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkgXG4gICAgICAgICAgICAvLyBPbmx5IGFjY2VwdCB2YWx1ZXMgdGhhdCBhcmUgWzAsIG1heE11bHRpcGxlKSwgdGhpcyBlbnN1cmVzIHRoZXkgY2FuXG4gICAgICAgICAgICAvLyBiZSBldmVubHkgbWFwcGVkIHRvIGluZGljZXMgb2YgYGNoYXJzYCB2aWEgYSBtb2R1bG8gb3BlcmF0aW9uLlxuICAgICAgICAgICAgbi5sZW5ndGggPCAyMCAmJiBzW2ldIDwgZSAmJiAobiArPSB0LmNoYXJBdChzW2ldICUgdC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHR0KHQsIGUpIHtcbiAgICByZXR1cm4gdCA8IGUgPyAtMSA6IHQgPiBlID8gMSA6IDA7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqLyBmdW5jdGlvbiBldCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQubGVuZ3RoID09PSBlLmxlbmd0aCAmJiB0LmV2ZXJ5KCgodCwgcykgPT4gbih0LCBlW3NdKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBudCh0KSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cbiAgICByZXR1cm4gdCArIFwiXFwwXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZWFybGllc3QgZGF0ZSBzdXBwb3J0ZWQgYnkgRmlyZXN0b3JlIHRpbWVzdGFtcHMgKDAwMDEtMDEtMDFUMDA6MDA6MDBaKS5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3Mgc3Qge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4qXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID0gdCwgdGhpcy5uYW5vc2Vjb25kcyA9IGUsIGUgPCAwKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKGUgPj0gMWU5KSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKHQgPCAtNjIxMzU1OTY4MDApIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gMjUzNDAyMzAwODAwKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBuZXcgdGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgbm93KCkge1xuICAgICAgICByZXR1cm4gc3QuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHN0LmZyb21NaWxsaXModC5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pbGxpc2Vjb25kcyAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21NaWxsaXModCkge1xuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0IC8gMWUzKSwgbiA9IE1hdGguZmxvb3IoMWU2ICogKHQgLSAxZTMgKiBlKSk7XG4gICAgICAgIHJldHVybiBuZXcgc3QoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuIFRoaXMgY29udmVyc2lvblxuICAgICAqIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uIHNpbmNlIGBEYXRlYCBvYmplY3RzIG9ubHkgc3VwcG9ydCBtaWxsaXNlY29uZFxuICAgICAqIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhc1xuICAgICAqICAgICB0aGlzIGBUaW1lc3RhbXBgLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKi8gICAgdG9EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIG51bWVyaWMgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICAgKiBlcG9jaCkuIFRoaXMgb3BlcmF0aW9uIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBvaW50IGluIHRpbWUgY29ycmVzcG9uZGluZyB0byB0aGlzIHRpbWVzdGFtcCwgcmVwcmVzZW50ZWQgYXNcbiAgICAgKiAgICAgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi8gICAgdG9NaWxsaXMoKSB7XG4gICAgICAgIHJldHVybiAxZTMgKiB0aGlzLnNlY29uZHMgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xuICAgIH1cbiAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyA9PT0gdC5zZWNvbmRzID8gdHQodGhpcy5uYW5vc2Vjb25kcywgdC5uYW5vc2Vjb25kcykgOiB0dCh0aGlzLnNlY29uZHMsIHQuc2Vjb25kcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFRpbWVzdGFtcGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIHQubmFub3NlY29uZHMgPT09IHRoaXMubmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiVGltZXN0YW1wKHNlY29uZHM9XCIgKyB0aGlzLnNlY29uZHMgKyBcIiwgbmFub3NlY29uZHM9XCIgKyB0aGlzLm5hbm9zZWNvbmRzICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogdGhpcy5zZWNvbmRzLFxuICAgICAgICAgICAgbmFub3NlY29uZHM6IHRoaXMubmFub3NlY29uZHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBvYmplY3QgdG8gYSBwcmltaXRpdmUgc3RyaW5nLCB3aGljaCBhbGxvd3MgYFRpbWVzdGFtcGAgb2JqZWN0c1xuICAgICAqIHRvIGJlIGNvbXBhcmVkIHVzaW5nIHRoZSBgPmAsIGA8PWAsIGA+PWAgYW5kIGA+YCBvcGVyYXRvcnMuXG4gICAgICovICAgIHZhbHVlT2YoKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gPHNlY29uZHM+LjxuYW5vc2Vjb25kcz4gd2hlcmVcbiAgICAgICAgLy8gPHNlY29uZHM+IGlzIHRyYW5zbGF0ZWQgdG8gaGF2ZSBhIG5vbi1uZWdhdGl2ZSB2YWx1ZSBhbmQgYm90aCA8c2Vjb25kcz5cbiAgICAgICAgLy8gYW5kIDxuYW5vc2Vjb25kcz4gYXJlIGxlZnQtcGFkZGVkIHdpdGggemVyb2VzIHRvIGJlIGEgY29uc2lzdGVudCBsZW5ndGguXG4gICAgICAgIC8vIFN0cmluZ3Mgd2l0aCB0aGlzIGZvcm1hdCB0aGVuIGhhdmUgYSBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZyB0aGF0IG1hdGNoZXNcbiAgICAgICAgLy8gdGhlIGV4cGVjdGVkIG9yZGVyaW5nLiBUaGUgPHNlY29uZHM+IHRyYW5zbGF0aW9uIGlzIGRvbmUgdG8gYXZvaWQgaGF2aW5nXG4gICAgICAgIC8vIGEgbGVhZGluZyBuZWdhdGl2ZSBzaWduIChpLmUuIGEgbGVhZGluZyAnLScgY2hhcmFjdGVyKSBpbiBpdHMgc3RyaW5nXG4gICAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3aGljaCB3b3VsZCBhZmZlY3QgaXRzIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5zZWNvbmRzIC0gLTYyMTM1NTk2ODAwO1xuICAgICAgICAvLyBOb3RlOiBVcCB0byAxMiBkZWNpbWFsIGRpZ2l0cyBhcmUgcmVxdWlyZWQgdG8gcmVwcmVzZW50IGFsbCB2YWxpZFxuICAgICAgICAvLyAnc2Vjb25kcycgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodCkucGFkU3RhcnQoMTIsIFwiMFwiKSArIFwiLlwiICsgU3RyaW5nKHRoaXMubmFub3NlY29uZHMpLnBhZFN0YXJ0KDksIFwiMFwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdmVyc2lvbiBvZiBhIGRvY3VtZW50IGluIEZpcmVzdG9yZS4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgdmVyc2lvblxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cbiAqLyBjbGFzcyBpdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGltZXN0YW1wKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpdCh0KTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChuZXcgc3QoMCwgMCkpO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuX2NvbXBhcmVUbyh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuaXNFcXVhbCh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZXJzaW9uIGZvciB1c2UgaW4gc3BlYyB0ZXN0cy4gKi8gICAgdG9NaWNyb3NlY29uZHMoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxuICAgICAgICByZXR1cm4gMWU2ICogdGhpcy50aW1lc3RhbXAuc2Vjb25kcyArIHRoaXMudGltZXN0YW1wLm5hbm9zZWNvbmRzIC8gMWUzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiU25hcHNob3RWZXJzaW9uKFwiICsgdGhpcy50aW1lc3RhbXAudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICB0b1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gcnQodCkge1xuICAgIGxldCBlID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUrKztcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gb3QodCwgZSkge1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZShuLCB0W25dKTtcbn1cblxuZnVuY3Rpb24gYXQodCkge1xuICAgIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXG4gKi9cbmNsYXNzIGN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSA/IGUgPSAwIDogZSA+IHQubGVuZ3RoICYmIE0oKSwgdm9pZCAwID09PSBuID8gbiA9IHQubGVuZ3RoIC0gZSA6IG4gPiB0Lmxlbmd0aCAtIGUgJiYgTSgpLCBcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IHQsIHRoaXMub2Zmc2V0ID0gZSwgdGhpcy5sZW4gPSBuO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW47XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gY3QuY29tcGFyYXRvcih0aGlzLCB0KTtcbiAgICB9XG4gICAgY2hpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBjdCA/IHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSA6IGUucHVzaCh0KSwgdGhpcy5jb25zdHJ1Y3QoZSk7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi8gICAgbGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3BGaXJzdCh0KSB7XG4gICAgICAgIHJldHVybiB0ID0gdm9pZCAwID09PSB0ID8gMSA6IHQsIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgdCwgdGhpcy5sZW5ndGggLSB0KTtcbiAgICB9XG4gICAgcG9wTGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmaXJzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcbiAgICB9XG4gICAgbGFzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIHRdO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlzUHJlZml4T2YodCkge1xuICAgICAgICBpZiAodC5sZW5ndGggPCB0aGlzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpc0ltbWVkaWF0ZVBhcmVudE9mKHQpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gdC5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSB0aGlzLm9mZnNldCwgbiA9IHRoaXMubGltaXQoKTsgZSA8IG47IGUrKykgdCh0aGlzLnNlZ21lbnRzW2VdKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IE1hdGgubWluKHQubGVuZ3RoLCBlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbjsgcysrKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZXQocyksIGkgPSBlLmdldChzKTtcbiAgICAgICAgICAgIGlmIChuIDwgaSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG4gPiBpKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5sZW5ndGggPCBlLmxlbmd0aCA/IC0xIDogdC5sZW5ndGggPiBlLmxlbmd0aCA/IDEgOiAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgdXQgZXh0ZW5kcyBjdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dCh0LCBlLCBuKTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbihcIi9cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi50KSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHNlZ21lbnQgKCR7bn0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vIGluIHRoZW0uYCk7XG4gICAgICAgICAgICAvLyBTdHJpcCBsZWFkaW5nIGFuZCB0cmFsaW5nIHNsYXNoZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goLi4ubi5zcGxpdChcIi9cIikuZmlsdGVyKCh0ID0+IHQubGVuZ3RoID4gMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHV0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IHV0KFtdKTtcbiAgICB9XG59XG5cbmNvbnN0IGh0ID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBsdCBleHRlbmRzIGN0IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IGx0KHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIodCkge1xuICAgICAgICByZXR1cm4gaHQudGVzdCh0KTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKCh0ID0+ICh0ID0gdC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIikucmVwbGFjZSgvYC9nLCBcIlxcXFxgXCIpLCBcbiAgICAgICAgbHQuaXNWYWxpZElkZW50aWZpZXIodCkgfHwgKHQgPSBcImBcIiArIHQgKyBcImBcIiksIHQpKSkuam9pbihcIi5cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmllbGQgcmVmZXJlbmNlcyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIGlzS2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiAxID09PSB0aGlzLmxlbmd0aCAmJiBcIl9fbmFtZV9fXCIgPT09IHRoaXMuZ2V0KDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBzdGF0aWMga2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgbHQoWyBcIl9fbmFtZV9fXCIgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGZpZWxkIHN0cmluZyBmcm9tIHRoZSBnaXZlbiBzZXJ2ZXItZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIC0gU3BsaXR0aW5nIHRoZSBlbXB0eSBzdHJpbmcgaXMgbm90IGFsbG93ZWQgKGZvciBub3cgYXQgbGVhc3QpLlxuICAgICAqIC0gRW1wdHkgc2VnbWVudHMgd2l0aGluIHRoZSBzdHJpbmcgKGUuZy4gaWYgdGhlcmUgYXJlIHR3byBjb25zZWN1dGl2ZVxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM3MjQ0MTU3KTogd2Ugc2hvdWxkIG1ha2UgdGhpcyBtb3JlIHN0cmljdC4gUmlnaHQgbm93LCBpdCBhbGxvd3NcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TZXJ2ZXJGb3JtYXQodCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBuID0gXCJcIiwgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgKTtcbiAgICAgICAgICAgIGUucHVzaChuKSwgbiA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoO3MgPCB0Lmxlbmd0aDsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdFtzXTtcbiAgICAgICAgICAgIGlmIChcIlxcXFxcIiA9PT0gZSkge1xuICAgICAgICAgICAgICAgIGlmIChzICsgMSA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0W3MgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcXFxcXCIgIT09IGUgJiYgXCIuXCIgIT09IGUgJiYgXCJgXCIgIT09IGUpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBuICs9IGUsIHMgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gZSA/IChyID0gIXIsIHMrKykgOiBcIi5cIiAhPT0gZSB8fCByID8gKG4gKz0gZSwgcysrKSA6IChpKCksIHMrKyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkoKSwgcikgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIlVudGVybWluYXRlZCBgIGluIHBhdGg6IFwiICsgdCk7XG4gICAgICAgIHJldHVybiBuZXcgbHQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgbHQoW10pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgZnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5maWVsZHMgPSB0LCBcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xuICAgICAgICAvLyBTb3J0IHRoZSBmaWVsZCBtYXNrIHRvIHN1cHBvcnQgYEZpZWxkTWFzay5pc0VxdWFsKClgIGFuZCBhc3NlcnQgYmVsb3cuXG4gICAgICAgIHQuc29ydChsdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXG4gICAgICovICAgIGNvdmVycyh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmZpZWxkcykgaWYgKGUuaXNQcmVmaXhPZih0KSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gZXQodGhpcy5maWVsZHMsIHQuZmllbGRzLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBDb252ZXJ0cyBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byBhIGJpbmFyeSBzdHJpbmcuICovXG4vKiogVHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgQmFzZTY0IGNvbnZlcnNpb24gZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBkdCgpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYXRvYjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1tdXRhYmxlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIFwicHJvdG9cIiBieXRlIHN0cmluZy5cbiAqXG4gKiBQcm90byBieXRlIHN0cmluZ3MgY2FuIGVpdGhlciBiZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmdzIG9yIFVpbnQ4QXJyYXlzIHdoZW5cbiAqIHNlbnQgb24gdGhlIHdpcmUuIFRoaXMgY2xhc3MgYWJzdHJhY3RzIGF3YXkgdGhpcyBkaWZmZXJlbnRpYXRpb24gYnkgaG9sZGluZ1xuICogdGhlIHByb3RvIGJ5dGUgc3RyaW5nIGluIGEgY29tbW9uIGNsYXNzIHRoYXQgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZ1xuICogYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBwcm90by5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHd0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYmluYXJ5U3RyaW5nID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcodCkge1xuICAgICAgICBjb25zdCBlID0gYXRvYih0KTtcbiAgICAgICAgcmV0dXJuIG5ldyB3dChlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gVWludDhBcnJheS5cbiAqLyAodCk7XG4gICAgICAgIHJldHVybiBuZXcgd3QoZSk7XG4gICAgfVxuICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdCA9IHRoaXMuYmluYXJ5U3RyaW5nLCBidG9hKHQpO1xuICAgICAgICAvKiogQ29udmVydHMgYSBiaW5hcnkgc3RyaW5nIHRvIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nLiAqL1xuICAgICAgICB2YXIgdDtcbiAgICB9XG4gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZVtuXSA9IHQuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdHQodGhpcy5iaW5hcnlTdHJpbmcsIHQuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gdC5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG53dC5FTVBUWV9CWVRFX1NUUklORyA9IG5ldyB3dChcIlwiKTtcblxuY29uc3QgX3QgPSBuZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHZhbHVlcyBmb3IgYSB0aW1lc3RhbXAgdmFsdWUgaW50byBhIFwic2Vjb25kcyBhbmRcbiAqIG5hbm9zXCIgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gbXQodCkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChMKCEhdCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgLy8gVGhlIGRhdGUgc3RyaW5nIGNhbiBoYXZlIGhpZ2hlciBwcmVjaXNpb24gKG5hbm9zKSB0aGFuIHRoZSBEYXRlIGNsYXNzXG4gICAgICAgIC8vIChtaWxsaXMpLCBzbyB3ZSBkbyBzb21lIGN1c3RvbSBwYXJzaW5nIGhlcmUuXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBjb25zdCBuID0gX3QuZXhlYyh0KTtcbiAgICAgICAgaWYgKEwoISFuKSwgblsxXSkge1xuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cbiAgICAgICAgICAgIGxldCB0ID0gblsxXTtcbiAgICAgICAgICAgIHQgPSAodCArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigwLCA5KSwgZSA9IE51bWJlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBEYXRlKHQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogTWF0aC5mbG9vcihzLmdldFRpbWUoKSAvIDFlMyksXG4gICAgICAgICAgICBuYW5vczogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBndCh0LnNlY29uZHMpLFxuICAgICAgICBuYW5vczogZ3QodC5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIGd0KHQpIHtcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ID8gdCA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBOdW1iZXIodCkgOiAwO1xufVxuXG4vKiogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBCbG9icyBpbnRvIGEgQnl0ZVN0cmluZy4gKi8gZnVuY3Rpb24geXQodCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gd3QuZnJvbUJhc2U2NFN0cmluZyh0KSA6IHd0LmZyb21VaW50OEFycmF5KHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIHB0KHQpIHtcbiAgICB2YXIgZSwgbjtcbiAgICByZXR1cm4gXCJzZXJ2ZXJfdGltZXN0YW1wXCIgPT09IChudWxsID09PSAobiA9ICgobnVsbCA9PT0gKGUgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0Lm1hcFZhbHVlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmZpZWxkcykgfHwge30pLl9fdHlwZV9fKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnN0cmluZ1ZhbHVlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFNlcnZlclRpbWVzdGFtcCBwcm90byB2YWx1ZSAodXNpbmcgdGhlIGludGVybmFsIGZvcm1hdCkuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIGJlZm9yZSB0aGlzIFNlcnZlclRpbWVzdGFtcCB3YXMgc2V0LlxuICpcbiAqIFByZXNlcnZpbmcgdGhlIHByZXZpb3VzIHZhbHVlcyBhbGxvd3MgdGhlIHVzZXIgdG8gZGlzcGxheSB0aGUgbGFzdCByZXNvbGVkXG4gKiB2YWx1ZSB1bnRpbCB0aGUgYmFja2VuZCByZXNwb25kcyB3aXRoIHRoZSB0aW1lc3RhbXAuXG4gKi9cbmZ1bmN0aW9uIEV0KHQpIHtcbiAgICBjb25zdCBlID0gdC5tYXBWYWx1ZS5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fO1xuICAgIHJldHVybiBwdChlKSA/IEV0KGUpIDogZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2NhbCB0aW1lIGF0IHdoaWNoIHRoaXMgdGltZXN0YW1wIHdhcyBmaXJzdCBzZXQuXG4gKi8gZnVuY3Rpb24gVHQodCkge1xuICAgIGNvbnN0IGUgPSBtdCh0Lm1hcFZhbHVlLmZpZWxkcy5fX2xvY2FsX3dyaXRlX3RpbWVfXy50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBzdChlLnNlY29uZHMsIGUubmFub3MpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlbnRpbmVsIHZhbHVlIHRoYXQgc29ydHMgYmVmb3JlIGFueSBNdXRhdGlvbiBCYXRjaCBJRC4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBJdCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gQXQodCkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSB0ICYmIDEgLyB0ID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBSdCh0KSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgTnVtYmVyLmlzSW50ZWdlcih0KSAmJiAhQXQodCkgJiYgdCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiB0ID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBQdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgodCkge1xuICAgICAgICByZXR1cm4gbmV3IFB0KHV0LmZyb21TdHJpbmcodCkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IFB0KHV0LmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gdDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIDAgPT09IHV0LmNvbXBhcmF0b3IodGhpcy5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIHJldHVybiB1dC5jb21wYXJhdG9yKHQucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgc3RhdGljIGlzRG9jdW1lbnRLZXkodCkge1xuICAgICAgICByZXR1cm4gdC5sZW5ndGggJSAyID09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIC0gVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VnbWVudHModCkge1xuICAgICAgICByZXR1cm4gbmV3IFB0KG5ldyB1dCh0LnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovIGZ1bmN0aW9uIGJ0KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gMCAvKiBOdWxsVmFsdWUgKi8gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IDIgLyogTnVtYmVyVmFsdWUgKi8gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IDUgLyogU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gNiAvKiBCbG9iVmFsdWUgKi8gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IDcgLyogUmVmVmFsdWUgKi8gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gOCAvKiBHZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IDkgLyogQXJyYXlWYWx1ZSAqLyA6IFwibWFwVmFsdWVcIiBpbiB0ID8gcHQodCkgPyA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogMTAgLyogT2JqZWN0VmFsdWUgKi8gOiBNKCk7XG59XG5cbi8qKiBUZXN0cyBgbGVmdGAgYW5kIGByaWdodGAgZm9yIGVxdWFsaXR5IGJhc2VkIG9uIHRoZSBiYWNrZW5kIHNlbWFudGljcy4gKi8gZnVuY3Rpb24gdnQodCwgZSkge1xuICAgIGNvbnN0IG4gPSBidCh0KTtcbiAgICBpZiAobiAhPT0gYnQoZSkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWUgPT09IGUuYm9vbGVhblZhbHVlO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gVHQodCkuaXNFcXVhbChUdChlKSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlICYmIHQudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gdC50aW1lc3RhbXBWYWx1ZSA9PT0gZS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBtdCh0LnRpbWVzdGFtcFZhbHVlKSwgcyA9IG10KGUudGltZXN0YW1wVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uc2Vjb25kcyA9PT0gcy5zZWNvbmRzICYmIG4ubmFub3MgPT09IHMubmFub3M7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlID09PSBlLnN0cmluZ1ZhbHVlO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB5dCh0LmJ5dGVzVmFsdWUpLmlzRXF1YWwoeXQoZS5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlID09PSBlLnJlZmVyZW5jZVZhbHVlO1xuXG4gICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZ3QodC5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSA9PT0gZ3QoZS5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSAmJiBndCh0Lmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKSA9PT0gZ3QoZS5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgcmV0dXJuIGd0KHQuaW50ZWdlclZhbHVlKSA9PT0gZ3QoZS5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGd0KHQuZG91YmxlVmFsdWUpLCBzID0gZ3QoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IHMgPyBBdChuKSA9PT0gQXQocykgOiBpc05hTihuKSAmJiBpc05hTihzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZXQodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgdnQpO1xuXG4gICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgcyA9IGUubWFwVmFsdWUuZmllbGRzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKHJ0KG4pICE9PSBydChzKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KHQpICYmICh2b2lkIDAgPT09IHNbdF0gfHwgIXZ0KG5bdF0sIHNbdF0pKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIEFycmF5VmFsdWUgY29udGFpbnMgdGhlIHNwZWNpZmllZCBlbGVtZW50LiAqLyAodCwgZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBNKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBWdCh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gKHQudmFsdWVzIHx8IFtdKS5maW5kKCh0ID0+IHZ0KHQsIGUpKSk7XG59XG5cbmZ1bmN0aW9uIFN0KHQsIGUpIHtcbiAgICBjb25zdCBuID0gYnQodCksIHMgPSBidChlKTtcbiAgICBpZiAobiAhPT0gcykgcmV0dXJuIHR0KG4sIHMpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHR0KHQuYm9vbGVhblZhbHVlLCBlLmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZ3QodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSksIHMgPSBndChlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuIDwgcyA/IC0xIDogbiA+IHMgPyAxIDogbiA9PT0gcyA/IDAgOiBcbiAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgICAgICAgICBpc05hTihuKSA/IGlzTmFOKHMpID8gMCA6IC0xIDogMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIER0KHQudGltZXN0YW1wVmFsdWUsIGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gRHQoVHQodCksIFR0KGUpKTtcblxuICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHR0KHQuc3RyaW5nVmFsdWUsIGUuc3RyaW5nVmFsdWUpO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB5dCh0KSwgcyA9IHl0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHMpO1xuICAgICAgICB9KHQuYnl0ZXNWYWx1ZSwgZS5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNwbGl0KFwiL1wiKSwgcyA9IGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0dChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LnJlZmVyZW5jZVZhbHVlLCBlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHR0KGd0KHQubGF0aXR1ZGUpLCBndChlLmxhdGl0dWRlKSk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICByZXR1cm4gdHQoZ3QodC5sb25naXR1ZGUpLCBndChlLmxvbmdpdHVkZSkpO1xuICAgICAgICB9KHQuZ2VvUG9pbnRWYWx1ZSwgZS5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdLCBzID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFN0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0dChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWVsZHMgfHwge30sIHMgPSBPYmplY3Qua2V5cyhuKSwgaSA9IGUuZmllbGRzIHx8IHt9LCByID0gT2JqZWN0LmtleXMoaSk7XG4gICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBNYXBWYWx1ZXMgYXJlIGxpa2VseSBzb3J0ZWQgY29ycmVjdGx5IGJhc2VkIG9uIHRoZWlyIGluc2VydGlvblxuICAgICAgICAgICAgLy8gb3JkZXIgKGUuZy4gd2hlbiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kKSwgbG9jYWwgbW9kaWZpY2F0aW9ucyBjYW4gYnJpbmdcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG91dCBvZiBvcmRlci4gV2UgbmVlZCB0byByZS1zb3J0IHRoZSBlbGVtZW50cyB0byBlbnN1cmUgdGhhdFxuICAgICAgICAgICAgLy8gY2Fub25pY2FsIElEcyBhcmUgaW5kZXBlbmRlbnQgb2YgaW5zZXJ0aW9uIG9yZGVyLlxuICAgICAgICAgICAgcy5zb3J0KCksIHIuc29ydCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBzLmxlbmd0aCAmJiB0IDwgci5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0dChzW3RdLCByW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IFN0KG5bc1t0XV0sIGlbclt0XV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0dChzLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovICh0Lm1hcFZhbHVlLCBlLm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgTSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRHQodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgdC5sZW5ndGggPT09IGUubGVuZ3RoKSByZXR1cm4gdHQodCwgZSk7XG4gICAgY29uc3QgbiA9IG10KHQpLCBzID0gbXQoZSksIGkgPSB0dChuLnNlY29uZHMsIHMuc2Vjb25kcyk7XG4gICAgcmV0dXJuIDAgIT09IGkgPyBpIDogdHQobi5uYW5vcywgcy5uYW5vcyk7XG59XG5cbmZ1bmN0aW9uIEN0KHQpIHtcbiAgICByZXR1cm4gTnQodCk7XG59XG5cbmZ1bmN0aW9uIE50KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gXCJudWxsXCIgOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5ib29sZWFuVmFsdWUgOiBcImludGVnZXJWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5pbnRlZ2VyVmFsdWUgOiBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmRvdWJsZVZhbHVlIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBtdCh0KTtcbiAgICAgICAgcmV0dXJuIGB0aW1lKCR7ZS5zZWNvbmRzfSwke2UubmFub3N9KWA7XG4gICAgfSh0LnRpbWVzdGFtcFZhbHVlKSA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gdC5zdHJpbmdWYWx1ZSA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyB5dCh0LmJ5dGVzVmFsdWUpLnRvQmFzZTY0KCkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IChuID0gdC5yZWZlcmVuY2VWYWx1ZSwgXG4gICAgUHQuZnJvbU5hbWUobikudG9TdHJpbmcoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gYGdlbygkeyhlID0gdC5nZW9Qb2ludFZhbHVlKS5sYXRpdHVkZX0sJHtlLmxvbmdpdHVkZX0pYCA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlID0gXCJbXCIsIG4gPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQudmFsdWVzIHx8IFtdKSBuID8gbiA9ICExIDogZSArPSBcIixcIiwgZSArPSBOdChzKTtcbiAgICAgICAgcmV0dXJuIGUgKyBcIl1cIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByZWZlcmVuY2UgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBkYXRhYmFzZSBhbmQga2V5LiAqLyAodC5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHMgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHMgPyBzID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7TnQodC5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfSh0Lm1hcFZhbHVlKSA6IE0oKTtcbiAgICB2YXIgZSwgbjtcbn1cblxuZnVuY3Rpb24geHQodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlZmVyZW5jZVZhbHVlOiBgcHJvamVjdHMvJHt0LnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dC5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7ZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWBcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gSW50ZWdlclZhbHVlIC4gKi8gZnVuY3Rpb24ga3QodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBEb3VibGVWYWx1ZS4gKi9cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBBcnJheVZhbHVlLiAqL1xuZnVuY3Rpb24gJHQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJhcnJheVZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTnVsbFZhbHVlLiAqLyBmdW5jdGlvbiBPdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm51bGxWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBOYU4uICovIGZ1bmN0aW9uIEZ0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIGlzTmFOKE51bWJlcih0LmRvdWJsZVZhbHVlKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE1hcFZhbHVlLiAqLyBmdW5jdGlvbiBNdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm1hcFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIEx0KHQpIHtcbiAgICBpZiAodC5nZW9Qb2ludFZhbHVlKSByZXR1cm4ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0Lmdlb1BvaW50VmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC50aW1lc3RhbXBWYWx1ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlKSByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC50aW1lc3RhbXBWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0Lm1hcFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG90KHQubWFwVmFsdWUuZmllbGRzLCAoKHQsIG4pID0+IGUubWFwVmFsdWUuZmllbGRzW3RdID0gTHQobikpKSwgZTtcbiAgICB9XG4gICAgaWYgKHQuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSBMdCh0LmFycmF5VmFsdWUudmFsdWVzW25dKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MgQnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKHQpIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAtIDE7ICsrbikgaWYgKGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhTXQoZSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QubGFzdFNlZ21lbnQoKV0sIGUgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcCh0LnBvcExhc3QoKSlbdC5sYXN0U2VnbWVudCgpXSA9IEx0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbCh0KSB7XG4gICAgICAgIGxldCBlID0gbHQuZW1wdHlQYXRoKCksIG4gPSB7fSwgcyA9IFtdO1xuICAgICAgICB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyh0LCBuLCBzKSwgbiA9IHt9LCBzID0gW10sIGUgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSBMdCh0KSA6IHMucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5maWVsZCh0LnBvcExhc3QoKSk7XG4gICAgICAgIE10KGUpICYmIGUubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSBlLm1hcFZhbHVlLmZpZWxkc1t0Lmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHZ0KHRoaXMudmFsdWUsIHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGUubWFwVmFsdWUuZmllbGRzIHx8IChlLm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXTtcbiAgICAgICAgICAgIE10KHMpICYmIHMubWFwVmFsdWUuZmllbGRzIHx8IChzID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV0gPSBzKSwgZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgb3QoZSwgKChlLCBuKSA9PiB0W2VdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZGVsZXRlIHRbZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IEJ0KEx0KHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBVdCh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiBvdCh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgbHQoWyB0IF0pO1xuICAgICAgICBpZiAoTXQobikpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBVdChuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIGUucHVzaChzKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlLnB1c2gocy5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIGUucHVzaChzKTtcbiAgICB9KSksIG5ldyBmdChlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIHF0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSBlLCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLmRhdGEgPSBzLCB0aGlzLmRvY3VtZW50U3RhdGUgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IHF0KHQsIDAgLyogSU5WQUxJRCAqLyAsIGl0Lm1pbigpLCBCdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxdCh0LCAxIC8qIEZPVU5EX0RPQ1VNRU5UICovICwgZSwgbiwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIG5vdCBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbi4gKi8gICAgc3RhdGljIG5ld05vRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHF0KHQsIDIgLyogTk9fRE9DVU1FTlQgKi8gLCBlLCBCdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHF0KHQsIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyAsIGUsIEJ0LmVtcHR5KCksIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IGUsIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIE5PX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gQnQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBCdC5lbXB0eSgpLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIGdldCBoYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRm91bmREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc05vRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIE5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBxdCAmJiB0aGlzLmtleS5pc0VxdWFsKHQua2V5KSAmJiB0aGlzLnZlcnNpb24uaXNFcXVhbCh0LnZlcnNpb24pICYmIHRoaXMuZG9jdW1lbnRUeXBlID09PSB0LmRvY3VtZW50VHlwZSAmJiB0aGlzLmRvY3VtZW50U3RhdGUgPT09IHQuZG9jdW1lbnRTdGF0ZSAmJiB0aGlzLmRhdGEuaXNFcXVhbCh0LmRhdGEpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxdCh0aGlzLmtleSwgdGhpcy5kb2N1bWVudFR5cGUsIHRoaXMudmVyc2lvbiwgdGhpcy5kYXRhLmNsb25lKCksIHRoaXMuZG9jdW1lbnRTdGF0ZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYERvY3VtZW50KCR7dGhpcy5rZXl9LCAke3RoaXMudmVyc2lvbn0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnZhbHVlKX0sIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIEt0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLm9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCB0aGlzLmxpbWl0ID0gaSwgXG4gICAgICAgIHRoaXMuc3RhcnRBdCA9IHIsIHRoaXMuZW5kQXQgPSBvLCB0aGlzLkEgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiBqdCh0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IEt0KHQsIGUsIG4sIHMsIGksIHIsIG8pO1xufVxuXG5mdW5jdGlvbiBRdCh0KSB7XG4gICAgY29uc3QgZSA9IFUodCk7XG4gICAgaWYgKG51bGwgPT09IGUuQSkge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKHQgKz0gXCJ8Y2c6XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIHQgKz0gXCJ8ZjpcIiwgdCArPSBlLmZpbHRlcnMubWFwKCh0ID0+IEp0KHQpKSkuam9pbihcIixcIiksIFxuICAgICAgICB0ICs9IFwifG9iOlwiLCB0ICs9IGUub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQuZGlyO1xuICAgICAgICB9KHQpKSkuam9pbihcIixcIiksIEl0KGUubGltaXQpIHx8ICh0ICs9IFwifGw6XCIsIHQgKz0gZS5saW1pdCksIGUuc3RhcnRBdCAmJiAodCArPSBcInxsYjpcIiwgXG4gICAgICAgIHQgKz0gb2UoZS5zdGFydEF0KSksIGUuZW5kQXQgJiYgKHQgKz0gXCJ8dWI6XCIsIHQgKz0gb2UoZS5lbmRBdCkpLCBlLkEgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gZS5BO1xufVxuXG5mdW5jdGlvbiBXdCh0KSB7XG4gICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIHQuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgdC5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgZmlsdGVyczogWyR7dC5maWx0ZXJzLm1hcCgodCA9PiB7XG4gICAgICAgIHJldHVybiBgJHsoZSA9IHQpLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7Q3QoZS52YWx1ZSl9YDtcbiAgICAgICAgLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovXG4gICAgICAgIHZhciBlO1xuICAgICAgICAvKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqLyAgICB9KSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgSXQodC5saW1pdCkgfHwgKGUgKz0gXCIsIGxpbWl0OiBcIiArIHQubGltaXQpLCB0Lm9yZGVyQnkubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBvcmRlckJ5OiBbJHt0Lm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke3QuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICgke3QuZGlyfSlgO1xuICAgIH0odCkpKS5qb2luKFwiLCBcIil9XWApLCB0LnN0YXJ0QXQgJiYgKGUgKz0gXCIsIHN0YXJ0QXQ6IFwiICsgb2UodC5zdGFydEF0KSksIHQuZW5kQXQgJiYgKGUgKz0gXCIsIGVuZEF0OiBcIiArIG9lKHQuZW5kQXQpKSwgXG4gICAgYFRhcmdldCgke2V9KWA7XG59XG5cbmZ1bmN0aW9uIEd0KHQsIGUpIHtcbiAgICBpZiAodC5saW1pdCAhPT0gZS5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmICh0Lm9yZGVyQnkubGVuZ3RoICE9PSBlLm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghY2UodC5vcmRlckJ5W25dLCBlLm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKHQuZmlsdGVycy5sZW5ndGggIT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQuZmlsdGVycy5sZW5ndGg7IGkrKykgaWYgKG4gPSB0LmZpbHRlcnNbaV0sIHMgPSBlLmZpbHRlcnNbaV0sIFxuICAgIG4ub3AgIT09IHMub3AgfHwgIW4uZmllbGQuaXNFcXVhbChzLmZpZWxkKSB8fCAhdnQobi52YWx1ZSwgcy52YWx1ZSkpIHJldHVybiAhMTtcbiAgICB2YXIgbiwgcztcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmICghIXQucGF0aC5pc0VxdWFsKGUucGF0aCkgJiYgKCEhaGUodC5zdGFydEF0LCBlLnN0YXJ0QXQpICYmIGhlKHQuZW5kQXQsIGUuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIHp0KHQpIHtcbiAgICByZXR1cm4gUHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG59XG5cbmNsYXNzIEh0IGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIElOICovID09PSBlIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gdGhpcy5SKHQsIGUsIG4pIDogbmV3IFl0KHQsIGUsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSBlID8gbmV3IGVlKHQsIG4pIDogXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IG5lKHQsIG4pIDogXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IGUgPyBuZXcgc2UodCwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZSA/IG5ldyBpZSh0LCBuKSA6IG5ldyBIdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgc3RhdGljIFIodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IFh0KHQsIG4pIDogbmV3IFp0KHQsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSBlICYmIHRoaXMuUChTdChlLCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSBlICYmIGJ0KHRoaXMudmFsdWUpID09PSBidChlKSAmJiB0aGlzLlAoU3QoZSwgdGhpcy52YWx1ZSkpO1xuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cbiAgICAgICAgfVxuICAgIFAodCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIExFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIEVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2KCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEp0KHQpIHtcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5vcC50b1N0cmluZygpICsgQ3QodC52YWx1ZSk7XG59XG5cbmNsYXNzIFl0IGV4dGVuZHMgSHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIHRoaXMua2V5ID0gUHQuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gUHQuY29tcGFyYXRvcih0LmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5QKGUpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIFh0IGV4dGVuZHMgSHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIElOICovICwgZSksIHRoaXMua2V5cyA9IHRlKFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBadCBleHRlbmRzIEh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSksIHRoaXMua2V5cyA9IHRlKFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gIXRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRlKHQsIGUpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IGUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKHQgPT4gUHQuZnJvbU5hbWUodC5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIGVlIGV4dGVuZHMgSHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gJHQoZSkgJiYgVnQoZS5hcnJheVZhbHVlLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIElOIG9wZXJhdG9yLiAqLyBjbGFzcyBuZSBleHRlbmRzIEh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgVnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIG5vdC1pbiBvcGVyYXRvci4gKi8gY2xhc3Mgc2UgZXh0ZW5kcyBIdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgaWYgKFZ0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiAhVnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgaWUgZXh0ZW5kcyBIdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoISR0KGUpIHx8ICFlLmFycmF5VmFsdWUudmFsdWVzKSAmJiBlLmFycmF5VmFsdWUudmFsdWVzLnNvbWUoKHQgPT4gVnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi8gY2xhc3MgcmUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHQsIHRoaXMuYmVmb3JlID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9lKHQpIHtcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cbiAgICByZXR1cm4gYCR7dC5iZWZvcmUgPyBcImJcIiA6IFwiYVwifToke3QucG9zaXRpb24ubWFwKCh0ID0+IEN0KHQpKSkuam9pbihcIixcIil9YDtcbn1cblxuLyoqXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cbiAqLyBjbGFzcyBhZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IFwiYXNjXCIgLyogQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLmRpciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZGlyID09PSBlLmRpciAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIHVlKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0LnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSBlW2ldLCBvID0gdC5wb3NpdGlvbltpXTtcbiAgICAgICAgaWYgKHIuZmllbGQuaXNLZXlGaWVsZCgpKSBzID0gUHQuY29tcGFyYXRvcihQdC5mcm9tTmFtZShvLnJlZmVyZW5jZVZhbHVlKSwgbi5rZXkpOyBlbHNlIHtcbiAgICAgICAgICAgIHMgPSBTdChvLCBuLmRhdGEuZmllbGQoci5maWVsZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSByLmRpciAmJiAocyAqPSAtMSksIDAgIT09IHMpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdC5iZWZvcmUgPyBzIDw9IDAgOiBzIDwgMDtcbn1cblxuZnVuY3Rpb24gaGUodCwgZSkge1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbCA9PT0gZTtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuICExO1xuICAgIGlmICh0LmJlZm9yZSAhPT0gZS5iZWZvcmUgfHwgdC5wb3NpdGlvbi5sZW5ndGggIT09IGUucG9zaXRpb24ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0LnBvc2l0aW9uLmxlbmd0aDsgbisrKSB7XG4gICAgICAgIGlmICghdnQodC5wb3NpdGlvbltuXSwgZS5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqLyBjbGFzcyBsZSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBcIkZcIiAvKiBGaXJzdCAqLyAsIG8gPSBudWxsLCBhID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHIsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBhLCB0aGlzLlYgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxuICAgICAgICB0aGlzLlMgPSBudWxsLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQ7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBpbnN0YW5jZSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkLiAqLyBmdW5jdGlvbiBmZSh0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgcmV0dXJuIG5ldyBsZSh0LCBlLCBuLCBzLCBpLCByLCBvLCBhKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgYXQgYHBhdGhgICovIGZ1bmN0aW9uIGRlKHQpIHtcbiAgICByZXR1cm4gbmV3IGxlKHQpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovIGZ1bmN0aW9uIHdlKHQpIHtcbiAgICByZXR1cm4gIUl0KHQubGltaXQpICYmIFwiRlwiIC8qIEZpcnN0ICovID09PSB0LmxpbWl0VHlwZTtcbn1cblxuZnVuY3Rpb24gX2UodCkge1xuICAgIHJldHVybiAhSXQodC5saW1pdCkgJiYgXCJMXCIgLyogTGFzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIG1lKHQpIHtcbiAgICByZXR1cm4gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2UodCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIGlmIChlLnYoKSkgcmV0dXJuIGUuZmllbGQ7XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgT3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkgYW5kXG4gKiByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHllKHQpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1wbGljaXQgb3JkZXIgYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyIGJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuXG4gKi8gZnVuY3Rpb24gcGUodCkge1xuICAgIGNvbnN0IGUgPSBVKHQpO1xuICAgIGlmIChudWxsID09PSBlLlYpIHtcbiAgICAgICAgZS5WID0gW107XG4gICAgICAgIGNvbnN0IHQgPSBnZShlKSwgbiA9IG1lKGUpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiBudWxsID09PSBuKSBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxuICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXG4gICAgICAgIHQuaXNLZXlGaWVsZCgpIHx8IGUuVi5wdXNoKG5ldyBhZSh0KSksIGUuVi5wdXNoKG5ldyBhZShsdC5rZXlGaWVsZCgpLCBcImFzY1wiIC8qIEFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5leHBsaWNpdE9yZGVyQnkpIGUuVi5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAodCA9ICEwKTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5W2UuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogQVNDRU5ESU5HICovO1xuICAgICAgICAgICAgICAgIGUuVi5wdXNoKG5ldyBhZShsdC5rZXlGaWVsZCgpLCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUuVjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIEVlKHQpIHtcbiAgICBjb25zdCBlID0gVSh0KTtcbiAgICBpZiAoIWUuUykgaWYgKFwiRlwiIC8qIEZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgZS5TID0ganQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgcGUoZSksIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTsgZWxzZSB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgcGUoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSBuLmRpciA/IFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHQucHVzaChuZXcgYWUobi5maWVsZCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgcmUoZS5lbmRBdC5wb3NpdGlvbiwgIWUuZW5kQXQuYmVmb3JlKSA6IG51bGwsIHMgPSBlLnN0YXJ0QXQgPyBuZXcgcmUoZS5zdGFydEF0LnBvc2l0aW9uLCAhZS5zdGFydEF0LmJlZm9yZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICBlLlMgPSBqdChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHMpO1xuICAgIH1cbiAgICByZXR1cm4gZS5TO1xufVxuXG5mdW5jdGlvbiBUZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBsZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgZSwgbiwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gSWUodCwgZSkge1xuICAgIHJldHVybiBHdChFZSh0KSwgRWUoZSkpICYmIHQubGltaXRUeXBlID09PSBlLmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiBBZSh0KSB7XG4gICAgcmV0dXJuIGAke1F0KEVlKHQpKX18bHQ6JHt0LmxpbWl0VHlwZX1gO1xufVxuXG5mdW5jdGlvbiBSZSh0KSB7XG4gICAgcmV0dXJuIGBRdWVyeSh0YXJnZXQ9JHtXdChFZSh0KSl9OyBsaW1pdFR5cGU9JHt0LmxpbWl0VHlwZX0pYDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciBgZG9jYCBtYXRjaGVzIHRoZSBjb25zdHJhaW50cyBvZiBgcXVlcnlgLiAqLyBmdW5jdGlvbiBQZSh0LCBlKSB7XG4gICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwID8gZS5rZXkuaGFzQ29sbGVjdGlvbklkKHQuY29sbGVjdGlvbkdyb3VwKSAmJiB0LnBhdGguaXNQcmVmaXhPZihuKSA6IFB0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSA/IHQucGF0aC5pc0VxdWFsKG4pIDogdC5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgXG4gICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IGUuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfSh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmICh0LnN0YXJ0QXQgJiYgIXVlKHQuc3RhcnRBdCwgcGUodCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0LmVuZEF0ICYmIHVlKHQuZW5kQXQsIHBlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gYmUodCkge1xuICAgIHJldHVybiAoZSwgbikgPT4ge1xuICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgcGUodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB2ZShpLCBlLCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIHMgPSBzIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHZlKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5maWVsZC5pc0tleUZpZWxkKCkgPyBQdC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQodCksIGkgPSBuLmRhdGEuZmllbGQodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBzICYmIG51bGwgIT09IGkgPyBTdChzLCBpKSA6IE0oKTtcbiAgICB9KHQuZmllbGQsIGUsIG4pO1xuICAgIHN3aXRjaCAodC5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gcztcblxuICAgICAgY2FzZSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE0oKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIFZlKHQsIGUpIHtcbiAgICBpZiAodC5EKSB7XG4gICAgICAgIGlmIChpc05hTihlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBBdChlKSA/IFwiLTBcIiA6IGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIFNlKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gRGUodCwgZSkge1xuICAgIHJldHVybiBSdChlKSA/IFNlKGUpIDogVmUodCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgQ2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIE5lKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mICRlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IHQubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGUgJiYgKG4uZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXyA9IGUpLCB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgZSkgOiB0IGluc3RhbmNlb2YgT2UgPyBGZSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBNZSA/IExlKHQsIGUpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0ga2UodCwgZSksIHMgPSBVZShuKSArIFVlKHQuQyk7XG4gICAgICAgIHJldHVybiBrdChuKSAmJiBrdCh0LkMpID8gU2UocykgOiBWZSh0Lk4sIHMpO1xuICAgIH0odCwgZSk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBmaW5hbCB0cmFuc2Zvcm0gcmVzdWx0IGFmdGVyIHRoZSB0cmFuc2Zvcm0gaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gKiBieSB0aGUgc2VydmVyLCBwb3RlbnRpYWxseSB1c2luZyB0aGUgc2VydmVyLXByb3ZpZGVkIHRyYW5zZm9ybVJlc3VsdC5cbiAqLyBmdW5jdGlvbiB4ZSh0LCBlLCBuKSB7XG4gICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXG4gICAgLy8gYXBwbGljYXRpb25zLlxuICAgIHJldHVybiB0IGluc3RhbmNlb2YgT2UgPyBGZSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBNZSA/IExlKHQsIGUpIDogbjtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIHRyYW5zZm9ybSBvcGVyYXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG9cbiAqIHBlcnNpc3QgZm9yIHRoaXMgdHJhbnNmb3JtLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2Zvcm1cbiAqIG9wZXJhdGlvbiBpcyBhbHdheXMgYXBwbGllZCB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzXG4gKiBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBCYXNlIHZhbHVlcyBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kXG4gKiBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWUgbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kXG4gKiBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZSB0cmFuc2Zvcm0gb3BlcmF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLCBhcyB0aGV5IGNhbiBiZSByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXNcbiAqIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3Jtcy5cbiAqLyBmdW5jdGlvbiBrZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBCZSA/IGt0KG4gPSBlKSB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBlaXRoZXIgYW4gSW50ZWdlclZhbHVlIG9yIGEgRG91YmxlVmFsdWUuICovIChuKSA/IGUgOiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogMFxuICAgIH0gOiBudWxsO1xuICAgIHZhciBuO1xufVxuXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cbmNsYXNzICRlIGV4dGVuZHMgQ2Uge31cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqLyBjbGFzcyBPZSBleHRlbmRzIENlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRmUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxZShlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbi5zb21lKCh0ID0+IHZ0KHQsIGUpKSkgfHwgbi5wdXNoKGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi8gY2xhc3MgTWUgZXh0ZW5kcyBDZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIExlKHQsIGUpIHtcbiAgICBsZXQgbiA9IHFlKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuID0gbi5maWx0ZXIoKHQgPT4gIXZ0KHQsIGUpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cbiAqLyBjbGFzcyBCZSBleHRlbmRzIENlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuTiA9IHQsIHRoaXMuQyA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBVZSh0KSB7XG4gICAgcmV0dXJuIGd0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBxZSh0KSB7XG4gICAgcmV0dXJuICR0KHQpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMgPyB0LmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBLZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy50cmFuc2Zvcm0gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gamUodCwgZSkge1xuICAgIHJldHVybiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIE9lICYmIGUgaW5zdGFuY2VvZiBPZSB8fCB0IGluc3RhbmNlb2YgTWUgJiYgZSBpbnN0YW5jZW9mIE1lID8gZXQodC5lbGVtZW50cywgZS5lbGVtZW50cywgdnQpIDogdCBpbnN0YW5jZW9mIEJlICYmIGUgaW5zdGFuY2VvZiBCZSA/IHZ0KHQuQywgZS5DKSA6IHQgaW5zdGFuY2VvZiAkZSAmJiBlIGluc3RhbmNlb2YgJGU7XG4gICAgfSh0LnRyYW5zZm9ybSwgZS50cmFuc2Zvcm0pO1xufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cbmNsYXNzIFFlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcbiAgICAgKlxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYSBtdXRhdGlvblxuICAgICAqIGNvbnRhaW5pbmcgZmllbGQgdHJhbnNmb3JtcyBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlXG4gICAgICogZm9yIGVhY2ggRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxuICAgICAqXG4gICAgICogV2lsbCBiZSBlbXB0eSBpZiB0aGUgbXV0YXRpb24gZGlkIG5vdCBjb250YWluIGFueSBmaWVsZCB0cmFuc2Zvcm1zLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdCwgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxuICovIGNsYXNzIFdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IHQsIHRoaXMuZXhpc3RzID0gZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZW1wdHkgUHJlY29uZGl0aW9uLiAqLyAgICBzdGF0aWMgbm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovICAgIHN0YXRpYyBleGlzdHModCkge1xuICAgICAgICByZXR1cm4gbmV3IFdlKHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovICAgIHN0YXRpYyB1cGRhdGVUaW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXZSh0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi8gICAgZ2V0IGlzTm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy51cGRhdGVUaW1lICYmIHZvaWQgMCA9PT0gdGhpcy5leGlzdHM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IHQuZXhpc3RzICYmICh0aGlzLnVwZGF0ZVRpbWUgPyAhIXQudXBkYXRlVGltZSAmJiB0aGlzLnVwZGF0ZVRpbWUuaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogIXQudXBkYXRlVGltZSk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovIGZ1bmN0aW9uIEdlKHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBlLmlzRm91bmREb2N1bWVudCgpICYmIGUudmVyc2lvbi5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiB2b2lkIDAgPT09IHQuZXhpc3RzIHx8IHQuZXhpc3RzID09PSBlLmlzRm91bmREb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxuICpcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdHMgdmVyc2lvbi5cbiAqXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEZvciBEZWxldGUgbXV0YXRpb25zLCB3ZVxuICogcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cbiAqXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXG4gKlxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXG4gKlxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIERvY3VtZW50KHYwKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgVW5rbm93bkRvY3VtZW50KHYzKVxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIEludmFsaWREb2N1bWVudCh2MCkgICBOb0RvY3VtZW50KHYwKVxuICpcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEFzIGRlbGV0ZXMgaGF2ZSBub1xuICogZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXG4gKlxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcbiAqIGxvY2FsbHksIHdlIHRyYW5zaXRpb24gdG8gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1c1xuICogdGhlIHVwZGF0ZWQgdmVyc2lvbi5cbiAqXG4gKiBGaWVsZCB0cmFuc2Zvcm1zIGFyZSB1c2VkIG9ubHkgd2l0aCBQYXRjaCBhbmQgU2V0IE11dGF0aW9ucy4gV2UgdXNlIHRoZVxuICogYHVwZGF0ZVRyYW5zZm9ybXNgIG1lc3NhZ2UgdG8gc3RvcmUgdHJhbnNmb3JtcywgcmF0aGVyIHRoYW4gdGhlIGB0cmFuc2Zvcm1zYHNcbiAqIG1lc3NhZ2VzLlxuICpcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXG4gKlxuICogRXZlcnkgdHlwZSBvZiBtdXRhdGlvbiBuZWVkcyB0byBpbXBsZW1lbnQgaXRzIG93biBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50IChzZWUgYGFwcGx5U2V0TXV0YXRpb25Ub1JlbW90ZURvY3VtZW50KClgIGZvciBhblxuICogZXhhbXBsZSkuXG4gKi8gY2xhc3MgemUge31cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nIGFcbiAqIG5ldyByZW1vdGUgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBzdGF0ZVxuICogKGUuZy4gaXQgaXMgaW52YWxpZCBvciBvdXRkYXRlZCksIHRoZSBkb2N1bWVudCB0eXBlIG1heSB0cmFuc2l0aW9uIHRvXG4gKiB1bmtub3duLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIG11dGF0aW9uUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgbXV0YXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBIZSh0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIHRuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlTZXRNdXRhdGlvblRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGFcbiAgICAgICAgLy8gcmVtb3RlIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG11c3QgaGF2ZSBoZWxkLlxuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gc24odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBzKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIGVuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIUdlKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCBjb252ZXJ0IHRvIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIGFcbiAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQobi52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgcyA9IHNuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChubih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBpKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XG4gICAgICAgIC8vIGhhdmUgaGVsZC5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KG4udmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSgwLCBlLCBuKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nXG4gKiB0aGUgbmV3IGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlXG4gKiBleHBlY3RlZCBzdGF0ZSwgdGhlIGRvY3VtZW50IGlzIG5vdCBtb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKi8gZnVuY3Rpb24gSmUodCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiB0biA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFHZSh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gcm4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KFplKGUpLCBzKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovICh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBlbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFHZSh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHJuKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwobm4odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KFplKGUpLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBHZSh0LnByZWNvbmRpdGlvbiwgZSkgJiYgXG4gICAgICAgIC8vIFdlIGRvbid0IGNhbGwgYHNldEhhc0xvY2FsTXV0YXRpb25zKClgIHNpbmNlIHdlIHdhbnQgdG8gYmUgYmFja3dhcmRzXG4gICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgZXhpc3RpbmcgU0RLIGJlaGF2aW9yLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQoaXQubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKHQsIGUpO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBZZSh0LCBlKSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcyBvZiB0LmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGQpLCBpID0ga2Uocy50cmFuc2Zvcm0sIHQgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PSBuICYmIChuID0gQnQuZW1wdHkoKSksIG4uc2V0KHMuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gWGUodCwgZSkge1xuICAgIHJldHVybiB0LnR5cGUgPT09IGUudHlwZSAmJiAoISF0LmtleS5pc0VxdWFsKGUua2V5KSAmJiAoISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgdm9pZCAwID09PSBlIHx8ICEoIXQgfHwgIWUpICYmIGV0KHQsIGUsICgodCwgZSkgPT4gamUodCwgZSkpKTtcbiAgICB9KHQuZmllbGRUcmFuc2Zvcm1zLCBlLmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogU2V0ICovID09PSB0LnR5cGUgPyB0LnZhbHVlLmlzRXF1YWwoZS52YWx1ZSkgOiAxIC8qIFBhdGNoICovICE9PSB0LnR5cGUgfHwgdC5kYXRhLmlzRXF1YWwoZS5kYXRhKSAmJiB0LmZpZWxkTWFzay5pc0VxdWFsKGUuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmVyc2lvbiBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdXNlIGFzIHRoZSByZXN1bHQgb2YgYVxuICogbXV0YXRpb24uIE11dGF0aW9ucyBhcmUgZGVmaW5lZCB0byByZXR1cm4gdGhlIHZlcnNpb24gb2YgdGhlIGJhc2UgZG9jdW1lbnRcbiAqIG9ubHkgaWYgaXQgaXMgYW4gZXhpc3RpbmcgZG9jdW1lbnQuIERlbGV0ZWQgYW5kIHVua25vd24gZG9jdW1lbnRzIGhhdmUgYVxuICogcG9zdC1tdXRhdGlvbiB2ZXJzaW9uIG9mIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAqLyBmdW5jdGlvbiBaZSh0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgPyB0LnZlcnNpb24gOiBpdC5taW4oKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIHRuIGV4dGVuZHMgemUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gcywgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogU2V0ICovO1xuICAgIH1cbn1cblxuY2xhc3MgZW4gZXh0ZW5kcyB6ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSBuLCB0aGlzLnByZWNvbmRpdGlvbiA9IHMsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGksIHRoaXMudHlwZSA9IDEgLyogUGF0Y2ggKi87XG4gICAgfVxufVxuXG5mdW5jdGlvbiBubih0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIHQuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICB9XG4gICAgfSkpLCBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gc24odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIEwodC5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IHRbaV0sIG8gPSByLnRyYW5zZm9ybSwgYSA9IGUuZGF0YS5maWVsZChyLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoci5maWVsZCwgeGUobywgYSwgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiAgICAgcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gcm4odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLnRyYW5zZm9ybSwgciA9IG4uZGF0YS5maWVsZChpLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoaS5maWVsZCwgTmUodCwgciwgZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqIEEgbXV0YXRpb24gdGhhdCBkZWxldGVzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5LiAqLyBjbGFzcyBvbiBleHRlbmRzIHplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAyIC8qIERlbGV0ZSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBhbiBleHRlbmRzIHplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAzIC8qIFZlcmlmeSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBjbiB7XG4gICAgLy8gVE9ETyhiLzMzMDc4MTYzKToganVzdCB1c2Ugc2ltcGxlc3QgZm9ybSBvZiBleGlzdGVuY2UgZmlsdGVyIGZvciBub3dcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRXJyb3IgQ29kZXMgZGVzY3JpYmluZyB0aGUgZGlmZmVyZW50IHdheXMgR1JQQyBjYW4gZmFpbC4gVGhlc2UgYXJlIGNvcGllZFxuICogZGlyZWN0bHkgZnJvbSBHUlBDJ3Mgc291cmNlcyBoZXJlOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gKlxuICogSW1wb3J0YW50ISBUaGUgbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgbWF0dGVyIGJlY2F1c2UgdGhlIHN0cmluZyBmb3Jtc1xuICogYXJlIHVzZWQgZm9yIHJldmVyc2UgbG9va3VwcyBmcm9tIHRoZSB3ZWJjaGFubmVsIHN0cmVhbS4gRG8gTk9UIGNoYW5nZSB0aGVcbiAqIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG9yIGNoYW5nZSB0aGlzIGludG8gYSBjb25zdCBlbnVtLlxuICovIHZhciB1biwgaG47XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIG5vbi13cml0ZSBvcGVyYXRpb24uXG4gKlxuICogU2VlIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgY2xhc3NpZnlpbmcgd3JpdGUgZXJyb3JzLlxuICovXG5mdW5jdGlvbiBsbih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIHEuT0s6XG4gICAgICAgIHJldHVybiBNKCk7XG5cbiAgICAgIGNhc2UgcS5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIHEuVU5LTk9XTjpcbiAgICAgIGNhc2UgcS5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgcS5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIHEuSU5URVJOQUw6XG4gICAgICBjYXNlIHEuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgcS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBxLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIHEuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBxLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBxLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBxLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBxLkFCT1JURUQ6XG4gICAgICBjYXNlIHEuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBxLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIHEuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBNKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiBmbih0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuICQoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgcS5VTktOT1dOO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSB1bi5PSzpcbiAgICAgICAgcmV0dXJuIHEuT0s7XG5cbiAgICAgIGNhc2UgdW4uQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gcS5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgdW4uVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIHEuVU5LTk9XTjtcblxuICAgICAgY2FzZSB1bi5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIHEuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgdW4uUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gcS5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgdW4uSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBxLklOVEVSTkFMO1xuXG4gICAgICBjYXNlIHVuLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gcS5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSB1bi5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBxLlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSB1bi5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gcS5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIHVuLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIHEuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIHVuLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gcS5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSB1bi5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIHEuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgdW4uRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIHEuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSB1bi5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gcS5BQk9SVEVEO1xuXG4gICAgICBjYXNlIHVuLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIHEuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIHVuLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBxLlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgdW4uREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gcS5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBNKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKGhuID0gdW4gfHwgKHVuID0ge30pKVtobi5PSyA9IDBdID0gXCJPS1wiLCBobltobi5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxuaG5baG4uVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIGhuW2huLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbmhuW2huLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIGhuW2huLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG5obltobi5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCBobltobi5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbmhuW2huLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIGhuW2huLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG5obltobi5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgaG5baG4uQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbmhuW2huLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIGhuW2huLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG5obltobi5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgaG5baG4uVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIGhuW2huLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgZG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5yb290ID0gZSB8fCBfbi5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGRuKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290Lmluc2VydCh0LCBlLCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgX24uQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZG4odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBfbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFlLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKHQsIGUua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gZSA9IGUubGVmdCA6IG4gPiAwICYmIChlID0gZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YodCkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IGUgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY29tcGFyYXRvcih0LCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGUgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHMgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICBlICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQucHVzaChgJHtlfToke259YCksICExKSkpLCBgeyR7dC5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3bih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IHduKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3bih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3bih0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyB3biB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHMsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIGlmIChpID0gZSA/IG4odC5rZXksIGUpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICBzICYmIChpICo9IC0xKSwgaSA8IDApIFxuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LmxlZnQgOiB0LnJpZ2h0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgwID09PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5yaWdodCA6IHQubGVmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkgZm9yICh0ID0gdC5sZWZ0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHQucmlnaHQ7IGVsc2UgZm9yICh0ID0gdC5yaWdodDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIFxuICAgICAgICB0ID0gdC5sZWZ0O1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm5vZGVTdGFjay5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3Jcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxuY2xhc3MgX24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5jb2xvciA9IG51bGwgIT0gbiA/IG4gOiBfbi5SRUQsIHRoaXMubGVmdCA9IG51bGwgIT0gcyA/IHMgOiBfbi5FTVBUWSwgXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsICE9IGkgPyBpIDogX24uRU1QVFksIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKG51bGwgIT0gdCA/IHQgOiB0aGlzLmtleSwgbnVsbCAhPSBlID8gZSA6IHRoaXMudmFsdWUsIG51bGwgIT0gbiA/IG4gOiB0aGlzLmNvbG9yLCBudWxsICE9IHMgPyBzIDogdGhpcy5sZWZ0LCBudWxsICE9IGkgPyBpIDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaXNFbXB0eSgpID8gdGhpcyA6IHRoaXMubGVmdC5taW4oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuaXNFbXB0eSgpID8gdGhpcy5rZXkgOiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpID0gbih0LCBzLmtleSk7XG4gICAgICAgIHJldHVybiBzID0gaSA8IDAgPyBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0Lmluc2VydCh0LCBlLCBuKSwgbnVsbCkgOiAwID09PSBpID8gcy5jb3B5KG51bGwsIGUsIG51bGwsIG51bGwsIG51bGwpIDogcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQuaW5zZXJ0KHQsIGUsIG4pKSwgXG4gICAgICAgIHMuZml4VXAoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWluKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkgcmV0dXJuIF9uLkVNUFRZO1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LmxlZnQuaXNSZWQoKSB8fCB0LmxlZnQubGVmdC5pc1JlZCgpIHx8ICh0ID0gdC5tb3ZlUmVkTGVmdCgpKSwgdCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCB0LmxlZnQucmVtb3ZlTWluKCksIG51bGwpLCBcbiAgICAgICAgdC5maXhVcCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzID0gdGhpcztcbiAgICAgICAgaWYgKGUodCwgcy5rZXkpIDwgMCkgcy5sZWZ0LmlzRW1wdHkoKSB8fCBzLmxlZnQuaXNSZWQoKSB8fCBzLmxlZnQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkTGVmdCgpKSwgXG4gICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0LnJlbW92ZSh0LCBlKSwgbnVsbCk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHMubGVmdC5pc1JlZCgpICYmIChzID0gcy5yb3RhdGVSaWdodCgpKSwgcy5yaWdodC5pc0VtcHR5KCkgfHwgcy5yaWdodC5pc1JlZCgpIHx8IHMucmlnaHQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkUmlnaHQoKSksIFxuICAgICAgICAgICAgMCA9PT0gZSh0LCBzLmtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5yaWdodC5pc0VtcHR5KCkpIHJldHVybiBfbi5FTVBUWTtcbiAgICAgICAgICAgICAgICBuID0gcy5yaWdodC5taW4oKSwgcyA9IHMuY29weShuLmtleSwgbi52YWx1ZSwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmVNaW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlKHQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5maXhVcCgpO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICBmaXhVcCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5pc1JlZCgpICYmICF0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlTGVmdCgpKSwgdC5sZWZ0LmlzUmVkKCkgJiYgdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0LmxlZnQuaXNSZWQoKSAmJiB0LnJpZ2h0LmlzUmVkKCkgJiYgKHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZExlZnQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQucmlnaHQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHQucmlnaHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0ID0gdC5yb3RhdGVMZWZ0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZFJpZ2h0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIHJvdGF0ZUxlZnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgX24uUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIHQsIG51bGwpO1xuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBfbi5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCB0KTtcbiAgICB9XG4gICAgY29sb3JGbGlwKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCksIGUgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCB0LCBlKTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIHQpIDw9IHRoaXMuc2l6ZSArIDE7XG4gICAgfVxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXG4gICAgY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHRocm93IE0oKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkgdGhyb3cgTSgpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNoZWNrKCk7XG4gICAgICAgIGlmICh0ICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHRocm93IE0oKTtcbiAgICAgICAgcmV0dXJuIHQgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5fbi5FTVBUWSA9IG51bGwsIF9uLlJFRCA9ICEwLCBfbi5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxuX24uRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IE0oKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBNKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgTSgpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgTSgpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IE0oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgX24odCwgZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMuZGF0YSA9IG5ldyBkbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YodCk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0WzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihzLmtleSwgdFsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgZShzLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gZSA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCF0KG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KTtcbiAgICAgICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgZ24odGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IGduKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpLmluc2VydCh0LCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyh0KSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaXplIDwgdC5zaXplICYmIChlID0gdCwgdCA9IHRoaXMpLCB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuYWRkKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgbW4pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSB0LmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IodCwgcykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgXCJTb3J0ZWRTZXQoXCIgKyB0LnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgbW4odGhpcy5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIGUuZGF0YSA9IHQsIGU7XG4gICAgfVxufVxuXG5jbGFzcyBnbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLml0ZXIgPSB0O1xuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgeW4gPSBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIHBuKCkge1xuICAgIHJldHVybiB5bjtcbn1cblxuY29uc3QgRW4gPSBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFRuKCkge1xuICAgIHJldHVybiBFbjtcbn1cblxuY29uc3QgSW4gPSBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIEFuKCkge1xuICAgIHJldHVybiBJbjtcbn1cblxuY29uc3QgUm4gPSBuZXcgbW4oUHQuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIFBuKC4uLnQpIHtcbiAgICBsZXQgZSA9IFJuO1xuICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5hZGQobik7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNvbnN0IGJuID0gbmV3IG1uKHR0KTtcblxuZnVuY3Rpb24gdm4oKSB7XG4gICAgcmV0dXJuIGJuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIFZuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQuIExpc3RlbnMgZm9yIHRoZXNlXG4gICAgICogdGFyZ2V0cyBzaG91bGQgYmUgcmUtZXN0YWJsaXNoZWQgd2l0aG91dCByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IHQsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IGUsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gcywgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBuLnNldCh0LCBTbi5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodCwgZSkpLCBuZXcgVm4oaXQubWluKCksIG4sIHZuKCksIHBuKCksIFBuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFRhcmdldENoYW5nZSBzcGVjaWZpZXMgdGhlIHNldCBvZiBjaGFuZ2VzIGZvciBhIHNwZWNpZmljIHRhcmdldCBhcyBwYXJ0IG9mXG4gKiBhIFJlbW90ZUV2ZW50LiBUaGVzZSBjaGFuZ2VzIHRyYWNrIHdoaWNoIGRvY3VtZW50cyBhcmUgYWRkZWQsIG1vZGlmaWVkIG9yXG4gKiByZW1vdmVkLCBhcyB3ZWxsIGFzIHRoZSB0YXJnZXQncyByZXN1bWUgdG9rZW4gYW5kIHdoZXRoZXIgdGhlIHRhcmdldCBpc1xuICogbWFya2VkIENVUlJFTlQuXG4gKiBUaGUgYWN0dWFsIGNoYW5nZXMgKnRvKiBkb2N1bWVudHMgYXJlIG5vdCBwYXJ0IG9mIHRoZSBUYXJnZXRDaGFuZ2Ugc2luY2VcbiAqIGRvY3VtZW50cyBtYXkgYmUgcGFydCBvZiBtdWx0aXBsZSB0YXJnZXRzLlxuICovIGNsYXNzIFNuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlIHJlc3VtZWRcbiAgICAgKiBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICAgKiBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoXG4gICAgICogdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgXCJjdXJyZW50XCIgKHN5bmNlZCkgc3RhdHVzIG9mIHRoaXMgdGFyZ2V0LiBOb3RlIHRoYXQgXCJjdXJyZW50XCJcbiAgICAgKiBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2wgdGhhdCBpbXBsaWVzIHRoYXQgYSB0YXJnZXQgaXNcbiAgICAgKiBib3RoIHVwLXRvLWRhdGUgYW5kIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2ggc3RyZWFtLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBuZXdseSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mXG4gICAgICogdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYnV0IHJlY2VpdmVkXG4gICAgICogYW4gdXBkYXRlIGR1cmluZyB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2YgdGhpc1xuICAgICAqIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSB0LCB0aGlzLmN1cnJlbnQgPSBlLCB0aGlzLmFkZGVkRG9jdW1lbnRzID0gbiwgdGhpcy5tb2RpZmllZERvY3VtZW50cyA9IHMsIFxuICAgICAgICB0aGlzLnJlbW92ZWREb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFRhcmdldENoYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIGFwcGx5IGEgQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldyAoZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnRcbiAgICAgKiB0YWIpIG9yIGZvciBuZXcgcXVlcmllcyAodG8gcmFpc2Ugc25hcHNob3RzIHdpdGggY29ycmVjdCBDVVJSRU5UIHN0YXR1cykuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNuKHd0LkVNUFRZX0JZVEVfU1RSSU5HLCBlLCBQbigpLCBQbigpLCBQbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyBEbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuayA9IHQsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IGUsIHRoaXMua2V5ID0gbiwgdGhpcy4kID0gcztcbiAgICB9XG59XG5cbmNsYXNzIENuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLk8gPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgTm4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSB3dC5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi8gLCBzID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdCwgdGhpcy50YXJnZXRJZHMgPSBlLCB0aGlzLnJlc3VtZVRva2VuID0gbiwgdGhpcy5jYXVzZSA9IHM7XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi8gY2xhc3MgeG4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRiA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NID0gT24oKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuTCA9IHd0LkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLkIgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IHN0YXRlIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgbmV4dCBzbmFwc2hvdC4gV2VcbiAgICAgICAgICogaW5pdGlhbGl6ZSB0byB0cnVlIHNvIHRoYXQgbmV3bHktYWRkZWQgdGFyZ2V0cyBhcmUgaW5jbHVkZWQgaW4gdGhlIG5leHRcbiAgICAgICAgICogUmVtb3RlRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlUgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQjtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5MO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgcGVuZGluZyB0YXJnZXQgYWRkcyBvciB0YXJnZXQgcmVtb3Zlcy4gKi8gICAgZ2V0IHEoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLkY7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IEsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgaih0KSB7XG4gICAgICAgIHQuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5VID0gITAsIHRoaXMuTCA9IHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIFcoKSB7XG4gICAgICAgIGxldCB0ID0gUG4oKSwgZSA9IFBuKCksIG4gPSBQbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5NLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIG4gPSBuLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIE0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBuZXcgU24odGhpcy5MLCB0aGlzLkIsIHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cbiAgICAgKi8gICAgRygpIHtcbiAgICAgICAgdGhpcy5VID0gITEsIHRoaXMuTSA9IE9uKCk7XG4gICAgfVxuICAgIEgodCwgZSkge1xuICAgICAgICB0aGlzLlUgPSAhMCwgdGhpcy5NID0gdGhpcy5NLmluc2VydCh0LCBlKTtcbiAgICB9XG4gICAgSih0KSB7XG4gICAgICAgIHRoaXMuVSA9ICEwLCB0aGlzLk0gPSB0aGlzLk0ucmVtb3ZlKHQpO1xuICAgIH1cbiAgICBZKCkge1xuICAgICAgICB0aGlzLkYgKz0gMTtcbiAgICB9XG4gICAgWCgpIHtcbiAgICAgICAgdGhpcy5GIC09IDE7XG4gICAgfVxuICAgIFooKSB7XG4gICAgICAgIHRoaXMuVSA9ICEwLCB0aGlzLkIgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3Mga24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50dCA9IHQsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMuZXQgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy5udCA9IHBuKCksIFxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXG4gICAgICAgIHRoaXMuc3QgPSAkbigpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB0YXJnZXRzIHdpdGggZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLiBUaGVzZSB0YXJnZXRzIGFyZVxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcbiAgICAgICAgICogUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLml0ID0gbmV3IG1uKHR0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBydCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmspIHQuJCAmJiB0LiQuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLm90KGUsIHQuJCkgOiB0aGlzLmF0KGUsIHQua2V5LCB0LiQpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5yZW1vdmVkVGFyZ2V0SWRzKSB0aGlzLmF0KGUsIHQua2V5LCB0LiQpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgY3QodCkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQodCwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMudXQoZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHQuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIE5vQ2hhbmdlICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmh0KGUpICYmIG4uaih0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXG4gICAgICAgICAgICAgICAgbi5YKCksIG4ucSB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLkcoKSwgbi5qKHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgcmVtb3ZlZCB0YXJnZXRzIHRvIHdlIGNhbiBwb3N0LWZpbHRlciBhbmRcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgYW55IHRhcmdldCBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXG4gICAgICAgICAgICAgICAgbi5YKCksIG4ucSB8fCB0aGlzLnJlbW92ZVRhcmdldChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5odChlKSAmJiAobi5aKCksIG4uaih0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA0IC8qIFJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmh0KGUpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLmx0KGUpLCBuLmoodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYWxsIHRhcmdldElkcyB0aGF0IHRoZSB3YXRjaCBjaGFuZ2UgYXBwbGllcyB0bzogZWl0aGVyIHRoZVxuICAgICAqIHRhcmdldElkcyBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgY2hhbmdlIG9yIHRoZSB0YXJnZXRJZHMgb2YgYWxsIGN1cnJlbnRseVxuICAgICAqIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdC50YXJnZXRJZHMubGVuZ3RoID4gMCA/IHQudGFyZ2V0SWRzLmZvckVhY2goZSkgOiB0aGlzLmV0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmh0KG4pICYmIGUobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBleGlzdGVuY2UgZmlsdGVycyBhbmQgc3ludGhlc2l6ZXMgZGVsZXRlcyBmb3IgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICogVGFyZ2V0cyB0aGF0IGFyZSBpbnZhbGlkYXRlZCBieSBmaWx0ZXIgbWlzbWF0Y2hlcyBhcmUgYWRkZWQgdG9cbiAgICAgKiBgcGVuZGluZ1RhcmdldFJlc2V0c2AuXG4gICAgICovICAgIGZ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQsIG4gPSB0Lk8uY291bnQsIHMgPSB0aGlzLmR0KGUpO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHp0KHQpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBQdCh0LnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXQoZSwgbiwgcXQubmV3Tm9Eb2N1bWVudChuLCBpdC5taW4oKSkpO1xuICAgICAgICAgICAgfSBlbHNlIEwoMSA9PT0gbik7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMud3QoZSkgIT09IG4gJiYgKFxuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2g6IFdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZCByYWlzZSBhIG5ld1xuICAgICAgICAgICAgICAgIC8vIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSksIHRoaXMuaXQgPSB0aGlzLml0LmFkZChlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICBfdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmV0LmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5kdChzKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiB6dChpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUHQoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMubnQuZ2V0KGUpIHx8IHRoaXMuZ3QocywgZSkgfHwgdGhpcy5hdChzLCBlLCBxdC5uZXdOb0RvY3VtZW50KGUsIHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbi5LICYmIChlLnNldChzLCBuLlcoKSksIG4uRygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgbiA9IFBuKCk7XG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcbiAgICAgICAgLy8gY2xpZW50LlxuICAgICAgICAgICAgICAgIHRoaXMuc3QuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICBlLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZHQodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFlIHx8IDIgLyogTGltYm9SZXNvbHV0aW9uICovID09PSBlLnB1cnBvc2UgfHwgKHMgPSAhMSwgITEpO1xuICAgICAgICAgICAgfSkpLCBzICYmIChuID0gbi5hZGQodCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgVm4odCwgZSwgdGhpcy5pdCwgdGhpcy5udCwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLm50ID0gcG4oKSwgdGhpcy5zdCA9ICRuKCksIHRoaXMuaXQgPSBuZXcgbW4odHQpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBvdCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5odCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5ndCh0LCBlLmtleSkgPyAyIC8qIE1vZGlmaWVkICovIDogMCAvKiBBZGRlZCAqLztcbiAgICAgICAgdGhpcy51dCh0KS5IKGUua2V5LCBuKSwgdGhpcy5udCA9IHRoaXMubnQuaW5zZXJ0KGUua2V5LCBlKSwgdGhpcy5zdCA9IHRoaXMuc3QuaW5zZXJ0KGUua2V5LCB0aGlzLnl0KGUua2V5KS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBhdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmICghdGhpcy5odCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy51dCh0KTtcbiAgICAgICAgdGhpcy5ndCh0LCBlKSA/IHMuSChlLCAxIC8qIFJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgcy5KKGUpLCB0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZSwgdGhpcy55dChlKS5kZWxldGUodCkpLCBuICYmICh0aGlzLm50ID0gdGhpcy5udC5pbnNlcnQoZSwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCkge1xuICAgICAgICB0aGlzLmV0LmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgd3QodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy51dCh0KS5XKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnR0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuc2l6ZSArIGUuYWRkZWREb2N1bWVudHMuc2l6ZSAtIGUucmVtb3ZlZERvY3VtZW50cy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoIGJlZm9yZSB3ZSBjYW4gY29uc2lkZXIgdGhlXG4gICAgICogc2VydmVyIHRvIGJlICdpbi1zeW5jJyB3aXRoIHRoZSBjbGllbnQncyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgWSh0KSB7XG4gICAgICAgIHRoaXMudXQodCkuWSgpO1xuICAgIH1cbiAgICB1dCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5ldC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IHhuLCB0aGlzLmV0LnNldCh0LCBlKSksIGU7XG4gICAgfVxuICAgIHl0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnN0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgbW4odHQpLCB0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQodCwgZSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBodCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsICE9PSB0aGlzLmR0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCBrKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBkdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmV0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgJiYgZS5xID8gbnVsbCA6IHRoaXMudHQuRXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQgdG8gaXRzIGluaXRpYWwgc3RhdGUgKGUuZy4gc2V0c1xuICAgICAqICdjdXJyZW50JyB0byBmYWxzZSwgY2xlYXJzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHJlbW92ZXMgaXRzIHRhcmdldCBtYXBwaW5nXG4gICAgICogZnJvbSBhbGwgZG9jdW1lbnRzKS5cbiAgICAgKi8gICAgbHQodCkge1xuICAgICAgICB0aGlzLmV0LnNldCh0LCBuZXcgeG4pO1xuICAgICAgICB0aGlzLnR0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmF0KHQsIGUsIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cbiAgICAgKi8gICAgZ3QodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50dC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmhhcyhlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uICRuKCkge1xuICAgIHJldHVybiBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG59XG5cbmZ1bmN0aW9uIE9uKCkge1xuICAgIHJldHVybiBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEZuID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBhc2M6IFwiQVNDRU5ESU5HXCIsXG4gICAgICAgIGRlc2M6IFwiREVTQ0VORElOR1wiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCksIE1uID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBcIjxcIjogXCJMRVNTX1RIQU5cIixcbiAgICAgICAgXCI8PVwiOiBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj5cIjogXCJHUkVBVEVSX1RIQU5cIixcbiAgICAgICAgXCI+PVwiOiBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj09XCI6IFwiRVFVQUxcIixcbiAgICAgICAgXCIhPVwiOiBcIk5PVF9FUVVBTFwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zXCI6IFwiQVJSQVlfQ09OVEFJTlNcIixcbiAgICAgICAgaW46IFwiSU5cIixcbiAgICAgICAgXCJub3QtaW5cIjogXCJOT1RfSU5cIixcbiAgICAgICAgXCJhcnJheS1jb250YWlucy1hbnlcIjogXCJBUlJBWV9DT05UQUlOU19BTllcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgTG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5EID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIEJuKHQsIGUpIHtcbiAgICBpZiAodC5EKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiBlLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgZS5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgZS5zZWNvbmRzLFxuICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gVW4odCwgZSkge1xuICAgIHJldHVybiB0LkQgPyBlLnRvQmFzZTY0KCkgOiBlLnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gcW4odCwgZSkge1xuICAgIHJldHVybiBCbih0LCBlLnRvVGltZXN0YW1wKCkpO1xufVxuXG5mdW5jdGlvbiBLbih0KSB7XG4gICAgcmV0dXJuIEwoISF0KSwgaXQuZnJvbVRpbWVzdGFtcChmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBtdCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBzdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBqbih0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dChbIFwicHJvamVjdHNcIiwgdC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2UgXSk7XG4gICAgfSh0KS5jaGlsZChcImRvY3VtZW50c1wiKS5jaGlsZChlKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gUW4odCkge1xuICAgIGNvbnN0IGUgPSB1dC5mcm9tU3RyaW5nKHQpO1xuICAgIHJldHVybiBMKHBzKGUpKSwgZTtcbn1cblxuZnVuY3Rpb24gV24odCwgZSkge1xuICAgIHJldHVybiBqbih0LmRhdGFiYXNlSWQsIGUucGF0aCk7XG59XG5cbmZ1bmN0aW9uIEduKHQsIGUpIHtcbiAgICBjb25zdCBuID0gUW4oZSk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSB0LmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6IFwiICsgbi5nZXQoMSkgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xuICAgIGlmIChuLmdldCgzKSAhPT0gdC5kYXRhYmFzZUlkLmRhdGFiYXNlKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgUHQoWW4obikpO1xufVxuXG5mdW5jdGlvbiB6bih0LCBlKSB7XG4gICAgcmV0dXJuIGpuKHQuZGF0YWJhc2VJZCwgZSk7XG59XG5cbmZ1bmN0aW9uIEhuKHQpIHtcbiAgICBjb25zdCBlID0gUW4odCk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSBlLmxlbmd0aCA/IHV0LmVtcHR5UGF0aCgpIDogWW4oZSk7XG59XG5cbmZ1bmN0aW9uIEpuKHQpIHtcbiAgICByZXR1cm4gbmV3IHV0KFsgXCJwcm9qZWN0c1wiLCB0LmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIFluKHQpIHtcbiAgICByZXR1cm4gTCh0Lmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gdC5nZXQoNCkpLCB0LnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIFhuKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBXbih0LCBlKSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIFpuKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gR24odCwgZS5uYW1lKSwgaSA9IEtuKGUudXBkYXRlVGltZSksIHIgPSBuZXcgQnQoe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIG8gPSBxdC5uZXdGb3VuZERvY3VtZW50KHMsIGksIHIpO1xuICAgIHJldHVybiBuICYmIG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBvLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogbztcbn1cblxuZnVuY3Rpb24gdHModCwgZSkge1xuICAgIHJldHVybiBcImZvdW5kXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgTCghIWUuZm91bmQpLCBlLmZvdW5kLm5hbWUsIGUuZm91bmQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgbiA9IEduKHQsIGUuZm91bmQubmFtZSksIHMgPSBLbihlLmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gbmV3IEJ0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZvdW5kLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHF0Lm5ld0ZvdW5kRG9jdW1lbnQobiwgcywgaSk7XG4gICAgfSh0LCBlKSA6IFwibWlzc2luZ1wiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEwoISFlLm1pc3NpbmcpLCBMKCEhZS5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBHbih0LCBlLm1pc3NpbmcpLCBzID0gS24oZS5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBxdC5uZXdOb0RvY3VtZW50KG4sIHMpO1xuICAgIH0odCwgZSkgOiBNKCk7XG59XG5cbmZ1bmN0aW9uIGVzKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSB0ID8gMCAvKiBOb0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IHQgPyAxIC8qIEFkZGVkICovIDogXCJSRU1PVkVcIiA9PT0gdCA/IDIgLyogUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSB0ID8gMyAvKiBDdXJyZW50ICovIDogXCJSRVNFVFwiID09PSB0ID8gNCAvKiBSZXNldCAqLyA6IE0oKTtcbiAgICAgICAgfShlLnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8IFwiTk9fQ0hBTkdFXCIpLCBpID0gZS50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdLCByID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHQuRCA/IChMKHZvaWQgMCA9PT0gZSB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSwgd3QuZnJvbUJhc2U2NFN0cmluZyhlIHx8IFwiXCIpKSA6IChMKHZvaWQgMCA9PT0gZSB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSksIFxuICAgICAgICAgICAgd3QuZnJvbVVpbnQ4QXJyYXkoZSB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KHQsIGUudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IGUudGFyZ2V0Q2hhbmdlLmNhdXNlLCBhID0gbyAmJiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdm9pZCAwID09PSB0LmNvZGUgPyBxLlVOS05PV04gOiBmbih0LmNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBLKGUsIHQubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xuICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cbiAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XG4gKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcbiAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cbiAqLyAobyk7XG4gICAgICAgIG4gPSBuZXcgTm4ocywgaSwgciwgYSB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBzLmRvY3VtZW50LCBzLmRvY3VtZW50Lm5hbWUsIHMuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IEduKHQsIHMuZG9jdW1lbnQubmFtZSksIHIgPSBLbihzLmRvY3VtZW50LnVwZGF0ZVRpbWUpLCBvID0gbmV3IEJ0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYSA9IHF0Lm5ld0ZvdW5kRG9jdW1lbnQoaSwgciwgbyksIGMgPSBzLnRhcmdldElkcyB8fCBbXSwgdSA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBEbihjLCB1LCBhLmtleSwgYSk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50RGVsZXRlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IEduKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZWFkVGltZSA/IEtuKHMucmVhZFRpbWUpIDogaXQubWluKCksIG8gPSBxdC5uZXdOb0RvY3VtZW50KGksIHIpLCBhID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IERuKFtdLCBhLCBvLmtleSwgbyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50UmVtb3ZlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IEduKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IERuKFtdLCByLCBpLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShcImZpbHRlclwiIGluIGUpKSByZXR1cm4gTSgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBlLmZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcjtcbiAgICAgICAgICAgIHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5jb3VudCB8fCAwLCBpID0gbmV3IGNuKHMpLCByID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgQ24ociwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIG5zKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIHRuKSBuID0ge1xuICAgICAgICB1cGRhdGU6IFhuKHQsIGUua2V5LCBlLnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBvbikgbiA9IHtcbiAgICAgICAgZGVsZXRlOiBXbih0LCBlLmtleSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgZW4pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogWG4odCwgZS5rZXksIGUuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IHlzKGUuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgYW4pKSByZXR1cm4gTSgpO1xuICAgICAgICBuID0ge1xuICAgICAgICAgICAgdmVyaWZ5OiBXbih0LCBlLmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiAkZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBPZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIE1lKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgQmUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uQ1xuICAgICAgICB9O1xuICAgICAgICB0aHJvdyBNKCk7XG4gICAgfSgwLCB0KSkpKSwgZS5wcmVjb25kaXRpb24uaXNOb25lIHx8IChuLmN1cnJlbnREb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51cGRhdGVUaW1lID8ge1xuICAgICAgICAgICAgdXBkYXRlVGltZTogcW4odCwgZS51cGRhdGVUaW1lKVxuICAgICAgICB9IDogdm9pZCAwICE9PSBlLmV4aXN0cyA/IHtcbiAgICAgICAgICAgIGV4aXN0czogZS5leGlzdHNcbiAgICAgICAgfSA6IE0oKTtcbiAgICB9KHQsIGUucHJlY29uZGl0aW9uKSksIG47XG59XG5cbmZ1bmN0aW9uIHNzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IFdlLnVwZGF0ZVRpbWUoS24odC51cGRhdGVUaW1lKSkgOiB2b2lkIDAgIT09IHQuZXhpc3RzID8gV2UuZXhpc3RzKHQuZXhpc3RzKSA6IFdlLm5vbmUoKTtcbiAgICB9KGUuY3VycmVudERvY3VtZW50KSA6IFdlLm5vbmUoKSwgcyA9IGUudXBkYXRlVHJhbnNmb3JtcyA/IGUudXBkYXRlVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIGlmIChcInNldFRvU2VydmVyVmFsdWVcIiBpbiBlKSBMKFwiUkVRVUVTVF9USU1FXCIgPT09IGUuc2V0VG9TZXJ2ZXJWYWx1ZSksIG4gPSBuZXcgJGU7IGVsc2UgaWYgKFwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgT2UodCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyZW1vdmVBbGxGcm9tQXJyYXlcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBNZSh0KTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gZSA/IG4gPSBuZXcgQmUodCwgZS5pbmNyZW1lbnQpIDogTSgpO1xuICAgICAgICBjb25zdCBzID0gbHQuZnJvbVNlcnZlckZvcm1hdChlLmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgS2Uocywgbik7XG4gICAgfSh0LCBlKSkpIDogW107XG4gICAgaWYgKGUudXBkYXRlKSB7XG4gICAgICAgIGUudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBHbih0LCBlLnVwZGF0ZS5uYW1lKSwgciA9IG5ldyBCdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZS51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBmdChlLm1hcCgodCA9PiBsdC5mcm9tU2VydmVyRm9ybWF0KHQpKSkpO1xuICAgICAgICAgICAgfShlLnVwZGF0ZU1hc2spO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBlbihpLCByLCB0LCBuLCBzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRuKGksIHIsIG4sIHMpO1xuICAgIH1cbiAgICBpZiAoZS5kZWxldGUpIHtcbiAgICAgICAgY29uc3QgcyA9IEduKHQsIGUuZGVsZXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBvbihzLCBuKTtcbiAgICB9XG4gICAgaWYgKGUudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHMgPSBHbih0LCBlLnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgYW4ocywgbik7XG4gICAgfVxuICAgIHJldHVybiBNKCk7XG59XG5cbmZ1bmN0aW9uIGlzKHQsIGUpIHtcbiAgICByZXR1cm4gdCAmJiB0Lmxlbmd0aCA+IDAgPyAoTCh2b2lkIDAgIT09IGUpLCB0Lm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE5PVEU6IERlbGV0ZXMgZG9uJ3QgaGF2ZSBhbiB1cGRhdGVUaW1lLlxuICAgICAgICBsZXQgbiA9IHQudXBkYXRlVGltZSA/IEtuKHQudXBkYXRlVGltZSkgOiBLbihlKTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChpdC5taW4oKSkgJiYgKFxuICAgICAgICAvLyBUaGUgRmlyZXN0b3JlIEVtdWxhdG9yIGN1cnJlbnRseSByZXR1cm5zIGFuIHVwZGF0ZSB0aW1lIG9mIDAgZm9yXG4gICAgICAgIC8vIGRlbGV0ZXMgb2Ygbm9uLWV4aXN0aW5nIGRvY3VtZW50cyAocmF0aGVyIHRoYW4gbnVsbCkuIFRoaXMgYnJlYWtzIHRoZVxuICAgICAgICAvLyB0ZXN0IFwiZ2V0IGRlbGV0ZWQgZG9jIHdoaWxlIG9mZmxpbmUgd2l0aCBzb3VyY2U9Y2FjaGVcIiBhcyBOb0RvY3VtZW50c1xuICAgICAgICAvLyB3aXRoIHZlcnNpb24gMCBhcmUgZmlsdGVyZWQgYnkgSW5kZXhlZERiJ3MgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAgICAgICAgLy8gVE9ETygjMjE0OSk6IFJlbW92ZSB0aGlzIHdoZW4gRW11bGF0b3IgaXMgZml4ZWRcbiAgICAgICAgbiA9IEtuKGUpKSwgbmV3IFFlKG4sIHQudHJhbnNmb3JtUmVzdWx0cyB8fCBbXSk7XG4gICAgfSh0LCBlKSkpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiBycyh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIHpuKHQsIGUucGF0aCkgXVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIG9zKHQsIGUpIHtcbiAgICAvLyBEaXNzZWN0IHRoZSBwYXRoIGludG8gcGFyZW50LCBjb2xsZWN0aW9uSWQsIGFuZCBvcHRpb25hbCBrZXkgZmlsdGVyLlxuICAgIGNvbnN0IG4gPSB7XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeToge31cbiAgICB9LCBzID0gZS5wYXRoO1xuICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gKG4ucGFyZW50ID0gem4odCwgcyksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgYWxsRGVzY2VuZGFudHM6ICEwXG4gICAgfSBdKSA6IChuLnBhcmVudCA9IHpuKHQsIHMucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHMubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoXCI9PVwiIC8qIEVRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKEZ0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHdzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKE90KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHdzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKEZ0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHdzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05BTlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChPdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB3cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiB3cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IGRzKHQub3ApLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBcIkFORFwiLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUuZmlsdGVycyk7XG4gICAgaSAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkud2hlcmUgPSBpKTtcbiAgICBjb25zdCByID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHdzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZnModC5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSk7XG4gICAgfShlLm9yZGVyQnkpO1xuICAgIHIgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSByKTtcbiAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5EIHx8IEl0KGUpID8gZSA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICovICh0LCBlLmxpbWl0KTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgZS5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gaHMoZS5zdGFydEF0KSksIFxuICAgIGUuZW5kQXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gaHMoZS5lbmRBdCkpLCBuO1xufVxuXG5mdW5jdGlvbiBhcyh0KSB7XG4gICAgbGV0IGUgPSBIbih0LnBhcmVudCk7XG4gICAgY29uc3QgbiA9IHQuc3RydWN0dXJlZFF1ZXJ5LCBzID0gbi5mcm9tID8gbi5mcm9tLmxlbmd0aCA6IDA7XG4gICAgbGV0IGkgPSBudWxsO1xuICAgIGlmIChzID4gMCkge1xuICAgICAgICBMKDEgPT09IHMpO1xuICAgICAgICBjb25zdCB0ID0gbi5mcm9tWzBdO1xuICAgICAgICB0LmFsbERlc2NlbmRhbnRzID8gaSA9IHQuY29sbGVjdGlvbklkIDogZSA9IGUuY2hpbGQodC5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgciA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHIgPSB1cyhuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBuLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhZShfcyh0LmZpZWxkKSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJBU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkRFU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICh0LmRpcmVjdGlvbikpO1xuICAgIH0odCkpKSk7XG4gICAgbGV0IGEgPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICByZXR1cm4gZSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgPyB0LnZhbHVlIDogdCwgSXQoZSkgPyBudWxsIDogZTtcbiAgICB9KG4ubGltaXQpKTtcbiAgICBsZXQgYyA9IG51bGw7XG4gICAgbi5zdGFydEF0ICYmIChjID0gbHMobi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gbHMobi5lbmRBdCkpLCBmZShlLCBpLCBvLCByLCBhLCBcIkZcIiAvKiBGaXJzdCAqLyAsIGMsIHUpO1xufVxuXG5mdW5jdGlvbiBjcyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIExpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoXCI7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE0oKTtcbiAgICAgICAgfVxuICAgIH0oMCwgZS5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiB1cyh0KSB7XG4gICAgcmV0dXJuIHQgPyB2b2lkIDAgIT09IHQudW5hcnlGaWx0ZXIgPyBbIGdzKHQpIF0gOiB2b2lkIDAgIT09IHQuZmllbGRGaWx0ZXIgPyBbIG1zKHQpIF0gOiB2b2lkIDAgIT09IHQuY29tcG9zaXRlRmlsdGVyID8gdC5jb21wb3NpdGVGaWx0ZXIuZmlsdGVycy5tYXAoKHQgPT4gdXModCkpKS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmNvbmNhdChlKSkpIDogTSgpIDogW107XG59XG5cbmZ1bmN0aW9uIGhzKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiZWZvcmU6IHQuYmVmb3JlLFxuICAgICAgICB2YWx1ZXM6IHQucG9zaXRpb25cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBscyh0KSB7XG4gICAgY29uc3QgZSA9ICEhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICByZXR1cm4gbmV3IHJlKG4sIGUpO1xufVxuXG4vLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBmcyh0KSB7XG4gICAgcmV0dXJuIEZuW3RdO1xufVxuXG5mdW5jdGlvbiBkcyh0KSB7XG4gICAgcmV0dXJuIE1uW3RdO1xufVxuXG5mdW5jdGlvbiB3cyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRQYXRoOiB0LmNhbm9uaWNhbFN0cmluZygpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX3ModCkge1xuICAgIHJldHVybiBsdC5mcm9tU2VydmVyRm9ybWF0KHQuZmllbGRQYXRoKTtcbn1cblxuZnVuY3Rpb24gbXModCkge1xuICAgIHJldHVybiBIdC5jcmVhdGUoX3ModC5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIEVRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogTEVTU19USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBOT1RfSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICBjYXNlIFwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIjpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE0oKTtcbiAgICAgICAgfVxuICAgIH0odC5maWVsZEZpbHRlci5vcCksIHQuZmllbGRGaWx0ZXIudmFsdWUpO1xufVxuXG5mdW5jdGlvbiBncyh0KSB7XG4gICAgc3dpdGNoICh0LnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgIGNvbnN0IGUgPSBfcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEh0LmNyZWF0ZShlLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICBjb25zdCBuID0gX3ModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBIdC5jcmVhdGUobiwgXCI9PVwiIC8qIEVRVUFMICovICwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05PVF9OQU5cIjpcbiAgICAgICAgY29uc3QgcyA9IF9zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gSHQuY3JlYXRlKHMsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgY29uc3QgaSA9IF9zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gSHQuY3JlYXRlKGksIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBNKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB5cyh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBwcyh0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gRXModCkge1xuICAgIGxldCBlID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGUubGVuZ3RoID4gMCAmJiAoZSA9IElzKGUpKSwgZSA9IFRzKHQuZ2V0KG4pLCBlKTtcbiAgICByZXR1cm4gSXMoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBUcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBlO1xuICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykge1xuICAgICAgICBjb25zdCBzID0gdC5jaGFyQXQoZSk7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBJcyh0KSB7XG4gICAgcmV0dXJuIHQgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gQXModCkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKEwoZSA+PSAyKSwgMiA9PT0gZSkgcmV0dXJuIEwoXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMSkpLCB1dC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBuID0gZSAtIDIsIHMgPSBbXTtcbiAgICBsZXQgaSA9IFwiXCI7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBlOyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCBlID0gdC5pbmRleE9mKFwiXHUwMDAxXCIsIHIpO1xuICAgICAgICAoZSA8IDAgfHwgZSA+IG4pICYmIE0oKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zdWJzdHJpbmcociwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IGkubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSBuIDogKGkgKz0gbiwgbyA9IGksIGkgPSBcIlwiKSwgcy5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUpLCBpICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgTSgpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyB1dChzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICovXG4vKipcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxuICovXG5jbGFzcyBScyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzaW5nbGV0b24gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ293bmVyJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBnaXZlbiBkYXRhYmFzZSBjYW4gaGF2ZSBhIHNpbmdsZSBwcmltYXJ5IHRhYiBhc3NpZ25lZCBhdCBhIGdpdmVuIHRpbWUuIFRoYXRcbiAqIHRhYiBtdXN0IHZhbGlkYXRlIHRoYXQgaXQgaXMgc3RpbGwgaG9sZGluZyB0aGUgcHJpbWFyeSBsZWFzZSBiZWZvcmUgZXZlcnlcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XG4gKiB3cml0ZSBhbiB1cGRhdGVkIHRpbWVzdGFtcCB0byB0aGlzIGxlYXNlIHRvIHByZXZlbnQgb3RoZXIgdGFicyBmcm9tXG4gKiBcInN0ZWFsaW5nXCIgdGhlIHByaW1hcnkgbGVhc2VcbiAqLyBjbGFzcyBQcyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLm93bmVySWQgPSB0LCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5sZWFzZVRpbWVzdGFtcE1zID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovIFBzLnN0b3JlID0gXCJvd25lclwiLCBcbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXG4gKi9cblBzLmtleSA9IFwib3duZXJcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBFYWNoIHVzZXIgZ2V0cyBhIHNpbmdsZSBxdWV1ZSBvZiBNdXRhdGlvbkJhdGNoZXMgdG8gYXBwbHkgdG8gdGhlIHNlcnZlci5cbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cbiAqL1xuY2xhc3MgYnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBoaWdoZXN0IG51bWJlcmVkIGJhdGNoIHRoYXQgaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xuICAgICAqIHRoYW4gb3IgZXF1YWwgdG8gdGhpcyB2YWx1ZSBhcmUgY29uc2lkZXJlZCB0byBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIGJ5XG4gICAgICogdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzdHJlYW0gdG9rZW4gdGhhdCB3YXMgcHJldmlvdXNseSBzZW50IGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XG4gICAgICogdXNhZ2UuXG4gICAgICpcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXG4gICAgICogb25seSBhIHNpbmdsZSBzdHJlYW0gdG9rZW4gaXMgcmV0YWluZWQuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkID0gZSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyBicy5zdG9yZSA9IFwibXV0YXRpb25RdWV1ZXNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCBwcm9wZXJ0eS4gKi9cbmJzLmtleVBhdGggPSBcInVzZXJJZFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBSZXByZXNlbnRzIGEgYmF0Y2ggb2YgdXNlci1sZXZlbCBtdXRhdGlvbnMgaW50ZW5kZWQgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gKiBpbiBhIHNpbmdsZSB3cml0ZS4gRWFjaCB1c2VyLWxldmVsIGJhdGNoIGdldHMgYSBzZXBhcmF0ZSBEYk11dGF0aW9uQmF0Y2hcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cbiAqL1xuY2xhc3MgdnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgYmF0Y2gsIGFsbG9jYXRlZCB1c2luZyBhbiBhdXRvLWdlbmVyYXRlZCBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxuICAgICAqIGVwb2NoLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBcIm11dGF0aW9uc1wiIHRoYXQgcmVwcmVzZW50IGEgcGFydGlhbCBiYXNlIHN0YXRlIGZyb20gd2hlbiB0aGlzXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXG4gICAgICogYmF0Y2gsIHRoZXNlIGJhc2VNdXRhdGlvbnMgYXJlIGFwcGxpZWQgcHJpb3IgdG8gdGhlIHJlYWwgd3JpdGVzIGluIG9yZGVyXG4gICAgICogdG8gb3ZlcnJpZGUgY2VydGFpbiBkb2N1bWVudCBmaWVsZHMgZnJvbSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBUaGlzXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXG4gICAgICogdHJhbnNmb3JtcykgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIG1vZGlmaWVkIGRvY3VtZW50c1xuICAgICAqIGRvZXNuJ3QgZmxpY2tlciBpZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHJlY2VpdmVzIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogVGhlc2UgbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXG4gICAgICpcbiAgICAgKiBNdXRhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgdmlhIHRvTXV0YXRpb24oKS5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5sb2NhbFdyaXRlVGltZU1zID0gbiwgdGhpcy5iYXNlTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gaTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gdnMuc3RvcmUgPSBcIm11dGF0aW9uc1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXG52cy5rZXlQYXRoID0gXCJiYXRjaElkXCIsIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciBsb29rdXAgb2YgbXV0YXRpb25zIGJ5IHVzZXIuICovXG52cy51c2VyTXV0YXRpb25zSW5kZXggPSBcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBcbi8qKiBUaGUgdXNlciBtdXRhdGlvbnMgaW5kZXggaXMga2V5ZWQgYnkgW3VzZXJJZCwgYmF0Y2hJZF0gcGFpcnMuICovXG52cy51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnZG9jdW1lbnRNdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBBIG1hbnVhbGx5IG1haW50YWluZWQgaW5kZXggb2YgYWxsIHRoZSBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0IGEgZ2l2ZW5cbiAqIGRvY3VtZW50IGtleS4gVGhlIHJvd3MgaW4gdGhpcyB0YWJsZSBhcmUgcmVmZXJlbmNlcyBiYXNlZCBvbiB0aGUgY29udGVudHMgb2ZcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXG4gKi9cbmNsYXNzIFZzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAgICAgKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JVc2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIFsgdCBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gICAgICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAgICAgKi8gICAgc3RhdGljIHByZWZpeEZvclBhdGgodCwgZSkge1xuICAgICAgICByZXR1cm4gWyB0LCBFcyhlKSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAgICAgKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAgICAgKi8gICAgc3RhdGljIGtleSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBbIHQsIEVzKGUpLCBuIF07XG4gICAgfVxufVxuXG5Wcy5zdG9yZSA9IFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi9cblZzLlBMQUNFSE9MREVSID0gbmV3IFZzO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovXG5jbGFzcyBTcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnJlYWRUaW1lID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovIGNsYXNzIERzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMudmVyc2lvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdyZW1vdGVEb2N1bWVudHMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyOlxuICpcbiAqIC0gQSBjb21wbGV0ZSBkb2N1bWVudC5cbiAqIC0gQSBcIm5vIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biBub3QgdG8gZXhpc3QgKGF0XG4gKiBzb21lIHZlcnNpb24pLlxuICogLSBBbiBcInVua25vd24gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKSBidXQgd2hvc2UgY29udGVudHMgYXJlIHVua25vd24uXG4gKlxuICogTm90ZTogVGhpcyBpcyB0aGUgcGVyc2lzdGVkIGVxdWl2YWxlbnQgb2YgYSBNYXliZURvY3VtZW50IGFuZCBjb3VsZCBwZXJoYXBzXG4gKiBiZSBtYWRlIG1vcmUgZ2VuZXJhbCBpZiBuZWNlc3NhcnkuXG4gKi8gY2xhc3MgQ3Mge1xuICAgIC8vIFRPRE86IFdlIGFyZSBjdXJyZW50bHkgc3RvcmluZyBmdWxsIGRvY3VtZW50IGtleXMgYWxtb3N0IHRocmVlIHRpbWVzXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcbiAgICAvLyBpbnNpZGUgdGhlIGVuY29kZWQgZG9jdW1lbnRzKS4gRHVyaW5nIG91ciBuZXh0IG1pZ3JhdGlvbiwgd2Ugc2hvdWxkXG4gICAgLy8gcmV3cml0ZSB0aGUgcHJpbWFyeSBrZXkgYXMgcGFyZW50UGF0aCArIGRvY3VtZW50IElEIHdoaWNoIHdvdWxkIGFsbG93IHVzXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIERiVW5rbm93bkRvY3VtZW50IGlmIHRoZSBkYXRhIGZvciBhIGRvY3VtZW50IGlzXG4gICAgICogbm90IGtub3duLCBidXQgaXQgaXMga25vd24gdGhhdCBhIGRvY3VtZW50IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERiTm9Eb2N1bWVudCBpZiBpdCBpcyBrbm93biB0aGF0IG5vIGRvY3VtZW50XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERvY3VtZW50IGlmIHRoZXJlJ3MgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGVcbiAgICAgKiBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBEb2N1bWVudHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBzdG9yZSBiYXNlZCBvblxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxuICAgICAqIGRvY3VtZW50cyBhcmUgcG90ZW50aWFsbHkgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJhY2tlbmQncyBjb3B5IGFuZCB1c2VcbiAgICAgKiB0aGUgd3JpdGUncyBjb21taXQgdmVyc2lvbiBhcyB0aGVpciBkb2N1bWVudCB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGRvY3VtZW50IHdhcyByZWFkIGZyb20gdGhlIGJhY2tlbmQuIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuXG4gICAgICogcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCBvZiB0aGUgY29sbGVjdGlvbiB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuIFVuZGVmaW5lZCBmb3IgZGF0YVxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdCwgdGhpcy5ub0RvY3VtZW50ID0gZSwgdGhpcy5kb2N1bWVudCA9IG4sIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSBpLCB0aGlzLnBhcmVudFBhdGggPSByO1xuICAgIH1cbn1cblxuQ3Muc3RvcmUgPSBcInJlbW90ZURvY3VtZW50c1wiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gYWxsIGVudHJpZXMgc29ydGVkIGJ5IHJlYWQgdGltZSAod2hpY2hcbiAqIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lIG9mIGVhY2ggcm93KS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gcHJvdmlkZSBhIGNoYW5nZWxvZyBmb3IgTXVsdGktVGFiLlxuICovXG5Dcy5yZWFkVGltZUluZGV4ID0gXCJyZWFkVGltZUluZGV4XCIsIENzLnJlYWRUaW1lSW5kZXhQYXRoID0gXCJyZWFkVGltZVwiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbiBzb3J0ZWQgYnkgcmVhZFxuICogdGltZS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gYWxsb3cgdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgdG8gZmV0Y2ggbmV3bHkgY2hhbmdlZFxuICogZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbi5cbiAqL1xuQ3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXggPSBcImNvbGxlY3Rpb25SZWFkVGltZUluZGV4XCIsIENzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCA9IFsgXCJwYXJlbnRQYXRoXCIsIFwicmVhZFRpbWVcIiBdO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gKi9cbmNsYXNzIE5zIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYnl0ZVNpemUgLSBBcHByb3hpbWF0ZWx5IHRoZSB0b3RhbCBzaXplIGluIGJ5dGVzIG9mIGFsbCB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ieXRlU2l6ZSA9IHQ7XG4gICAgfVxufVxuXG5Ocy5zdG9yZSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgTnMua2V5ID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICd0YXJnZXRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogVGhpcyBpcyBiYXNlZCBvbiBhbmQgc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1NcbiAqIGNsaWVudC5cbiAqXG4gKiBFYWNoIHF1ZXJ5IHRoZSBjbGllbnQgbGlzdGVucyB0byBhZ2FpbnN0IHRoZSBzZXJ2ZXIgaXMgdHJhY2tlZCBvbiBkaXNrIHNvXG4gKiB0aGF0IHRoZSBxdWVyeSBjYW4gYmUgZWZmaWNpZW50bHkgcmVzdW1lZCBvbiByZXN0YXJ0LlxuICovXG5jbGFzcyB4cyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gYXV0by1nZW5lcmF0ZWQgc2VxdWVudGlhbCBudW1lcmljIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcbiAgICAgKiBjYW5vbmljYWxJZHMgY2FuIGJlIHF1aXRlIGxvbmcgc28gd2UgYWRkaXRpb25hbGx5IGFzc2lnbiBhIHVuaXF1ZVxuICAgICAqIHF1ZXJ5SWQgd2hpY2ggY2FuIGJlIHVzZWQgYnkgcmVmZXJlbmNlZCBkYXRhIHN0cnVjdHVyZXMgKGUuZy5cbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlYWRfdGltZSBpbiB0aGUgcHJvdG9zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYVxuICAgICAqIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyByZWxhdGVkIHRvIHRoZSBzbmFwc2hvdFZlcnNpb24gaW4gdGhhdCB0aGUgcmVzdW1lVG9rZW5cbiAgICAgKiBlZmZlY3RpdmVseSBhbHNvIGVuY29kZXMgdGhhdCB2YWx1ZSwgYnV0IHRoZSByZXN1bWVUb2tlbiBpcyBvcGFxdWVcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHRoZSByZXN1bWVUb2tlbiBzaG91bGQgYmUgdXNlZCB3aGVuXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSwgYnV0IHRoZSBjbGllbnQgc2hvdWxkIHVzZSB0aGUgc25hcHNob3RWZXJzaW9uIGZvciBpdHMgb3duXG4gICAgICogcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZXN1bWVfdG9rZW4gaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNlcXVlbmNlIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGxhc3QgdGltZSB0aGlzIHF1ZXJ5IHdhc1xuICAgICAqIGxpc3RlbmVkIHRvLCB1c2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBDb252ZW50aW9uYWxseSB0aGlzIHdvdWxkIGJlIGEgdGltZXN0YW1wIHZhbHVlLCBidXQgZGV2aWNlLWxvY2FsXG4gICAgICogY2xvY2tzIGFyZSB1bnJlbGlhYmxlIGFuZCB0aGV5IG11c3QgYmUgYWJsZSB0byBjcmVhdGUgbmV3IGxpc3RlbnNcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcbiAgICAgKiBpbmNyZWFzaW5nIG51bWJlciB0aGF0J3MgaW5jcmVtZW50ZWQgb24gZWFjaCBsaXN0ZW4gY2FsbC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cbiAgICAgKiBpbW11dGFibGUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgUXVlcnkgb24gZmlyc3QgdXNlIHdoaWxlXG4gICAgICogbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIHVwZGF0ZWQgZXZlcnkgdGltZSB0aGUgcXVlcnkgaXNcbiAgICAgKiBsaXN0ZW5lZCB0by5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBEZW5vdGVzIHRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgcXVlcnkgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xuICAgICAqIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGZvciB0aGlzIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEJlY2F1c2UgY2Fub25pY2FsIGlkcyBhcmUgbm90IHVuaXF1ZSB3ZSBtdXN0IHN0b3JlIHRoZSBhY3R1YWwgcXVlcnkuIFdlXG4gICAgICogdXNlIHRoZSBwcm90byB0byBoYXZlIGFuIG9iamVjdCB3ZSBjYW4gcGVyc2lzdCB3aXRob3V0IGhhdmluZyB0b1xuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxuICAgICAqL1xuICAgIG8pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuY2Fub25pY2FsSWQgPSBlLCB0aGlzLnJlYWRUaW1lID0gbiwgdGhpcy5yZXN1bWVUb2tlbiA9IHMsIFxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGksIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHIsIHRoaXMucXVlcnkgPSBvO1xuICAgIH1cbn1cblxueHMuc3RvcmUgPSBcInRhcmdldHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkIHByb3BlcnR5LiAqL1xueHMua2V5UGF0aCA9IFwidGFyZ2V0SWRcIiwgXG4vKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleC4gKi9cbnhzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSA9IFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgXG4vKipcbiAqIFRoZSBpbmRleCBvZiBhbGwgY2Fub25pY2FsSWRzIHRvIHRoZSB0YXJnZXRzIHRoYXQgdGhleSBtYXRjaC4gVGhpcyBpcyBub3RcbiAqIGEgdW5pcXVlIG1hcHBpbmcgYmVjYXVzZSBjYW5vbmljYWxJZCBkb2VzIG5vdCBwcm9taXNlIGEgdW5pcXVlIG5hbWUgZm9yIGFsbFxuICogcG9zc2libGUgcXVlcmllcywgc28gd2UgYXBwZW5kIHRoZSB0YXJnZXRJZCB0byBtYWtlIHRoZSBtYXBwaW5nIHVuaXF1ZS5cbiAqL1xueHMucXVlcnlUYXJnZXRzS2V5UGF0aCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcbiAqIHNlbnRpbmVsIHJvdyBtYXJraW5nIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhdCB3aGljaCBhIGRvY3VtZW50IHdhcyB1c2VkLlxuICogRWFjaCBkb2N1bWVudCBjYWNoZWQgbXVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3cgYmVmb3JlIGxydVxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXG4gKlxuICogVGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgYW5kIHNlbnRpbmVsIHJvd3MgYXJlIGNvLWxvY2F0ZWQgc28gdGhhdCBvcnBoYW5lZFxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cbiAqIG9mIHRoaXMgc3RvcmUuXG4gKi9cbmNsYXNzIGtzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0SWQgaWRlbnRpZnlpbmcgYSB0YXJnZXQgb3IgMCBmb3IgYSBzZW50aW5lbCByb3cuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIGRvY3VtZW50LCBhcyBlbmNvZGVkIGluIHRoZSBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxuICAgICAqIHRpbWUgdGhlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcGF0aGAgd2FzIHVzZWQuIE90aGVyd2lzZSwgaXQgc2hvdWxkIGJlXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wYXRoID0gZSwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovIGtzLnN0b3JlID0gXCJ0YXJnZXREb2N1bWVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXG5rcy5rZXlQYXRoID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciB0aGUgcmV2ZXJzZSBpbmRleC4gKi9cbmtzLmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBcbi8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xua3MuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XG4gKiB0byBhdm9pZCB0aGUgbmVlZCBmb3IgZXh0cmEgaW5kZXhlcy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cbiAqL1xuY2xhc3MgJHMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBpZCBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQudGFyZ2V0SWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cbiAgICAgKlxuICAgICAqIFNlZSBEYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBnbG9iYWwgc25hcHNob3QgdmVyc2lvbiByZXByZXNlbnRpbmcgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCB3ZVxuICAgICAqIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQuIFRoaXMgaXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGFuZCBhbnlcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXG4gICAgICogdGFyZ2V0cyByZXN1bWVkIHdpdGggYSByZXN1bWVUb2tlbikgc2hvdWxkIGJlIHN1cHByZXNzZWQgKGJ1ZmZlcmVkKVxuICAgICAqIHVudGlsIHRoZSBiYWNrZW5kIGhhcyBjYXVnaHQgdXAgdG8gdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIGFnYWluLiBUaGlzXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRhcmdldHMgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0LCB0aGlzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4sIFxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gcztcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlRhcmdldEdsb2JhbCBzdG9yZS5cbiAqLyAkcy5rZXkgPSBcInRhcmdldEdsb2JhbEtleVwiLCAkcy5zdG9yZSA9IFwidGFyZ2V0R2xvYmFsXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgQ29sbGVjdGlvbiBpZCAoZS5nLiAnbWVzc2FnZXMnKVxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXG4gKiBUaGlzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgZmluZCBhbGwgY29sbGVjdGlvbnMgdG8gcXVlcnkgd2hlbiBwZXJmb3JtaW5nXG4gKiBhIENvbGxlY3Rpb24gR3JvdXAgcXVlcnkuXG4gKi9cbmNsYXNzIE9zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbklkIChlLmcuICdtZXNzYWdlcycpXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIHBhcmVudCAoZWl0aGVyIGEgZG9jdW1lbnQgbG9jYXRpb24gb3IgYW4gZW1wdHkgcGF0aCBmb3JcbiAgICAgKiBhIHJvb3QtbGV2ZWwgY29sbGVjdGlvbikuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IHQsIHRoaXMucGFyZW50ID0gZTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBPcy5zdG9yZSA9IFwiY29sbGVjdGlvblBhcmVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNvbGxlY3Rpb25JZCwgcGFyZW50IHByb3BlcnRpZXMuICovXG5Pcy5rZXlQYXRoID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF07XG5cbi8qKlxuICogQSByZWNvcmQgb2YgdGhlIG1ldGFkYXRhIHN0YXRlIG9mIGVhY2ggY2xpZW50LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxuICogdG8gYmUgcG9ydGVkIHRvIGlPUyBvciBBbmRyb2lkLlxuICovXG5jbGFzcyBGcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gTm90ZTogUHJldmlvdXMgc2NoZW1hIHZlcnNpb25zIGluY2x1ZGVkIGEgZmllbGRcbiAgICAvLyBcImxhc3RQcm9jZXNzZWREb2N1bWVudENoYW5nZUlkXCIuIERvbid0IHVzZSBhbnltb3JlLlxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbGFzdCB0aW1lIHRoaXMgc3RhdGUgd2FzIHVwZGF0ZWQuICovXG4gICAgZSwgXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNsaWVudCdzIG5ldHdvcmsgY29ubmVjdGlvbiBpcyBlbmFibGVkLiAqL1xuICAgIG4sIFxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBmb3JlZ3JvdW5kIHRhYi4gKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLnVwZGF0ZVRpbWVNcyA9IGUsIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuLCB0aGlzLmluRm9yZWdyb3VuZCA9IHM7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gRnMuc3RvcmUgPSBcImNsaWVudE1ldGFkYXRhXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjbGllbnRJZCBwcm9wZXJ0aWVzLiAqL1xuRnMua2V5UGF0aCA9IFwiY2xpZW50SWRcIjtcblxuLyoqXG4gKiBBIG9iamVjdCByZXByZXNlbnRpbmcgYSBidW5kbGUgbG9hZGVkIGJ5IHRoZSBTREsuXG4gKi9cbmNsYXNzIE1zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIElEIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY3JlYXRlIHRpbWUgb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuYnVuZGxlSWQgPSB0LCB0aGlzLmNyZWF0ZVRpbWUgPSBlLCB0aGlzLnZlcnNpb24gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIE1zLnN0b3JlID0gXCJidW5kbGVzXCIsIE1zLmtleVBhdGggPSBcImJ1bmRsZUlkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgbmFtZWQgcXVlcnkgbG9hZGVkIGJ5IHRoZSBTREsgdmlhIGEgYnVuZGxlLlxuICovXG5jbGFzcyBMcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHJlYWQgdGltZSBvZiB0aGUgcmVzdWx0cyBzYXZlZCBpbiB0aGUgYnVuZGxlIGZyb20gdGhlIG5hbWVkIHF1ZXJ5LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcXVlcnkgc2F2ZWQgaW4gdGhlIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzLmJ1bmRsZWRRdWVyeSA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gTHMuc3RvcmUgPSBcIm5hbWVkUXVlcmllc1wiLCBMcy5rZXlQYXRoID0gXCJuYW1lXCI7XG5cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNvbnN0IEJzID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIGJzLnN0b3JlLCB2cy5zdG9yZSwgVnMuc3RvcmUsIENzLnN0b3JlLCB4cy5zdG9yZSwgUHMuc3RvcmUsICRzLnN0b3JlLCBrcy5zdG9yZSBdLCBGcy5zdG9yZSBdLCBOcy5zdG9yZSBdLCBPcy5zdG9yZSBdLCBNcy5zdG9yZSwgTHMuc3RvcmUgXSwgVXMgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLy8gVjIgaXMgbm8gbG9uZ2VyIHVzYWJsZSAoc2VlIGNvbW1lbnQgYXQgdG9wIG9mIGZpbGUpXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqL1xuY2xhc3MgcXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIEtzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgdCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IHQsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sodCk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gdCwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgbmV4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgTSgpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZShlLCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3ModCwgdGhpcy5yZXN1bHQpIDogbmV3IEtzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKHQsIGUpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKGUsIHQpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQoKTtcbiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgS3MgPyBlIDogS3MucmVzb2x2ZShlKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIEtzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2Vzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBLcy5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBLcy5yZWplY3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLcygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgS3MoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgS3MoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9IDAsIGkgPSAwLCByID0gITE7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICsrcywgdC5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgciAmJiBpID09PSBzICYmIGUoKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gbih0KSkpO1xuICAgICAgICAgICAgfSkpLCByID0gITAsIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcih0KSB7XG4gICAgICAgIGxldCBlID0gS3MucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5uZXh0KCh0ID0+IHQgPyBLcy5yZXNvbHZlKHQpIDogbigpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaChlLmNhbGwodGhpcywgdCwgcykpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIGpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlR0ID0gbmV3IGosIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuVHQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLmVycm9yID8gdGhpcy5UdC5yZWplY3QobmV3IEdzKHQsIGUuZXJyb3IpKSA6IHRoaXMuVHQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBYcyhlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLlR0LnJlamVjdChuZXcgR3ModCwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3Blbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGpzKGUsIHQudHJhbnNhY3Rpb24ocywgbikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR3MoZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IEl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5UdC5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydCh0KSB7XG4gICAgICAgIHQgJiYgdGhpcy5UdC5yZWplY3QodCksIHRoaXMuYWJvcnRlZCB8fCAoayhcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQgPyB0Lm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgSHMoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgUXMge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLkF0ID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBRcy5SdCh1KCkpICYmICQoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiBrKFwiU2ltcGxlRGJcIiwgXCJSZW1vdmluZyBkYXRhYmFzZTpcIiwgdCksIEpzKHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UodCkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBQdCgpIHtcbiAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIGluZGV4ZWREQikgcmV0dXJuICExO1xuICAgICAgICBpZiAoUXMuYnQoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdSgpLCBlID0gUXMuUnQodCksIG4gPSAwIDwgZSAmJiBlIDwgMTAsIHMgPSBRcy52dCh0KSwgaSA9IDAgPCBzICYmIHMgPCA0LjU7XG4gICAgICAgIC8vIElFIDEwXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xuICAgICAgICAvLyBJRSAxMVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcbiAgICAgICAgLy8gRWRnZVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cbiAgICAgICAgICAgICAgICByZXR1cm4gISh0LmluZGV4T2YoXCJNU0lFIFwiKSA+IDAgfHwgdC5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAwIHx8IHQuaW5kZXhPZihcIkVkZ2UvXCIpID4gMCB8fCBuIHx8IGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXG4gICAgICovICAgIHN0YXRpYyBidCgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBwcm9jZXNzICYmIFwiWUVTXCIgPT09IChudWxsID09PSAodCA9IHByb2Nlc3MuZW52KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LlZ0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIFN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoZSk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBSdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9pKD86cGhvbmV8cGFkfHBvZCkgb3MgKFtcXGRfXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCJfXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIHZ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyBEdCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiIHx8IChrKFwiU2ltcGxlRGJcIiwgXCJPcGVuaW5nIGRhdGFiYXNlOlwiLCB0aGlzLm5hbWUpLCB0aGlzLmRiID0gYXdhaXQgbmV3IFByb21pc2UoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEludmVzdGlnYXRlIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxuICAgICAgICAgICAgLy8gc3VnZ2VzdHMgSUU5IGFuZCBvbGRlciBXZWJLaXQgYnJvd3NlcnMgaGFuZGxlIHVwZ3JhZGVcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudGx5LiBUaGV5IGV4cGVjdCBzZXRWZXJzaW9uLCBhcyBkZXNjcmliZWQgaGVyZTpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXG4gICAgICAgICAgICBjb25zdCBzID0gaW5kZXhlZERCLm9wZW4odGhpcy5uYW1lLCB0aGlzLnZlcnNpb24pO1xuICAgICAgICAgICAgcy5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGUobik7XG4gICAgICAgICAgICB9LCBzLm9uYmxvY2tlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuKG5ldyBHcyh0LCBcIkNhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuXCIpKTtcbiAgICAgICAgICAgIH0sIHMub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5lcnJvcjtcbiAgICAgICAgICAgICAgICBcIlZlcnNpb25FcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBLKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IG4obmV3IEdzKHQsIHMpKTtcbiAgICAgICAgICAgIH0sIHMub251cGdyYWRlbmVlZGVkID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgayhcIlNpbXBsZURiXCIsICdEYXRhYmFzZSBcIicgKyB0aGlzLm5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgdC5vbGRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuQXQuQ3QoZSwgcy50cmFuc2FjdGlvbiwgdC5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgayhcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5OdCAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IHRoaXMuTnQodCkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICB4dCh0KSB7XG4gICAgICAgIHRoaXMuTnQgPSB0LCB0aGlzLmRiICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGUgPT4gdChlKSk7XG4gICAgfVxuICAgIGFzeW5jIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFwicmVhZG9ubHlcIiA9PT0gZTtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICArK3I7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGIgPSBhd2FpdCB0aGlzLkR0KHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBqcy5vcGVuKHRoaXMuZGIsIHQsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgciA9IHMoZSkuY2F0Y2goKHQgPT4gKFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgZS5hYm9ydCh0KSwgS3MucmVqZWN0KHQpKSkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIC8vIEFzIG5vdGVkIGFib3ZlLCBlcnJvcnMgYXJlIHByb3BhZ2F0ZWQgYnkgYWJvcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBTb1xuICAgICAgICAgICAgICAgIC8vIHdlIHN3YWxsb3cgYW55IGVycm9yIGhlcmUgdG8gYXZvaWQgdGhlIGJyb3dzZXIgbG9nZ2luZyBpdCBhcyB1bmhhbmRsZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuY2F0Y2goKCgpID0+IHt9KSksIFxuICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZSAoaS5lLiBJbmRleGVkRGIncyBvbnN1Y2Nlc3MgZXZlbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBmaXJlKSwgYnV0IHN0aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25GblJlc3VsdCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cbiAgICAgICAgICAgICAgICBhd2FpdCBlLkl0LCByO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oc2NobWlkdC1zZWJhc3RpYW4pOiBXZSBjb3VsZCBwcm9iYWJseSBiZSBzbWFydGVyIGFib3V0IHRoaXMgYW5kXG4gICAgICAgICAgICAgICAgLy8gbm90IHJldHJ5IGV4Y2VwdGlvbnMgdGhhdCBhcmUgbGlrZWx5IHVucmVjb3ZlcmFibGUgKHN1Y2ggYXMgcXVvdGFcbiAgICAgICAgICAgICAgICAvLyBleGNlZWRlZCBlcnJvcnMpLlxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCB1c2UgYW4gaW5zdGFuY2VvZiBjaGVjayBmb3IgRmlyZXN0b3JlRXhjZXB0aW9uLCBzaW5jZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBleGNlcHRpb24gaXMgd3JhcHBlZCBpbiBhIGdlbmVyaWMgZXJyb3IgYnkgb3VyIGFzeW5jL2F3YWl0IGhhbmRsaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBcIkZpcmViYXNlRXJyb3JcIiAhPT0gdC5uYW1lICYmIHIgPCAzO1xuICAgICAgICAgICAgICAgIGlmIChrKFwiU2ltcGxlRGJcIiwgXCJUcmFuc2FjdGlvbiBmYWlsZWQgd2l0aCBlcnJvcjpcIiwgdC5tZXNzYWdlLCBcIlJldHJ5aW5nOlwiLCBlKSwgXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpLCAhZSkgcmV0dXJuIFByb21pc2UucmVqZWN0KHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmRiICYmIHRoaXMuZGIuY2xvc2UoKSwgdGhpcy5kYiA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcbiAqIGNhbGxiYWNrIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5LXJlZmVyZW5jZWQgb2JqZWN0LCBvciBqdW1wIHRvIGEgbmV3IGtleVxuICogd2l0aGluIHRoZSBrZXkgcmFuZ2Ugb3IgaW5kZXguXG4gKi8gY2xhc3MgV3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rdCA9IHQsIHRoaXMuJHQgPSAhMSwgdGhpcy5PdCA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0RvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiR0O1xuICAgIH1cbiAgICBnZXQgRnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk90O1xuICAgIH1cbiAgICBzZXQgY3Vyc29yKHQpIHtcbiAgICAgICAgdGhpcy5rdCA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBzdG9wIGl0ZXJhdGlvbiBhdCBhbnkgcG9pbnQuXG4gICAgICovICAgIGRvbmUoKSB7XG4gICAgICAgIHRoaXMuJHQgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICBNdCh0KSB7XG4gICAgICAgIHRoaXMuT3QgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnQgY3Vyc29yIHZhbHVlIGZyb20gdGhlIG9iamVjdCBzdG9yZS5cbiAgICAgKlxuICAgICAqIE5PVEU6IFlvdSBDQU5OT1QgZG8gdGhpcyB3aXRoIGEga2V5c09ubHkgcXVlcnkuXG4gICAgICovICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIEpzKHRoaXMua3QuZGVsZXRlKCkpO1xuICAgIH1cbn1cblxuLyoqIEFuIGVycm9yIHRoYXQgd3JhcHMgZXhjZXB0aW9ucyB0aGF0IHRocm93biBkdXJpbmcgSW5kZXhlZERCIGV4ZWN1dGlvbi4gKi8gY2xhc3MgR3MgZXh0ZW5kcyBLIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHEuVU5BVkFJTEFCTEUsIGBJbmRleGVkREIgdHJhbnNhY3Rpb24gJyR7dH0nIGZhaWxlZDogJHtlfWApLCB0aGlzLm5hbWUgPSBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKiBWZXJpZmllcyB3aGV0aGVyIGBlYCBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiAqLyBmdW5jdGlvbiB6cyh0KSB7XG4gICAgLy8gVXNlIG5hbWUgZXF1YWxpdHksIGFzIGluc3RhbmNlb2YgY2hlY2tzIG9uIGVycm9ycyBkb24ndCB3b3JrIHdpdGggZXJyb3JzXG4gICAgLy8gdGhhdCB3cmFwIG90aGVyIGVycm9ycy5cbiAgICByZXR1cm4gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCIgPT09IHQubmFtZTtcbn1cblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIElEQk9iamVjdFN0b3JlIHByb3ZpZGluZyBhbiBBUEkgdGhhdDpcbiAqXG4gKiAxKSBIYXMgZ2VuZXJpYyBLZXlUeXBlIC8gVmFsdWVUeXBlIHBhcmFtZXRlcnMgdG8gcHJvdmlkZSBzdHJvbmdseS10eXBlZFxuICogbWV0aG9kcyBmb3IgYWN0aW5nIGFnYWluc3QgdGhlIG9iamVjdCBzdG9yZS5cbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxuICogbWV0aG9kIHJldHVybiBhIFBlcnNpc3RlbmNlUHJvbWlzZSBpbnN0ZWFkLlxuICogMykgUHJvdmlkZXMgYSBoaWdoZXItbGV2ZWwgQVBJIHRvIGF2b2lkIG5lZWRpbmcgdG8gZG8gZXhjZXNzaXZlIHdyYXBwaW5nIG9mXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXG4gKi8gY2xhc3MgSHMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHQ7XG4gICAgfVxuICAgIHB1dCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKGsoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBuID0gdGhpcy5zdG9yZS5wdXQoZSwgdCkpIDogKGsoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCB0KSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dCh0KSksIEpzKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgayhcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgdCk7XG4gICAgICAgIHJldHVybiBKcyh0aGlzLnN0b3JlLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGZyb20gdGhlIHNwZWNpZmllZCBzdG9yZSwgb3IgbnVsbFxuICAgICAqIGlmIG5vIG9iamVjdCBleGlzdHMgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS5cbiAgICAgKlxuICAgICAqIEBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICAvLyBXZSdyZSBkb2luZyBhbiB1bnNhZmUgY2FzdCB0byBWYWx1ZVR5cGUuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBKcyh0aGlzLnN0b3JlLmdldCh0KSkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBub25leGlzdGVuY2UgdG8gbnVsbC5cbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gbnVsbCksIGsoXCJTaW1wbGVEYlwiLCBcIkdFVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBlKSkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICBrKFwiU2ltcGxlRGJcIiwgXCJERUxFVEVcIiwgdGhpcy5zdG9yZS5uYW1lLCB0KTtcbiAgICAgICAgcmV0dXJuIEpzKHRoaXMuc3RvcmUuZGVsZXRlKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgd2UgZXZlciBuZWVkIG1vcmUgb2YgdGhlIGNvdW50IHZhcmlhbnRzLCB3ZSBjYW4gYWRkIG92ZXJsb2Fkcy4gRm9yIG5vdyxcbiAgICAgKiBhbGwgd2UgbmVlZCBpcyB0byBjb3VudCBldmVyeXRoaW5nIGluIGEgc3RvcmUuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgc3RvcmUuXG4gICAgICovICAgIGNvdW50KCkge1xuICAgICAgICBrKFwiU2ltcGxlRGJcIiwgXCJDT1VOVFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICByZXR1cm4gSnModGhpcy5zdG9yZS5jb3VudCgpKTtcbiAgICB9XG4gICAgTHQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jdXJzb3IodGhpcy5vcHRpb25zKHQsIGUpKSwgcyA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5CdChuLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgVXQodCwgZSkge1xuICAgICAgICBrKFwiU2ltcGxlRGJcIiwgXCJERUxFVEUgQUxMXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIG4ucXQgPSAhMTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5CdChzLCAoKHQsIGUsIG4pID0+IG4uZGVsZXRlKCkpKTtcbiAgICB9XG4gICAgS3QodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZSA/IG4gPSB0IDogKG4gPSB7fSwgZSA9IHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLkJ0KHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBqdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgS3MoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBlLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gWHModC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHMoZSk7XG4gICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcyA/IHQocy5wcmltYXJ5S2V5LCBzLnZhbHVlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdCA/IHMuY29udGludWUoKSA6IG4oKTtcbiAgICAgICAgICAgICAgICB9KSkgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEJ0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEtzKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdm9pZCBzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBXcyhpKSwgbyA9IGUoaS5wcmltYXJ5S2V5LCBpLnZhbHVlLCByKTtcbiAgICAgICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEtzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLmNhdGNoKCh0ID0+IChyLmRvbmUoKSwgS3MucmVqZWN0KHQpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHIuaXNEb25lID8gcygpIDogbnVsbCA9PT0gci5GdCA/IGkuY29udGludWUoKSA6IGkuY29udGludWUoci5GdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gS3Mud2FpdEZvcihuKSkpO1xuICAgIH1cbiAgICBvcHRpb25zKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBuID0gdCA6IGUgPSB0KSwge1xuICAgICAgICAgICAgaW5kZXg6IG4sXG4gICAgICAgICAgICByYW5nZTogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjdXJzb3IodCkge1xuICAgICAgICBsZXQgZSA9IFwibmV4dFwiO1xuICAgICAgICBpZiAodC5yZXZlcnNlICYmIChlID0gXCJwcmV2XCIpLCB0LmluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5pbmRleCh0LmluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0LnF0ID8gbi5vcGVuS2V5Q3Vyc29yKHQucmFuZ2UsIGUpIDogbi5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXG4gKi8gZnVuY3Rpb24gSnModCkge1xuICAgIHJldHVybiBuZXcgS3MoKChlLCBuKSA9PiB7XG4gICAgICAgIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgZShuKTtcbiAgICAgICAgfSwgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gWHModC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbihlKTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IFlzID0gITE7XG5cbmZ1bmN0aW9uIFhzKHQpIHtcbiAgICBjb25zdCBlID0gUXMuUnQodSgpKTtcbiAgICBpZiAoZSA+PSAxMi4yICYmIGUgPCAxMykge1xuICAgICAgICBjb25zdCBlID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmICh0Lm1lc3NhZ2UuaW5kZXhPZihlKSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IEsoXCJpbnRlcm5hbFwiLCBgSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnJHtlfScuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBZcyB8fCAoWXMgPSAhMCwgXG4gICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pLCAwKSksIHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFpzIGV4dGVuZHMgcXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5RdCA9IHQsIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICByZXR1cm4gUXMuU3Qobi5RdCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIGVpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIC0gTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIC0gVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5sb2NhbFdyaXRlVGltZSA9IGUsIHRoaXMuYmFzZU11dGF0aW9ucyA9IG4sIHRoaXMubXV0YXRpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxuICAgICAqIHRvIGNvbXB1dGUgdGhlIHN0YXRlIG9mIHRoZSByZW1vdGUgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqLyAgICBhcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvblJlc3VsdHM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLm11dGF0aW9uc1tlXTtcbiAgICAgICAgICAgIGlmIChzLmtleS5pc0VxdWFsKHQua2V5KSkge1xuICAgICAgICAgICAgICAgIEhlKHMsIHQsIG5bZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsVmlldyh0KSB7XG4gICAgICAgIC8vIEZpcnN0LCBhcHBseSB0aGUgYmFzZSBzdGF0ZS4gVGhpcyBhbGxvd3MgdXMgdG8gYXBwbHkgbm9uLWlkZW1wb3RlbnRcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFnYWluc3QgYSBjb25zaXN0ZW50IHNldCBvZiB2YWx1ZXMuXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmJhc2VNdXRhdGlvbnMpIGUua2V5LmlzRXF1YWwodC5rZXkpICYmIEplKGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5tdXRhdGlvbnMpIGUua2V5LmlzRXF1YWwodC5rZXkpICYmIEplKGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IFRoaXMgaW1wbGVtZW50YXRpb24gaXMgTyhuXjIpLiBJZiB3ZSBhcHBseSB0aGUgbXV0YXRpb25zXG4gICAgICAgIC8vIGRpcmVjdGx5IChhcyBkb25lIGluIGBhcHBseVRvTG9jYWxWaWV3KClgKSwgd2UgY2FuIHJlZHVjZSB0aGUgY29tcGxleGl0eVxuICAgICAgICAvLyB0byBPKG4pLlxuICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChlLmtleSksIHMgPSBuO1xuICAgICAgICAgICAgLy8gVE9ETyhtdXRhYmxlZG9jdW1lbnRzKTogVGhpcyBtZXRob2Qgc2hvdWxkIHRha2UgYSBNdXRhYmxlRG9jdW1lbnRNYXBcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgY2FzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUb0xvY2FsVmlldyhzKSwgbi5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBzLmNvbnZlcnRUb05vRG9jdW1lbnQoaXQubWluKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBQbigpKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoSWQgPT09IHQuYmF0Y2hJZCAmJiBldCh0aGlzLm11dGF0aW9ucywgdC5tdXRhdGlvbnMsICgodCwgZSkgPT4gWGUodCwgZSkpKSAmJiBldCh0aGlzLmJhc2VNdXRhdGlvbnMsIHQuYmFzZU11dGF0aW9ucywgKCh0LCBlKSA9PiBYZSh0LCBlKSkpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSBtdXRhdGlvbiBiYXRjaCB0byB0aGUgYmFja2VuZC4gKi8gY2xhc3Mgbmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8qKlxuICAgICAqIEEgcHJlLWNvbXB1dGVkIG1hcHBpbmcgZnJvbSBlYWNoIG11dGF0ZWQgZG9jdW1lbnQgdG8gdGhlIHJlc3VsdGluZ1xuICAgICAqIHZlcnNpb24uXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmJhdGNoID0gdCwgdGhpcy5jb21taXRWZXJzaW9uID0gZSwgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBuLCB0aGlzLmRvY1ZlcnNpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXG4gICAgICogbXVzdCBiZSBvbmUgcmVzdWx0IGZvciBlYWNoIG11dGF0aW9uIGluIHRoZSBiYXRjaC4gVGhpcyBzdGF0aWMgZmFjdG9yeVxuICAgICAqIGNhY2hlcyBhIGRvY3VtZW50PSZndDt2ZXJzaW9uIG1hcHBpbmcgKGRvY1ZlcnNpb25zKS5cbiAgICAgKi8gICAgc3RhdGljIGZyb20odCwgZSwgbikge1xuICAgICAgICBMKHQubXV0YXRpb25zLmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgICAgICBsZXQgcyA9IEFuKCk7XG4gICAgICAgIGNvbnN0IGkgPSB0Lm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKSBzID0gcy5pbnNlcnQoaVt0XS5rZXksIG5bdF0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgbmkodCwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3Mgc2kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IGl0Lm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCByID0gaXQubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSB3dC5FTVBUWV9CWVRFX1NUUklORykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gcywgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5yZXN1bWVUb2tlbiA9IG87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgc2kodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdCwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHJlc3VtZSB0b2tlbiBhbmRcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLlxuICAgICAqLyAgICB3aXRoUmVzdW1lVG9rZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHNpKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIGUsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgc2kodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHQsIHRoaXMucmVzdW1lVG9rZW4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqLyBjbGFzcyBpaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLld0ID0gdDtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIHJpKHQsIGUpIHtcbiAgICBpZiAoZS5kb2N1bWVudCkgcmV0dXJuIFpuKHQuV3QsIGUuZG9jdW1lbnQsICEhZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgIGlmIChlLm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdCA9IFB0LmZyb21TZWdtZW50cyhlLm5vRG9jdW1lbnQucGF0aCksIG4gPSBoaShlLm5vRG9jdW1lbnQucmVhZFRpbWUpLCBzID0gcXQubmV3Tm9Eb2N1bWVudCh0LCBuKTtcbiAgICAgICAgcmV0dXJuIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zID8gcy5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IHM7XG4gICAgfVxuICAgIGlmIChlLnVua25vd25Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gUHQuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpLCBuID0gaGkoZS51bmtub3duRG9jdW1lbnQudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBxdC5uZXdVbmtub3duRG9jdW1lbnQodCwgbik7XG4gICAgfVxuICAgIHJldHVybiBNKCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gb2kodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBhaShuKSwgaSA9IGUua2V5LnBhdGgucG9wTGFzdCgpLnRvQXJyYXkoKTtcbiAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBXbih0LCBlLmtleSksXG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLFxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IEJuKHQsIGUudmVyc2lvbi50b1RpbWVzdGFtcCgpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0Lld0LCBlKSwgciA9IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgICAgICByZXR1cm4gbmV3IENzKFxuICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBub0RvY3VtZW50PSAqLyBudWxsLCBuLCByLCBzLCBpKTtcbiAgICB9XG4gICAgaWYgKGUuaXNOb0RvY3VtZW50KCkpIHtcbiAgICAgICAgY29uc3QgdCA9IGUua2V5LnBhdGgudG9BcnJheSgpLCBuID0gdWkoZS52ZXJzaW9uKSwgciA9IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgICAgICByZXR1cm4gbmV3IENzKFxuICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIG5ldyBTcyh0LCBuKSwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCByLCBzLCBpKTtcbiAgICB9XG4gICAgaWYgKGUuaXNVbmtub3duRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSB1aShlLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3IENzKG5ldyBEcyh0LCBuKSwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGhhc0NvbW1pdHRlZE11dGF0aW9ucz0gKi8gITAsIHMsIGkpO1xuICAgIH1cbiAgICByZXR1cm4gTSgpO1xufVxuXG5mdW5jdGlvbiBhaSh0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4gWyBlLnNlY29uZHMsIGUubmFub3NlY29uZHMgXTtcbn1cblxuZnVuY3Rpb24gY2kodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgc3QodFswXSwgdFsxXSk7XG4gICAgcmV0dXJuIGl0LmZyb21UaW1lc3RhbXAoZSk7XG59XG5cbmZ1bmN0aW9uIHVpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBuZXcgUnMoZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKTtcbn1cblxuZnVuY3Rpb24gaGkodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgc3QodC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gaXQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBsaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IChlLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgoZSA9PiBzcyh0Lld0LCBlKSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKyt0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uc1t0XTtcbiAgICAgICAgaWYgKHQgKyAxIDwgZS5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gZS5tdXRhdGlvbnNbdCArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubXV0YXRpb25zW3QgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHMudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgZS5tdXRhdGlvbnMuc3BsaWNlKHQgKyAxLCAxKSwgXG4gICAgICAgICAgICArK3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcyA9IGUubXV0YXRpb25zLm1hcCgoZSA9PiBzcyh0Lld0LCBlKSkpLCBpID0gc3QuZnJvbU1pbGxpcyhlLmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgZWkoZS5iYXRjaElkLCBpLCBuLCBzKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gZmkodCkge1xuICAgIGNvbnN0IGUgPSBoaSh0LnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gaGkodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IGl0Lm1pbigpO1xuICAgIGxldCBzO1xuICAgIHZhciBpO1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucXVlcnkuZG9jdW1lbnRzID8gKEwoMSA9PT0gKGkgPSB0LnF1ZXJ5KS5kb2N1bWVudHMubGVuZ3RoKSwgXG4gICAgcyA9IEVlKGRlKEhuKGkuZG9jdW1lbnRzWzBdKSkpKSA6IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBFZShhcyh0KSk7XG4gICAgfSh0LnF1ZXJ5KSwgbmV3IHNpKHMsIHQudGFyZ2V0SWQsIDAgLyogTGlzdGVuICovICwgdC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGUsIG4sIHd0LmZyb21CYXNlNjRTdHJpbmcodC5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBkaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHVpKGUuc25hcHNob3RWZXJzaW9uKSwgcyA9IHVpKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IHp0KGUudGFyZ2V0KSA/IHJzKHQuV3QsIGUudGFyZ2V0KSA6IG9zKHQuV3QsIGUudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgciA9IGUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIG5ldyB4cyhlLnRhcmdldElkLCBRdChlLnRhcmdldCksIG4sIHIsIGUuc2VxdWVuY2VOdW1iZXIsIHMsIGkpO1xufVxuXG4vKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgYEJ1bmRsZWRRdWVyeWAgZnJvbSBidW5kbGUgcHJvdG8gdG8gYSBRdWVyeSBvYmplY3QuXG4gKlxuICogVGhpcyByZWNvbnN0cnVjdHMgdGhlIG9yaWdpbmFsIHF1ZXJ5IHVzZWQgdG8gYnVpbGQgdGhlIGJ1bmRsZSBiZWluZyBsb2FkZWQsXG4gKiBpbmNsdWRpbmcgZmVhdHVyZXMgZXhpc3RzIG9ubHkgaW4gU0RLcyAoZm9yIGV4YW1wbGU6IGxpbWl0LXRvLWxhc3QpLlxuICovXG5mdW5jdGlvbiB3aSh0KSB7XG4gICAgY29uc3QgZSA9IGFzKHtcbiAgICAgICAgcGFyZW50OiB0LnBhcmVudCxcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB0LnN0cnVjdHVyZWRRdWVyeVxuICAgIH0pO1xuICAgIHJldHVybiBcIkxBU1RcIiA9PT0gdC5saW1pdFR5cGUgPyBUZShlLCBlLmxpbWl0LCBcIkxcIiAvKiBMYXN0ICovKSA6IGU7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfaSB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gbWkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IChlID0gdCkuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogaGkoZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBtaSh0KS5wdXQoe1xuICAgICAgICAgICAgYnVuZGxlSWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiB1aShLbihuLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gZ2kodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogKGUgPSB0KS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB3aShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGhpKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gZ2kodCkucHV0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiB1aShLbih0LnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiB0LmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gbWkodCkge1xuICAgIHJldHVybiB0aSh0LCBNcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGdpKHQpIHtcbiAgICByZXR1cm4gdGkodCwgTHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIHlpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5HdCA9IG5ldyBwaTtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5HdC5hZGQoZSksIEtzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gS3MucmVzb2x2ZSh0aGlzLkd0LmdldEVudHJpZXMoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXG4gKi8gY2xhc3MgcGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdIHx8IG5ldyBtbih1dC5jb21wYXJhdG9yKSwgaSA9ICFzLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbZV0gPSBzLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgcy5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXModCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbdF0gfHwgbmV3IG1uKHV0LmNvbXBhcmF0b3IpKS50b0FycmF5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgRWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmUgdXNlZCB0b1xuICAgICAgICAgKiBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy56dCA9IG5ldyBwaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKi8gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMuenQuaGFzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5sYXN0U2VnbWVudCgpLCBzID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxuICAgICAgICAgICAgICAgIHRoaXMuenQuYWRkKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IG4sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBFcyhzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBUaSh0KS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUsIFwiXCIgXSwgWyBudChlKSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBUaSh0KS5MdChzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHMuY29sbGVjdGlvbklkICE9PSBlKSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goQXMocy5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcbiAqIGRvY3VtZW50IHN0b3JlLlxuICovIGZ1bmN0aW9uIFRpKHQpIHtcbiAgICByZXR1cm4gdGkodCwgT3Muc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBJaSA9IHtcbiAgICBkaWRSdW46ICExLFxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXG59O1xuXG5jbGFzcyBBaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgdCwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgZSwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IHQsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IGUsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBaSh0LCBBaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgQWkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiBSaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuc3RvcmUodnMuc3RvcmUpLCBpID0gdC5zdG9yZShWcy5zdG9yZSksIHIgPSBbXSwgbyA9IElEQktleVJhbmdlLm9ubHkobi5iYXRjaElkKTtcbiAgICBsZXQgYSA9IDA7XG4gICAgY29uc3QgYyA9IHMuS3Qoe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgodCwgZSwgbikgPT4gKGErKywgbi5kZWxldGUoKSkpKTtcbiAgICByLnB1c2goYy5uZXh0KCgoKSA9PiB7XG4gICAgICAgIEwoMSA9PT0gYSk7XG4gICAgfSkpKTtcbiAgICBjb25zdCB1ID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIG4ubXV0YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHMgPSBWcy5rZXkoZSwgdC5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgci5wdXNoKGkuZGVsZXRlKHMpKSwgdS5wdXNoKHQua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIEtzLndhaXRGb3IocikubmV4dCgoKCkgPT4gdSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIFBpKHQpIHtcbiAgICBpZiAoIXQpIHJldHVybiAwO1xuICAgIGxldCBlO1xuICAgIGlmICh0LmRvY3VtZW50KSBlID0gdC5kb2N1bWVudDsgZWxzZSBpZiAodC51bmtub3duRG9jdW1lbnQpIGUgPSB0LnVua25vd25Eb2N1bWVudDsgZWxzZSB7XG4gICAgICAgIGlmICghdC5ub0RvY3VtZW50KSB0aHJvdyBNKCk7XG4gICAgICAgIGUgPSB0Lm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyBBaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcbkFpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgQWkuREVGQVVMVCA9IG5ldyBBaSg0MTk0MzA0MCwgQWkuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIEFpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxuQWkuRElTQUJMRUQgPSBuZXcgQWkoLTEsIDAsIDApO1xuXG5jbGFzcyBiaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuTiA9IGUsIHRoaXMuSHQgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy5KdCA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgWXQodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgTChcIlwiICE9PSB0LnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzQXV0aGVudGljYXRlZCgpID8gdC51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IGJpKGksIGUsIG4sIHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBWaSh0KS5LdCh7XG4gICAgICAgICAgICBpbmRleDogdnMudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBlID0gITEsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFNpKHQpLCByID0gVmkodCk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiByLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBMKFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgYSA9IG5ldyBlaShvLCBlLCBuLCBzKSwgYyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5iYXNlTXV0YXRpb25zLm1hcCgoZSA9PiBucyh0Lld0LCBlKSkpLCBpID0gbi5tdXRhdGlvbnMubWFwKChlID0+IG5zKHQuV3QsIGUpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB2cyhlLCBuLmJhdGNoSWQsIG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSwgcywgaSk7XG4gICAgICAgICAgICB9KHRoaXMuTiwgdGhpcy51c2VySWQsIGEpLCB1ID0gW107XG4gICAgICAgICAgICBsZXQgaCA9IG5ldyBtbigoKHQsIGUpID0+IHR0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBWcy5rZXkodGhpcy51c2VySWQsIHQua2V5LnBhdGgsIG8pO1xuICAgICAgICAgICAgICAgIGggPSBoLmFkZCh0LmtleS5wYXRoLnBvcExhc3QoKSksIHUucHVzaChyLnB1dChjKSksIHUucHVzaChpLnB1dChlLCBWcy5QTEFDRUhPTERFUikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGguZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdS5wdXNoKHRoaXMuSHQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkpO1xuICAgICAgICAgICAgfSkpLCB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLkp0W29dID0gYS5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIEtzLndhaXRGb3IodSkubmV4dCgoKCkgPT4gYSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gVmkodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IChMKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGxpKHRoaXMuTiwgdCkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgWHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5KdFtlXSA/IEtzLnJlc29sdmUodGhpcy5KdFtlXSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5KdFtlXSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gVmkodCkuS3Qoe1xuICAgICAgICAgICAgaW5kZXg6IHZzLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChMKGUuYmF0Y2hJZCA+PSBuKSwgaSA9IGxpKHRoaXMuTiwgZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIFZpKHQpLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiB2cy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogZSxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IGUuYmF0Y2hJZCwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBWaSh0KS5MdCh2cy51c2VyTXV0YXRpb25zSW5kZXgsIGUpLm5leHQoKHQgPT4gdC5tYXAoKHQgPT4gbGkodGhpcy5OLCB0KSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IFZzLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKG4pLCBpID0gW107XG4gICAgICAgIHJldHVybiBTaSh0KS5LdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKG4sIHMsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCBhLCBjXSA9IG4sIHUgPSBBcyhhKTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKHUpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBWaSh0KS5nZXQoYykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBNKCk7XG4gICAgICAgICAgICAgICAgTCh0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2gobGkodGhpcy5OLCB0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgbW4odHQpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IFZzLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGUucGF0aCksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0gU2kodCkuS3Qoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgICAgICB9LCAoKHQsIHMsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbciwgbywgYV0gPSB0LCBjID0gQXMobyk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGMpID8gbiA9IG4uYWRkKGEpIDogaS5kb25lKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzLnB1c2gobyk7XG4gICAgICAgIH0pKSwgS3Mud2FpdEZvcihzKS5uZXh0KCgoKSA9PiB0aGlzLlp0KHQsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMSwgaSA9IFZzLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIG4pLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyBtbih0dCk7XG4gICAgICAgIHJldHVybiBTaSh0KS5LdCh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCBhLCBjXSA9IHQsIHUgPSBBcyhhKTtcbiAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZih1KSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHUubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQoYykpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLlp0KHQsIG8pKSk7XG4gICAgfVxuICAgIFp0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaChWaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IE0oKTtcbiAgICAgICAgICAgICAgICBMKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChsaSh0aGlzLk4sIHQpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgS3Mud2FpdEZvcihzKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gUmkodC5RdCwgdGhpcy51c2VySWQsIGUpLm5leHQoKG4gPT4gKHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50ZShlLmJhdGNoSWQpO1xuICAgICAgICB9KSksIEtzLmZvckVhY2gobiwgKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgdGUodCkge1xuICAgICAgICBkZWxldGUgdGhpcy5KdFt0XTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gS3MucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChWcy5wcmVmaXhGb3JVc2VyKHRoaXMudXNlcklkKSksIHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBTaSh0KS5LdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0WzBdID09PSB0aGlzLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gQXModFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIEwoMCA9PT0gcy5sZW5ndGgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZpKHQsIHRoaXMudXNlcklkLCBlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXG4gICAgZWUodCkge1xuICAgICAgICByZXR1cm4gRGkodCkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KCh0ID0+IHQgfHwgbmV3IGJzKHRoaXMudXNlcklkLCAtMSwgXG4gICAgICAgIC8qbGFzdFN0cmVhbVRva2VuPSovIFwiXCIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gdmkodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBWcy5wcmVmaXhGb3JQYXRoKGUsIG4ucGF0aCksIGkgPSBzWzFdLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChzKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBTaSh0KS5LdCh7XG4gICAgICAgIHJhbmdlOiByLFxuICAgICAgICBxdDogITBcbiAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgY29uc3QgW3IsIGEsIC8qYmF0Y2hJRCovIGNdID0gdDtcbiAgICAgICAgciA9PT0gZSAmJiBhID09PSBpICYmIChvID0gITApLCBzLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24gVmkodCkge1xuICAgIHJldHVybiB0aSh0LCB2cy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gU2kodCkge1xuICAgIHJldHVybiB0aSh0LCBWcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gRGkodCkge1xuICAgIHJldHVybiB0aSh0LCBicy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgQ2kge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5uZSA9IHQ7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5lICs9IDIsIHRoaXMubmU7XG4gICAgfVxuICAgIHN0YXRpYyBzZSgpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgQ2koMCk7XG4gICAgfVxuICAgIHN0YXRpYyBpZSgpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgQ2koLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgTmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQsIHRoaXMuTiA9IGU7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IENpKGUuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiBlLmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLm9lKHQsIGUpLm5leHQoKCgpID0+IGUuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlKHQpLm5leHQoKHQgPT4gaXQuZnJvbVRpbWVzdGFtcChuZXcgc3QodC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlKHQpLm5leHQoKHQgPT4gdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgocyA9PiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCBuICYmIChzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgZSA+IHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUpLCB0aGlzLm9lKHQsIHMpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWUodCwgZSkubmV4dCgoKCkgPT4gdGhpcy5yZSh0KS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMuY2UoZSwgbiksIFxuICAgICAgICB0aGlzLm9lKHQsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKCgpID0+IHhpKHQpLmRlbGV0ZShlLnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMucmUodCkpKS5uZXh0KChlID0+IChMKGUudGFyZ2V0Q291bnQgPiAwKSwgXG4gICAgICAgIGUudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5vZSh0LCBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4geGkodCkuS3QoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gZmkobyk7XG4gICAgICAgICAgICBhLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoYS50YXJnZXRJZCkgJiYgKHMrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0LCBhKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gS3Mud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4geGkodCkuS3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gZmkobik7XG4gICAgICAgICAgICBlKHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlKHQpIHtcbiAgICAgICAgcmV0dXJuIGtpKHQpLmdldCgkcy5rZXkpLm5leHQoKHQgPT4gKEwobnVsbCAhPT0gdCksIHQpKSk7XG4gICAgfVxuICAgIG9lKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGtpKHQpLnB1dCgkcy5rZXksIGUpO1xuICAgIH1cbiAgICBhZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB4aSh0KS5wdXQoZGkodGhpcy5OLCBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cbiAgICAgKi8gICAgY2UodCwgZSkge1xuICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICByZXR1cm4gdC50YXJnZXRJZCA+IGUuaGlnaGVzdFRhcmdldElkICYmIChlLmhpZ2hlc3RUYXJnZXRJZCA9IHQudGFyZ2V0SWQsIG4gPSAhMCksIFxuICAgICAgICB0LnNlcXVlbmNlTnVtYmVyID4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdC5zZXF1ZW5jZU51bWJlciwgXG4gICAgICAgIG4gPSAhMCksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgodCA9PiB0LnRhcmdldENvdW50KSk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXG4gICAgICAgIGNvbnN0IG4gPSBRdChlKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiB4aSh0KS5LdCh7XG4gICAgICAgICAgICByYW5nZTogcyxcbiAgICAgICAgICAgIGluZGV4OiB4cy5xdWVyeVRhcmdldHNJbmRleE5hbWVcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gZmkobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgR3QoZSwgci50YXJnZXQpICYmIChpID0gciwgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFtdLCBpID0gJGkodCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IEVzKGUucGF0aCk7XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQobmV3IGtzKG4sIHIpKSksIHMucHVzaCh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBuLCBlKSk7XG4gICAgICAgIH0pKSwgS3Mud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHMgPSAkaSh0KTtcbiAgICAgICAgcmV0dXJuIEtzLmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IEVzKGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gS3Mud2FpdEZvcihbIHMuZGVsZXRlKFsgbiwgaSBdKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgbiwgZSkgXSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gJGkodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShzKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApLCBzID0gJGkodCk7XG4gICAgICAgIGxldCBpID0gUG4oKTtcbiAgICAgICAgcmV0dXJuIHMuS3Qoe1xuICAgICAgICAgICAgcmFuZ2U6IG4sXG4gICAgICAgICAgICBxdDogITBcbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gQXModFsxXSksIHIgPSBuZXcgUHQocyk7XG4gICAgICAgICAgICBpID0gaS5hZGQocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEVzKGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4gXSwgWyBudChuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuICRpKHQpLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiBrcy5kb2N1bWVudFRhcmdldHNJbmRleCxcbiAgICAgICAgICAgIHF0OiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoW3QsIGVdLCBuLCBzKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IHQgJiYgKGkrKywgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgRXQodCwgZSkge1xuICAgICAgICByZXR1cm4geGkodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IGZpKHQpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHhpKHQpIHtcbiAgICByZXR1cm4gdGkodCwgeHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGtpKHQpIHtcbiAgICByZXR1cm4gdGkodCwgJHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiAkaSh0KSB7XG4gICAgcmV0dXJuIHRpKHQsIGtzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIE9pKHQpIHtcbiAgICBpZiAodC5jb2RlICE9PSBxLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5tZXNzYWdlICE9PSBVcykgdGhyb3cgdDtcbiAgICBrKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEZpKFt0LCBlXSwgW24sIHNdKSB7XG4gICAgY29uc3QgaSA9IHR0KHQsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gdHQoZSwgcykgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyBNaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnVlID0gdCwgdGhpcy5idWZmZXIgPSBuZXcgbW4oRmkpLCB0aGlzLmhlID0gMDtcbiAgICB9XG4gICAgbGUoKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMuaGU7XG4gICAgfVxuICAgIGZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFsgdCwgdGhpcy5sZSgpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy51ZSkgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIEZpKGUsIHQpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUodCkuYWRkKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIExpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMuZGUgPSAhMSwgdGhpcy53ZSA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLl9lKHQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLndlICYmICh0aGlzLndlLmNhbmNlbCgpLCB0aGlzLndlID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy53ZTtcbiAgICB9XG4gICAgX2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kZSA/IDNlNSA6IDZlNDtcbiAgICAgICAgayhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHtlfW1zYCksIHRoaXMud2UgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53ZSA9IG51bGwsIHRoaXMuZGUgPSAhMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIHpzKHQpID8gayhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIHQpIDogYXdhaXQgT2kodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9lKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uICovIGNsYXNzIEJpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubWUgPSB0LCB0aGlzLnBhcmFtcyA9IGU7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWUuZ2UodCkubmV4dCgodCA9PiBNYXRoLmZsb29yKGUgLyAxMDAgKiB0KSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcih0LCBlKSB7XG4gICAgICAgIGlmICgwID09PSBlKSByZXR1cm4gS3MucmVzb2x2ZShZLlQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IE1pKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5mb3JFYWNoVGFyZ2V0KHQsICh0ID0+IG4uZmUodC5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLm1lLnllKHQsICh0ID0+IG4uZmUodCkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWUucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSk7XG4gICAgfVxuICAgIGNvbGxlY3QodCwgZSkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoayhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWRcIiksIFxuICAgICAgICBLcy5yZXNvbHZlKElpKSkgOiB0aGlzLmdldENhY2hlU2l6ZSh0KS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKGsoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSAke259IGlzIGxvd2VyIHRoYW4gdGhyZXNob2xkICR7dGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZH1gKSwgXG4gICAgICAgIElpKSA6IHRoaXMucGUodCwgZSkpKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWUuZ2V0Q2FjaGVTaXplKHQpO1xuICAgIH1cbiAgICBwZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzLCBpLCByLCBvLCBhLCB1O1xuICAgICAgICBjb25zdCBoID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcbiAgICAgICAgZSA+IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPyAoayhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7ZX1gKSwgXG4gICAgICAgIHMgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHMgPSBlLCByID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0LCBzKSkpKS5uZXh0KChzID0+IChuID0gcywgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHModCwgbiwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIGEgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBuKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh1ID0gRGF0ZS5ub3coKSwgTigpIDw9IGMuREVCVUcpIHtcbiAgICAgICAgICAgICAgICBrKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3IgLSBofW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7c30gaW4gYCArIChvIC0gcikgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChhIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke3R9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBhKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gaH1tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXG5jbGFzcyBVaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRiID0gdCwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaSh0LCBlKTtcbiAgICAgICAgfSh0aGlzLCBlKTtcbiAgICB9XG4gICAgZ2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5FZSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIEVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy55ZSh0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHllKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVGUodCwgKCh0LCBuKSA9PiBlKG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBxaSh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHFpKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBxaSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgSWUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBEaSh0KS5qdCgocyA9PiB2aSh0LCBzLCBlKS5uZXh0KCh0ID0+ICh0ICYmIChuID0gITApLCBLcy5yZXNvbHZlKCF0KSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5UZSh0LCAoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5JZSh0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkodCwgcikubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkociksICRpKHQpLmRlbGV0ZShbIDAsIEVzKHIucGF0aCkgXSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IEtzLndhaXRGb3IocykpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gcWkodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgVGUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gJGkodCk7XG4gICAgICAgIGxldCBzLCBpID0gWS5UO1xuICAgICAgICByZXR1cm4gbi5LdCh7XG4gICAgICAgICAgICBpbmRleDoga3MuZG9jdW1lbnRUYXJnZXRzSW5kZXhcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IFkuVCAmJiBlKG5ldyBQdChBcyhzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBZLlQ7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gWS5UICYmIGUobmV3IFB0KEFzKHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBxaSh0LCBlKSB7XG4gICAgcmV0dXJuICRpKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcga3MoMCwgRXModC5wYXRoKSwgZSk7XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqLyBjbGFzcyBLaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gdCwgdGhpcy5lcXVhbHNGbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fTtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykge1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgICAgICBzLnB1c2goWyB0LCBlIF0pO1xuICAgICAgICB9IGVsc2UgdGhpcy5pbm5lcltuXSA9IFsgWyB0LCBlIF0gXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIG90KHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gYXQodGhpcy5pbm5lcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3Mgamkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcbiAgICAgICAgLy8gZXhpc3RpbmcgY2FjaGUgZW50cnkgc2hvdWxkIGJlIHJlbW92ZWQpLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgS2koKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICBnZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IGUucmVhZFRpbWUgOiBpdC5taW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdCxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBxdC5uZXdJbnZhbGlkRG9jdW1lbnQodCksXG4gICAgICAgICAgICByZWFkVGltZTogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IEtzLnJlc29sdmUobi5kb2N1bWVudCkgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBRaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLk4gPSB0LCB0aGlzLkh0ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gemkodCkucHV0KEhpKGUpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB6aSh0KSwgcyA9IEhpKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5BZSh0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICByZXR1cm4gemkodCkuZ2V0KEhpKGUpKS5uZXh0KCh0ID0+IHRoaXMuUmUoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgUGUodCwgZSkge1xuICAgICAgICByZXR1cm4gemkodCkuZ2V0KEhpKGUpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudDogdGhpcy5SZShlLCB0KSxcbiAgICAgICAgICAgIHNpemU6IFBpKHQpXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IHBuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmJlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuUmUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIHZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBwbigpLCBzID0gbmV3IGRuKFB0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5iZSh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLlJlKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgUGkoZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIFZlOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGJlKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4gS3MucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoZS5maXJzdCgpLnBhdGgudG9BcnJheSgpLCBlLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSksIGkgPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiB6aSh0KS5LdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBQdC5mcm9tU2VnbWVudHModCk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ciAmJiBQdC5jb21wYXJhdG9yKHIsIG8pIDwgMDsgKSBuKHIsIG51bGwpLCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgICAgICByICYmIHIuaXNFcXVhbChvKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKHIsIGUpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgciA/IHMuTXQoci5wYXRoLnRvQXJyYXkoKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO3I7ICkgbihyLCBudWxsKSwgciA9IGkuaGFzTmV4dCgpID8gaS5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHBuKCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLnBhdGgubGVuZ3RoICsgMSwgciA9IHt9O1xuICAgICAgICBpZiAobi5pc0VxdWFsKGl0Lm1pbigpKSkge1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xuICAgICAgICAgICAgLy8gZG93biB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHIucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBpbmRleC1mcmVlIHF1ZXJ5IGFuZCBmaWx0ZXIgYnkgcmVhZCB0aW1lLiBUaGlzIGlzIHNhZmVcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcbiAgICAgICAgICAgIC8vIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gKGBzaW5jZVJlYWRUaW1lYCkgaGF2ZSBhIHJlYWQgdGltZSBzZXQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKSwgcyA9IGFpKG4pO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0LCBzIF0sIFxuICAgICAgICAgICAgLyogb3Blbj0gKi8gITApLCByLmluZGV4ID0gQ3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHppKHQpLkt0KHIsICgodCwgbiwgcikgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBwcmVmaXggd2hpY2ggbWF5IGluY2x1ZGUgZG9jdW1lbnRzIGluIHN1YmNvbGxlY3Rpb25zLiBGb3JcbiAgICAgICAgICAgIC8vIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyB3aWxsIHJldHVybiByb29tcy9hYmMvbWVzc2FnZXMveHl4IGJ1dCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5IHBhdGguXG4gICAgICAgICAgICBpZiAodC5sZW5ndGggIT09IGkpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSByaSh0aGlzLk4sIG4pO1xuICAgICAgICAgICAgZS5wYXRoLmlzUHJlZml4T2Yoby5rZXkucGF0aCkgPyBQZShlLCBvKSAmJiAocyA9IHMuaW5zZXJ0KG8ua2V5LCBvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXaSh0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiBHaSh0KS5nZXQoTnMua2V5KS5uZXh0KCh0ID0+IChMKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIEFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdpKHQpLnB1dChOcy5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGByZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgbnVsbCwgaWYgdGhlIGRvY3VtZW50XG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgUmUodCwgZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHJpKHRoaXMuTiwgZSk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmlzTm9Eb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKGl0Lm1pbigpKSkpIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBxdC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqL1xuY2xhc3MgV2kgZXh0ZW5kcyBqaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlNlID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkRlID0gbmV3IEtpKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3IG1uKCgodCwgZSkgPT4gdHQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuRGUuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHIuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gb2kodGhpcy5TZS5OLCByLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBzID0gcy5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IFBpKGEpO1xuICAgICAgICAgICAgICAgIG4gKz0gYyAtIG8sIGUucHVzaCh0aGlzLlNlLmFkZEVudHJ5KHQsIGksIGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gb2kodGhpcy5TZS5OLCBxdC5uZXdOb0RvY3VtZW50KGksIGl0Lm1pbigpKSwgdGhpcy5nZXRSZWFkVGltZShpKSk7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuU2UuYWRkRW50cnkodCwgaSwgbikpO1xuICAgICAgICAgICAgfSBlbHNlIGUucHVzaCh0aGlzLlNlLnJlbW92ZUVudHJ5KHQsIGkpKTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMuU2UuSHQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbikpO1xuICAgICAgICB9KSksIGUucHVzaCh0aGlzLlNlLnVwZGF0ZU1ldGFkYXRhKHQsIG4pKSwgS3Mud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5TZS5QZSh0LCBlKS5uZXh0KCh0ID0+ICh0aGlzLkRlLnNldChlLCB0LnNpemUpLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLlNlLnZlKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBWZTogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRGUuc2V0KHQsIGUpO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBHaSh0KSB7XG4gICAgcmV0dXJuIHRpKHQsIE5zLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gemkodCkge1xuICAgIHJldHVybiB0aSh0LCBDcy5zdG9yZSk7XG59XG5cbmZ1bmN0aW9uIEhpKHQpIHtcbiAgICByZXR1cm4gdC5wYXRoLnRvQXJyYXkoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyBKaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk4gPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIEN0KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgTChuIDwgcyAmJiBuID49IDAgJiYgcyA8PSAxMSk7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcganMoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShQcy5zdG9yZSk7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoYnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBicy5rZXlQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUodnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiB2cy5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleCh2cy51c2VyTXV0YXRpb25zSW5kZXgsIHZzLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoVnMuc3RvcmUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgWWkodCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoQ3Muc3RvcmUpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0gS3MucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKGtzLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZSh4cy5zdG9yZSksIHQuZGVsZXRlT2JqZWN0U3RvcmUoJHMuc3RvcmUpO1xuICAgICAgICB9KHQpLCBZaSh0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoJHMuc3RvcmUpLCBuID0gbmV3ICRzKFxuICAgICAgICAgICAgLypoaWdoZXN0VGFyZ2V0SWQ9Ki8gMCwgXG4gICAgICAgICAgICAvKmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj0qLyAwLCBpdC5taW4oKS50b1RpbWVzdGFtcCgpLCBcbiAgICAgICAgICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoJHMua2V5LCBuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgaW5kaWNlcyBvbiB0aGUgUmVtb3RlRG9jdW1lbnRzIHN0b3JlIHVzZWQgZm9yIGJvdGggbXVsdGktdGFiXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICovIChpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZSh2cy5zdG9yZSkuTHQoKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKHZzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKHZzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IHZzLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgodnMudXNlck11dGF0aW9uc0luZGV4LCB2cy51c2VyTXV0YXRpb25zS2V5UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUodnMuc3RvcmUpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gS3Mud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEZzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IEZzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5DZShpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShOcy5zdG9yZSk7XG4gICAgICAgIH0odCksIHRoaXMuTmUoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMueGUoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5rZSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5vYmplY3RTdG9yZShDcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleChDcy5yZWFkVGltZUluZGV4LCBDcy5yZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoQ3MuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgsIENzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy4kZShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShNcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBNcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShMcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBMcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgIH0pKSksIHI7XG4gICAgfVxuICAgIE5lKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShDcy5zdG9yZSkuS3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IFBpKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBOcyhlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKE5zLnN0b3JlKS5wdXQoTnMua2V5LCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBDZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKGJzLnN0b3JlKSwgbiA9IHQuc3RvcmUodnMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5MdCgpLm5leHQoKGUgPT4gS3MuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLnVzZXJJZCwgLTEgXSwgWyBlLnVzZXJJZCwgZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLkx0KHZzLnVzZXJNdXRhdGlvbnNJbmRleCwgcykubmV4dCgobiA9PiBLcy5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBMKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGxpKHRoaXMuTiwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIHhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoa3Muc3RvcmUpLCBuID0gdC5zdG9yZShDcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKCRzLnN0b3JlKS5nZXQoJHMua2V5KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLkt0KCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgdXQobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIEVzKHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8gS3MucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQobmV3IGtzKDAsIEVzKG4pLCB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBLcy53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2UodCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKE9zLnN0b3JlLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBPcy5rZXlQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShPcy5zdG9yZSksIHMgPSBuZXcgcGksIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogRXMocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoQ3Muc3RvcmUpLkt0KHtcbiAgICAgICAgICAgIHF0OiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgdXQodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKFZzLnN0b3JlKS5LdCh7XG4gICAgICAgICAgICBxdDogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBBcyhlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgICRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoeHMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5LdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBmaShuKSwgaSA9IGRpKHRoaXMuTiwgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFlpKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKGtzLnN0b3JlLCB7XG4gICAgICAgIGtleVBhdGg6IGtzLmtleVBhdGhcbiAgICB9KS5jcmVhdGVJbmRleChrcy5kb2N1bWVudFRhcmdldHNJbmRleCwga3MuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoeHMuc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDogeHMua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KHhzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSwgeHMucXVlcnlUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoJHMuc3RvcmUpO1xufVxuXG5jb25zdCBYaSA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBaaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIGEsIGMsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIHUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLk9lID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5GZSA9IGMsIHRoaXMuTWUgPSB1LCB0aGlzLkxlID0gbnVsbCwgXG4gICAgICAgIHRoaXMuQmUgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuVWUgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5xZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMuS2UgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuamUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLlFlID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIVppLlB0KCkpIHRocm93IG5ldyBLKHEuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IFVpKHRoaXMsIHMpLCB0aGlzLldlID0gZSArIFwibWFpblwiLCB0aGlzLk4gPSBuZXcgaWkoYSksIFxuICAgICAgICB0aGlzLkdlID0gbmV3IFFzKHRoaXMuV2UsIDExLCBuZXcgSmkodGhpcy5OKSksIHRoaXMuemUgPSBuZXcgTmkodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5OKSwgXG4gICAgICAgIHRoaXMuSHQgPSBuZXcgRWksIHRoaXMuSGUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFFpKHQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgc3BlY2lmaWVkIHJlYWRcbiAqIHRpbWUuXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgKHRoaXMuTiwgdGhpcy5IdCksIHRoaXMuSmUgPSBuZXcgX2ksIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuWWUgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5ZZSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLlhlKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgSyhxLkZBSUxFRF9QUkVDT05ESVRJT04sIFhpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlplKCksIHRoaXMudG4oKSwgdGhpcy5lbigpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy56ZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5MZSA9IG5ldyBZKHQsIHRoaXMuRmUpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5CZSA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMuR2UgJiYgdGhpcy5HZS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIG5uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWUgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLkdlLnh0KChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuWGUoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBYZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gZXIodCkucHV0KG5ldyBGcyh0aGlzLmNsaWVudElkLCBEYXRlLm5vdygpLCB0aGlzLm5ldHdvcmtFbmFibGVkLCB0aGlzLmluRm9yZWdyb3VuZCkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuc24odCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFlKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMucm4odCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5vbih0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMuYW4odCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHpzKHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBrKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuIGsoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuUWUodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNuKHQpIHtcbiAgICAgICAgcmV0dXJuIHRyKHQpLmdldChQcy5rZXkpLm5leHQoKHQgPT4gS3MucmVzb2x2ZSh0aGlzLmNuKHQpKSkpO1xuICAgIH1cbiAgICB1bih0KSB7XG4gICAgICAgIHJldHVybiBlcih0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBobigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmxuKHRoaXMuamUsIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLmplID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRpKHQsIEZzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5MdCgpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5mbih0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEtzLmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ZZSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuWWUucmVtb3ZlSXRlbSh0aGlzLmRuKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIGVuKCkge1xuICAgICAgICB0aGlzLktlID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy5YZSgpLnRoZW4oKCgpID0+IHRoaXMuaG4oKSkpLnRoZW4oKCgpID0+IHRoaXMuZW4oKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICBjbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgdC5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBybih0KSB7XG4gICAgICAgIGlmICh0aGlzLk1lKSByZXR1cm4gS3MucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiB0cih0KS5nZXQoUHMua2V5KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLmxuKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy53bihlLm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY24oZSkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbihlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBLKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgWGkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBlcih0KS5MdCgpLm5leHQoKHQgPT4gdm9pZCAwID09PSB0aGlzLmZuKHQsIDVlMykuZmluZCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IHQuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIHQubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgdC5pbkZvcmVncm91bmQsIHMgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSB0Lm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCBuICYmIHMpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiBrKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke3QgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5CZSA9ICExLCB0aGlzLl9uKCksIHRoaXMuS2UgJiYgKHRoaXMuS2UuY2FuY2VsKCksIHRoaXMuS2UgPSBudWxsKSwgdGhpcy5tbigpLCBcbiAgICAgICAgdGhpcy5nbigpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuR2UucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFBzLnN0b3JlLCBGcy5zdG9yZSBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFpzKHQsIFkuVCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbihlKS5uZXh0KCgoKSA9PiB0aGlzLnVuKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5HZS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMueW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgZm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5maWx0ZXIoKHQgPT4gdGhpcy5sbih0LnVwZGF0ZVRpbWVNcywgZSkgJiYgIXRoaXMud24odC5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgcG4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IGVyKHQpLkx0KCkubmV4dCgodCA9PiB0aGlzLmZuKHQsIDE4ZTUpLm1hcCgodCA9PiB0LmNsaWVudElkKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQmU7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCkge1xuICAgICAgICByZXR1cm4gYmkuWXQodCwgdGhpcy5OLCB0aGlzLkh0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnplO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IdDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGsoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IFwicmVhZG9ubHlcIiA9PT0gZSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCI7XG4gICAgICAgIGxldCBpO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5HZS5ydW5UcmFuc2FjdGlvbih0LCBzLCBCcywgKHMgPT4gKGkgPSBuZXcgWnMocywgdGhpcy5MZSA/IHRoaXMuTGUubmV4dCgpIDogWS5UKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMuc24oaSkubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5ybihpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyAkKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFlKCExKSkpLCBuZXcgSyhxLkZBSUxFRF9QUkVDT05ESVRJT04sIFVzKTtcbiAgICAgICAgICAgIHJldHVybiBuKGkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLmFuKGkpLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5FbihpKS5uZXh0KCgoKSA9PiBuKGkpKSkpKSkudGhlbigodCA9PiAoaS5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIEVuKHQpIHtcbiAgICAgICAgcmV0dXJuIHRyKHQpLmdldChQcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5sbih0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMud24odC5vd25lcklkKSAmJiAhdGhpcy5jbih0KSAmJiAhKHRoaXMuTWUgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IEsocS5GQUlMRURfUFJFQ09ORElUSU9OLCBYaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBhbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgUHModGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XG4gICAgICAgIHJldHVybiB0cih0KS5wdXQoUHMua2V5LCBlKTtcbiAgICB9XG4gICAgc3RhdGljIFB0KCkge1xuICAgICAgICByZXR1cm4gUXMuUHQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgb24odCkge1xuICAgICAgICBjb25zdCBlID0gdHIodCk7XG4gICAgICAgIHJldHVybiBlLmdldChQcy5rZXkpLm5leHQoKHQgPT4gdGhpcy5jbih0KSA/IChrKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShQcy5rZXkpKSA6IEtzLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgbG4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKCQoYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIFplKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLnFlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5YZSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMucWUpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIG1uKCkge1xuICAgICAgICB0aGlzLnFlICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMucWUpLCB0aGlzLnFlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICB0bigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMuVWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5fbigpLCBoKCkgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goXCJWZXJzaW9uLzE0XCIpICYmIFxuICAgICAgICAgICAgLy8gT24gU2FmYXJpIDE0LCB3ZSBkbyBub3QgcnVuIGFueSBjbGVhbnVwIGFjdGlvbnMgYXMgaXQgbWlnaHQgdHJpZ2dlclxuICAgICAgICAgICAgLy8gYSBidWcgdGhhdCBwcmV2ZW50cyBTYWZhcmkgZnJvbSByZS1vcGVuaW5nIEluZGV4ZWREQiBkdXJpbmcgdGhlXG4gICAgICAgICAgICAvLyBuZXh0IHBhZ2UgbG9hZC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI2NTQ3XG4gICAgICAgICAgICB0aGlzLk9lLmVudGVyUmVzdHJpY3RlZE1vZGUoLyogcHVyZ2VFeGlzdGluZ1Rhc2tzPSAqLyAhMCksIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSk7XG4gICAgICAgIH0sIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLlVlKSk7XG4gICAgfVxuICAgIGduKCkge1xuICAgICAgICB0aGlzLlVlICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5VZSksIHRoaXMuVWUgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cbiAgICAgKi8gICAgd24odCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAobnVsbCA9PT0gKGUgPSB0aGlzLlllKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmdldEl0ZW0odGhpcy5kbih0KSkpO1xuICAgICAgICAgICAgcmV0dXJuIGsoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICcke3R9JyAke24gPyBcImlzXCIgOiBcImlzIG5vdFwifSB6b21iaWVkIGluIExvY2FsU3RvcmFnZWApLCBcbiAgICAgICAgICAgIG47XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgcmV0dXJuICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuXCIsIHQpLCAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgX24oKSB7XG4gICAgICAgIGlmICh0aGlzLlllKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5ZZS5zZXRJdGVtKHRoaXMuZG4odGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgJChcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIiwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi8gICAgeW4oKSB7XG4gICAgICAgIGlmICh0aGlzLlllKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5ZZS5yZW1vdmVJdGVtKHRoaXMuZG4odGhpcy5jbGllbnRJZCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICBkbih0KSB7XG4gICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3pvbWJpZV8ke3RoaXMucGVyc2lzdGVuY2VLZXl9XyR7dH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiB0cih0KSB7XG4gICAgcmV0dXJuIHRpKHQsIFBzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiB0aSh0LCBGcy5zdG9yZSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHVzZWQgYXMgYSBwcmVmaXggd2hlbiBzdG9yaW5nIGRhdGEgaW4gSW5kZXhlZERCIGFuZFxuICogTG9jYWxTdG9yYWdlLlxuICovIGZ1bmN0aW9uIG5yKHQsIGUpIHtcbiAgICAvLyBVc2UgdHdvIGRpZmZlcmVudCBwcmVmaXggZm9ybWF0czpcbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLiBkYXRhYmFzZUlEIC8gLi4uXG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC8gLi4uXG4gICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcbiAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxuICAgIGxldCBuID0gdC5wcm9qZWN0SWQ7XG4gICAgcmV0dXJuIHQuaXNEZWZhdWx0RGF0YWJhc2UgfHwgKG4gKz0gXCIuXCIgKyB0LmRhdGFiYXNlKSwgXCJmaXJlc3RvcmUvXCIgKyBlICsgXCIvXCIgKyBuICsgXCIvXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBzciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gdCwgdGhpcy5UbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICovIGNsYXNzIGlyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuSGUgPSB0LCB0aGlzLkluID0gZSwgdGhpcy5IdCA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBBbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkluLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpLm5leHQoKG4gPT4gdGhpcy5Sbih0LCBlLCBuKSkpO1xuICAgIH1cbiAgICAvKiogSW50ZXJuYWwgdmVyc2lvbiBvZiBgZ2V0RG9jdW1lbnRgIHRoYXQgYWxsb3dzIHJldXNpbmcgYmF0Y2hlcy4gKi8gICAgUm4odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5IZS5nZXRFbnRyeSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBlLmFwcGx5VG9Mb2NhbFZpZXcodCk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2aWV3IG9mIHRoZSBnaXZlbiBgZG9jc2AgYXMgdGhleSB3b3VsZCBhcHBlYXIgYWZ0ZXIgYXBwbHlpbmdcbiAgICAvLyBhbGwgbXV0YXRpb25zIGluIHRoZSBnaXZlbiBgYmF0Y2hlc2AuXG4gICAgUG4odCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgdC5hcHBseVRvTG9jYWxWaWV3KG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICBibih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhlLmdldEVudHJpZXModCwgZSkubmV4dCgoZSA9PiB0aGlzLnZuKHQsIGUpLm5leHQoKCgpID0+IGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBsb2NhbCB2aWV3IHRoZSBnaXZlbiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHNcbiAgICAgKiBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cbiAgICAgKi8gICAgdm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkubmV4dCgodCA9PiB0aGlzLlBuKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gc2luY2VSZWFkVGltZSAtIElmIG5vdCBzZXQgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLCByZXR1cm4gb25seVxuICAgICAqICAgICBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gcmVhZCBzaW5jZSB0aGlzIHNuYXBzaG90IHZlcnNpb24gKGV4Y2x1c2l2ZSkuXG4gICAgICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICAvKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIHNpbmdsZSBkb2N1bWVudCBieSBwYXRoIChyYXRoZXIgdGhhbiBhXG4gKiBjb2xsZWN0aW9uKS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFB0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KGUpID8gdGhpcy5Wbih0LCBlLnBhdGgpIDogeWUoZSkgPyB0aGlzLlNuKHQsIGUsIG4pIDogdGhpcy5Ebih0LCBlLCBuKTtcbiAgICB9XG4gICAgVm4odCwgZSkge1xuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cbiAgICAgICAgcmV0dXJuIHRoaXMuQW4odCwgbmV3IFB0KGUpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gVG4oKTtcbiAgICAgICAgICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIChlID0gZS5pbnNlcnQodC5rZXksIHQpKSwgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBTbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IGkgPSBUbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5IdC5nZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBzKS5uZXh0KChyID0+IEtzLmZvckVhY2gociwgKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGxlKGUsIFxuICAgICAgICAgICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcXVlcnkgZG9lcyBub3Qgc3BlY2lmeSBhbnkgcXVlcnkgY29uc3RyYWludHMgdGhhdFxuICogY291bGQgcmVtb3ZlIHJlc3VsdHMuXG4gKi8gKGUsIHIuY2hpbGQocykpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuRG4odCwgbywgbikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpID0gaS5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpKSk7XG4gICAgfVxuICAgIERuKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUXVlcnkgdGhlIHJlbW90ZSBkb2N1bWVudHMgYW5kIG92ZXJsYXkgbXV0YXRpb25zLlxuICAgICAgICBsZXQgcywgaTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKS5uZXh0KChuID0+IChzID0gbiwgdGhpcy5Jbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgXG4gICAgICAgIHRoaXMuQ24odCwgaSwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBzID0gdDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBpKSBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5rZXk7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSBzLmdldChuKTtcbiAgICAgICAgICAgICAgICBudWxsID09IGkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBpbnZhbGlkIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyBvbiB0b3Agb2ZcbiAgICAgICAgICAgICAgICBpID0gcXQubmV3SW52YWxpZERvY3VtZW50KG4pLCBzID0gcy5pbnNlcnQobiwgaSkpLCBKZShlLCBpLCB0LmxvY2FsV3JpdGVUaW1lKSwgaS5pc0ZvdW5kRG9jdW1lbnQoKSB8fCAocyA9IHMucmVtb3ZlKG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IChcbiAgICAgICAgLy8gRmluYWxseSwgZmlsdGVyIG91dCBhbnkgZG9jdW1lbnRzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgbWF0Y2hcbiAgICAgICAgLy8gdGhlIHF1ZXJ5LlxuICAgICAgICBzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBQZShlLCBuKSB8fCAocyA9IHMucmVtb3ZlKHQpKTtcbiAgICAgICAgfSkpLCBzKSkpO1xuICAgIH1cbiAgICBDbih0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gUG4oKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgZSBpbnN0YW5jZW9mIGVuICYmIG51bGwgPT09IG4uZ2V0KGUua2V5KSAmJiAocyA9IHMuYWRkKGUua2V5KSk7XG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGUuZ2V0RW50cmllcyh0LCBzKS5uZXh0KCh0ID0+ICh0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBlLmlzRm91bmREb2N1bWVudCgpICYmIChpID0gaS5pbnNlcnQodCwgZSkpO1xuICAgICAgICB9KSksIGkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxuICovIGNsYXNzIHJyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGUsIHRoaXMuTm4gPSBuLCB0aGlzLnhuID0gcztcbiAgICB9XG4gICAgc3RhdGljIGtuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBQbigpLCBzID0gUG4oKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZG9jQ2hhbmdlcykgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKHQuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgIHMgPSBzLmFkZCh0LmRvYy5rZXkpO1xuIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgcnIodCwgZS5mcm9tQ2FjaGUsIG4sIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBxdWVyeSBlbmdpbmUgdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldCBkb2N1bWVudCBtYXBwaW5nIGluIHRoZVxuICogUXVlcnlDYWNoZS4gUXVlcnkgZXhlY3V0aW9uIGlzIG9wdGltaXplZCBieSBvbmx5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyB0aGF0XG4gKiBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueSBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGVcbiAqIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxuICpcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZW4gdGhpcyBvcHRpbWl6YXRpb24gaXMgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCBxdWVyeVxuICogcHJvY2Vzc2luZyBmYWxscyBiYWNrIHRvIGZ1bGwgc2NhbnMuIFRoZXNlIGNhc2VzIGFyZTpcbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBsaW1ibyBkb2N1bWVudHMuXG4gKi8gY2xhc3Mgb3Ige1xuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovXG4gICAgJG4odCkge1xuICAgICAgICB0aGlzLk9uID0gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYWxsIGxvY2FsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHF1ZXJ5LiAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0LmZpbHRlcnMubGVuZ3RoICYmIG51bGwgPT09IHQubGltaXQgJiYgbnVsbCA9PSB0LnN0YXJ0QXQgJiYgbnVsbCA9PSB0LmVuZEF0ICYmICgwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggfHwgMSA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoICYmIHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkLmlzS2V5RmllbGQoKSk7XG4gICAgICAgIH0oZSkgfHwgbi5pc0VxdWFsKGl0Lm1pbigpKSA/IHRoaXMuRm4odCwgZSkgOiB0aGlzLk9uLmJuKHQsIHMpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuTW4oZSwgaSk7XG4gICAgICAgICAgICByZXR1cm4gKHdlKGUpIHx8IF9lKGUpKSAmJiB0aGlzLkxuKGUubGltaXRUeXBlLCByLCBzLCBuKSA/IHRoaXMuRm4odCwgZSkgOiAoTigpIDw9IGMuREVCVUcgJiYgayhcIlF1ZXJ5RW5naW5lXCIsIFwiUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXNcIiwgbi50b1N0cmluZygpLCBSZShlKSksIFxuICAgICAgICAgICAgdGhpcy5Pbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pLm5leHQoKHQgPT4gKFxuICAgICAgICAgICAgLy8gV2UgbWVyZ2UgYHByZXZpb3VzUmVzdWx0c2AgaW50byBgdXBkYXRlUmVzdWx0c2AsIHNpbmNlXG4gICAgICAgICAgICAvLyBgdXBkYXRlUmVzdWx0c2AgaXMgYWxyZWFkeSBhIERvY3VtZW50TWFwLiBJZiBhIGRvY3VtZW50IGlzXG4gICAgICAgICAgICAvLyBjb250YWluZWQgaW4gYm90aCBsaXN0cywgdGhlbiBpdHMgY29udGVudHMgYXJlIHRoZSBzYW1lLlxuICAgICAgICAgICAgci5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQoZS5rZXksIGUpO1xuICAgICAgICAgICAgfSkpLCB0KSkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAgICAgICAgfVxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovICAgIE1uKHQsIGUpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICAgIGxldCBuID0gbmV3IG1uKGJlKHQpKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIFBlKHQsIHMpICYmIChuID0gbi5hZGQocykpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgTG4odCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxuICAgICAgICBpZiAobi5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gXCJGXCIgLyogRmlyc3QgKi8gPT09IHQgPyBlLmxhc3QoKSA6IGUuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuICEhaSAmJiAoaS5oYXNQZW5kaW5nV3JpdGVzIHx8IGkudmVyc2lvbi5jb21wYXJlVG8ocykgPiAwKTtcbiAgICB9XG4gICAgRm4odCwgZSkge1xuICAgICAgICByZXR1cm4gTigpIDw9IGMuREVCVUcgJiYgayhcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgUmUoZSkpLCBcbiAgICAgICAgdGhpcy5Pbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIGl0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLkJuID0gZSwgdGhpcy5OID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5VbiA9IG5ldyBkbih0dCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLnFuID0gbmV3IEtpKCh0ID0+IFF0KHQpKSwgR3QpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWFkIHRpbWUgb2YgdGhlIGxhc3QgZW50cnkgcHJvY2Vzc2VkIGJ5IGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLktuID0gaXQubWluKCksIHRoaXMuSW4gPSB0LmdldE11dGF0aW9uUXVldWUobiksIHRoaXMuam4gPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuemUgPSB0LmdldFRhcmdldENhY2hlKCksIHRoaXMuUW4gPSBuZXcgaXIodGhpcy5qbiwgdGhpcy5JbiwgdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSksIFxuICAgICAgICB0aGlzLkplID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLkJuLiRuKHRoaXMuUW4pO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMuVW4pKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcihcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IGFyKHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIHVyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICBsZXQgcyA9IG4uSW4sIGkgPSBuLlFuO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLkluLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChvID0+IChyID0gbywgcyA9IG4ucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlKSwgXG4gICAgICAgIC8vIFJlY3JlYXRlIG91ciBMb2NhbERvY3VtZW50c1ZpZXcgdXNpbmcgdGhlIG5ld1xuICAgICAgICAvLyBNdXRhdGlvblF1ZXVlLlxuICAgICAgICBpID0gbmV3IGlyKG4uam4sIHMsIG4ucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBzLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBQbigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgICAgICBuLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIHMucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5ibih0LCBvKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgV246IHQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBuLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIG4uSW4gPSBzLCBuLlFuID0gaSwgbi5Cbi4kbihuLlFuKSwgcjtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGhyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLmpuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IEtzLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBMKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBzLmFkZEVudHJ5KGUsIG4uY29tbWl0VmVyc2lvbikpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiB0LkluLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCB0LCBlLCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5Jbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uUW4uYm4odCwgcykpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBscih0KSB7XG4gICAgY29uc3QgZSA9IFUodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuemUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gZnIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBVKHQpLCBzID0gZS5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLlVuO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gbi5qbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4uVW47XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gaS5nZXQocik7XG4gICAgICAgICAgICBpZiAoIWEpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi56ZS5yZW1vdmVNYXRjaGluZ0tleXModCwgZS5yZW1vdmVkRG9jdW1lbnRzLCByKS5uZXh0KCgoKSA9PiBuLnplLmFkZE1hdGNoaW5nS2V5cyh0LCBlLmFkZGVkRG9jdW1lbnRzLCByKSkpKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBlLnJlc3VtZVRva2VuO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXN1bWUgdG9rZW4gaWYgdGhlIGNoYW5nZSBpbmNsdWRlcyBvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IGEud2l0aFJlc3VtZVRva2VuKGMsIHMpLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHIsIHUpLCBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChMKGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksIDAgPT09IHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChhLCB1LCBlKSAmJiBvLnB1c2gobi56ZS51cGRhdGVUYXJnZXREYXRhKHQsIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgYSA9IHBuKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgZS5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhzKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHQsIHMpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbCB0aGUgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaChkcih0LCByLCBlLmRvY3VtZW50VXBkYXRlcywgcywgdm9pZCAwKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGEgPSB0O1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKGl0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uemUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4uemUuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBLcy53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLlFuLnZuKHQsIGEpKSkubmV4dCgoKCkgPT4gYSkpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLlVuID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGdsb2JhbFZlcnNpb24gLSBBIGBTbmFwc2hvdFZlcnNpb25gIHJlcHJlc2VudGluZyB0aGUgcmVhZCB0aW1lIGlmIGFsbFxuICogICAgICAgIGRvY3VtZW50cyBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZS5cbiAqIEBwYXJhbSBkb2N1bWVudFZlcnNpb25zIC0gQSBEb2N1bWVudEtleS10by1TbmFwc2hvdFZlcnNpb24gbWFwIGlmIGRvY3VtZW50c1xuICogICAgICAgIGhhdmUgdGhlaXIgb3duIHJlYWQgdGltZS5cbiAqXG4gKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIGBkb2N1bWVudFZlcnNpb25zYCBpZiBpdCBpcyBkZWZpbmVkO1xuICogd2hlbiBpdCBpcyBub3QgZGVmaW5lZCwgcmVzb3J0cyB0byBgZ2xvYmFsVmVyc2lvbmAuXG4gKi8gZnVuY3Rpb24gZHIodCwgZSwgbiwgcywgXG4vLyBUT0RPKHd1YW5keSk6IFdlIGNvdWxkIGFkZCBgcmVhZFRpbWVgIHRvIE1heWJlRG9jdW1lbnQgaW5zdGVhZCB0byByZW1vdmVcbi8vIHRoaXMgcGFyYW1ldGVyLlxuaSkge1xuICAgIGxldCByID0gUG4oKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIgPSByLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcikubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCByID0gcG4oKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0LmdldChuKSwgYyA9IChudWxsID09IGkgPyB2b2lkIDAgOiBpLmdldChuKSkgfHwgcztcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBvLmlzTm9Eb2N1bWVudCgpICYmIG8udmVyc2lvbi5pc0VxdWFsKGl0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCBjKSwgciA9IHIuaW5zZXJ0KG4sIG8pKSA6ICFhLmlzVmFsaWREb2N1bWVudCgpIHx8IG8udmVyc2lvbi5jb21wYXJlVG8oYS52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gby52ZXJzaW9uLmNvbXBhcmVUbyhhLnZlcnNpb24pICYmIGEuaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KG8sIGMpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBvKSkgOiBrKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIGEudmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgby52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCByO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiB3cih0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4uSW4uZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBfcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4uemUuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIEtzLnJlc29sdmUocykpIDogbi56ZS5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgc2koZSwgaSwgMCAvKiBMaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLnplLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5Vbi5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4uVW4gPSBuLlVuLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4ucW4uc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBtcih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IFUodCksIGkgPSBzLlVuLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIXpzKHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgayhcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5VbiA9IHMuVW4ucmVtb3ZlKGUpLCBzLnFuLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIGdyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gVSh0KTtcbiAgICBsZXQgaSA9IGl0Lm1pbigpLCByID0gUG4oKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBVKHQpLCBpID0gcy5xbi5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyBLcy5yZXNvbHZlKHMuVW4uZ2V0KGkpKSA6IHMuemUuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIEVlKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLnplLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5Cbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4gPyBpIDogaXQubWluKCksIG4gPyByIDogUG4oKSkpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgR246IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiB5cih0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCksIHMgPSBVKG4uemUpLCBpID0gbi5Vbi5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuRXQodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gcHIodCkge1xuICAgIGNvbnN0IGUgPSBVKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gVSh0KTtcbiAgICAgICAgbGV0IGkgPSBwbigpLCByID0gYWkobik7XG4gICAgICAgIGNvbnN0IG8gPSB6aShlKSwgYSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQociwgITApO1xuICAgICAgICByZXR1cm4gby5LdCh7XG4gICAgICAgICAgICBpbmRleDogQ3MucmVhZFRpbWVJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBhXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50cyBkaXJlY3RseSBzaW5jZSB3ZSB3YW50IHRvIGtlZXAgc2VudGluZWwgZGVsZXRlcy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSByaShzLk4sIGUpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KG4ua2V5LCBuKSwgciA9IGUucmVhZFRpbWU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgVG46IGksXG4gICAgICAgICAgICByZWFkVGltZTogY2kocilcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSByZWFkIHRpbWUgb2YgdGhlIG1vc3QgcmVjZW50bHkgcmVhZCBkb2N1bWVudCBpbiB0aGUgY2FjaGUsIG9yXG4gKiBTbmFwc2hvdFZlcnNpb24ubWluKCkgaWYgbm90IGF2YWlsYWJsZS5cbiAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgKGUuam4sIHQsIGUuS24pKSkudGhlbigoKHtUbjogdCwgcmVhZFRpbWU6IG59KSA9PiAoZS5LbiA9IG4sIHQpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIG5ld2VzdCBkb2N1bWVudCBjaGFuZ2UgZnJvbSBwZXJzaXN0ZW5jZSBhbmQgbW92ZXMgdGhlIGludGVybmFsXG4gKiBzeW5jaHJvbml6YXRpb24gbWFya2VyIGZvcndhcmQgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gRXIodCkge1xuICAgIGNvbnN0IGUgPSBVKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU3luY2hyb25pemUgbGFzdCBkb2N1bWVudCBjaGFuZ2UgcmVhZCB0aW1lXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gemkodCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBlbnRyaWVzLCB3ZSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgICAgIGxldCBuID0gaXQubWluKCk7XG4gICAgICAgIHJldHVybiBlLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiBDcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnJlYWRUaW1lICYmIChuID0gY2koZS5yZWFkVGltZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9KHQpKSkudGhlbigodCA9PiB7XG4gICAgICAgIGUuS24gPSB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBUcih0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IFUodCk7XG4gICAgbGV0IHIgPSBQbigpLCBvID0gcG4oKSwgYSA9IEFuKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUuem4odC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKSwgbyA9IG8uaW5zZXJ0KG4sIGUuSG4odCkpLCBhID0gYS5pbnNlcnQobiwgZS5Kbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGNvbnN0IGMgPSBpLmpuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIHUgPSBhd2FpdCBfcihpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBFZShkZSh1dC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gZHIodCwgYywgbywgaXQubWluKCksIGEpLm5leHQoKGUgPT4gKGMuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLnplLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHUudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuemUuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIHUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Rbi52bih0LCBlKSkpLm5leHQoKCgpID0+IGUpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBJcih0LCBlLCBuID0gUG4oKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IF9yKHQsIEVlKHdpKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gVSh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gS24oZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5KZS5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4od3QuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5VbiA9IGkuVW4uaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLnplLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS56ZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuemUuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5KZS5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgQXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5OID0gdCwgdGhpcy5ZbiA9IG5ldyBNYXAsIHRoaXMuWG4gPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBLcy5yZXNvbHZlKHRoaXMuWW4uZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuWW4uc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogS24obi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwgS3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUodGhpcy5Ybi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlhuLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB3aSh0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IEtuKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwgS3MucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBSciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLlpuID0gbmV3IG1uKFByLnRzKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLmVzID0gbmV3IG1uKFByLm5zKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5abi5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcih0LCBlKTtcbiAgICAgICAgdGhpcy5abiA9IHRoaXMuWm4uYWRkKG4pLCB0aGlzLmVzID0gdGhpcy5lcy5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBzcyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLnJzKG5ldyBQcih0LCBlKSk7XG4gICAgfVxuICAgIG9zKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIGNzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBQdChuZXcgdXQoW10pKSwgbiA9IG5ldyBQcihlLCB0KSwgcyA9IG5ldyBQcihlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMucnModCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgdXMoKSB7XG4gICAgICAgIHRoaXMuWm4uZm9yRWFjaCgodCA9PiB0aGlzLnJzKHQpKSk7XG4gICAgfVxuICAgIHJzKHQpIHtcbiAgICAgICAgdGhpcy5abiA9IHRoaXMuWm4uZGVsZXRlKHQpLCB0aGlzLmVzID0gdGhpcy5lcy5kZWxldGUodCk7XG4gICAgfVxuICAgIGhzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBQdChuZXcgdXQoW10pKSwgbiA9IG5ldyBQcihlLCB0KSwgcyA9IG5ldyBQcihlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gUG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFByKHQsIDApLCBuID0gdGhpcy5abi5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIFByIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5scyA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyB0cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgdHQodC5scywgZS5scyk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBucyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0dCh0LmxzLCBlLmxzKSB8fCBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBiciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkh0ID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JbiA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMuZnMgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMuZHMgPSBuZXcgbW4oUHIudHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUoMCA9PT0gdGhpcy5Jbi5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZnM7XG4gICAgICAgIHRoaXMuZnMrKywgdGhpcy5Jbi5sZW5ndGggPiAwICYmIHRoaXMuSW5bdGhpcy5Jbi5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBlaShpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy5Jbi5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy5kcyA9IHRoaXMuZHMuYWRkKG5ldyBQcihlLmtleSwgaSkpLCB0aGlzLkh0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUocik7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gS3MucmVzb2x2ZSh0aGlzLndzKGUpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSB0aGlzLl9zKG4pLCBpID0gcyA8IDAgPyAwIDogcztcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUodGhpcy5Jbi5sZW5ndGggPiBpID8gdGhpcy5JbltpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4gS3MucmVzb2x2ZSgwID09PSB0aGlzLkluLmxlbmd0aCA/IC0xIDogdGhpcy5mcyAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICByZXR1cm4gS3MucmVzb2x2ZSh0aGlzLkluLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHIoZSwgMCksIHMgPSBuZXcgUHIoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5kcy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMud3ModC5scyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwgS3MucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgbW4odHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUHIodCwgMCksIHMgPSBuZXcgUHIodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuZHMuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5scyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgS3MucmVzb2x2ZSh0aGlzLmdzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBQdC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUHIobmV3IFB0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBtbih0dCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LmxzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCBLcy5yZXNvbHZlKHRoaXMuZ3MobykpO1xuICAgIH1cbiAgICBncyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLndzKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIEwoMCA9PT0gdGhpcy55cyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMuSW4uc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmRzO1xuICAgICAgICByZXR1cm4gS3MuZm9yRWFjaChlLm11dGF0aW9ucywgKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQcihzLmtleSwgZS5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgcy5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGUodCkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcihlLCAwKSwgcyA9IHRoaXMuZHMuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBLcy5yZXNvbHZlKGUuaXNFcXVhbChzICYmIHMua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4ubGVuZ3RoLCBLcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICB5cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBfcyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkluLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLkluWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIHdzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3ModCk7XG4gICAgICAgIGlmIChlIDwgMCB8fCBlID49IHRoaXMuSW4ubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW5bZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIHZyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSHQgPSB0LCB0aGlzLnBzID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IGRuKFB0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmtleSwgaSA9IHRoaXMuZG9jcy5nZXQocyksIHIgPSBpID8gaS5zaXplIDogMCwgbyA9IHRoaXMucHMoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KHMsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLmNsb25lKCksXG4gICAgICAgICAgICBzaXplOiBvLFxuICAgICAgICAgICAgcmVhZFRpbWU6IG5cbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBvIC0gciwgdGhpcy5IdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBzLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiBLcy5yZXNvbHZlKG4gPyBuLmRvY3VtZW50LmNsb25lKCkgOiBxdC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBwbigpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50LmNsb25lKCkgOiBxdC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIEtzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHBuKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQdChlLnBhdGguY2hpbGQoXCJcIikpLCByID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShpKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogaSwgcmVhZFRpbWU6IG99fSA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFlLnBhdGguaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIG8uY29tcGFyZVRvKG4pIDw9IDAgfHwgUGUoZSwgaSkgJiYgKHMgPSBzLmluc2VydChpLmtleSwgaS5jbG9uZSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUocyk7XG4gICAgfVxuICAgIEVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEtzLmZvckVhY2godGhpcy5kb2NzLCAodCA9PiBlKHQpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IFZyKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBBIGNsYXNzIHRoYXQgbWFuYWdlcyBjb2xsZWN0aW9uIGdyb3VwIGluZGljZXMuXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgVnIgZXh0ZW5kcyBqaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlNlID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMuU2UuYWRkRW50cnkodCwgcy5kb2N1bWVudCwgdGhpcy5nZXRSZWFkVGltZShuKSkpIDogdGhpcy5TZS5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBLcy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5TZS5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2UuZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFNyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVHMgPSBuZXcgS2koKHQgPT4gUXQodCkpLCBHdCksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gaXQubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLklzID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkFzID0gbmV3IFJyLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5ScyA9IENpLnNlKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ucy5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCBLcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gS3MucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gS3MucmVzb2x2ZSh0aGlzLklzKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuUnMubmV4dCgpLCBLcy5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5JcyAmJiAodGhpcy5JcyA9IGUpLCBcbiAgICAgICAgS3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhZSh0KSB7XG4gICAgICAgIHRoaXMuVHMuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5ScyA9IG5ldyBDaShlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuSXMgJiYgKHRoaXMuSXMgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFlKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIEtzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFlKGUpLCBLcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ucy5kZWxldGUoZS50YXJnZXQpLCB0aGlzLkFzLmNzKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBLcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVHMuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5Ucy5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIEtzLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBLcy5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuVHMuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBLcy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Bcy5zcyhlLCBuKSwgS3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLkFzLm9zKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIEtzLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQXMuY3MoZSksIEtzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Bcy5ocyhlKTtcbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEtzLnJlc29sdmUodGhpcy5Bcy5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIERyIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5QcyA9IHt9LCB0aGlzLkxlID0gbmV3IFkoMCksIHRoaXMuQmUgPSAhMSwgdGhpcy5CZSA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCh0aGlzKSwgXG4gICAgICAgIHRoaXMuemUgPSBuZXcgU3IodGhpcyk7XG4gICAgICAgIHRoaXMuSHQgPSBuZXcgeWksIHRoaXMuSGUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHZyKHQsIGUpO1xuICAgICAgICB9KHRoaXMuSHQsICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYnModCkpKSwgdGhpcy5OID0gbmV3IGlpKGUpLCB0aGlzLkplID0gbmV3IEFyKHRoaXMuTik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLkJlID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQmU7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkh0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLlBzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IGJyKHRoaXMuSHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLlBzW3QudG9LZXkoKV0gPSBlKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy56ZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBrKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgQ3IodGhpcy5MZS5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS52cygpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5WcyhzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgU3ModCwgZSkge1xuICAgICAgICByZXR1cm4gS3Mub3IoT2JqZWN0LnZhbHVlcyh0aGlzLlBzKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIENyIGV4dGVuZHMgcXMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgTnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLkRzID0gbmV3IFJyLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuQ3MgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgTnModCkge1xuICAgICAgICByZXR1cm4gbmV3IE5yKHQpO1xuICAgIH1cbiAgICBnZXQgeHMoKSB7XG4gICAgICAgIGlmICh0aGlzLkNzKSByZXR1cm4gdGhpcy5DcztcbiAgICAgICAgdGhyb3cgTSgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Ecy5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMueHMuZGVsZXRlKG4udG9TdHJpbmcoKSksIEtzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHMucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmFkZChuLnRvU3RyaW5nKCkpLCBLcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuYWRkKGUudG9TdHJpbmcoKSksIEtzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5Ecy5jcyhlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy54cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIHZzKCkge1xuICAgICAgICB0aGlzLkNzID0gbmV3IFNldDtcbiAgICB9XG4gICAgVnModCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBLcy5mb3JFYWNoKHRoaXMueHMsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBQdC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLkNzID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMueHMuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGJzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAga3ModCwgZSkge1xuICAgICAgICByZXR1cm4gS3Mub3IoWyAoKSA9PiBLcy5yZXNvbHZlKHRoaXMuRHMuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuU3ModCwgZSkgXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIHhyKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBrcih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke3R9XyR7bn1gO1xuICAgIHJldHVybiBlLmlzQXV0aGVudGljYXRlZCgpICYmIChzICs9IGBfJHtlLnVpZH1gKSwgcztcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uICRyKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgT3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgJHModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBzICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHMuc3RhdGUpICYmICh2b2lkIDAgPT09IHMuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygcy5lcnJvcik7XG4gICAgICAgIHJldHVybiByICYmIHMuZXJyb3IgJiYgKHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5jb2RlLCBcbiAgICAgICAgciAmJiAoaSA9IG5ldyBLKHMuZXJyb3IuY29kZSwgcy5lcnJvci5tZXNzYWdlKSkpLCByID8gbmV3IE9yKHQsIGUsIHMuc3RhdGUsIGkpIDogKCQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgRnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuc3RhdGUgPSBlLCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljICRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAocyA9IG5ldyBLKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IEZyKHQsIG4uc3RhdGUsIHMpIDogKCQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgT3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgTXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyAkcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IHZuKCk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyBzICYmIHQgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrdCkgcyA9IFJ0KG4uYWN0aXZlVGFyZ2V0SWRzW3RdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1t0XSk7XG4gICAgICAgIHJldHVybiBzID8gbmV3IE1yKHQsIGkpIDogKCQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgTHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljICRzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGllbnRJZCA/IG5ldyBMcihlLmNsaWVudElkLCBlLm9ubGluZVN0YXRlKSA6ICgkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyBCciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdm4oKTtcbiAgICB9XG4gICAgRnModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0KTtcbiAgICB9XG4gICAgTXModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBVciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQsIHRoaXMuT2UgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5McyA9IHMsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5CcyA9IHRoaXMuVXMuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMucXMgPSBuZXcgZG4odHQpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuS3MgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCByID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMuanMgPSB4cih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLkxzKSwgXG4gICAgICAgIHRoaXMuUXMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMucXMgPSB0aGlzLnFzLmluc2VydCh0aGlzLkxzLCBuZXcgQnIpLCB0aGlzLldzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7cn1fKFteX10qKSRgKSwgXG4gICAgICAgIHRoaXMuR3MgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3J9XyhcXFxcZCspKD86XyguKikpPyRgKSwgdGhpcy56cyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3J9XyhcXFxcZCspJGApLCBcbiAgICAgICAgdGhpcy5IcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5KcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Ccyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIFB0KHQpIHtcbiAgICAgICAgcmV0dXJuICEoIXQgfHwgIXQubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUucG4oKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0aGlzLkxzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEl0ZW0oeHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTXIuJHMoZSwgdCk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy5xcyA9IHRoaXMucXMuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLllzKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5Icyk7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5YcyhlKTtcbiAgICAgICAgICAgIHQgJiYgdGhpcy5acyh0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5LcykgdGhpcy5Vcyh0KTtcbiAgICAgICAgdGhpcy5LcyA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlFzLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGkodGhpcy5xcyk7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5xcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpICYmIChlID0gITApO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIHRoaXMuZWkodCwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5laSh0LCBlLCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMubmkodCk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSgkcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBGci4kcyh0LCBuKTtcbiAgICAgICAgICAgICAgICBzICYmIChlID0gcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuRnModCksIHRoaXMuWXMoKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuc2kuTXModCksIHRoaXMuWXMoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKCRyKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaWkodCwgZSwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5uaSh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gdCwgbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yaSh0KTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKCkge1xuICAgICAgICB0aGlzLm9pKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuQnMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5qcyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiBrKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgIGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIFVzKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMuanMpIHJldHVybiB2b2lkICQoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Xcy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmFpKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaSh0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy51aShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLmNpKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuR3MudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5saSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnpzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuZGkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuSHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWHMoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLlpzKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLlFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gWS5UO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMKFwibnVtYmVyXCIgPT0gdHlwZW9mIG4pLCBlID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2VcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxuICovIChlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgIT09IFkuVCAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5KcykgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS53aSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLktzLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHNpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcy5nZXQodGhpcy5Mcyk7XG4gICAgfVxuICAgIFlzKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5qcywgdGhpcy5zaS5PcygpKTtcbiAgICB9XG4gICAgZWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IE9yKHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0ga3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLk9zKCkpO1xuICAgIH1cbiAgICBuaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBrcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICByaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5McyxcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuSHMsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgaWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gJHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgRnIodCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLk9zKCkpO1xuICAgIH1cbiAgICBvaSgpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuSnMsIFwidmFsdWUtbm90LXVzZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgYWkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Xcy5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgdWkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5haSh0KTtcbiAgICAgICAgcmV0dXJuIE1yLiRzKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBoaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkdzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIE9yLiRzKG5ldyBTKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgZmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy56cy5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gRnIuJHMocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBYcyh0KSB7XG4gICAgICAgIHJldHVybiBMci4kcyh0KTtcbiAgICB9XG4gICAgYXN5bmMgbGkodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuX2kodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgZGkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLm1pKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICBjaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5xcy5pbnNlcnQodCwgZSkgOiB0aGlzLnFzLnJlbW92ZSh0KSwgcyA9IHRoaXMudGkodGhpcy5xcyksIGkgPSB0aGlzLnRpKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUuZ2kociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5xcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWnModCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLnFzLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgdGkodCkge1xuICAgICAgICBsZXQgZSA9IHZuKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBxciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMueWkgPSBuZXcgQnIsIHRoaXMucGkgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy55aS5Gcyh0KSwgdGhpcy5waVt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLnBpW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMueWkuTXModCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBpW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy55aSA9IG5ldyBCciwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgS3Ige1xuICAgIEVpKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIGpyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5UaSA9ICgpID0+IHRoaXMuSWkoKSwgdGhpcy5BaSA9ICgpID0+IHRoaXMuUmkoKSwgdGhpcy5QaSA9IFtdLCB0aGlzLmJpKCk7XG4gICAgfVxuICAgIEVpKHQpIHtcbiAgICAgICAgdGhpcy5QaS5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5UaSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLkFpKTtcbiAgICB9XG4gICAgYmkoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuVGkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5BaSk7XG4gICAgfVxuICAgIElpKCkge1xuICAgICAgICBrKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuUGkpIHQoMCAvKiBBVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBSaSgpIHtcbiAgICAgICAgayhcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuUGkpIHQoMSAvKiBVTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBQdCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBRciA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIFdyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmkgPSB0LnZpLCB0aGlzLlZpID0gdC5WaTtcbiAgICB9XG4gICAgU2kodCkge1xuICAgICAgICB0aGlzLkRpID0gdDtcbiAgICB9XG4gICAgQ2kodCkge1xuICAgICAgICB0aGlzLk5pID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy54aSA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLlZpKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLnZpKHQpO1xuICAgIH1cbiAgICBraSgpIHtcbiAgICAgICAgdGhpcy5EaSgpO1xuICAgIH1cbiAgICAkaSh0KSB7XG4gICAgICAgIHRoaXMuTmkodCk7XG4gICAgfVxuICAgIE9pKHQpIHtcbiAgICAgICAgdGhpcy54aSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEdyIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5GaSA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLk1pID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgTGkodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5CaSh0LCBlKTtcbiAgICAgICAgayhcIlJlc3RDb25uZWN0aW9uXCIsIFwiU2VuZGluZzogXCIsIGksIG4pO1xuICAgICAgICBjb25zdCByID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLlVpKHIsIHMpLCB0aGlzLnFpKHQsIGksIHIsIG4pLnRoZW4oKHQgPT4gKGsoXCJSZXN0Q29ubmVjdGlvblwiLCBcIlJlY2VpdmVkOiBcIiwgdCksIFxuICAgICAgICB0KSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93IE8oXCJSZXN0Q29ubmVjdGlvblwiLCBgJHt0fSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCBpLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgS2kodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5MaSh0LCBlLCBuLCBzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIFVpKHQsIGUpIHtcbiAgICAgICAgaWYgKHRbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFwiZ2wtanMvIGZpcmUvXCIgKyBELCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIHRbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKHRbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgZSkgZm9yIChjb25zdCBuIGluIGUuYXV0aEhlYWRlcnMpIGUuYXV0aEhlYWRlcnMuaGFzT3duUHJvcGVydHkobikgJiYgKHRbbl0gPSBlLmF1dGhIZWFkZXJzW25dKTtcbiAgICB9XG4gICAgQmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gUXJbdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLkZpfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIHFpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBFO1xuICAgICAgICAgICAgby5saXN0ZW5PbmNlKFQuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgSS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgayhcIkNvbm5lY3Rpb25cIiwgXCJYSFIgcmVjZWl2ZWQ6XCIsIEpTT04uc3RyaW5naWZ5KGUpKSwgaShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBJLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBrKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgdGltZWQgb3V0JyksIHIobmV3IEsocS5ERUFETElORV9FWENFRURFRCwgXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBJLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gby5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgby5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXRSZXNwb25zZUpzb24oKS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhxKS5pbmRleE9mKGUpID49IDAgPyBlIDogcS5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgSyhlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcihuZXcgSyhxLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIG8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBLKHEuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIE0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGsoXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBjb21wbGV0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgby5zZW5kKGUsIFwiUE9TVFwiLCBhLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgamkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWyB0aGlzLkZpLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIHMgPSBBKCksIGkgPSBSKCksIHIgPSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogXCJnc2Vzc2lvbmlkXCIsXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogYHByb2plY3RzLyR7dGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogITAsXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiAhMCxcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogNmU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nLFxuICAgICAgICAgICAgZGV0ZWN0QnVmZmVyaW5nUHJveHk6IHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmIChyLnhtbEh0dHBGYWN0b3J5ID0gbmV3IFAoe30pKSwgdGhpcy5VaShyLmluaXRNZXNzYWdlSGVhZGVycywgZSksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGludG8gYSBzcGVjaWFsIFwiJGh0dHBIZWFkZXJzXCIgcXVlcnlcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuIFRoaXMgaXNcbiAgICAgICAgLy8gZm9ybWFsbHkgZGVmaW5lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL2IwZTE4MTViMTNmYjkyYTQ2ZDdjOWIzYzMwZGU1ZDZhMzk2YTMyNDUvY2xvc3VyZS9nb29nL25ldC9ycGMvaHR0cGNvcnMuanMjTDMyXG4gICAgICAgIC8vIFRPRE8oYi8xNDU2MjQ3NTYpOiBUaGVyZSBpcyBhIGJhY2tlbmQgYnVnIHdoZXJlICRodHRwSGVhZGVycyBpc24ndCByZXNwZWN0ZWQgaWYgdGhlIHJlcXVlc3RcbiAgICAgICAgLy8gZG9lc24ndCBoYXZlIGFuIE9yaWdpbiBoZWFkZXIuIFNvIHdlIGhhdmUgdG8gZXhjbHVkZSBhIGZldyBicm93c2VyIGVudmlyb25tZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBrbm93biB0byAoc29tZXRpbWVzKSBub3QgaW5jbHVkZSBhbiBPcmlnaW4uIFNlZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8xNDkxLlxuICAgICAgICBsKCkgfHwgZigpIHx8IGQoKSB8fCB3KCkgfHwgXygpIHx8IG0oKSB8fCAoci5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtID0gXCIkaHR0cEhlYWRlcnNcIik7XG4gICAgICAgIGNvbnN0IG8gPSBuLmpvaW4oXCJcIik7XG4gICAgICAgIGsoXCJDb25uZWN0aW9uXCIsIFwiQ3JlYXRpbmcgV2ViQ2hhbm5lbDogXCIgKyBvLCByKTtcbiAgICAgICAgY29uc3QgYSA9IHMuY3JlYXRlV2ViQ2hhbm5lbChvLCByKTtcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxuICAgICAgICAgICAgICAgIGxldCBjID0gITEsIHUgPSAhMTtcbiAgICAgICAgLy8gQSBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBzdHJlYW0gd2FzIGNsb3NlZCAoYnkgdXMgb3IgdGhyb3VnaCBhblxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xuICAgICAgICAvLyBvbiBhIGNsb3NlZCBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBoID0gbmV3IFdyKHtcbiAgICAgICAgICAgIHZpOiB0ID0+IHtcbiAgICAgICAgICAgICAgICB1ID8gayhcIkNvbm5lY3Rpb25cIiwgXCJOb3Qgc2VuZGluZyBiZWNhdXNlIFdlYkNoYW5uZWwgaXMgY2xvc2VkOlwiLCB0KSA6IChjIHx8IChrKFwiQ29ubmVjdGlvblwiLCBcIk9wZW5pbmcgV2ViQ2hhbm5lbCB0cmFuc3BvcnQuXCIpLCBcbiAgICAgICAgICAgICAgICBhLm9wZW4oKSwgYyA9ICEwKSwgayhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHNlbmRpbmc6XCIsIHQpLCBhLnNlbmQodCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFZpOiAoKSA9PiBhLmNsb3NlKClcbiAgICAgICAgfSksIGcgPSAodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgdC5saXN0ZW4oZSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4odCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGcoYSwgYi5FdmVudFR5cGUuT1BFTiwgKCgpID0+IHtcbiAgICAgICAgICAgIHUgfHwgayhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBvcGVuZWQuXCIpO1xuICAgICAgICB9KSksIGcoYSwgYi5FdmVudFR5cGUuQ0xPU0UsICgoKSA9PiB7XG4gICAgICAgICAgICB1IHx8ICh1ID0gITAsIGsoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgY2xvc2VkXCIpLCBoLiRpKCkpO1xuICAgICAgICB9KSksIGcoYSwgYi5FdmVudFR5cGUuRVJST1IsICh0ID0+IHtcbiAgICAgICAgICAgIHUgfHwgKHUgPSAhMCwgTyhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBlcnJvcmVkOlwiLCB0KSwgaC4kaShuZXcgSyhxLlVOQVZBSUxBQkxFLCBcIlRoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZFwiKSkpO1xuICAgICAgICB9KSksIGcoYSwgYi5FdmVudFR5cGUuTUVTU0FHRSwgKHQgPT4ge1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICBpZiAoIXUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5kYXRhWzBdO1xuICAgICAgICAgICAgICAgIEwoISFuKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbiwgaSA9IHMuZXJyb3IgfHwgKG51bGwgPT09IChlID0gc1swXSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgayhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHJlY2VpdmVkIGVycm9yOlwiLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3Iuc3RhdHVzIHdpbGwgYmUgYSBzdHJpbmcgbGlrZSAnT0snIG9yICdOT1RfRk9VTkQnLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gaS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlID0gXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gYSBHUlBDIHN0YXR1cyBpZGVudGlmaWVyIGxpa2UgJ05PVF9GT1VORCcuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gc3RhdHVzIHN0cmluZyBvciB1bmRlZmluZWQgaWZcbiAqICAgICB0aGVyZSBpcyBubyBtYXRjaC5cbiAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29rdXAgYnkgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHVuW3RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgcmV0dXJuIGZuKGUpO1xuICAgICAgICAgICAgICAgICAgICB9KHQpLCBuID0gaS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBxLklOVEVSTkFMLCBuID0gXCJVbmtub3duIGVycm9yIHN0YXR1czogXCIgKyB0ICsgXCIgd2l0aCBtZXNzYWdlIFwiICsgaS5tZXNzYWdlKSwgXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgY2xvc2VkIHNvIG5vIGZ1cnRoZXIgZXZlbnRzIGFyZSBwcm9wYWdhdGVkXG4gICAgICAgICAgICAgICAgICAgIHUgPSAhMCwgaC4kaShuZXcgSyhlLCBuKSksIGEuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgayhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHJlY2VpdmVkOlwiLCBuKSwgaC5PaShuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBnKGksIHYuU1RBVF9FVkVOVCwgKHQgPT4ge1xuICAgICAgICAgICAgdC5zdGF0ID09PSBWLlBST1hZID8gayhcIkNvbm5lY3Rpb25cIiwgXCJEZXRlY3RlZCBidWZmZXJpbmcgcHJveHlcIikgOiB0LnN0YXQgPT09IFYuTk9QUk9YWSAmJiBrKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIG5vIGJ1ZmZlcmluZyBwcm94eVwiKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIGgua2koKTtcbiAgICAgICAgfSksIDApLCBoO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiB6cigpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gSHIoKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBKcih0KSB7XG4gICAgcmV0dXJuIG5ldyBMbih0LCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgWXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgcyA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLk9lID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy5RaSA9IG4sIHRoaXMuV2kgPSBzLCB0aGlzLkdpID0gaSwgdGhpcy56aSA9IDAsIFxuICAgICAgICB0aGlzLkhpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5KaSA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuemkgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgWWkoKSB7XG4gICAgICAgIHRoaXMuemkgPSB0aGlzLkdpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIFhpKHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHRoaXMuemkgKyB0aGlzLlppKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuSmkpLCBzID0gTWF0aC5tYXgoMCwgZSAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBzID4gMCAmJiBrKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtzfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLnppfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7ZX0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLkhpID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHMsICgoKSA9PiAodGhpcy5KaSA9IERhdGUubm93KCksIFxuICAgICAgICB0KCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMuemkgKj0gdGhpcy5XaSwgdGhpcy56aSA8IHRoaXMuUWkgJiYgKHRoaXMuemkgPSB0aGlzLlFpKSwgdGhpcy56aSA+IHRoaXMuR2kgJiYgKHRoaXMuemkgPSB0aGlzLkdpKTtcbiAgICB9XG4gICAgdHIoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSGkgJiYgKHRoaXMuSGkuc2tpcERlbGF5KCksIHRoaXMuSGkgPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkhpICYmICh0aGlzLkhpLmNhbmNlbCgpLCB0aGlzLkhpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICBaaSgpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy56aTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3MgWHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5PZSA9IHQsIHRoaXMuZXIgPSBuLCB0aGlzLm5yID0gcywgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyID0gaSwgdGhpcy5saXN0ZW5lciA9IHIsIFxuICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3IgPSAwLCB0aGlzLmlyID0gbnVsbCwgdGhpcy5zdHJlYW0gPSBudWxsLCB0aGlzLnJyID0gbmV3IFlyKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3RhcnQoKSBoYXMgYmVlbiBjYWxsZWQgYW5kIG5vIGVycm9yIGhhcyBvY2N1cnJlZC4gVHJ1ZVxuICAgICAqIGluZGljYXRlcyB0aGUgc3RyZWFtIGlzIG9wZW4gb3IgaW4gdGhlIHByb2Nlc3Mgb2Ygb3BlbmluZyAod2hpY2hcbiAgICAgKiBlbmNvbXBhc3NlcyByZXNwZWN0aW5nIGJhY2tvZmYsIGdldHRpbmcgYXV0aCB0b2tlbnMsIGFuZCBzdGFydGluZyB0aGVcbiAgICAgKiBhY3R1YWwgUlBDKS4gVXNlIGlzT3BlbigpIHRvIGRldGVybWluZSBpZiB0aGUgc3RyZWFtIGlzIG9wZW4gYW5kIHJlYWR5IGZvclxuICAgICAqIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBhcigpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgMiAvKiBPcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDQgLyogQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cbiAgICAgKiBjYWxsZWQpIGFuZCB0aGUgc3RyZWFtIGlzIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgY3IoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIE9wZW4gKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgMyAvKiBFcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy51cigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuYXIoKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgaHIoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi8gLCB0aGlzLnJyLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBscigpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5jcigpICYmIG51bGwgPT09IHRoaXMuaXIgJiYgKHRoaXMuaXIgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMuZXIsIDZlNCwgKCgpID0+IHRoaXMuZHIoKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIHdyKHQpIHtcbiAgICAgICAgdGhpcy5fcigpLCB0aGlzLnN0cmVhbS5zZW5kKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIGRyKCkge1xuICAgICAgICBpZiAodGhpcy5jcigpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIEluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIF9yKCkge1xuICAgICAgICB0aGlzLmlyICYmICh0aGlzLmlyLmNhbmNlbCgpLCB0aGlzLmlyID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKHQsIGUpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMuX3IoKSwgdGhpcy5yci5jYW5jZWwoKSwgXG4gICAgICAgIC8vIEludmFsaWRhdGVzIGFueSBzdHJlYW0tcmVsYXRlZCBjYWxsYmFja3MgKGUuZy4gZnJvbSBhdXRoIG9yIHRoZVxuICAgICAgICAvLyB1bmRlcmx5aW5nIHN0cmVhbSksIGd1YXJhbnRlZWluZyB0aGV5IHdvbid0IGV4ZWN1dGUuXG4gICAgICAgIHRoaXMuc3IrKywgMyAvKiBFcnJvciAqLyAhPT0gdCA/IFxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGludGVudGlvbmFsIGNsb3NlIGVuc3VyZSB3ZSBkb24ndCBkZWxheSBvdXIgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQuXG4gICAgICAgIHRoaXMucnIucmVzZXQoKSA6IGUgJiYgZS5jb2RlID09PSBxLlJFU09VUkNFX0VYSEFVU1RFRCA/IChcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvci4gKFByb2JhYmx5IGVpdGhlciAncXVvdGEgZXhjZWVkZWQnIG9yICdtYXggcXVldWUgbGVuZ3RoIHJlYWNoZWQnLilcbiAgICAgICAgJChlLnRvU3RyaW5nKCkpLCAkKFwiVXNpbmcgbWF4aW11bSBiYWNrb2ZmIGRlbGF5IHRvIHByZXZlbnQgb3ZlcmxvYWRpbmcgdGhlIGJhY2tlbmQuXCIpLCBcbiAgICAgICAgdGhpcy5yci5ZaSgpKSA6IGUgJiYgZS5jb2RlID09PSBxLlVOQVVUSEVOVElDQVRFRCAmJiBcbiAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUcnkgZm9yY2UgcmVmcmVzaGluZyBpdCBpbiBjYXNlIGl0XG4gICAgICAgIC8vIGp1c3QgZXhwaXJlZC5cbiAgICAgICAgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cbiAgICAgICAgbnVsbCAhPT0gdGhpcy5zdHJlYW0gJiYgKHRoaXMubXIoKSwgdGhpcy5zdHJlYW0uY2xvc2UoKSwgdGhpcy5zdHJlYW0gPSBudWxsKSwgXG4gICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXG4gICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gdCwgXG4gICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5saXN0ZW5lci5DaShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXG4gICAgICovICAgIG1yKCkge31cbiAgICBhdXRoKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBTdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZ3IodGhpcy5zciksIGUgPSB0aGlzLnNyO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy5zciA9PT0gZSAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy55cih0KTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IEsocS5VTktOT1dOLCBcIkZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiBcIiArIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHIodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgeXIodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5ncih0aGlzLnNyKTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLkVyKHQpLCB0aGlzLnN0cmVhbS5TaSgoKCkgPT4ge1xuICAgICAgICAgICAgZSgoKCkgPT4gKHRoaXMuc3RhdGUgPSAyIC8qIE9wZW4gKi8gLCB0aGlzLmxpc3RlbmVyLlNpKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uQ2koKHQgPT4ge1xuICAgICAgICAgICAgZSgoKCkgPT4gdGhpcy5wcih0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBlKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVyKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNCAvKiBCYWNrb2ZmICovICwgdGhpcy5yci5YaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIHByKHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiBrKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoMyAvKiBFcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBncih0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zciA9PT0gdCA/IGUoKSA6IChrKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgWnIgZXh0ZW5kcyBYciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIExpc3RlblN0cmVhbUlkbGUgKi8gLCBlLCBuLCBpKSwgXG4gICAgICAgIHRoaXMuTiA9IHM7XG4gICAgfVxuICAgIEVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnIuamkoXCJMaXN0ZW5cIiwgdCk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy5yci5yZXNldCgpO1xuICAgICAgICBjb25zdCBlID0gZXModGhpcy5OLCB0KSwgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkpIHJldHVybiBpdC5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldElkcyAmJiBlLnRhcmdldElkcy5sZW5ndGggPyBpdC5taW4oKSA6IGUucmVhZFRpbWUgPyBLbihlLnJlYWRUaW1lKSA6IGl0Lm1pbigpO1xuICAgICAgICB9KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5UcihlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgSXIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBKbih0aGlzLk4pLCBlLmFkZFRhcmdldCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgcmV0dXJuIG4gPSB6dChzKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IHJzKHQsIHMpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBvcyh0LCBzKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IGUudGFyZ2V0SWQsIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCA/IG4ucmVzdW1lVG9rZW4gPSBVbih0LCBlLnJlc3VtZVRva2VuKSA6IGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhpdC5taW4oKSkgPiAwICYmIChcbiAgICAgICAgICAgIC8vIFRPRE8od3VhbmR5KTogQ29uc2lkZXIgcmVtb3ZpbmcgYWJvdmUgY2hlY2sgYmVjYXVzZSBpdCBpcyBtb3N0IGxpa2VseSB0cnVlLlxuICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgIG4ucmVhZFRpbWUgPSBCbih0LCBlLnNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpKSksIG47XG4gICAgICAgIH0odGhpcy5OLCB0KTtcbiAgICAgICAgY29uc3QgbiA9IGNzKHRoaXMuTiwgdCk7XG4gICAgICAgIG4gJiYgKGUubGFiZWxzID0gbiksIHRoaXMud3IoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICBBcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IEpuKHRoaXMuTiksIGUucmVtb3ZlVGFyZ2V0ID0gdCwgdGhpcy53cihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyB0byBleHRlbmRzIFhyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHN1cGVyKHQsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFdyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcIndyaXRlX3N0cmVhbV9pZGxlXCIgLyogV3JpdGVTdHJlYW1JZGxlICovICwgZSwgbiwgaSksIFxuICAgICAgICB0aGlzLk4gPSBzLCB0aGlzLlJyID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxuICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cbiAgICAgKi8gICAgZ2V0IFByKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ScjtcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLlJyID0gITEsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBtcigpIHtcbiAgICAgICAgdGhpcy5SciAmJiB0aGlzLmJyKFtdKTtcbiAgICB9XG4gICAgRXIodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uci5qaShcIldyaXRlXCIsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cbiAgICAgICAgTCghIXQuc3RyZWFtVG9rZW4pLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHQuc3RyZWFtVG9rZW4sIHRoaXMuUnIpIHtcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgICAgICB0aGlzLnJyLnJlc2V0KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gaXModC53cml0ZVJlc3VsdHMsIHQuY29tbWl0VGltZSksIG4gPSBLbih0LmNvbW1pdFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIudnIobiwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXG4gICAgICAgIHJldHVybiBMKCF0LndyaXRlUmVzdWx0cyB8fCAwID09PSB0LndyaXRlUmVzdWx0cy5sZW5ndGgpLCB0aGlzLlJyID0gITAsIHRoaXMubGlzdGVuZXIuVnIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cbiAgICAgKi8gICAgU3IoKSB7XG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBKbih0aGlzLk4pLCB0aGlzLndyKHQpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqLyAgICBicih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXG4gICAgICAgICAgICB3cml0ZXM6IHQubWFwKCh0ID0+IG5zKHRoaXMuTiwgdCkpKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLndyKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGF0YXN0b3JlIGFuZCBpdHMgcmVsYXRlZCBtZXRob2RzIGFyZSBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGVcbiAqIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSwgd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50XG4gKiBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXG4gKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGF0YXN0b3JlIHRoYXQgZXhwb3NlcyBhZGRpdGlvbmFsIHN0YXRlIGZvciBpbnRlcm5hbFxuICogY29uc3VtcHRpb24uXG4gKi9cbmNsYXNzIGVvIGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jcmVkZW50aWFscyA9IHQsIHRoaXMubnIgPSBlLCB0aGlzLk4gPSBuLCB0aGlzLkRyID0gITE7XG4gICAgfVxuICAgIENyKCkge1xuICAgICAgICBpZiAodGhpcy5EcikgdGhyb3cgbmV3IEsocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEdldHMgYW4gYXV0aCB0b2tlbiBhbmQgaW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDLiAqLyAgICBMaSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNyKCksIHRoaXMuY3JlZGVudGlhbHMuZ2V0VG9rZW4oKS50aGVuKChzID0+IHRoaXMubnIuTGkodCwgZSwgbiwgcykpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgdGhpcy5jcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0KSA6IG5ldyBLKHEuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogR2V0cyBhbiBhdXRoIHRva2VuIGFuZCBpbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzLiAqLyAgICBLaSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNyKCksIHRoaXMuY3JlZGVudGlhbHMuZ2V0VG9rZW4oKS50aGVuKChzID0+IHRoaXMubnIuS2kodCwgZSwgbiwgcykpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgdGhpcy5jcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0KSA6IG5ldyBLKHEuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuRHIgPSAhMDtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JleHApOiBNYWtlIHN1cmUgdGhlcmUgaXMgb25seSBvbmUgRGF0YXN0b3JlIGluc3RhbmNlIHBlclxuLy8gZmlyZXN0b3JlLWV4cCBjbGllbnQuXG4vKipcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcbiAqIHdoZXRoZXIgb3Igbm90IHRoZSBjbGllbnQgYXMgYSB3aG9sZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBvbmxpbmUgb3JcbiAqIG9mZmxpbmUpLCBpbXBsZW1lbnRpbmcgdGhlIGFwcHJvcHJpYXRlIGhldXJpc3RpY3MuXG4gKlxuICogSW4gcGFydGljdWxhciwgd2hlbiB0aGUgY2xpZW50IGlzIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLCB3ZVxuICogYWxsb3cgdXAgdG8gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB3aXRoaW4gT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgZm9yXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxuICogdGhlbiB3ZSBzZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUsIGFuZCB0aGUgY2xpZW50IHdpbGwgYmVoYXZlIGFzIGlmXG4gKiBpdCBpcyBvZmZsaW5lIChnZXQoKXMgd2lsbCByZXR1cm4gY2FjaGVkIGRhdGEsIGV0Yy4pLlxuICovXG5jbGFzcyBubyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IGUsIFxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cbiAgICAgICAgICogT2ZmbGluZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTnIgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJHIgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXG4gICAgICovICAgIE9yKCkge1xuICAgICAgICAwID09PSB0aGlzLk5yICYmICh0aGlzLkZyKFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCB0aGlzLmtyID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwib25saW5lX3N0YXRlX3RpbWVvdXRcIiAvKiBPbmxpbmVTdGF0ZVRpbWVvdXQgKi8gLCAxZTQsICgoKSA9PiAodGhpcy5rciA9IG51bGwsIFxuICAgICAgICB0aGlzLk1yKFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gMTAgc2Vjb25kcy5cIiksIHRoaXMuRnIoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3VyIE9ubGluZVN0YXRlIGFzIGFwcHJvcHJpYXRlIGFmdGVyIHRoZSB3YXRjaCBzdHJlYW0gcmVwb3J0cyBhXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcbiAgICAgKiBhbGxvdyBtdWx0aXBsZSBmYWlsdXJlcyAoYmFzZWQgb24gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykgYmVmb3JlIHdlXG4gICAgICogYWN0dWFsbHkgdHJhbnNpdGlvbiB0byB0aGUgJ09mZmxpbmUnIHN0YXRlLlxuICAgICAqLyAgICBMcih0KSB7XG4gICAgICAgIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0aGlzLnN0YXRlID8gdGhpcy5GcihcIlVua25vd25cIiAvKiBVbmtub3duICovKSA6ICh0aGlzLk5yKyssIFxuICAgICAgICB0aGlzLk5yID49IDEgJiYgKHRoaXMuQnIoKSwgdGhpcy5NcihgQ29ubmVjdGlvbiBmYWlsZWQgMSB0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6ICR7dC50b1N0cmluZygpfWApLCBcbiAgICAgICAgdGhpcy5GcihcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXNldHMgb3VyIHRpbWVycyAvIGZhaWx1cmUgY291bnRlcnMsIGV0Yy4gdXNlZCBieSBvdXJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcbiAgICAgKiBoYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCkgYW5kIGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpLlxuICAgICAqLyAgICBzZXQodCkge1xuICAgICAgICB0aGlzLkJyKCksIHRoaXMuTnIgPSAwLCBcIk9ubGluZVwiIC8qIE9ubGluZSAqLyA9PT0gdCAmJiAoXG4gICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcbiAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxuICAgICAgICB0aGlzLiRyID0gITEpLCB0aGlzLkZyKHQpO1xuICAgIH1cbiAgICBGcih0KSB7XG4gICAgICAgIHQgIT09IHRoaXMuc3RhdGUgJiYgKHRoaXMuc3RhdGUgPSB0LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0KSk7XG4gICAgfVxuICAgIE1yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGBDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuICR7dH1cXG5UaGlzIHR5cGljYWxseSBpbmRpY2F0ZXMgdGhhdCB5b3VyIGRldmljZSBkb2VzIG5vdCBoYXZlIGEgaGVhbHRoeSBJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZSB1bnRpbCBpdCBpcyBhYmxlIHRvIHN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLmA7XG4gICAgICAgIHRoaXMuJHIgPyAoJChlKSwgdGhpcy4kciA9ICExKSA6IGsoXCJPbmxpbmVTdGF0ZVRyYWNrZXJcIiwgZSk7XG4gICAgfVxuICAgIEJyKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmtyICYmICh0aGlzLmtyLmNhbmNlbCgpLCB0aGlzLmtyID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBzbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHN0b3JlLCB1c2VkIHRvIGZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGggb3V0Ym91bmQgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY2xpZW50LXNpZGUgcHJveHkgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIGJhY2tlbmQuICovXG4gICAgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLmRhdGFzdG9yZSA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMucmVtb3RlU3luY2VyID0ge30sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHVwIHRvIE1BWF9QRU5ESU5HX1dSSVRFUyB3cml0ZXMgdGhhdCB3ZSBoYXZlIGZldGNoZWQgZnJvbSB0aGVcbiAgICAgICAgICogTG9jYWxTdG9yZSB2aWEgZmlsbFdyaXRlUGlwZWxpbmUoKSBhbmQgaGF2ZSBvciB3aWxsIHNlbmQgdG8gdGhlIHdyaXRlXG4gICAgICAgICAqIHN0cmVhbS5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbmV2ZXIgd3JpdGVQaXBlbGluZS5sZW5ndGggPiAwIHRoZSBSZW1vdGVTdG9yZSB3aWxsIGF0dGVtcHQgdG8gc3RhcnQgb3JcbiAgICAgICAgICogcmVzdGFydCB0aGUgd3JpdGUgc3RyZWFtLiBXaGVuIHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQgdGhlIHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICogcGlwZWxpbmUgd2lsbCBiZSBzZW50IGluIG9yZGVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZXMgcmVtYWluIGluIHdyaXRlUGlwZWxpbmUgdW50aWwgdGhleSBhcmUgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kXG4gICAgICAgICAqIGFuZCB0aHVzIHdpbGwgYXV0b21hdGljYWxseSBiZSByZS1zZW50IGlmIHRoZSBzdHJlYW0gaXMgaW50ZXJydXB0ZWQgL1xuICAgICAgICAgKiByZXN0YXJ0ZWQgYmVmb3JlIHRoZXkncmUgYWNrbm93bGVkZ2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZSByZXNwb25zZXMgZnJvbSB0aGUgYmFja2VuZCBhcmUgbGlua2VkIHRvIHRoZWlyIG9yaWdpbmF0aW5nIHJlcXVlc3RcbiAgICAgICAgICogcHVyZWx5IGJhc2VkIG9uIG9yZGVyLCBhbmQgc28gd2UgY2FuIGp1c3Qgc2hpZnQoKSB3cml0ZXMgZnJvbSB0aGUgZnJvbnQgb2ZcbiAgICAgICAgICogdGhlIHdyaXRlUGlwZWxpbmUgYXMgd2UgcmVjZWl2ZSByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlVyID0gW10sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXBwaW5nIG9mIHdhdGNoZWQgdGFyZ2V0cyB0aGF0IHRoZSBjbGllbnQgY2FyZXMgYWJvdXQgdHJhY2tpbmcgYW5kIHRoZVxuICAgICAgICAgKiB1c2VyIGhhcyBleHBsaWNpdGx5IGNhbGxlZCBhICdsaXN0ZW4nIGZvciB0aGlzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgdGFyZ2V0cyBtYXkgb3IgbWF5IG5vdCBoYXZlIGJlZW4gc2VudCB0byBvciBhY2tub3dsZWRnZWQgYnkgdGhlXG4gICAgICAgICAqIHNlcnZlci4gT24gcmUtZXN0YWJsaXNoaW5nIHRoZSBsaXN0ZW4gc3RyZWFtLCB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSBzZW50XG4gICAgICAgICAqIHRvIHRoZSBzZXJ2ZXIuIFRoZSB0YXJnZXRzIHJlbW92ZWQgd2l0aCB1bmxpc3RlbnMgYXJlIHJlbW92ZWQgZWFnZXJseVxuICAgICAgICAgKiB3aXRob3V0IHdhaXRpbmcgZm9yIGNvbmZpcm1hdGlvbiBmcm9tIHRoZSBsaXN0ZW4gc3RyZWFtLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xciA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzZXQgb2YgcmVhc29ucyBmb3Igd2h5IHRoZSBSZW1vdGVTdG9yZSBtYXkgYmUgb2ZmbGluZS4gSWYgZW1wdHksIHRoZVxuICAgICAgICAgKiBSZW1vdGVTdG9yZSBtYXkgc3RhcnQgaXRzIG5ldHdvcmsgY29ubmVjdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLktyID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVycyB0aGF0IGdldCBjYWxsZWQgd2hlbiB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBvciBlbmFibGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCBvbiB0aGUgV2ViIGNsaWVudCB0byBjcmVhdGUgdGhlXG4gICAgICAgICAqIHVuZGVybHlpbmcgc3RyZWFtcyAodG8gc3VwcG9ydCB0cmVlLXNoYWtlYWJsZSBzdHJlYW1zKS4gT24gQW5kcm9pZCBhbmQgaU9TLFxuICAgICAgICAgKiB0aGUgc3RyZWFtcyBhcmUgY3JlYXRlZCBkdXJpbmcgY29uc3RydWN0aW9uIG9mIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5qciA9IFtdLCB0aGlzLlFyID0gaSwgdGhpcy5Rci5FaSgodCA9PiB7XG4gICAgICAgICAgICBuLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IFVubGlrZSBpT1MsIGByZXN0YXJ0TmV0d29yaygpYCBpcyBjYWxsZWQgZXZlbiB3aGVuIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5ldHdvcmsgYmVjb21lcyB1bnJlYWNoYWJsZSBhcyB3ZSBkb24ndCBoYXZlIGFueSBvdGhlciB3YXkgdG8gdGVhclxuICAgICAgICAgICAgICAgIC8vIGRvd24gb3VyIHN0cmVhbXMuXG4gICAgICAgICAgICAgICAgZm8odGhpcykgJiYgKGsoXCJSZW1vdGVTdG9yZVwiLCBcIlJlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV0d29yayByZWFjaGFiaWxpdHkgY2hhbmdlLlwiKSwgXG4gICAgICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gVSh0KTtcbiAgICAgICAgICAgICAgICAgICAgZS5Lci5hZGQoNCAvKiBDb25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBybyhlKSwgZS5Xci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIFxuICAgICAgICAgICAgICAgICAgICBlLktyLmRlbGV0ZSg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IGlvKGUpO1xuICAgICAgICAgICAgICAgIH0odGhpcykpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHRoaXMuV3IgPSBuZXcgbm8obiwgcyk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbyh0KSB7XG4gICAgaWYgKGZvKHQpKSBmb3IgKGNvbnN0IGUgb2YgdC5qcikgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gcm8odCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmpyKSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIG9vKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICBuLnFyLmhhcyhlLnRhcmdldElkKSB8fCAoXG4gICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxuICAgIG4ucXIuc2V0KGUudGFyZ2V0SWQsIGUpLCBsbyhuKSA/IFxuICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXG4gICAgaG8obikgOiBEbyhuKS5jcigpICYmIGNvKG4sIGUpKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBsaXN0ZW4gZnJvbSBzZXJ2ZXIuIEl0IGlzIGEgbm8tb3AgaWYgdGhlIGdpdmVuIHRhcmdldCBpZCBpc1xuICogbm90IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovIGZ1bmN0aW9uIGFvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KSwgcyA9IERvKG4pO1xuICAgIG4ucXIuZGVsZXRlKGUpLCBzLmNyKCkgJiYgdW8obiwgZSksIDAgPT09IG4ucXIuc2l6ZSAmJiAocy5jcigpID8gcy5scigpIDogZm8obikgJiYgXG4gICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcbiAgICAvLyBoYXZlIG5vIGxpc3RlbmVycywgc2luY2Ugd2l0aG91dCBhbnkgbGlzdGVucyB0byBzZW5kIHdlIGNhbm5vdFxuICAgIC8vIGNvbmZpcm0gaWYgdGhlIHN0cmVhbSBpcyBoZWFsdGh5IGFuZCB1cGdyYWRlIHRvIE9ubGluZVN0YXRlLk9ubGluZS5cbiAgICBuLldyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSBhY2sgdG8gcHJvY2VzcyBhbnkgbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiBjbyh0LCBlKSB7XG4gICAgdC5Hci5ZKGUudGFyZ2V0SWQpLCBEbyh0KS5JcihlKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgcmVtb3ZhbCBvbiB0aGUgc2VydmVyIGJlZm9yZSB3ZSBwcm9jZXNzIGFueVxuICogbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiB1byh0LCBlKSB7XG4gICAgdC5Hci5ZKGUpLCBEbyh0KS5BcihlKTtcbn1cblxuZnVuY3Rpb24gaG8odCkge1xuICAgIHQuR3IgPSBuZXcga24oe1xuICAgICAgICBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0OiBlID0+IHQucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSksXG4gICAgICAgIEV0OiBlID0+IHQucXIuZ2V0KGUpIHx8IG51bGxcbiAgICB9KSwgRG8odCkuc3RhcnQoKSwgdC5Xci5PcigpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcbiAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXG4gKi8gZnVuY3Rpb24gbG8odCkge1xuICAgIHJldHVybiBmbyh0KSAmJiAhRG8odCkuYXIoKSAmJiB0LnFyLnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBmbyh0KSB7XG4gICAgcmV0dXJuIDAgPT09IFUodCkuS3Iuc2l6ZTtcbn1cblxuZnVuY3Rpb24gd28odCkge1xuICAgIHQuR3IgPSB2b2lkIDA7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9vKHQpIHtcbiAgICB0LnFyLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgIGNvKHQsIGUpO1xuICAgIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbW8odCwgZSkge1xuICAgIHdvKHQpLCBcbiAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxuICAgIGxvKHQpID8gKHQuV3IuTHIoZSksIGhvKHQpKSA6IFxuICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXG4gICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XG4gICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxuICAgIHQuV3Iuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnbyh0LCBlLCBuKSB7XG4gICAgaWYgKFxuICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICB0LldyLnNldChcIk9ubGluZVwiIC8qIE9ubGluZSAqLyksIGUgaW5zdGFuY2VvZiBObiAmJiAyIC8qIFJlbW92ZWQgKi8gPT09IGUuc3RhdGUgJiYgZS5jYXVzZSkgXG4gICAgLy8gVGhlcmUgd2FzIGFuIGVycm9yIG9uIGEgdGFyZ2V0LCBkb24ndCB3YWl0IGZvciBhIGNvbnNpc3RlbnQgc25hcHNob3RcbiAgICAvLyB0byByYWlzZSBldmVudHNcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqIEhhbmRsZXMgYW4gZXJyb3Igb24gYSB0YXJnZXQgKi9cbiAgICAgICAgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuY2F1c2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgZS50YXJnZXRJZHMpIFxuICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgdC5xci5oYXMocykgJiYgKGF3YWl0IHQucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbihzLCBuKSwgdC5xci5kZWxldGUocyksIHQuR3IucmVtb3ZlVGFyZ2V0KHMpKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEF0dGVtcHRzIHRvIGZpbGwgb3VyIHdyaXRlIHBpcGVsaW5lIHdpdGggd3JpdGVzIGZyb20gdGhlIExvY2FsU3RvcmUuXG4gKlxuICogQ2FsbGVkIGludGVybmFsbHkgdG8gYm9vdHN0cmFwIG9yIHJlZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgYW5kIGJ5XG4gKiBTeW5jRW5naW5lIHdoZW5ldmVyIHRoZXJlIGFyZSBuZXcgbXV0YXRpb25zIHRvIHByb2Nlc3MuXG4gKlxuICogU3RhcnRzIHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICovICh0LCBlKTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIGsoXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByZW1vdmUgdGFyZ2V0cyAlczogJXMgXCIsIGUudGFyZ2V0SWRzLmpvaW4oXCIsXCIpLCBuKSwgXG4gICAgICAgIGF3YWl0IHlvKHQsIG4pO1xuICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIERuID8gdC5Hci5ydChlKSA6IGUgaW5zdGFuY2VvZiBDbiA/IHQuR3IuZnQoZSkgOiB0LkdyLmN0KGUpLCBcbiAgICAhbi5pc0VxdWFsKGl0Lm1pbigpKSkgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IGxyKHQubG9jYWxTdG9yZSk7XG4gICAgICAgIG4uY29tcGFyZVRvKGUpID49IDAgJiYgXG4gICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XG4gICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKlxuICogVGFrZXMgYSBiYXRjaCBvZiBjaGFuZ2VzIGZyb20gdGhlIERhdGFzdG9yZSwgcmVwYWNrYWdlcyB0aGVtIGFzIGFcbiAqIFJlbW90ZUV2ZW50LCBhbmQgcGFzc2VzIHRoYXQgb24gdG8gdGhlIGxpc3RlbmVyLCB3aGljaCBpcyB0eXBpY2FsbHkgdGhlXG4gKiBTeW5jRW5naW5lLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LkdyLl90KGUpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSByZXN1bWUgdG9rZW5zLiBMb2NhbFN0b3JlIHdpbGwgdXBkYXRlIHRoZVxuICAgICAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LnFyLmdldChzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgdC5xci5zZXQocywgaS53aXRoUmVzdW1lVG9rZW4obi5yZXN1bWVUb2tlbiwgZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSwgXG4gICAgICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcbiAgICAgICAgICAgIC8vIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgIG4udGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5xci5nZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFuKSBcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZXN1bWUgdG9rZW4gZm9yIHRoZSB0YXJnZXQsIHNpbmNlIHdlJ3JlIGluIGEga25vd24gbWlzbWF0Y2hcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5xci5zZXQoZSwgbi53aXRoUmVzdW1lVG9rZW4od3QuRU1QVFlfQllURV9TVFJJTkcsIG4uc25hcHNob3RWZXJzaW9uKSksIFxuICAgICAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcbiAgICAgICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxuICAgICAgICAgICAgICAgIHVvKHQsIGUpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBzaShuLnRhcmdldCwgZSwgMSAvKiBFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLyAsIG4uc2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGNvKHQsIHMpO1xuICAgICAgICAgICAgfSkpLCB0LnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50KG4pO1xuICAgICAgICB9KHQsIG4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgayhcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLCBlKSwgYXdhaXQgeW8odCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY292ZXJ5IGxvZ2ljIGZvciBJbmRleGVkREIgZXJyb3JzIHRoYXQgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbFxuICogYG9wYCBzdWNjZWVkcy4gUmV0cmllcyBhcmUgc2NoZWR1bGVkIHdpdGggYmFja29mZiB1c2luZ1xuICogYGVucXVldWVSZXRyeWFibGUoKWAuIElmIGBvcCgpYCBpcyBub3QgcHJvdmlkZWQsIEluZGV4ZWREQiBhY2Nlc3MgaXNcbiAqIHZhbGlkYXRlZCB2aWEgYSBnZW5lcmljIG9wZXJhdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBiZWZvcmVcbiAqIGFueSByZXRyeSBhdHRlbXB0LlxuICovIGFzeW5jIGZ1bmN0aW9uIHlvKHQsIGUsIG4pIHtcbiAgICBpZiAoIXpzKGUpKSB0aHJvdyBlO1xuICAgIHQuS3IuYWRkKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IHJvKHQpLCB0LldyLnNldChcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gbHIodC5sb2NhbFN0b3JlKSksIFxuICAgIC8vIFByb2JlIEluZGV4ZWREQiBwZXJpb2RpY2FsbHkgYW5kIHJlLWVuYWJsZSBuZXR3b3JrXG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgayhcIlJlbW90ZVN0b3JlXCIsIFwiUmV0cnlpbmcgSW5kZXhlZERCIGFjY2Vzc1wiKSwgYXdhaXQgbigpLCB0LktyLmRlbGV0ZSgxIC8qIEluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgICAgICBhd2FpdCBpbyh0KTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgYG9wYC4gSWYgYG9wYCBmYWlscywgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbCBgb3BgXG4gKiBzdWNjZWVkcy4gUmV0dXJucyBhZnRlciB0aGUgZmlyc3QgYXR0ZW1wdC5cbiAqLyBmdW5jdGlvbiBwbyh0LCBlKSB7XG4gICAgcmV0dXJuIGUoKS5jYXRjaCgobiA9PiB5byh0LCBuLCBlKSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBFbyh0KSB7XG4gICAgY29uc3QgZSA9IFUodCksIG4gPSBDbyhlKTtcbiAgICBsZXQgcyA9IGUuVXIubGVuZ3RoID4gMCA/IGUuVXJbZS5Vci5sZW5ndGggLSAxXS5iYXRjaElkIDogLTE7XG4gICAgZm9yICg7VG8oZSk7ICkgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHdyKGUubG9jYWxTdG9yZSwgcyk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICAwID09PSBlLlVyLmxlbmd0aCAmJiBuLmxyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzID0gdC5iYXRjaElkLCBJbyhlLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IHlvKGUsIHQpO1xuICAgIH1cbiAgICBBbyhlKSAmJiBSbyhlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgd2UgY2FuIGFkZCB0byB0aGUgd3JpdGUgcGlwZWxpbmUgKGkuZS4gdGhlIG5ldHdvcmsgaXNcbiAqIGVuYWJsZWQgYW5kIHRoZSB3cml0ZSBwaXBlbGluZSBpcyBub3QgZnVsbCkuXG4gKi8gZnVuY3Rpb24gVG8odCkge1xuICAgIHJldHVybiBmbyh0KSAmJiB0LlVyLmxlbmd0aCA8IDEwO1xufVxuXG4vKipcbiAqIFF1ZXVlcyBhZGRpdGlvbmFsIHdyaXRlcyB0byBiZSBzZW50IHRvIHRoZSB3cml0ZSBzdHJlYW0sIHNlbmRpbmcgdGhlbVxuICogaW1tZWRpYXRlbHkgaWYgdGhlIHdyaXRlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAqLyBmdW5jdGlvbiBJbyh0LCBlKSB7XG4gICAgdC5Vci5wdXNoKGUpO1xuICAgIGNvbnN0IG4gPSBDbyh0KTtcbiAgICBuLmNyKCkgJiYgbi5QciAmJiBuLmJyKGUubXV0YXRpb25zKTtcbn1cblxuZnVuY3Rpb24gQW8odCkge1xuICAgIHJldHVybiBmbyh0KSAmJiAhQ28odCkuYXIoKSAmJiB0LlVyLmxlbmd0aCA+IDA7XG59XG5cbmZ1bmN0aW9uIFJvKHQpIHtcbiAgICBDbyh0KS5zdGFydCgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBQbyh0KSB7XG4gICAgQ28odCkuU3IoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYm8odCkge1xuICAgIGNvbnN0IGUgPSBDbyh0KTtcbiAgICAvLyBTZW5kIHRoZSB3cml0ZSBwaXBlbGluZSBub3cgdGhhdCB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5VcikgZS5icihuLm11dGF0aW9ucyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHZvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5Vci5zaGlmdCgpLCBpID0gbmkuZnJvbShzLCBlLCBuKTtcbiAgICBhd2FpdCBwbyh0LCAoKCkgPT4gdC5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUoaSkpKSwgXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvbiBhbm90aGVyXG4gICAgLy8gc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgYXdhaXQgRW8odCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFZvKHQsIGUpIHtcbiAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBhZnRlciB0aGUgd3JpdGUgaGFuZHNoYWtlIGNvbXBsZXRlcywgYSB3cml0ZVxuICAgIC8vIG9wZXJhdGlvbiBmYWlsZWQgYW5kIHdlIGZhaWwgdGhlIHBlbmRpbmcgb3BlcmF0aW9uLlxuICAgIGUgJiYgQ28odCkuUHIgJiYgXG4gICAgLy8gVGhpcyBlcnJvciBhZmZlY3RzIHRoZSBhY3R1YWwgd3JpdGUuXG4gICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBPbmx5IGhhbmRsZSBwZXJtYW5lbnQgZXJyb3JzIGhlcmUuIElmIGl0J3MgdHJhbnNpZW50LCBqdXN0IGxldCB0aGUgcmV0cnlcbiAgICAgICAgLy8gbG9naWMga2ljayBpbi5cbiAgICAgICAgaWYgKG4gPSBlLmNvZGUsIGxuKG4pICYmIG4gIT09IHEuQUJPUlRFRCkge1xuICAgICAgICAgICAgLy8gVGhpcyB3YXMgYSBwZXJtYW5lbnQgZXJyb3IsIHRoZSByZXF1ZXN0IGl0c2VsZiB3YXMgdGhlIHByb2JsZW1cbiAgICAgICAgICAgIC8vIHNvIGl0J3Mgbm90IGdvaW5nIHRvIHN1Y2NlZWQgaWYgd2UgcmVzZW5kIGl0LlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuVXIuc2hpZnQoKTtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSBpdCdzIGFsc28gdW5saWtlbHkgdGhhdCB0aGUgc2VydmVyIGl0c2VsZiBpcyBtZWx0aW5nXG4gICAgICAgICAgICAvLyBkb3duIC0tIHRoaXMgd2FzIGp1c3QgYSBiYWQgcmVxdWVzdCBzbyBpbmhpYml0IGJhY2tvZmYgb24gdGhlIG5leHRcbiAgICAgICAgICAgIC8vIHJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBDbyh0KS5ocigpLCBhd2FpdCBwbyh0LCAoKCkgPT4gdC5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUobi5iYXRjaElkLCBlKSkpLCBcbiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb25cbiAgICAgICAgICAgIC8vIGFub3RoZXIgc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgICAgICAgICBhd2FpdCBFbyh0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbjtcbiAgICB9KHQsIGUpLCBcbiAgICAvLyBUaGUgd3JpdGUgc3RyZWFtIG1pZ2h0IGhhdmUgYmVlbiBzdGFydGVkIGJ5IHJlZmlsbGluZyB0aGUgd3JpdGVcbiAgICAvLyBwaXBlbGluZSBmb3IgZmFpbGVkIHdyaXRlc1xuICAgIEFvKHQpICYmIFJvKHQpO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBTbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCk7XG4gICAgZSA/IChuLktyLmRlbGV0ZSgyIC8qIElzU2Vjb25kYXJ5ICovKSwgYXdhaXQgaW8obikpIDogZSB8fCAobi5Lci5hZGQoMiAvKiBJc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IHJvKG4pLCBuLldyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBEbyh0KSB7XG4gICAgcmV0dXJuIHQuenIgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LnpyID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gVSh0KTtcbiAgICAgICAgcmV0dXJuIHMuQ3IoKSwgbmV3IFpyKGUsIHMubnIsIHMuY3JlZGVudGlhbHMsIHMuTiwgbik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIFNpOiBfby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBDaTogbW8uYmluZChudWxsLCB0KSxcbiAgICAgICAgVHI6IGdvLmJpbmQobnVsbCwgdClcbiAgICB9KSwgdC5qci5wdXNoKChhc3luYyBlID0+IHtcbiAgICAgICAgZSA/ICh0LnpyLmhyKCksIGxvKHQpID8gaG8odCkgOiB0LldyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSkgOiAoYXdhaXQgdC56ci5zdG9wKCksIFxuICAgICAgICB3byh0KSk7XG4gICAgfSkpKSwgdC56cjtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdyaXRlU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXcml0ZVN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIENvKHQpIHtcbiAgICByZXR1cm4gdC5IciB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuSHIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBVKHQpO1xuICAgICAgICByZXR1cm4gcy5DcigpLCBuZXcgdG8oZSwgcy5uciwgcy5jcmVkZW50aWFscywgcy5OLCBuKTtcbiAgICB9KHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgU2k6IFBvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENpOiBWby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBWcjogYm8uYmluZChudWxsLCB0KSxcbiAgICAgICAgdnI6IHZvLmJpbmQobnVsbCwgdClcbiAgICB9KSwgdC5qci5wdXNoKChhc3luYyBlID0+IHtcbiAgICAgICAgZSA/ICh0LkhyLmhyKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IEVvKHQpKSA6IChhd2FpdCB0LkhyLnN0b3AoKSwgdC5Vci5sZW5ndGggPiAwICYmIChrKFwiUmVtb3RlU3RvcmVcIiwgYFN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoICR7dC5Vci5sZW5ndGh9IHBlbmRpbmcgd3JpdGVzYCksIFxuICAgICAgICB0LlVyID0gW10pKTtcbiAgICB9KSkpLCB0LkhyO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cbiAqXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gKlxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXG4gKlxuICogTm90ZTogV2UgaW1wbGVtZW50IGBQcm9taXNlTGlrZWAgaW5zdGVhZCBvZiBgUHJvbWlzZWAsIGFzIHRoZSBgUHJvbWlzZWAgdHlwZVxuICogaW4gbmV3ZXIgdmVyc2lvbnMgb2YgVHlwZVNjcmlwdCBkZWZpbmVzIGBmaW5hbGx5YCwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpblxuICogSUUuXG4gKi9cbmNsYXNzIE5vIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMudGltZXJJZCA9IGUsIHRoaXMudGFyZ2V0VGltZU1zID0gbiwgdGhpcy5vcCA9IHMsIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gaSwgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgaiwgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpLCBcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKCh0ID0+IHt9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSAtIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxuICAgICAqIEBwYXJhbSBpZCAtIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXG4gICAgICogQHBhcmFtIGRlbGF5TXMgLSBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxuICAgICAqIEBwYXJhbSBvcCAtIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZUFuZFNjaGVkdWxlKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IERhdGUubm93KCkgKyBuLCBvID0gbmV3IE5vKHQsIGUsIHIsIHMsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQodCkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKHQpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IEsocS5DQU5DRUxMRUQsIFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiICsgKHQgPyBcIjogXCIgKyB0IDogXCJcIikpKSk7XG4gICAgfVxuICAgIGhhbmRsZURlbGF5RWxhcHNlZCgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgPyAodGhpcy5jbGVhclRpbWVvdXQoKSwgXG4gICAgICAgIHRoaXMub3AoKS50aGVuKCh0ID0+IHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KSkpKSA6IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyksIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSwgXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmVzdG9yZUVycm9yIHRoYXQgY2FuIGJlIHN1cmZhY2VkIHRvIHRoZSB1c2VyIGlmIHRoZSBwcm92aWRlZFxuICogZXJyb3IgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gUmUtdGhyb3dzIHRoZSBlcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24geG8odCwgZSkge1xuICAgIGlmICgkKFwiQXN5bmNRdWV1ZVwiLCBgJHtlfTogJHt0fWApLCB6cyh0KSkgcmV0dXJuIG5ldyBLKHEuVU5BVkFJTEFCTEUsIGAke2V9OiAke3R9YCk7XG4gICAgdGhyb3cgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIGtvIHtcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQgPyAoZSwgbikgPT4gdChlLCBuKSB8fCBQdC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiAodCwgZSkgPT4gUHQuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpLCBcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IFRuKCksIHRoaXMuc29ydGVkU2V0ID0gbmV3IGRuKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXG4gICAgICogY29tcGFyYXRvci5cbiAgICAgKi8gICAgc3RhdGljIGVtcHR5U2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBrbyh0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XG4gICAgICovICAgIGluZGV4T2YodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZihlKSA6IC0xO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovICAgIGFkZCh0KSB7XG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxuICAgICAgICBjb25zdCBlID0gdGhpcy5kZWxldGUodC5rZXkpO1xuICAgICAgICByZXR1cm4gZS5jb3B5KGUua2V5ZWRNYXAuaW5zZXJ0KHQua2V5LCB0KSwgZS5zb3J0ZWRTZXQuaW5zZXJ0KHQsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUodCksIHRoaXMuc29ydGVkU2V0LnJlbW92ZShlKSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGtvKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCksIG4gPSB0LnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKCF0LmlzRXF1YWwocykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgMCA9PT0gdC5sZW5ndGggPyBcIkRvY3VtZW50U2V0ICgpXCIgOiBcIkRvY3VtZW50U2V0IChcXG4gIFwiICsgdC5qb2luKFwiICBcXG5cIikgKyBcIlxcbilcIjtcbiAgICB9XG4gICAgY29weSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcga287XG4gICAgICAgIHJldHVybiBuLmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3IsIG4ua2V5ZWRNYXAgPSB0LCBuLnNvcnRlZFNldCA9IGUsIG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxuICovIGNsYXNzICRvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5KciA9IG5ldyBkbihQdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2sodCkge1xuICAgICAgICBjb25zdCBlID0gdC5kb2Mua2V5LCBuID0gdGhpcy5Kci5nZXQoZSk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIEFkZGVkICovICE9PSB0LnR5cGUgJiYgMyAvKiBNZXRhZGF0YSAqLyA9PT0gbi50eXBlID8gdGhpcy5KciA9IHRoaXMuSnIuaW5zZXJ0KGUsIHQpIDogMyAvKiBNZXRhZGF0YSAqLyA9PT0gdC50eXBlICYmIDEgLyogUmVtb3ZlZCAqLyAhPT0gbi50eXBlID8gdGhpcy5KciA9IHRoaXMuSnIuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IG4udHlwZSxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIE1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMiAvKiBNb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5KciA9IHRoaXMuSnIuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLkpyID0gdGhpcy5Kci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMSAvKiBSZW1vdmVkICovID09PSB0LnR5cGUgJiYgMCAvKiBBZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5KciA9IHRoaXMuSnIucmVtb3ZlKGUpIDogMSAvKiBSZW1vdmVkICovID09PSB0LnR5cGUgJiYgMiAvKiBNb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5KciA9IHRoaXMuSnIuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBBZGRlZCAqLyA9PT0gdC50eXBlICYmIDEgLyogUmVtb3ZlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5KciA9IHRoaXMuSnIuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgIE0oKSA6IHRoaXMuSnIgPSB0aGlzLkpyLmluc2VydChlLCB0KTtcbiAgICB9XG4gICAgWXIoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnIuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQucHVzaChuKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgT28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuZG9jcyA9IGUsIHRoaXMub2xkRG9jcyA9IG4sIHRoaXMuZG9jQ2hhbmdlcyA9IHMsIHRoaXMubXV0YXRlZEtleXMgPSBpLCBcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSByLCB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBvLCB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIGFsbCBkb2N1bWVudHMgaW4gdGhlIHNuYXBzaG90IHdlcmUgYWRkZWQuICovICAgIHN0YXRpYyBmcm9tSW5pdGlhbERvY3VtZW50cyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgbmV3IE9vKHQsIGUsIGtvLmVtcHR5U2V0KGUpLCBpLCBuLCBzLCBcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gITAsIFxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEpO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZSAmJiB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPT09IHQuc3luY1N0YXRlQ2hhbmdlZCAmJiB0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwodC5tdXRhdGVkS2V5cykgJiYgSWUodGhpcy5xdWVyeSwgdC5xdWVyeSkgJiYgdGhpcy5kb2NzLmlzRXF1YWwodC5kb2NzKSAmJiB0aGlzLm9sZERvY3MuaXNFcXVhbCh0Lm9sZERvY3MpKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NDaGFuZ2VzLCBuID0gdC5kb2NDaGFuZ2VzO1xuICAgICAgICBpZiAoZS5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQrKykgaWYgKGVbdF0udHlwZSAhPT0gblt0XS50eXBlIHx8ICFlW3RdLmRvYy5pc0VxdWFsKG5bdF0uZG9jKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxuICovIGNsYXNzIEZvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5YciA9IHZvaWQgMCwgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIE1vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IEtpKCh0ID0+IEFlKHQpKSwgSWUpLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLlpyID0gbmV3IFNldDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIExvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMSwgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIgfHwgKGkgPSAhMCwgciA9IG5ldyBGbyksIGkpIHRyeSB7XG4gICAgICAgIHIuWHIgPSBhd2FpdCBuLm9uTGlzdGVuKHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHhvKHQsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtSZShlLnF1ZXJ5KX0nIGZhaWxlZGApO1xuICAgICAgICByZXR1cm4gdm9pZCBlLm9uRXJyb3Iobik7XG4gICAgfVxuICAgIGlmIChuLnF1ZXJpZXMuc2V0KHMsIHIpLCByLmxpc3RlbmVycy5wdXNoKGUpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICBlLmVvKG4ub25saW5lU3RhdGUpLCByLlhyKSB7XG4gICAgICAgIGUubm8oci5YcikgJiYgS28obik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBCbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITE7XG4gICAgY29uc3QgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgY29uc3QgdCA9IHIubGlzdGVuZXJzLmluZGV4T2YoZSk7XG4gICAgICAgIHQgPj0gMCAmJiAoci5saXN0ZW5lcnMuc3BsaWNlKHQsIDEpLCBpID0gMCA9PT0gci5saXN0ZW5lcnMubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGkpIHJldHVybiBuLnF1ZXJpZXMuZGVsZXRlKHMpLCBuLm9uVW5saXN0ZW4ocyk7XG59XG5cbmZ1bmN0aW9uIFVvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICBsZXQgcyA9ICExO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnF1ZXJ5LCBpID0gbi5xdWVyaWVzLmdldChlKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBpLmxpc3RlbmVycykgZS5ubyh0KSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIGkuWHIgPSB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHMgJiYgS28obik7XG59XG5cbmZ1bmN0aW9uIHFvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gVSh0KSwgaSA9IHMucXVlcmllcy5nZXQoZSk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgdCBvZiBpLmxpc3RlbmVycykgdC5vbkVycm9yKG4pO1xuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXG4gICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXG4gICAgICAgIHMucXVlcmllcy5kZWxldGUoZSk7XG59XG5cbi8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuZnVuY3Rpb24gS28odCkge1xuICAgIHQuWnIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQubmV4dCgpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqLyBjbGFzcyBqbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5zbyA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlvID0gITEsIHRoaXMucm8gPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIHRoaXMub3B0aW9ucyA9IG4gfHwge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIG5ldyBWaWV3U25hcHNob3QgdG8gdGhpcyBsaXN0ZW5lciwgcmFpc2luZyBhIHVzZXItZmFjaW5nIGV2ZW50XG4gICAgICogaWYgYXBwbGljYWJsZSAoZGVwZW5kaW5nIG9uIHdoYXQgY2hhbmdlZCwgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW50b1xuICAgICAqIG1ldGFkYXRhLW9ubHkgY2hhbmdlcywgZXRjLikuIFJldHVybnMgdHJ1ZSBpZiBhIHVzZXItZmFjaW5nIGV2ZW50IHdhc1xuICAgICAqIGluZGVlZCByYWlzZWQuXG4gICAgICovICAgIG5vKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcykge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBtZXRhZGF0YSBvbmx5IGNoYW5nZXMuXG4gICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5kb2NDaGFuZ2VzKSAzIC8qIE1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgZS5wdXNoKG4pO1xuICAgICAgICAgICAgdCA9IG5ldyBPbyh0LnF1ZXJ5LCB0LmRvY3MsIHQub2xkRG9jcywgZSwgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUsIHQuc3luY1N0YXRlQ2hhbmdlZCwgXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLmlvID8gdGhpcy5vbyh0KSAmJiAodGhpcy5zby5uZXh0KHQpLCBlID0gITApIDogdGhpcy5hbyh0LCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5jbyh0KSwgXG4gICAgICAgIGUgPSAhMCksIHRoaXMucm8gPSB0LCBlO1xuICAgIH1cbiAgICBvbkVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5zby5lcnJvcih0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIGVvKHQpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLnJvICYmICF0aGlzLmlvICYmIHRoaXMuYW8odGhpcy5ybywgdCkgJiYgKHRoaXMuY28odGhpcy5ybyksIGUgPSAhMCksIFxuICAgICAgICBlO1xuICAgIH1cbiAgICBhbyh0LCBlKSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCF0LmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyAhPT0gZTtcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxuICAgICAgICAgICAgICAgIHJldHVybiAoIXRoaXMub3B0aW9ucy51byB8fCAhbikgJiYgKCF0LmRvY3MuaXNFbXB0eSgpIHx8IFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gPT09IGUpO1xuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzIG9yIHdlIGFyZSBvZmZsaW5lXG4gICAgICAgIH1cbiAgICBvbyh0KSB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxuICAgICAgICAvLyBwcm9wYWdhdGUuXG4gICAgICAgIGlmICh0LmRvY0NoYW5nZXMubGVuZ3RoID4gMCkgcmV0dXJuICEwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5ybyAmJiB0aGlzLnJvLmhhc1BlbmRpbmdXcml0ZXMgIT09IHQuaGFzUGVuZGluZ1dyaXRlcztcbiAgICAgICAgcmV0dXJuICEoIXQuc3luY1N0YXRlQ2hhbmdlZCAmJiAhZSkgJiYgITAgPT09IHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXG4gICAgICAgIH1cbiAgICBjbyh0KSB7XG4gICAgICAgIHQgPSBPby5mcm9tSW5pdGlhbERvY3VtZW50cyh0LnF1ZXJ5LCB0LmRvY3MsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlKSwgdGhpcy5pbyA9ICEwLCBcbiAgICAgICAgdGhpcy5zby5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb21wbGV0ZSBlbGVtZW50IGluIHRoZSBidW5kbGUgc3RyZWFtLCB0b2dldGhlciB3aXRoIHRoZSBieXRlIGxlbmd0aCBpdFxuICogb2NjdXBpZXMgaW4gdGhlIHN0cmVhbS5cbiAqLyBjbGFzcyBRbyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gSG93IG1hbnkgYnl0ZXMgdGhpcyBlbGVtZW50IHRha2VzIHRvIHN0b3JlIGluIHRoZSBidW5kbGUuXG4gICAgZSkge1xuICAgICAgICB0aGlzLnBheWxvYWQgPSB0LCB0aGlzLmJ5dGVMZW5ndGggPSBlO1xuICAgIH1cbiAgICBobygpIHtcbiAgICAgICAgcmV0dXJuIFwibWV0YWRhdGFcIiBpbiB0aGlzLnBheWxvYWQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBvYmplY3RzIGZyb20gYnVuZGxlcyB0byBtb2RlbCBvYmplY3RzIGluIHRoZSBTREsuXG4gKi8gY2xhc3MgV28ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5OID0gdDtcbiAgICB9XG4gICAgem4odCkge1xuICAgICAgICByZXR1cm4gR24odGhpcy5OLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBCdW5kbGVEb2N1bWVudCB0byBhIE11dGFibGVEb2N1bWVudC5cbiAgICAgKi8gICAgSG4odCkge1xuICAgICAgICByZXR1cm4gdC5tZXRhZGF0YS5leGlzdHMgPyBabih0aGlzLk4sIHQuZG9jdW1lbnQsICExKSA6IHF0Lm5ld05vRG9jdW1lbnQodGhpcy56bih0Lm1ldGFkYXRhLm5hbWUpLCB0aGlzLkpuKHQubWV0YWRhdGEucmVhZFRpbWUpKTtcbiAgICB9XG4gICAgSm4odCkge1xuICAgICAgICByZXR1cm4gS24odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY2xhc3MgdG8gcHJvY2VzcyB0aGUgZWxlbWVudHMgZnJvbSBhIGJ1bmRsZSwgbG9hZCB0aGVtIGludG8gbG9jYWxcbiAqIHN0b3JhZ2UgYW5kIHByb3ZpZGUgcHJvZ3Jlc3MgdXBkYXRlIHdoaWxlIGxvYWRpbmcuXG4gKi8gY2xhc3MgR28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5sbyA9IHQsIHRoaXMubG9jYWxTdG9yZSA9IGUsIHRoaXMuTiA9IG4sIFxuICAgICAgICAvKiogQmF0Y2hlZCBxdWVyaWVzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBbXSwgXG4gICAgICAgIC8qKiBCYXRjaGVkIGRvY3VtZW50cyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbXSwgdGhpcy5wcm9ncmVzcyA9IHpvKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICBmbyh0KSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gdC5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZSA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICByZXR1cm4gdC5wYXlsb2FkLm5hbWVkUXVlcnkgPyB0aGlzLnF1ZXJpZXMucHVzaCh0LnBheWxvYWQubmFtZWRRdWVyeSkgOiB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YSA/ICh0aGlzLmRvY3VtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICB9KSwgdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrZSkgOiB0LnBheWxvYWQuZG9jdW1lbnQgJiYgKHRoaXMuZG9jdW1lbnRzW3RoaXMuZG9jdW1lbnRzLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gdC5wYXlsb2FkLmRvY3VtZW50LCBcbiAgICAgICAgKytlKSwgZSAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSBlLCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAgd28odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcCwgbiA9IG5ldyBXbyh0aGlzLk4pO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkgaWYgKHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4uem4ocy5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKGUuZ2V0KG4pIHx8IFBuKCkpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBUcih0aGlzLmxvY2FsU3RvcmUsIG5ldyBXbyh0aGlzLk4pLCB0aGlzLmRvY3VtZW50cywgdGhpcy5sby5pZCksIGUgPSB0aGlzLndvKHRoaXMuZG9jdW1lbnRzKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMucXVlcmllcykgYXdhaXQgSXIodGhpcy5sb2NhbFN0b3JlLCB0LCBlLmdldCh0Lm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIG5ldyBzcihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIHpvKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIEpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBZbyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuX28gPSBlLCB0aGlzLm1vID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMueW8gPSBQbigpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IFBuKCksIHRoaXMucG8gPSBiZSh0KSwgdGhpcy5FbyA9IG5ldyBrbyh0aGlzLnBvKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgVG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIElvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyBlLkFvIDogbmV3ICRvLCBzID0gZSA/IGUuRW8gOiB0aGlzLkVvO1xuICAgICAgICBsZXQgaSA9IGUgPyBlLm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgciA9IHMsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IGEgPSB3ZSh0aGlzLnF1ZXJ5KSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmxhc3QoKSA6IG51bGwsIGMgPSBfZSh0aGlzLnF1ZXJ5KSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKHQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBzLmdldCh0KSwgaCA9IFBlKHRoaXMucXVlcnksIGUpID8gZSA6IG51bGwsIGwgPSAhIXUgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXModS5rZXkpLCBmID0gISFoICYmIChoLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhoLmtleSkgJiYgaC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IGQgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ICYmIGgpIHtcbiAgICAgICAgICAgICAgICB1LmRhdGEuaXNFcXVhbChoLmRhdGEpID8gbCAhPT0gZiAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHRoaXMuUm8odSwgaCkgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICAgICAgfSksIGQgPSAhMCwgKGEgJiYgdGhpcy5wbyhoLCBhKSA+IDAgfHwgYyAmJiB0aGlzLnBvKGgsIGMpIDwgMCkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZXJlIG1heSBiZSBzb21lIG90aGVyIGRvYyBpbiB0aGUgbG9jYWwgY2FjaGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgfSBlbHNlICF1ICYmIGggPyAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHUgJiYgIWggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB1XG4gICAgICAgICAgICB9KSwgZCA9ICEwLCAoYSB8fCBjKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIGQgJiYgKGggPyAociA9IHIuYWRkKGgpLCBpID0gZiA/IGkuYWRkKHQpIDogaS5kZWxldGUodCkpIDogKHIgPSByLmRlbGV0ZSh0KSwgaSA9IGkuZGVsZXRlKHQpKSk7XG4gICAgICAgIH0pKSwgd2UodGhpcy5xdWVyeSkgfHwgX2UodGhpcy5xdWVyeSkpIGZvciAoO3Iuc2l6ZSA+IHRoaXMucXVlcnkubGltaXQ7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHdlKHRoaXMucXVlcnkpID8gci5sYXN0KCkgOiByLmZpcnN0KCk7XG4gICAgICAgICAgICByID0gci5kZWxldGUodC5rZXkpLCBpID0gaS5kZWxldGUodC5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIEVvOiByLFxuICAgICAgICAgICAgQW86IG4sXG4gICAgICAgICAgICBMbjogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIFJvKHQsIGUpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gdC5oYXNMb2NhbE11dGF0aW9ucyAmJiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhZS5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIC0gV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uXG4gICAgICogICAgICAgIHRoaXMgY2hhbmdlLlxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgLSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLkVvO1xuICAgICAgICB0aGlzLkVvID0gdC5FbywgdGhpcy5tdXRhdGVkS2V5cyA9IHQubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IGkgPSB0LkFvLllyKCk7XG4gICAgICAgIGkuc29ydCgoKHQsIGUpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIE1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuKHQpIC0gbihlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC50eXBlLCBlLnR5cGUpIHx8IHRoaXMucG8odC5kb2MsIGUuZG9jKSkpLCB0aGlzLlBvKG4pO1xuICAgICAgICBjb25zdCByID0gZSA/IHRoaXMuYm8oKSA6IFtdLCBvID0gMCA9PT0gdGhpcy55by5zaXplICYmIHRoaXMuY3VycmVudCA/IDEgLyogU3luY2VkICovIDogMCAvKiBMb2NhbCAqLyAsIGEgPSBvICE9PSB0aGlzLm1vO1xuICAgICAgICBpZiAodGhpcy5tbyA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IGEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBPbyh0aGlzLnF1ZXJ5LCB0LkVvLCBzLCBpLCB0Lm11dGF0ZWRLZXlzLCAwIC8qIExvY2FsICovID09PSBvLCBhLCBcbiAgICAgICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEpLFxuICAgICAgICAgICAgICAgIHZvOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZvOiByXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSB2aWV3LCBwb3RlbnRpYWxseSBnZW5lcmF0aW5nIGFcbiAgICAgKiBWaWV3Q2hhbmdlIGlmIHRoZSB2aWV3J3Mgc3luY1N0YXRlIGNoYW5nZXMgYXMgYSByZXN1bHQuXG4gICAgICovICAgIGVvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudCAmJiBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovID09PSB0ID8gKFxuICAgICAgICAvLyBJZiB3ZSdyZSBvZmZsaW5lLCBzZXQgYGN1cnJlbnRgIHRvIGZhbHNlIGFuZCB0aGVuIGNhbGwgYXBwbHlDaGFuZ2VzKClcbiAgICAgICAgLy8gdG8gcmVmcmVzaCBvdXIgc3luY1N0YXRlIGFuZCBnZW5lcmF0ZSBhIFZpZXdDaGFuZ2UgYXMgYXBwcm9wcmlhdGUuIFdlXG4gICAgICAgIC8vIGFyZSBndWFyYW50ZWVkIHRvIGdldCBhIG5ldyBUYXJnZXRDaGFuZ2UgdGhhdCBzZXRzIGBjdXJyZW50YCBiYWNrIHRvXG4gICAgICAgIC8vIHRydWUgb25jZSB0aGUgY2xpZW50IGlzIGJhY2sgb25saW5lLlxuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgdGhpcy5hcHBseUNoYW5nZXMoe1xuICAgICAgICAgICAgRW86IHRoaXMuRW8sXG4gICAgICAgICAgICBBbzogbmV3ICRvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICBMbjogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSkpIDoge1xuICAgICAgICAgICAgdm86IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgZG9jIGZvciB0aGUgZ2l2ZW4ga2V5IHNob3VsZCBiZSBpbiBsaW1iby5cbiAgICAgKi8gICAgVm8odCkge1xuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cbiAgICAgICAgcmV0dXJuICF0aGlzLl9vLmhhcyh0KSAmJiAoXG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBkb2Vzbid0IHRoaW5rIGl0J3MgYSByZXN1bHQsIHNvIGl0IHNob3VsZG4ndCBiZSBpbiBsaW1iby5cbiAgICAgICAgISF0aGlzLkVvLmhhcyh0KSAmJiAhdGhpcy5Fby5nZXQodCkuaGFzTG9jYWxNdXRhdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHN5bmNlZERvY3VtZW50cywgY3VycmVudCwgYW5kIGxpbWJvIGRvY3MgYmFzZWQgb24gdGhlIGdpdmVuIGNoYW5nZS5cbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoYW5nZXMgdG8gd2hpY2ggZG9jcyBhcmUgaW4gbGltYm8uXG4gICAgICovICAgIFBvKHQpIHtcbiAgICAgICAgdCAmJiAodC5hZGRlZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHRoaXMuX28gPSB0aGlzLl9vLmFkZCh0KSkpLCB0Lm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4ge30pKSwgXG4gICAgICAgIHQucmVtb3ZlZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHRoaXMuX28gPSB0aGlzLl9vLmRlbGV0ZSh0KSkpLCB0aGlzLmN1cnJlbnQgPSB0LmN1cnJlbnQpO1xuICAgIH1cbiAgICBibygpIHtcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZGV0ZXJtaW5lIGxpbWJvIGRvY3VtZW50cyB3aGVuIHdlJ3JlIGluLXN5bmMgd2l0aCB0aGUgc2VydmVyLlxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuIFtdO1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogRG8gdGhpcyBpbmNyZW1lbnRhbGx5IHNvIHRoYXQgaXQncyBub3QgcXVhZHJhdGljIHdoZW5cbiAgICAgICAgLy8gdXBkYXRpbmcgbWFueSBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMueW87XG4gICAgICAgIHRoaXMueW8gPSBQbigpLCB0aGlzLkVvLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5Wbyh0LmtleSkgJiYgKHRoaXMueW8gPSB0aGlzLnlvLmFkZCh0LmtleSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy55by5oYXModCkgfHwgZS5wdXNoKG5ldyBKbyh0KSk7XG4gICAgICAgIH0pKSwgdGhpcy55by5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQuaGFzKG4pIHx8IGUucHVzaChuZXcgSG8obikpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXG4gICAgICogcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIFNvKHQpIHtcbiAgICAgICAgdGhpcy5fbyA9IHQuR24sIHRoaXMueW8gPSBQbigpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Jbyh0LmRvY3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyhlLCAvKnVwZGF0ZUxpbWJvRG9jdW1lbnRzPSovICEwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgdGhpcyBxdWVyeSB3YXMganVzdCBsaXN0ZW5lZCB0by4gQ29udGFpbnNcbiAgICAgKiBhIGRvY3VtZW50IGFkZCBmb3IgZXZlcnkgZXhpc3RpbmcgZG9jdW1lbnQgYW5kIHRoZSBgZnJvbUNhY2hlYCBhbmRcbiAgICAgKiBgaGFzUGVuZGluZ1dyaXRlc2Agc3RhdHVzIG9mIHRoZSBhbHJlYWR5IGVzdGFibGlzaGVkIHZpZXcuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBEbygpIHtcbiAgICAgICAgcmV0dXJuIE9vLmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuRW8sIHRoaXMubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IHRoaXMubW8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBYbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGl0c2VsZi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0IG51bWJlciBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgdGhhdCBpcyB1c2VkIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSB0byBpZGVudGlmeSB0aGlzIHF1ZXJ5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB2aWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0XG4gICAgICogZG9jcyBhcmUgaW4gdGhlIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyxcbiAgICAgKiBhbmQgYXBwbGllcyB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0XG4gICAgICogcG9zc2libGUgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLnRhcmdldElkID0gZSwgdGhpcy52aWV3ID0gbjtcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgYSBsaW1ibyByZXNvbHV0aW9uLiAqLyBjbGFzcyBabyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5DbyA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIHRhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgcywgaSwgcikge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLnJlbW90ZVN0b3JlID0gZSwgdGhpcy5ldmVudE1hbmFnZXIgPSBuLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gcywgXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zID0gciwgdGhpcy5ObyA9IHt9LCB0aGlzLnhvID0gbmV3IEtpKCh0ID0+IEFlKHQpKSwgSWUpLCBcbiAgICAgICAgdGhpcy5rbyA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJG8gPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk9vID0gbmV3IGRuKFB0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhbiBhY3RpdmUgbGltYm8gcmVzb2x1dGlvbiBmb3IgZWFjaFxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0IElEIHRoYXQgd2FzIHN0YXJ0ZWQgZm9yIHRoZSBwdXJwb3NlIG9mIGxpbWJvIHJlc29sdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkZvID0gbmV3IE1hcCwgdGhpcy5NbyA9IG5ldyBSciwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMuTG8gPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy5CbyA9IG5ldyBNYXAsIHRoaXMuVW8gPSBDaS5pZSgpLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICAvLyBUaGUgcHJpbWFyeSBzdGF0ZSBpcyBzZXQgdG8gYHRydWVgIG9yIGBmYWxzZWAgaW1tZWRpYXRlbHkgYWZ0ZXIgRmlyZXN0b3JlXG4gICAgICAgIC8vIHN0YXJ0dXAuIEluIHRoZSBpbnRlcmltLCBhIGNsaWVudCBzaG91bGQgb25seSBiZSBjb25zaWRlcmVkIHByaW1hcnkgaWZcbiAgICAgICAgLy8gYGlzUHJpbWFyeWAgaXMgdHJ1ZS5cbiAgICAgICAgdGhpcy5xbyA9IHZvaWQgMDtcbiAgICB9XG4gICAgZ2V0IGlzUHJpbWFyeUNsaWVudCgpIHtcbiAgICAgICAgcmV0dXJuICEwID09PSB0aGlzLnFvO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIG5ldyBsaXN0ZW4sIHJlc29sdmVzIHByb21pc2Ugd2hlbiBsaXN0ZW4gZW5xdWV1ZWQgdG8gdGhlXG4gKiBzZXJ2ZXIuIEFsbCB0aGUgc3Vic2VxdWVudCB2aWV3IHNuYXBzaG90cyBvciBlcnJvcnMgYXJlIHNlbnQgdG8gdGhlXG4gKiBzdWJzY3JpYmVkIGhhbmRsZXJzLiBSZXR1cm5zIHRoZSBpbml0aWFsIHNuYXBzaG90LlxuICovXG5hc3luYyBmdW5jdGlvbiBlYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IERhKHQpO1xuICAgIGxldCBzLCBpO1xuICAgIGNvbnN0IHIgPSBuLnhvLmdldChlKTtcbiAgICBpZiAocikgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXaXRoIE11bHRpLVRhYiBXZWIsIGl0IGlzIHBvc3NpYmxlIHRoYXQgYSBxdWVyeSB2aWV3XG4gICAgLy8gYWxyZWFkeSBleGlzdHMgd2hlbiBFdmVudE1hbmFnZXIgY2FsbHMgdXMgZm9yIHRoZSBmaXJzdCB0aW1lLiBUaGlzXG4gICAgLy8gaGFwcGVucyB3aGVuIHRoZSBwcmltYXJ5IHRhYiBpcyBhbHJlYWR5IGxpc3RlbmluZyB0byB0aGlzIHF1ZXJ5IG9uXG4gICAgLy8gYmVoYWxmIG9mIGFub3RoZXIgdGFiIGFuZCB0aGUgdXNlciBvZiB0aGUgcHJpbWFyeSBhbHNvIHN0YXJ0cyBsaXN0ZW5pbmdcbiAgICAvLyB0byB0aGUgcXVlcnkuIEV2ZW50TWFuYWdlciB3aWxsIG5vdCBoYXZlIGFuIGFzc2lnbmVkIHRhcmdldCBJRCBpbiB0aGlzXG4gICAgLy8gY2FzZSBhbmQgY2FsbHMgYGxpc3RlbmAgdG8gb2J0YWluIHRoaXMgSUQuXG4gICAgcyA9IHIudGFyZ2V0SWQsIG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChzKSwgaSA9IHIudmlldy5EbygpOyBlbHNlIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IF9yKG4ubG9jYWxTdG9yZSwgRWUoZSkpLCByID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQudGFyZ2V0SWQpO1xuICAgICAgICBzID0gdC50YXJnZXRJZCwgaSA9IGF3YWl0IG5hKG4sIGUsIHMsIFwiY3VycmVudFwiID09PSByKSwgbi5pc1ByaW1hcnlDbGllbnQgJiYgb28obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxuICogc25hcHNob3QuXG4gKi8gYXN5bmMgZnVuY3Rpb24gbmEodCwgZSwgbiwgcykge1xuICAgIC8vIFBPUlRJTkcgTk9URTogT24gV2ViIG9ubHksIHdlIGluamVjdCB0aGUgY29kZSB0aGF0IHJlZ2lzdGVycyBuZXcgTGltYm9cbiAgICAvLyB0YXJnZXRzIGJhc2VkIG9uIHZpZXcgY2hhbmdlcy4gVGhpcyBhbGxvd3MgdXMgdG8gb25seSBkZXBlbmQgb24gTGltYm9cbiAgICAvLyBjaGFuZ2VzIHdoZW4gdXNlciBjb2RlIGluY2x1ZGVzIHF1ZXJpZXMuXG4gICAgdC5LbyA9IChlLCBuLCBzKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gZS52aWV3LklvKG4pO1xuICAgICAgICBpLkxuICYmIChcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cbiAgICAgICAgaSA9IGF3YWl0IGdyKHQubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITEpLnRoZW4oKCh7ZG9jdW1lbnRzOiB0fSkgPT4gZS52aWV3LklvKHQsIGkpKSkpO1xuICAgICAgICBjb25zdCByID0gcyAmJiBzLnRhcmdldENoYW5nZXMuZ2V0KGUudGFyZ2V0SWQpLCBvID0gZS52aWV3LmFwcGx5Q2hhbmdlcyhpLCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHQuaXNQcmltYXJ5Q2xpZW50LCByKTtcbiAgICAgICAgcmV0dXJuIF9hKHQsIGUudGFyZ2V0SWQsIG8udm8pLCBvLnNuYXBzaG90O1xuICAgIH0odCwgZSwgbiwgcyk7XG4gICAgY29uc3QgaSA9IGF3YWl0IGdyKHQubG9jYWxTdG9yZSwgZSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIHIgPSBuZXcgWW8oZSwgaS5HbiksIG8gPSByLklvKGkuZG9jdW1lbnRzKSwgYSA9IFNuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShuLCBzICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gIT09IHQub25saW5lU3RhdGUpLCBjID0gci5hcHBseUNoYW5nZXMobywgXG4gICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHQuaXNQcmltYXJ5Q2xpZW50LCBhKTtcbiAgICBfYSh0LCBuLCBjLnZvKTtcbiAgICBjb25zdCB1ID0gbmV3IFhvKGUsIG4sIHIpO1xuICAgIHJldHVybiB0LnhvLnNldChlLCB1KSwgdC5rby5oYXMobikgPyB0LmtvLmdldChuKS5wdXNoKGUpIDogdC5rby5zZXQobiwgWyBlIF0pLCBjLnNuYXBzaG90O1xufVxuXG4vKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi8gYXN5bmMgZnVuY3Rpb24gc2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBVKHQpLCBzID0gbi54by5nZXQoZSksIGkgPSBuLmtvLmdldChzLnRhcmdldElkKTtcbiAgICBpZiAoaS5sZW5ndGggPiAxKSByZXR1cm4gbi5rby5zZXQocy50YXJnZXRJZCwgaS5maWx0ZXIoKHQgPT4gIUllKHQsIGUpKSkpLCB2b2lkIG4ueG8uZGVsZXRlKGUpO1xuICAgIC8vIE5vIG90aGVyIHF1ZXJpZXMgYXJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0LCBjbGVhbiB1cCB0aGUgcXVlcnkgYW5kIHRoZSB0YXJnZXQuXG4gICAgICAgIGlmIChuLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxuICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpO1xuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQocy50YXJnZXRJZCkgfHwgYXdhaXQgbXIobi5sb2NhbFN0b3JlLCBzLnRhcmdldElkLCBcbiAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5jbGVhclF1ZXJ5U3RhdGUocy50YXJnZXRJZCksIGFvKG4ucmVtb3RlU3RvcmUsIHMudGFyZ2V0SWQpLCBcbiAgICAgICAgICAgIGRhKG4sIHMudGFyZ2V0SWQpO1xuICAgICAgICB9KSkuY2F0Y2goT2kpO1xuICAgIH0gZWxzZSBkYShuLCBzLnRhcmdldElkKSwgYXdhaXQgbXIobi5sb2NhbFN0b3JlLCBzLnRhcmdldElkLCBcbiAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKTtcbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIHdyaXRlIG9mIGxvY2FsIG11dGF0aW9uIGJhdGNoIHdoaWNoIGludm9sdmVzIGFkZGluZyB0aGVcbiAqIHdyaXRlcyB0byB0aGUgbXV0YXRpb24gcXVldWUsIG5vdGlmeWluZyB0aGUgcmVtb3RlIHN0b3JlIGFib3V0IG5ld1xuICogbXV0YXRpb25zIGFuZCByYWlzaW5nIGV2ZW50cyBmb3IgYW55IGNoYW5nZXMgdGhpcyB3cml0ZSBjYXVzZWQuXG4gKlxuICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBjYWxsIGlzIHJlc29sdmVkIHdoZW4gdGhlIGFib3ZlIHN0ZXBzXG4gKiBoYXZlIGNvbXBsZXRlZCwgKm5vdCogd2hlbiB0aGUgd3JpdGUgd2FzIGFja2VkIGJ5IHRoZSBiYWNrZW5kLiBUaGVcbiAqIHVzZXJDYWxsYmFjayBpcyByZXNvbHZlZCBvbmNlIHRoZSB3cml0ZSB3YXMgYWNrZWQvcmVqZWN0ZWQgYnkgdGhlXG4gKiBiYWNrZW5kIChvciBmYWlsZWQgbG9jYWxseSBmb3IgYW55IG90aGVyIHJlYXNvbikuXG4gKi8gYXN5bmMgZnVuY3Rpb24gaWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBDYSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFUodCksIHMgPSBzdC5ub3coKSwgaSA9IGUucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgUG4oKSk7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9jYWxseSB3cml0ZSBtdXRhdGlvbnNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5Rbi5ibih0LCBpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICByID0gaTtcbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLWlkZW1wb3RlbnQgbXV0YXRpb25zIChzdWNoIGFzIGBGaWVsZFZhbHVlLmluY3JlbWVudCgpYCksXG4gICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlIGJhY2tlbmQgc2VuZHMgdXMgYW4gdXBkYXRlIHRoYXQgYWxyZWFkeSBpbmNsdWRlcyBvdXJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBZZSh0LCByLmdldCh0LmtleSkpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9IGUgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGRvY3VtZW50IHRvIG92ZXJyaWRlLCBzbyB1c2UgYSBQcmVjb25kaXRpb24gb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBlbih0LmtleSwgZSwgVXQoZS52YWx1ZS5tYXBWYWx1ZSksIFdlLmV4aXN0cyghMCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uSW4uYWRkTXV0YXRpb25CYXRjaCh0LCBzLCBvLCBlKTtcbiAgICAgICAgICAgIH0pKSkpLnRoZW4oKHQgPT4gKHQuYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQociksIHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiB0LmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogclxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfShzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLmFkZFBlbmRpbmdNdXRhdGlvbih0LmJhdGNoSWQpLCBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IHQuTG9bdC5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAgICAgICAgIHMgfHwgKHMgPSBuZXcgZG4odHQpKTtcbiAgICAgICAgICAgIHMgPSBzLmluc2VydChlLCBuKSwgdC5Mb1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldID0gcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xuICogaXQuXG4gKi8gKHMsIHQuYmF0Y2hJZCwgbiksIGF3YWl0IHlhKHMsIHQuY2hhbmdlcyksIGF3YWl0IEVvKHMucmVtb3RlU3RvcmUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgcGVyc2lzdCB0aGUgbXV0YXRpb24sIHdlIHJlamVjdCB0aGUgdXNlciBjYWxsYmFjayBhbmRcbiAgICAgICAgLy8gZG9uJ3Qgc2VuZCB0aGUgbXV0YXRpb24uIFRoZSB1c2VyIGNhbiB0aGVuIHJldHJ5IHRoZSB3cml0ZS5cbiAgICAgICAgY29uc3QgZSA9IHhvKHQsIFwiRmFpbGVkIHRvIHBlcnNpc3Qgd3JpdGVcIik7XG4gICAgICAgIG4ucmVqZWN0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIG9uZSByZW1vdGUgZXZlbnQgdG8gdGhlIHN5bmMgZW5naW5lLCBub3RpZnlpbmcgYW55IHZpZXdzIG9mIHRoZVxuICogY2hhbmdlcywgYW5kIHJlbGVhc2luZyBhbnkgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgd291bGQgYmVjb21lXG4gKiB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIHNuYXBzaG90IHZlcnNpb24gdGhlIHJlbW90ZSBldmVudCBjb250YWlucy5cbiAqLyBhc3luYyBmdW5jdGlvbiByYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSBgcmVjZWl2ZWREb2N1bWVudGAgYXMgYXBwcm9wcmlhdGUgZm9yIGFueSBsaW1ibyB0YXJnZXRzLlxuICAgICAgICAgICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uRm8uZ2V0KGUpO1xuICAgICAgICAgICAgcyAmJiAoXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgbGltYm8gcmVzb2x1dGlvbiBsb29rdXAsIGl0J3MgZm9yIGEgc2luZ2xlIGRvY3VtZW50XG4gICAgICAgICAgICAvLyBhbmQgaXQgY291bGQgYmUgYWRkZWQsIG1vZGlmaWVkLCBvciByZW1vdmVkLCBidXQgbm90IGEgY29tYmluYXRpb24uXG4gICAgICAgICAgICBMKHQuYWRkZWREb2N1bWVudHMuc2l6ZSArIHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIHQucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9IDEpLCBcbiAgICAgICAgICAgIHQuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBzLkNvID0gITAgOiB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gTChzLkNvKSA6IHQucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMCAmJiAoTChzLkNvKSwgXG4gICAgICAgICAgICBzLkNvID0gITEpKTtcbiAgICAgICAgfSkpLCBhd2FpdCB5YShuLCB0LCBlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IE9pKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgc3luYyBlbmdpbmUgYW5kIG5vdGlmaWVzIGFueSB2aWV3cyBvZlxuICogdGhlIGNoYW5nZS5cbiAqLyBmdW5jdGlvbiBvYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IFUodCk7XG4gICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcbiAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XG4gICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxuICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBpZiAocy5pc1ByaW1hcnlDbGllbnQgJiYgMCAvKiBSZW1vdGVTdG9yZSAqLyA9PT0gbiB8fCAhcy5pc1ByaW1hcnlDbGllbnQgJiYgMSAvKiBTaGFyZWRDbGllbnRTdGF0ZSAqLyA9PT0gbikge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHMueG8uZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBzLnZpZXcuZW8oZSk7XG4gICAgICAgICAgICBpLnNuYXBzaG90ICYmIHQucHVzaChpLnNuYXBzaG90KTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gVSh0KTtcbiAgICAgICAgICAgIG4ub25saW5lU3RhdGUgPSBlO1xuICAgICAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgICAgIG4ucXVlcmllcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuLmxpc3RlbmVycykgXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgICAgICAgICAgICAgdC5lbyhlKSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiBLbyhuKTtcbiAgICAgICAgfShzLmV2ZW50TWFuYWdlciwgZSksIHQubGVuZ3RoICYmIHMuTm8uVHIodCksIHMub25saW5lU3RhdGUgPSBlLCBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWplY3RzIHRoZSBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXRJRC4gVGhpcyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogYmFja2VuZCBmb3IgYW55IGFjdGl2ZSB0YXJnZXQuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0SUQgY29ycmVzcG9uZHMgdG8gb25lIHByZXZpb3VzbHkgaW5pdGlhdGVkIGJ5IHRoZVxuICogdXNlciBhcyBwYXJ0IG9mIFRhcmdldERhdGEgcGFzc2VkIHRvIGxpc3RlbigpIG9uIFJlbW90ZVN0b3JlLlxuICogQHBhcmFtIGVyciAtIEEgZGVzY3JpcHRpb24gb2YgdGhlIGNvbmRpdGlvbiB0aGF0IGhhcyBmb3JjZWQgdGhlIHJlamVjdGlvbi5cbiAqIE5lYXJseSBhbHdheXMgdGhpcyB3aWxsIGJlIGFuIGluZGljYXRpb24gdGhhdCB0aGUgdXNlciBpcyBubyBsb25nZXJcbiAqIGF1dGhvcml6ZWQgdG8gc2VlIHRoZSBkYXRhIG1hdGNoaW5nIHRoZSB0YXJnZXQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gYWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBVKHQpO1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pO1xuICAgIGNvbnN0IGkgPSBzLkZvLmdldChlKSwgciA9IGkgJiYgaS5rZXk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IFdlIHJlYWxseSBvbmx5IHNob3VsZCBkbyB0aGUgZm9sbG93aW5nIG9uIHBlcm1pc3Npb25cbiAgICAgICAgLy8gZGVuaWVkIGVycm9ycywgYnV0IHdlIGRvbid0IGhhdmUgdGhlIGNhdXNlIGNvZGUgaGVyZS5cbiAgICAgICAgLy8gSXQncyBhIGxpbWJvIGRvYy4gQ3JlYXRlIGEgc3ludGhldGljIGV2ZW50IHNheWluZyBpdCB3YXMgZGVsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGEgaGFjay4gSWRlYWxseSwgd2Ugd291bGQgaGF2ZSBhIG1ldGhvZCBpbiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc3RvcmUgdG8gcHVyZ2UgYSBkb2N1bWVudC4gSG93ZXZlciwgaXQgd291bGQgYmUgdHJpY2t5IHRvIGtlZXAgYWxsIG9mXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzdG9yZSdzIGludmFyaWFudHMgd2l0aCBhbm90aGVyIG1ldGhvZC5cbiAgICAgICAgbGV0IHQgPSBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG4gICAgICAgIHQgPSB0Lmluc2VydChyLCBxdC5uZXdOb0RvY3VtZW50KHIsIGl0Lm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBQbigpLmFkZChyKSwgaSA9IG5ldyBWbihpdC5taW4oKSwgXG4gICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIG5ldyBNYXAsIFxuICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgbW4odHQpLCB0LCBuKTtcbiAgICAgICAgYXdhaXQgcmEocywgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHMuT28gPSBzLk9vLnJlbW92ZShyKSwgcy5Gby5kZWxldGUoZSksIGdhKHMpO1xuICAgIH0gZWxzZSBhd2FpdCBtcihzLmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiBkYShzLCBlLCBuKSkpLmNhdGNoKE9pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBVKHQpLCBzID0gZS5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBocihuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIGZhKG4sIHMsIC8qZXJyb3I9Ki8gbnVsbCksIGxhKG4sIHMpLCBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUocywgXCJhY2tub3dsZWRnZWRcIiksIFxuICAgICAgICBhd2FpdCB5YShuLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IE9pKHQpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gdWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBVKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gVSh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLkluLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgoZSA9PiAoTChudWxsICE9PSBlKSwgcyA9IGUua2V5cygpLCBuLkluLnJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkpKSkubmV4dCgoKCkgPT4gbi5Jbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uUW4uYm4odCwgcykpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nXG4gKiBzZXJ2ZXIgcmVzcG9uc2UuXG4gKlxuICogUmV0dXJucyBgQkFUQ0hJRF9VTktOT1dOYCBpZiB0aGUgcXVldWUgaXMgZW1wdHkuXG4gKi8gKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0IHVwKSxcbiAgICAgICAgLy8gc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW4gYmVmb3JlXG4gICAgICAgIC8vIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgZmEocywgZSwgbiksIGxhKHMsIGUpLCBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKSwgXG4gICAgICAgIGF3YWl0IHlhKHMsIHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgYXdhaXQgT2kobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHVzZXIgY2FsbGJhY2sgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBhdCB0aGUgbW9tZW50IG9mIGNhbGxpbmdcbiAqIGFyZSBhY2tub3dsZWRnZWQgLlxuICovIGFzeW5jIGZ1bmN0aW9uIGhhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICBmbyhuLnJlbW90ZVN0b3JlKSB8fCBrKFwiU3luY0VuZ2luZVwiLCBcIlRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gVSh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGhpZ2hlc3QgdW5hY2tub3dsZWRnZWQgYmF0Y2ggaWRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLkluLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IHQpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIGUucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gbi5Cby5nZXQodCkgfHwgW107XG4gICAgICAgIHMucHVzaChlKSwgbi5Cby5zZXQodCwgcyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0geG8odCwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIGUucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIGxhKHQsIGUpIHtcbiAgICAodC5Cby5nZXQoZSkgfHwgW10pLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0LnJlc29sdmUoKTtcbiAgICB9KSksIHQuQm8uZGVsZXRlKGUpO1xufVxuXG4vKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovIGZ1bmN0aW9uIGZhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gVSh0KTtcbiAgICBsZXQgaSA9IHMuTG9bcy5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xuICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxuICAgICAgICBpZiAoaSkge1xuICAgICAgICBjb25zdCB0ID0gaS5nZXQoZSk7XG4gICAgICAgIHQgJiYgKG4gPyB0LnJlamVjdChuKSA6IHQucmVzb2x2ZSgpLCBpID0gaS5yZW1vdmUoZSkpLCBzLkxvW3MuY3VycmVudFVzZXIudG9LZXkoKV0gPSBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGEodCwgZSwgbiA9IG51bGwpIHtcbiAgICB0LnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSk7XG4gICAgZm9yIChjb25zdCBzIG9mIHQua28uZ2V0KGUpKSB0LnhvLmRlbGV0ZShzKSwgbiAmJiB0Lk5vLmpvKHMsIG4pO1xuICAgIGlmICh0LmtvLmRlbGV0ZShlKSwgdC5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgdC5Nby5jcyhlKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuTW8uY29udGFpbnNLZXkoZSkgfHwgXG4gICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgICAgIHdhKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3YSh0LCBlKSB7XG4gICAgdC4kby5kZWxldGUoZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IHQuT28uZ2V0KGUpO1xuICAgIG51bGwgIT09IG4gJiYgKGFvKHQucmVtb3RlU3RvcmUsIG4pLCB0Lk9vID0gdC5Pby5yZW1vdmUoZSksIHQuRm8uZGVsZXRlKG4pLCBnYSh0KSk7XG59XG5cbmZ1bmN0aW9uIF9hKHQsIGUsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbikgaWYgKHMgaW5zdGFuY2VvZiBIbykgdC5Nby5hZGRSZWZlcmVuY2Uocy5rZXksIGUpLCBtYSh0LCBzKTsgZWxzZSBpZiAocyBpbnN0YW5jZW9mIEpvKSB7XG4gICAgICAgIGsoXCJTeW5jRW5naW5lXCIsIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHMua2V5KSwgdC5Nby5yZW1vdmVSZWZlcmVuY2Uocy5rZXksIGUpO1xuICAgICAgICB0Lk1vLmNvbnRhaW5zS2V5KHMua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIHdhKHQsIHMua2V5KTtcbiAgICB9IGVsc2UgTSgpO1xufVxuXG5mdW5jdGlvbiBtYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUua2V5LCBzID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHQuT28uZ2V0KG4pIHx8IHQuJG8uaGFzKHMpIHx8IChrKFwiU3luY0VuZ2luZVwiLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgdC4kby5hZGQocyksIFxuICAgIGdhKHQpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIGdhKHQpIHtcbiAgICBmb3IgKDt0LiRvLnNpemUgPiAwICYmIHQuT28uc2l6ZSA8IHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCBlID0gdC4kby52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIHQuJG8uZGVsZXRlKGUpO1xuICAgICAgICBjb25zdCBuID0gbmV3IFB0KHV0LmZyb21TdHJpbmcoZSkpLCBzID0gdC5Vby5uZXh0KCk7XG4gICAgICAgIHQuRm8uc2V0KHMsIG5ldyBabyhuKSksIHQuT28gPSB0Lk9vLmluc2VydChuLCBzKSwgb28odC5yZW1vdGVTdG9yZSwgbmV3IHNpKEVlKGRlKG4ucGF0aCkpLCBzLCAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyAsIFkuVCkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24geWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBVKHQpLCBpID0gW10sIHIgPSBbXSwgbyA9IFtdO1xuICAgIHMueG8uaXNFbXB0eSgpIHx8IChzLnhvLmZvckVhY2goKCh0LCBhKSA9PiB7XG4gICAgICAgIG8ucHVzaChzLktvKGEsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoYS50YXJnZXRJZCwgdC5mcm9tQ2FjaGUgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcnIua24oYS50YXJnZXRJZCwgdCk7XG4gICAgICAgICAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHMuTm8uVHIoaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFUodCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBLcy5mb3JFYWNoKGUsIChlID0+IEtzLmZvckVhY2goZS5ObiwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKS5uZXh0KCgoKSA9PiBLcy5mb3JFYWNoKGUueG4sIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghenModCkpIHRocm93IHQ7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBrKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uVW4uZ2V0KGUpLCBzID0gdC5zbmFwc2hvdFZlcnNpb24sIGkgPSB0LndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uVW4gPSBuLlVuLmluc2VydChlLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0ocy5sb2NhbFN0b3JlLCByKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVSh0KTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbChlKSkge1xuICAgICAgICBrKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgZS50b0tleSgpKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHVyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSBlLCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHQuQm8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZWplY3QobmV3IEsocS5DQU5DRUxMRUQsIGUpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQuQm8uY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UoZSwgdC5yZW1vdmVkQmF0Y2hJZHMsIHQuYWRkZWRCYXRjaElkcyksIGF3YWl0IHlhKG4sIHQuV24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBVKHQpLCBzID0gbi5Gby5nZXQoZSk7XG4gICAgaWYgKHMgJiYgcy5DbykgcmV0dXJuIFBuKCkuYWRkKHMua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCB0ID0gUG4oKTtcbiAgICAgICAgY29uc3QgcyA9IG4ua28uZ2V0KGUpO1xuICAgICAgICBpZiAoIXMpIHJldHVybiB0O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4ueG8uZ2V0KGUpO1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKHMudmlldy5Ubyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBUYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCksIHMgPSBhd2FpdCBncihuLmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gZS52aWV3LlNvKHMpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBfYShuLCBlLnRhcmdldElkLCBpLnZvKSwgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIElhKHQpIHtcbiAgICBjb25zdCBlID0gVSh0KTtcbiAgICByZXR1cm4gcHIoZS5sb2NhbFN0b3JlKS50aGVuKCh0ID0+IHlhKGUsIHQpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIEFhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gVSh0KSwgciA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFUodCksIHMgPSBVKG4uSW4pO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLlh0KHQsIGUpLm5leHQoKGUgPT4gZSA/IG4uUW4uYm4odCwgZSkgOiBLcy5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKTtcbiAgICBudWxsICE9PSByID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgRW8oaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgZmEoaSwgZSwgcyB8fCBudWxsKSwgbGEoaSwgZSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgVShVKHQpLkluKS50ZShlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKSkgOiBNKCksIGF3YWl0IHlhKGksIHIpKSA6IFxuICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcbiAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxuICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxuICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcbiAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcbiAgICAvLyBhcyBhcHBsaWNhYmxlLlxuICAgIGsoXCJTeW5jRW5naW5lXCIsIFwiQ2Fubm90IGFwcGx5IG11dGF0aW9uIGJhdGNoIHdpdGggaWQ6IFwiICsgZSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBSYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFUodCk7XG4gICAgaWYgKERhKG4pLCBDYShuKSwgITAgPT09IGUgJiYgITAgIT09IG4ucW8pIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IHQgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCBlID0gYXdhaXQgUGEobiwgdC50b0FycmF5KCkpO1xuICAgICAgICBuLnFvID0gITAsIGF3YWl0IFNvKG4ucmVtb3RlU3RvcmUsICEwKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIG9vKG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH0gZWxzZSBpZiAoITEgPT09IGUgJiYgITEgIT09IG4ucW8pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBuLmtvLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChpKSA/IHQucHVzaChpKSA6IGUgPSBlLnRoZW4oKCgpID0+IChkYShuLCBpKSwgXG4gICAgICAgICAgICBtcihuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIGFvKG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IGUsIGF3YWl0IFBhKG4sIHQpLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFUodCk7XG4gICAgICAgICAgICBlLkZvLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgYW8oZS5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgICAgICB9KSksIGUuTW8udXMoKSwgZS5GbyA9IG5ldyBNYXAsIGUuT28gPSBuZXcgZG4oUHQuY29tcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcbiAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHRhcmdldHMgLSB0aGUgbGlzdCBvZiB0YXJnZXRzIHdpdGggdmlld3MgdGhhdCBuZWVkIHRvIGJlIHJlY29tcHV0ZWRcbiAqIEBwYXJhbSB0cmFuc2l0aW9uVG9QcmltYXJ5IC0gYHRydWVgIGlmZiB0aGUgdGFiIHRyYW5zaXRpb25zIGZyb20gYSBzZWNvbmRhcnlcbiAqIHRhYiB0byBhIHByaW1hcnkgdGFiXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4pLCBuLnFvID0gITEsIGF3YWl0IFNvKG4ucmVtb3RlU3RvcmUsICExKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFBhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gVSh0KSwgaSA9IFtdLCByID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IG4gPSBzLmtvLmdldCh0KTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIGUgPSBhd2FpdCBfcihzLmxvY2FsU3RvcmUsIEVlKG5bMF0pKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHMueG8uZ2V0KHQpLCBuID0gYXdhaXQgVGEocywgZSk7XG4gICAgICAgICAgICAgICAgbi5zbmFwc2hvdCAmJiByLnB1c2gobi5zbmFwc2hvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IG5ldmVyIGV4ZWN1dGVkIG9uIHRoaXMgY2xpZW50LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBhbGxvY2F0ZSB0aGUgdGFyZ2V0IGluIExvY2FsU3RvcmUgYW5kIGluaXRpYWxpemUgYSBuZXcgVmlldy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCB5cihzLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAgICAgZSA9IGF3YWl0IF9yKHMubG9jYWxTdG9yZSwgbiksIGF3YWl0IG5hKHMsIGJhKG4pLCB0LCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSk7XG4gICAgICAgIH1cbiAgICAgICAgaS5wdXNoKGUpO1xuICAgIH1cbiAgICByZXR1cm4gcy5Oby5UcihyKSwgaTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cbiAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcbiAqIG9iamVjdC5cbiAqXG4gKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcbiAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcbiAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxuICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBiYSh0KSB7XG4gICAgcmV0dXJuIGZlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQub3JkZXJCeSwgdC5maWx0ZXJzLCB0LmxpbWl0LCBcIkZcIiAvKiBGaXJzdCAqLyAsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiB2YSh0KSB7XG4gICAgY29uc3QgZSA9IFUodCk7XG4gICAgcmV0dXJuIFUoVShlLmxvY2FsU3RvcmUpLnBlcnNpc3RlbmNlKS5wbigpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gVmEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBVKHQpO1xuICAgIGlmIChpLnFvKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICBrKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTsgZWxzZSBpZiAoaS5rby5oYXMoZSkpIHN3aXRjaCAobikge1xuICAgICAgY2FzZSBcImN1cnJlbnRcIjpcbiAgICAgIGNhc2UgXCJub3QtY3VycmVudFwiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgcHIoaS5sb2NhbFN0b3JlKSwgcyA9IFZuLmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIFwiY3VycmVudFwiID09PSBuKTtcbiAgICAgICAgICAgIGF3YWl0IHlhKGksIHQsIHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IG1yKGkubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgZGEoaSwgZSwgcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBNKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24gU2EodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBEYSh0KTtcbiAgICBpZiAocy5xbykge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHMua28uaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIGsoXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHlyKHMubG9jYWxTdG9yZSwgdCksIG4gPSBhd2FpdCBfcihzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgYXdhaXQgbmEocywgYmEoZSksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKSwgb28ocy5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHMua28uaGFzKHQpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCBtcihzLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgYW8ocy5yZW1vdGVTdG9yZSwgdCksIGRhKHMsIHQpO1xuICAgICAgICB9KSkuY2F0Y2goT2kpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRGEodCkge1xuICAgIGNvbnN0IGUgPSBVKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gcmEuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IEVhLmJpbmQobnVsbCwgZSksIFxuICAgIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IGFhLmJpbmQobnVsbCwgZSksIGUuTm8uVHIgPSBVby5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgXG4gICAgZS5Oby5qbyA9IHFvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBlO1xufVxuXG5mdW5jdGlvbiBDYSh0KSB7XG4gICAgY29uc3QgZSA9IFUodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gY2EuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSB1YS5iaW5kKG51bGwsIGUpLCBcbiAgICBlO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBOYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IFUodCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGUuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFUodCksIHMgPSBLbihlLmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLkplLmdldEJ1bmRsZU1ldGFkYXRhKHQsIGUuaWQpKSkudGhlbigodCA9PiAhIXQgJiYgdC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhzKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovICh0LmxvY2FsU3RvcmUsIHMpKSByZXR1cm4gYXdhaXQgZS5jbG9zZSgpLCB2b2lkIG4uX2NvbXBsZXRlV2l0aChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogdC50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocykpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3Moem8ocykpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBHbyhzLCB0LmxvY2FsU3RvcmUsIGUuTik7XG4gICAgICAgICAgICBsZXQgciA9IGF3YWl0IGUuUW8oKTtcbiAgICAgICAgICAgIGZvciAoO3I7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBpLmZvKHIpO1xuICAgICAgICAgICAgICAgIHQgJiYgbi5fdXBkYXRlUHJvZ3Jlc3ModCksIHIgPSBhd2FpdCBlLlFvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgLy8gVE9ETyhiLzE2MDg3NjQ0Myk6IFRoaXMgY3VycmVudGx5IHJhaXNlcyBzbmFwc2hvdHMgd2l0aFxuICAgICAgICAgICAgLy8gYGZyb21DYWNoZT1mYWxzZWAgaWYgdXNlcnMgYWxyZWFkeSBsaXN0ZW4gdG8gc29tZSBxdWVyaWVzIGFuZCBidW5kbGVzXG4gICAgICAgICAgICAvLyBoYXMgbmV3ZXIgdmVyc2lvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHlhKHQsIG8uVG4sIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFUodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLkplLnNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBPKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHt0fWApLCBuLl9mYWlsV2l0aCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShzLCBlLCBuKS50aGVuKCgoKSA9PiB7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUubm90aWZ5QnVuZGxlTG9hZGVkKCk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyB4YSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLk4gPSBKcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuV28odCksIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLkdvKHQpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy56byh0KSwgdGhpcy5sb2NhbFN0b3JlID0gdGhpcy5Ibyh0KTtcbiAgICB9XG4gICAgem8odCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgSG8odCkge1xuICAgICAgICByZXR1cm4gY3IodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IG9yLCB0LmluaXRpYWxVc2VyLCB0aGlzLk4pO1xuICAgIH1cbiAgICBHbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRHIoTnIuTnMsIHRoaXMuTik7XG4gICAgfVxuICAgIFdvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxcjtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIGthIGV4dGVuZHMgeGEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5KbyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCksIGF3YWl0IEVyKHRoaXMubG9jYWxTdG9yZSksIGF3YWl0IHRoaXMuSm8uaW5pdGlhbGl6ZSh0aGlzLCB0KSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IENhKHRoaXMuSm8uc3luY0VuZ2luZSksIGF3YWl0IEVvKHRoaXMuSm8ucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5ubigoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICB9XG4gICAgSG8odCkge1xuICAgICAgICByZXR1cm4gY3IodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IG9yLCB0LmluaXRpYWxVc2VyLCB0aGlzLk4pO1xuICAgIH1cbiAgICB6byh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgTGkoZSwgdC5hc3luY1F1ZXVlKTtcbiAgICB9XG4gICAgR28odCkge1xuICAgICAgICBjb25zdCBlID0gbnIodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gQWkud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IEFpLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgWmkodGhpcy5zeW5jaHJvbml6ZVRhYnMsIGUsIHQuY2xpZW50SWQsIG4sIHQuYXN5bmNRdWV1ZSwgenIoKSwgSHIoKSwgdGhpcy5OLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBXbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcXI7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyAkYSBleHRlbmRzIGthIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMuSm8gPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkpvLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBVciAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAgX2k6IEFhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBtaTogVmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIGdpOiBTYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgcG46IHZhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICB3aTogSWEuYmluZChudWxsLCBlKVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5ubigoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBhd2FpdCBSYSh0aGlzLkpvLnN5bmNFbmdpbmUsIHQpLCB0aGlzLmdjU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSkgOiB0IHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBXbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB6cigpO1xuICAgICAgICBpZiAoIVVyLlB0KGUpKSB0aHJvdyBuZXcgSyhxLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IG5yKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBVcihlLCB0LmFzeW5jUXVldWUsIG4sIHQuY2xpZW50SWQsIHQuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBPYSB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gdC5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdC5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUoZSksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcihlKSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKGUsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhdC5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHQgPT4gb2EodGhpcy5zeW5jRW5naW5lLCB0LCAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBwYS5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCBTbyh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTW87XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IChzID0gdC5kYXRhYmFzZUluZm8sIG5ldyBHcihzKSk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVvKHQsIGUsIG4pO1xuICAgICAgICB9KHQuY3JlZGVudGlhbHMsIG4sIGUpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZSh0KSB7XG4gICAgICAgIHJldHVybiBlID0gdGhpcy5sb2NhbFN0b3JlLCBuID0gdGhpcy5kYXRhc3RvcmUsIHMgPSB0LmFzeW5jUXVldWUsIGkgPSB0ID0+IG9hKHRoaXMuc3luY0VuZ2luZSwgdCwgMCAvKiBSZW1vdGVTdG9yZSAqLyksIFxuICAgICAgICByID0ganIuUHQoKSA/IG5ldyBqciA6IG5ldyBLciwgbmV3IHNvKGUsIG4sIHMsIGksIHIpO1xuICAgICAgICB2YXIgZSwgbiwgcywgaSwgcjtcbiAgICAgICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovICAgIH1cbiAgICBjcmVhdGVTeW5jRW5naW5lKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgICAgIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBuZXcgdGEodCwgZSwgbiwgcywgaSwgcik7XG4gICAgICAgICAgICByZXR1cm4gbyAmJiAoYS5xbyA9ICEwKSwgYTtcbiAgICAgICAgfSh0aGlzLmxvY2FsU3RvcmUsIHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuZXZlbnRNYW5hZ2VyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCB0LmluaXRpYWxVc2VyLCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zLCBlKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFUodCk7XG4gICAgICAgICAgICBrKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgZS5Lci5hZGQoNSAvKiBTaHV0ZG93biAqLyksIGF3YWl0IHJvKGUpLCBcbiAgICAgICAgICAgIGUuUXIuc2h1dGRvd24oKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXG4gICAgICAgICAgICBlLldyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbiAgICAgICAgfSh0aGlzLnJlbW90ZVN0b3JlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvdyBtYW55IGJ5dGVzIHRvIHJlYWQgZWFjaCB0aW1lIHdoZW4gYFJlYWRhYmxlU3RyZWFtUmVhZGVyLnJlYWQoKWAgaXNcbiAqIGNhbGxlZC4gT25seSBhcHBsaWNhYmxlIGZvciBieXRlIHN0cmVhbXMgdGhhdCB3ZSBjb250cm9sIChlLmcuIHRob3NlIGJhY2tlZFxuICogYnkgYW4gVUludDhBcnJheSkuXG4gKi9cbi8qKlxuICogQnVpbGRzIGEgYEJ5dGVTdHJlYW1SZWFkZXJgIGZyb20gYSBVSW50OEFycmF5LlxuICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byB1c2UuXG4gKiBAcGFyYW0gYnl0ZXNQZXJSZWFkIC0gSG93IG1hbnkgYnl0ZXMgZWFjaCBgcmVhZCgpYCBmcm9tIHRoZSByZXR1cm5lZCByZWFkZXJcbiAqICAgICAgICB3aWxsIHJlYWQuXG4gKi9cbmZ1bmN0aW9uIEZhKHQsIGUgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgdC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQuc2xpY2UobiwgbiArIGUpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gZSwgcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVqZWN0KFwidW5pbXBsZW1lbnRlZFwiKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIE1hIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dCh0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLllvKHRoaXMub2JzZXJ2ZXIubmV4dCwgdCk7XG4gICAgfVxuICAgIGVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMuWW8odGhpcy5vYnNlcnZlci5lcnJvciwgdCkgOiBjb25zb2xlLmVycm9yKFwiVW5jYXVnaHQgRXJyb3IgaW4gc25hcHNob3QgbGlzdGVuZXI6XCIsIHQpO1xuICAgIH1cbiAgICBYbygpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICBZbyh0LCBlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCB0KGUpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgTGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLlpvID0gdCwgdGhpcy5OID0gZSwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IGosIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMudGEgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMuZWEoKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHQgJiYgdC5obygpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKHQucGF5bG9hZC5tZXRhZGF0YSkgOiB0aGlzLm1ldGFkYXRhLnJlamVjdChuZXcgRXJyb3IoYFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEsIGl0IGlzXFxuICAgICAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5wYXlsb2FkKX1gKSk7XG4gICAgICAgIH0pLCAodCA9PiB0aGlzLm1ldGFkYXRhLnJlamVjdCh0KSkpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWm8uY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5wcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBRbygpIHtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSBtZXRhZGF0YSBpcyByZWFkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YSgpLCB0aGlzLmVhKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGhlYWQgb2YgaW50ZXJuYWwgYnVmZmVyLCBhbmQgcHVsbGluZyBtb3JlIGRhdGEgZnJvbVxuICAgICAqIHVuZGVybHlpbmcgc3RyZWFtIGlmIGEgY29tcGxldGUgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQsIHVudGlsIGFuXG4gICAgICogZWxlbWVudChpbmNsdWRpbmcgdGhlIHByZWZpeGVkIGxlbmd0aCBhbmQgdGhlIEpTT04gc3RyaW5nKSBpcyBmb3VuZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYSBjb21wbGV0ZSBlbGVtZW50IGlzIHJlYWQsIGl0IGlzIGRyb3BwZWQgZnJvbSBpbnRlcm5hbCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGVpdGhlciB0aGUgYnVuZGxlZCBlbGVtZW50LCBvciBudWxsIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mXG4gICAgICogdGhlIHN0cmVhbS5cbiAgICAgKi8gICAgYXN5bmMgZWEoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLm5hKCk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudGEuZGVjb2RlKHQpLCBuID0gTnVtYmVyKGUpO1xuICAgICAgICBpc05hTihuKSAmJiB0aGlzLnNhKGBsZW5ndGggc3RyaW5nICgke2V9KSBpcyBub3QgdmFsaWQgbnVtYmVyYCk7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLmlhKG4pO1xuICAgICAgICByZXR1cm4gbmV3IFFvKEpTT04ucGFyc2UocyksIHQubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIHJhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KCh0ID0+IHQgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBuYSgpIHtcbiAgICAgICAgZm9yICg7dGhpcy5yYSgpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5vYSgpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yYSgpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgdCA8IDAgJiYgdGhpcy5zYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgaWEodCkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCB0OyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMub2EoKSAmJiB0aGlzLnNhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRhLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIHNhKHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLlpvLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHt0fWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIG9hKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5aby5yZWFkKCk7XG4gICAgICAgIGlmICghdC5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgdC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZS5zZXQodGhpcy5idWZmZXIpLCBlLnNldCh0LnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIEJhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdCwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAodCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFUodCksIHMgPSBKbihuLk4pICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBlLm1hcCgodCA9PiBXbihuLk4sIHQpKSlcbiAgICAgICAgICAgIH0sIHIgPSBhd2FpdCBuLktpKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgcywgaSksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdHMobi5OLCB0KTtcbiAgICAgICAgICAgICAgICBvLnNldChlLmtleS50b1N0cmluZygpLCBlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIEwoISFlKSwgYS5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpLCBhO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB0aGlzLnJlY29yZFZlcnNpb24odCkpKSwgZTtcbiAgICB9XG4gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IG9uKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5kZWxldGUoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBQdC5mcm9tUGF0aChlKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IGFuKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFUodCksIHMgPSBKbihuLk4pICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgodCA9PiBucyhuLk4sIHQpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLkxpKFwiQ29tbWl0XCIsIHMsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIGUgPSB0LnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0LmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBNKCk7XG4gICAgICAgICAgICAvLyBGb3IgZGVsZXRlZCBkb2NzLCB3ZSBtdXN0IHVzZSBiYXNlVmVyc2lvbiAwIHdoZW4gd2Ugb3ZlcndyaXRlIHRoZW0uXG4gICAgICAgICAgICBlID0gaXQubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IEsocS5BQk9SVEVELCBcIkRvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy5cIik7XG4gICAgICAgIH0gZWxzZSB0aGlzLnJlYWRWZXJzaW9ucy5zZXQodC5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXG4gICAgICovICAgIHByZWNvbmRpdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUgPyBXZS51cGRhdGVUaW1lKGUpIDogV2Uubm9uZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXG4gICAgICovICAgIHByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pc0VxdWFsKGl0Lm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXZS51cGRhdGVUaW1lKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcbiAgICAgICAgLy8gdXBkYXRlLlxuICAgICAgICByZXR1cm4gV2UuZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUodCkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKHQpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovXG5jbGFzcyBVYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLmRhdGFzdG9yZSA9IGUsIHRoaXMudXBkYXRlRnVuY3Rpb24gPSBuLCB0aGlzLmRlZmVycmVkID0gcywgXG4gICAgICAgIHRoaXMuYWEgPSA1LCB0aGlzLnJyID0gbmV3IFlyKHRoaXMuYXN5bmNRdWV1ZSwgXCJ0cmFuc2FjdGlvbl9yZXRyeVwiIC8qIFRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLmFhIC09IDEsIHRoaXMuY2EoKTtcbiAgICB9XG4gICAgY2EoKSB7XG4gICAgICAgIHRoaXMucnIuWGkoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgQmEodGhpcy5kYXRhc3RvcmUpLCBlID0gdGhpcy51YSh0KTtcbiAgICAgICAgICAgIGUgJiYgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdC5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhKHQpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVhKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuICFJdChlKSAmJiBlLmNhdGNoICYmIGUudGhlbiA/IGUgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhKHQpIHtcbiAgICAgICAgdGhpcy5hYSA+IDAgJiYgdGhpcy5sYSh0KSA/ICh0aGlzLmFhIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5jYSgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QodCk7XG4gICAgfVxuICAgIGxhKHQpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IGUgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IGUgfHwgIWxuKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZVxuICogcGllY2VzIG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZVxuICogYXN5bmMgcXVldWUgdGhhdCBpcyBzaGFyZWQgYnkgYWxsIG9mIHRoZSBvdGhlciBjb21wb25lbnRzIGluIHRoZSBzeXN0ZW0uXG4gKi9cbmNsYXNzIHFhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5kYXRhYmFzZUluZm8gPSBuLCB0aGlzLnVzZXIgPSBTLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBaLkkoKSwgdGhpcy5jcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgdGhpcy5jcmVkZW50aWFscy5zdGFydChlLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBrKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmNyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgSyhxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgajtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLm9mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHhvKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEthKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBrKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgdXIoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQub2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBqYSh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgUWEodCk7XG4gICAgayhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBVKHQpO1xuICAgICAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBrKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgICAgIGNvbnN0IHMgPSBmbyhuKTtcbiAgICAgICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgICAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAgICAgLy8gbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cbiAgICAgICAgICAgICAgICBuLktyLmFkZCgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBybyhuKSwgcyAmJiBcbiAgICAgICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICBuLldyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZShlKSwgXG4gICAgICAgIG4uS3IuZGVsZXRlKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IGlvKG4pO1xuICAgIH0oZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gUWEodCkge1xuICAgIHJldHVybiB0Lm9mZmxpbmVDb21wb25lbnRzIHx8IChrKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IEthKHQsIG5ldyB4YSkpLCB0Lm9mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBXYSh0KSB7XG4gICAgcmV0dXJuIHQub25saW5lQ29tcG9uZW50cyB8fCAoayhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IGphKHQsIG5ldyBPYSkpLCB0Lm9ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIEdhKHQpIHtcbiAgICByZXR1cm4gUWEodCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIHphKHQpIHtcbiAgICByZXR1cm4gUWEodCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gSGEodCkge1xuICAgIHJldHVybiBXYSh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gSmEodCkge1xuICAgIHJldHVybiBXYSh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBZYSh0KSB7XG4gICAgY29uc3QgZSA9IGF3YWl0IFdhKHQpLCBuID0gZS5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSBlYS5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IHNhLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gWGEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgR2EodCksIG4gPSBhd2FpdCBIYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gVSh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLktyLmRlbGV0ZSgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIGlvKGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gWmEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgR2EodCksIG4gPSBhd2FpdCBIYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gVSh0KTtcbiAgICAgICAgICAgIGUuS3IuYWRkKDAgLyogVXNlckRpc2FibGVkICovKSwgYXdhaXQgcm8oZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5Xci5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiB0Yyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gVSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlFuLkFuKHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgSyhxLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0geG8odCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IHphKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGVjKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBNYSh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IEJvKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIWEgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBLKHEuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogYSAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IEsocS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBqbyhkZShuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIHVvOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIExvKHQsIG8pO1xuICAgIH0oYXdhaXQgWWEodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGdyKHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgWW8oZSwgcy5HbiksIHIgPSBpLklvKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHhvKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgemEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gc2ModCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IE1hKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gQm8odCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgSyhxLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IGpvKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgdW86ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gTG8odCwgbyk7XG4gICAgfShhd2FpdCBZYSh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGljKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IE1hKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBVKHQpLlpyLmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IFlhKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uWG8oKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIFUodCkuWnIuZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IFlhKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiByYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFdhKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgbmV3IFVhKHQuYXN5bmNRdWV1ZSwgcywgZSwgbikucnVuKCk7XG4gICAgfSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG9jKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMYSh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBGYSh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBGYShuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCBKcihlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgTmEoYXdhaXQgSmEodCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gYWModCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gVSh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLkplLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IHphKHQpLCBlKSkpO1xufVxuXG5jbGFzcyBjYyB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGE7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIHVjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgdWMgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBoYyA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gbGModCwgZSwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke2V9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGZjKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoITAgPT09IGUgJiYgITAgPT09IHMpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYCR7dH0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gZGModCkge1xuICAgIGlmICghUHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIHdjKHQpIHtcbiAgICBpZiAoUHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIF9jKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdC5sZW5ndGggPiAyMCAmJiAodCA9IGAke3Quc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiBcIlwiICsgdDtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKiogSGFja3kgbWV0aG9kIHRvIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gL2Z1bmN0aW9uXFxzKyhbXlxccyhdKylcXHMqXFwoLy5leGVjKHQuY29uc3RydWN0b3IudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUubGVuZ3RoID4gMSkgcmV0dXJuIGVbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUgPyBgYSBjdXN0b20gJHtlfSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gXCJhIGZ1bmN0aW9uXCIgOiBNKCk7XG59XG5cbmZ1bmN0aW9uIG1jKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiB0ICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0ID0gdC5fZGVsZWdhdGUpLCAhKHQgaW5zdGFuY2VvZiBlKSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfYyh0KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7ZS5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gZ2ModCwgZSkge1xuICAgIGlmIChlIDw9IDApIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgeWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5zc2wpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IHQuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAoZSA9IHQuc3NsKSB8fCB2b2lkIDAgPT09IGUgfHwgZTtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSB0LmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXMsIGZjKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqLyBjbGFzcyBwYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgeWMoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMSwgdCBpbnN0YW5jZW9mIHVjID8gdGhpcy5fZGF0YWJhc2VJZCA9IHQgOiAodGhpcy5fYXBwID0gdCwgXG4gICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHVjKHQub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRmlyZXN0b3JlIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnlcbiAqIG9wZXJhdGlvbnMuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSB0byBjb25maWd1cmUgdG8gY29ubmVjdCB0byB0aGVcbiAqIGVtdWxhdG9yLlxuICogQHBhcmFtIGhvc3QgLSB0aGUgZW11bGF0b3IgaG9zdCAoZXg6IGxvY2FsaG9zdCkuXG4gKiBAcGFyYW0gcG9ydCAtIHRoZSBlbXVsYXRvciBwb3J0IChleDogOTAwMCkuXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZ1xuICogU2VjdXJpdHkgUnVsZXMuXG4gKi8gKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgSyhxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IEsocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgeWModCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fY3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgVztcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJnYXBpXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY2xpZW50O1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTCghKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCAhZS5hdXRoIHx8ICFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLCBcbiAgICAgICAgICAgICAgICBuZXcgSihlLCB0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gaGMuZ2V0KHQpO1xuICAgICAgICAgICAgZSAmJiAoayhcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCBoYy5kZWxldGUodCksIGUudGVybWluYXRlKCkpO1xuICAgICAgICB9KHRoaXMpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEVjKHQsIGUsIG4sIHMgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHIgPSAodCA9IG1jKHQsIHBjKSkuX2dldFNldHRpbmdzKCk7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IGUgJiYgTyhcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgdXNlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWRcIiksIFxuICAgIHQuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgciksIHtcbiAgICAgICAgaG9zdDogYCR7ZX06JHtufWAsXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHMubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgZSwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMubW9ja1VzZXJUb2tlbikgZSA9IHMubW9ja1VzZXJUb2tlbiwgbiA9IFMuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIGUgPSBnKHMubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgciA9IHMubW9ja1VzZXJUb2tlbi5zdWIgfHwgcy5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBTKHIpO1xuICAgICAgICB9XG4gICAgICAgIHQuX2NyZWRlbnRpYWxzID0gbmV3IEcobmV3IFEoZSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgVGMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWModGhpcy5maXJlc3RvcmUsIHRoaXMuY29udmVydGVyLCB0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBJYyB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgcXVlcnl9KS5cbiAqLyBjbGFzcyBBYyBleHRlbmRzIEljIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgZGUobikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgVGModGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBQdCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IEFjKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFJjKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IHkodCksIGxjKFwiY29sbGVjdGlvblwiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBwYykge1xuICAgICAgICBjb25zdCBzID0gdXQuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIHdjKHMpLCBuZXcgQWModCwgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgVGMgfHwgdCBpbnN0YW5jZW9mIEFjKSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB1dC5mcm9tU3RyaW5nKHQucGF0aCwgLi4ubikuY2hpbGQodXQuZnJvbVN0cmluZyhlKSk7XG4gICAgICAgIHJldHVybiB3YyhzKSwgbmV3IEFjKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gUGModCwgZSkge1xuICAgIGlmICh0ID0gbWModCwgcGMpLCBsYyhcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgSWModCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBcbiAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGxlKHV0LmVtcHR5UGF0aCgpLCB0KTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gYmModCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0geSh0KSwgXG4gICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxuICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXG4gICAgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAoZSA9IFouSSgpKSwgbGMoXCJkb2NcIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgcGMpIHtcbiAgICAgICAgY29uc3QgcyA9IHV0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiBkYyhzKSwgbmV3IFRjKHQsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBQdChzKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIFRjIHx8IHQgaW5zdGFuY2VvZiBBYykpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZCh1dC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIGRjKHMpLCBuZXcgVGModC5maXJlc3RvcmUsIHQgaW5zdGFuY2VvZiBBYyA/IHQuY29udmVydGVyIDogbnVsbCwgbmV3IFB0KHMpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCByZWZlcmVuY2VzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIHZjKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IHkodCksIGUgPSB5KGUpLCAodCBpbnN0YW5jZW9mIFRjIHx8IHQgaW5zdGFuY2VvZiBBYykgJiYgKGUgaW5zdGFuY2VvZiBUYyB8fCBlIGluc3RhbmNlb2YgQWMpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBWYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSB5KHQpLCBlID0geShlKSwgdCBpbnN0YW5jZW9mIEljICYmIGUgaW5zdGFuY2VvZiBJYyAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIEllKHQuX3F1ZXJ5LCBlLl9xdWVyeSkgJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgU2Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBUaGUgbGFzdCBwcm9taXNlIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgdGhpcy5mYSA9IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgLy8gQSBsaXN0IG9mIHJldHJ5YWJsZSBvcGVyYXRpb25zLiBSZXRyeWFibGUgb3BlcmF0aW9ucyBhcmUgcnVuIGluIG9yZGVyIGFuZFxuICAgICAgICAvLyByZXRyaWVkIHdpdGggYmFja29mZi5cbiAgICAgICAgdGhpcy5kYSA9IFtdLCBcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcbiAgICAgICAgLy8gYmUgY2hhbmdlZCBhZ2Fpbi5cbiAgICAgICAgdGhpcy53YSA9ICExLCBcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciB0aGV5IGFyZSBydW4gb3IgY2FuY2VsZWQuXG4gICAgICAgIHRoaXMuX2EgPSBbXSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgdGhpcy5tYSA9IG51bGwsIFxuICAgICAgICAvLyBGbGFnIHNldCB3aGlsZSB0aGVyZSdzIGFuIG91dHN0YW5kaW5nIEFzeW5jUXVldWUgb3BlcmF0aW9uLCB1c2VkIGZvclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cbiAgICAgICAgdGhpcy5nYSA9ICExLCBcbiAgICAgICAgLy8gRW5hYmxlZCBkdXJpbmcgc2h1dGRvd24gb24gU2FmYXJpIHRvIHByZXZlbnQgZnV0dXJlIGFjY2VzcyB0byBJbmRleGVkREIuXG4gICAgICAgIHRoaXMueWEgPSAhMSwgXG4gICAgICAgIC8vIExpc3Qgb2YgVGltZXJJZHMgdG8gZmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IuXG4gICAgICAgIHRoaXMucGEgPSBbXSwgXG4gICAgICAgIC8vIEJhY2tvZmYgdGltZXIgdXNlZCB0byBzY2hlZHVsZSByZXRyaWVzIGZvciByZXRyeWFibGUgb3BlcmF0aW9uc1xuICAgICAgICB0aGlzLnJyID0gbmV3IFlyKHRoaXMsIFwiYXN5bmNfcXVldWVfcmV0cnlcIiAvKiBBc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLkVhID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IEhyKCk7XG4gICAgICAgICAgICB0ICYmIGsoXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgdC52aXNpYmlsaXR5U3RhdGUpLCB0aGlzLnJyLnRyKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSBIcigpO1xuICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyICYmIHQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5FYSk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2E7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZSh0KTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQodCkge1xuICAgICAgICB0aGlzLlRhKCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuSWEodCk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUodCkge1xuICAgICAgICBpZiAoIXRoaXMud2EpIHtcbiAgICAgICAgICAgIHRoaXMud2EgPSAhMCwgdGhpcy55YSA9IHQgfHwgITE7XG4gICAgICAgICAgICBjb25zdCBlID0gSHIoKTtcbiAgICAgICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLkVhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuVGEoKSwgdGhpcy53YSkgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBqO1xuICAgICAgICByZXR1cm4gdGhpcy5JYSgoKCkgPT4gdGhpcy53YSAmJiB0aGlzLnlhID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAodCgpLnRoZW4oZS5yZXNvbHZlLCBlLnJlamVjdCksIFxuICAgICAgICBlLnByb21pc2UpKSkudGhlbigoKCkgPT4gZS5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUodCkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmRhLnB1c2godCksIHRoaXMuQWEoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgQWEoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLmRhLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRhWzBdKCksIHRoaXMuZGEuc2hpZnQoKSwgdGhpcy5yci5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGlmICghenModCkpIHRocm93IHQ7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRhLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLnJyLlhpKCgoKSA9PiB0aGlzLkFhKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBJYSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmZhLnRoZW4oKCgpID0+ICh0aGlzLmdhID0gITAsIHQoKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLm1hID0gdCwgdGhpcy5nYSA9ICExO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyAkKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IHQubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHQuc3RhY2sgJiYgKGUgPSB0LnN0YWNrLmluY2x1ZGVzKHQubWVzc2FnZSkgPyB0LnN0YWNrIDogdC5tZXNzYWdlICsgXCJcXG5cIiArIHQuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpKSwgdDtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4gKHRoaXMuZ2EgPSAhMSwgdCkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmEgPSBlLCBlO1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuVGEoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5wYS5pbmRleE9mKHQpID4gLTEgJiYgKGUgPSAwKTtcbiAgICAgICAgY29uc3QgcyA9IE5vLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIHQsIGUsIG4sICh0ID0+IHRoaXMuUmEodCkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2EucHVzaChzKSwgcztcbiAgICB9XG4gICAgVGEoKSB7XG4gICAgICAgIHRoaXMubWEgJiYgTSgpO1xuICAgIH1cbiAgICB2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCkge31cbiAgICAvKipcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXG4gICAgICogb3BlcmF0aW9ucyBhcmUgbm90IHJ1bi5cbiAgICAgKi8gICAgYXN5bmMgUGEoKSB7XG4gICAgICAgIC8vIE9wZXJhdGlvbnMgaW4gdGhlIHF1ZXVlIHByaW9yIHRvIGRyYWluaW5nIG1heSBoYXZlIGVucXVldWVkIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gS2VlcCBkcmFpbmluZyB0aGUgcXVldWUgdW50aWwgdGhlIHRhaWwgaXMgbm8gbG9uZ2VyIGFkdmFuY2VkLFxuICAgICAgICAvLyB3aGljaCBpbmRpY2F0ZXMgdGhhdCBubyBtb3JlIG5ldyBvcGVyYXRpb25zIHdlcmUgZW5xdWV1ZWQgYW5kIHRoYXQgYWxsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMgd2VyZSBleGVjdXRlZC5cbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHQgPSB0aGlzLmZhLCBhd2FpdCB0O1xuICAgICAgICB9IHdoaWxlICh0ICE9PSB0aGlzLmZhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBEZXRlcm1pbmUgaWYgYSBkZWxheWVkIG9wZXJhdGlvbiB3aXRoIGEgcGFydGljdWxhciBUaW1lcklkXG4gICAgICogZXhpc3RzLlxuICAgICAqLyAgICBiYSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLl9hKSBpZiAoZS50aW1lcklkID09PSB0KSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBSdW5zIHNvbWUgb3IgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucyBlYXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCAtIERlbGF5ZWQgb3BlcmF0aW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoaXMgVGltZXJJZFxuICAgICAqIHdpbGwgYmUgZHJhaW5lZC4gUGFzcyBUaW1lcklkLkFsbCB0byBydW4gYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBvcGVyYXRpb25zIGhhdmUgYmVlbiBydW4uXG4gICAgICovICAgIHZhKHQpIHtcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxuICAgICAgICByZXR1cm4gdGhpcy5QYSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFJ1biBvcHMgaW4gdGhlIHNhbWUgb3JkZXIgdGhleSdkIHJ1biBpZiB0aGV5IHJhbiBuYXR1cmFsbHkuXG4gICAgICAgICAgICB0aGlzLl9hLnNvcnQoKCh0LCBlKSA9PiB0LnRhcmdldFRpbWVNcyAtIGUudGFyZ2V0VGltZU1zKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5fYSkgaWYgKGUuc2tpcERlbGF5KCksIFwiYWxsXCIgLyogQWxsICovICE9PSB0ICYmIGUudGltZXJJZCA9PT0gdCkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5QYSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIFZhKHQpIHtcbiAgICAgICAgdGhpcy5wYS5wdXNoKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgUmEodCkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX2EuaW5kZXhPZih0KTtcbiAgICAgICAgdGhpcy5fYS5zcGxpY2UoZSwgMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBEYyh0KSB7XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcbiAqIG1ldGhvZHMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSB0O1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaWYgKHQgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bdF0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAodCwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIENjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IGosIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiB0LFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2godCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKHQpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcih0KSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHQsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIERPTUV4Y2VwdGlvbiBlcnJvciBjb2RlIGNvbnN0YW50cy4gKi8gY29uc3QgTmMgPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqL1xuY2xhc3MgeGMgZXh0ZW5kcyBwYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgU2MsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCJuYW1lXCIgaW4gdCA/IHQubmFtZSA6IFwiW0RFRkFVTFRdXCI7XG4gICAgfVxuICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQgfHwgXG4gICAgICAgIC8vIFRoZSBjbGllbnQgbXVzdCBiZSBpbml0aWFsaXplZCB0byBlbnN1cmUgdGhhdCBhbGwgc3Vic2VxdWVudCBBUElcbiAgICAgICAgLy8gdXNhZ2UgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgRmModGhpcyksIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIEZpcmVzdG9yZX0gd2l0aCB0aGUgcHJvdmlkZWQgc2V0dGluZ3MuXG4gKiBDYW4gb25seSBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbiwgaW5jbHVkaW5nXG4gKiB7QGxpbmsgZ2V0RmlyZXN0b3JlfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIEEgbmV3bHkgaW5pdGlhbGl6ZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gZnVuY3Rpb24ga2MoZSwgbikge1xuICAgIGNvbnN0IHMgPSB0KGUsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChzLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjb25zdCB0ID0gcy5nZXRJbW1lZGlhdGUoKSwgZSA9IHMuZ2V0T3B0aW9ucygpO1xuICAgICAgICBpZiAocChlLCBuKSkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBLKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IG4uY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IG4uY2FjaGVTaXplQnl0ZXMgJiYgbi5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgcmV0dXJuIHMuaW5pdGlhbGl6ZSh7XG4gICAgICAgIG9wdGlvbnM6IG5cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleGlzdGluZyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAqIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS4gSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhIG5ld1xuICogaW5zdGFuY2Ugd2l0aCBkZWZhdWx0IHNldHRpbmdzLlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlIHRoYXQgdGhlIHJldHVybmVkIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAcmV0dXJucyBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugb2YgdGhlIHByb3ZpZGVkIGFwcC5cbiAqLyBmdW5jdGlvbiAkYyhuID0gZSgpKSB7XG4gICAgcmV0dXJuIHQobiwgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKCk7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gT2ModCkge1xuICAgIHJldHVybiB0Ll9maXJlc3RvcmVDbGllbnQgfHwgRmModCksIHQuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIHQuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gRmModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IGNjKHQsIGUsIG4sIHMuaG9zdCwgcy5zc2wsIHMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIHMudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KHQuX2RhdGFiYXNlSWQsIChudWxsID09PSAoZSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCB0Ll9wZXJzaXN0ZW5jZUtleSwgbik7XG4gICAgdC5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IHFhKHQuX2NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgcyk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIGdldEZpcmVzdG9yZX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBNYyh0LCBlKSB7XG4gICAgemModCA9IG1jKHQsIHhjKSk7XG4gICAgY29uc3QgbiA9IE9jKHQpLCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBPYTtcbiAgICByZXR1cm4gQmMobiwgaSwgbmV3IGthKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gTGModCkge1xuICAgIHpjKHQgPSBtYyh0LCB4YykpO1xuICAgIGNvbnN0IGUgPSBPYyh0KSwgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgT2E7XG4gICAgcmV0dXJuIEJjKGUsIHMsIG5ldyAkYShzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gQmModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IEthKHQsIG4pLCBhd2FpdCBqYSh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghXG4gICAgICAgICAgICAvKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkgcmV0dXJuIHQuY29kZSA9PT0gcS5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gcS5VTklNUExFTUVOVEVEO1xuICAgICAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxuICAgICAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgMTEgPT09IHQuY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayBnZXRGaXJlc3RvcmV9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG5mdW5jdGlvbiBVYyh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgSyhxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBqO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghUXMuUHQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgUXMuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfShucih0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIHFjKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGo7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gaGEoYXdhaXQgSmEodCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KE9jKHQgPSBtYyh0LCB4YykpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gS2ModCkge1xuICAgIHJldHVybiBYYShPYyh0ID0gbWModCwgeGMpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIGpjKHQpIHtcbiAgICByZXR1cm4gWmEoT2ModCA9IG1jKHQsIHhjKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gUWModCkge1xuICAgIHJldHVybiBuKHQuYXBwLCBcImZpcmVzdG9yZVwiKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvciBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkIG9iamVjdHMgYXJlXG4gKiAgIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnNcbiAqICAgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uXG4gKiAgIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gV2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBPYyh0ID0gbWModCwgeGMpKSwgcyA9IG5ldyBDYztcbiAgICByZXR1cm4gb2MobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlIGluIGxvY2FsXG4gKiBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKi8gZnVuY3Rpb24gR2ModCwgZSkge1xuICAgIHJldHVybiBhYyhPYyh0ID0gbWModCwgeGMpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IEljKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiB6Yyh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBLKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgSGMge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IGx0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIEpjKCkge1xuICAgIHJldHVybiBuZXcgSGMoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgWWMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFljKHd0LmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWWMod3QuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgWGMge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgWmMge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0dCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgdHQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB0dSA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBldSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBlbih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgdG4odCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3MgbnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGVuKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIEFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IE0oKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBpdSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLk4gPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLlNhKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IERhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5EYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgIENhKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpdShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLk4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgTmEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5DYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgeGE6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5rYSh0KSwgcztcbiAgICB9XG4gICAgJGEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5DYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgeGE6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5TYSgpLCBzO1xuICAgIH1cbiAgICBPYSh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5DYSh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICB4YTogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIEZhKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ1KHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5NYSB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLkxhKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIFNhKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMua2EodGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIGthKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLkZhKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoc3UodGhpcy5EYSkgJiYgdHUudGVzdCh0KSkgdGhyb3cgdGhpcy5GYSgnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3MgcnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5OID0gbiB8fCBKcih0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIEJhKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IGl1KHtcbiAgICAgICAgICAgIERhOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIExhOiBuLFxuICAgICAgICAgICAgcGF0aDogbHQuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICB4YTogITEsXG4gICAgICAgICAgICBNYTogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuTiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG91KHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IEpyKHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgcnUodC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gYXUodCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQuQmEoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBNZXJnZVNldCAqLyA6IDAgLyogU2V0ICovICwgZSwgbiwgaSk7XG4gICAgRXUoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCBhID0geXUocywgbyk7XG4gICAgbGV0IGMsIHU7XG4gICAgaWYgKHIubWVyZ2UpIGMgPSBuZXcgZnQoby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IFR1KGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIFB1KHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBjID0gbmV3IGZ0KHQpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGMuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGMgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBldShuZXcgQnQoYSksIGMsIHUpO1xufVxuXG5jbGFzcyBjdSBleHRlbmRzIFhjIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIE1lcmdlU2V0ICovICE9PSB0LkRhKSB0aHJvdyAxIC8qIFVwZGF0ZSAqLyA9PT0gdC5EYSA/IHQuRmEoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0LkZhKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGN1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gdXUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgaXUoe1xuICAgICAgICBEYTogMyAvKiBBcmd1bWVudCAqLyAsXG4gICAgICAgIExhOiBlLnNldHRpbmdzLkxhLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICB4YTogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5OLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBodSBleHRlbmRzIFhjIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgS2UodC5wYXRoLCBuZXcgJGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBodTtcbiAgICB9XG59XG5cbmNsYXNzIGx1IGV4dGVuZHMgWGMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuVWEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB1dSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlVhLm1hcCgodCA9PiBndSh0LCBlKSkpLCBzID0gbmV3IE9lKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEtlKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGZ1IGV4dGVuZHMgWGMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuVWEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB1dSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlVhLm1hcCgodCA9PiBndSh0LCBlKSkpLCBzID0gbmV3IE1lKG4pO1xuICAgICAgICByZXR1cm4gbmV3IEtlKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGR1IGV4dGVuZHMgWGMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMucWEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgQmUodC5OLCBEZSh0Lk4sIHRoaXMucWEpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBLZSh0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiB3dSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQuQmEoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBFdShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IEJ0LmVtcHR5KCk7XG4gICAgb3QocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGEgPSBBdShlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSB5KHMpO1xuICAgICAgICBjb25zdCBjID0gaS4kYShhKTtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBjdSkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICByLnB1c2goYSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IGd1KHMsIGMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChyLnB1c2goYSksIG8uc2V0KGEsIHQpKTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCBhID0gbmV3IGZ0KHIpO1xuICAgIHJldHVybiBuZXcgbnUobywgYSwgaS5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhIGxpc3Qgb2YgZmllbGQvdmFsdWUgYXJndW1lbnRzLiAqLyBmdW5jdGlvbiBfdSh0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgY29uc3QgbyA9IHQuQmEoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKSwgYSA9IFsgVHUoZSwgcywgbikgXSwgYyA9IFsgaSBdO1xuICAgIGlmIChyLmxlbmd0aCAlIDIgIT0gMCkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCArPSAyKSBhLnB1c2goVHUoZSwgclt0XSkpLCBjLnB1c2goclt0ICsgMV0pO1xuICAgIGNvbnN0IHUgPSBbXSwgaCA9IEJ0LmVtcHR5KCk7XG4gICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHBpY2sgdGhlIGxhc3QgdmFsdWUgZm9yIGEgZmllbGQgaWYgdGhlXG4gICAgLy8gdXNlciBzcGVjaWZpZWQgdGhlIGZpZWxkIG11bHRpcGxlIHRpbWVzLlxuICAgIGZvciAobGV0IHQgPSBhLmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSBpZiAoIVB1KHUsIGFbdF0pKSB7XG4gICAgICAgIGNvbnN0IGUgPSBhW3RdO1xuICAgICAgICBsZXQgbiA9IGNbdF07XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBuID0geShuKTtcbiAgICAgICAgY29uc3QgcyA9IG8uJGEoZSk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgY3UpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgdS5wdXNoKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBndShuLCBzKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAodS5wdXNoKGUpLCBoLnNldChlLCB0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBmdCh1KTtcbiAgICByZXR1cm4gbmV3IG51KGgsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gbXUodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgcmV0dXJuIGd1KG4sIHQuQmEocyA/IDQgLyogQXJyYXlBcmd1bWVudCAqLyA6IDMgLyogQXJndW1lbnQgKi8gLCBlKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHVzZXIgZGF0YSB0byBQcm90b2J1ZiBWYWx1ZXMuXG4gKlxuICogQHBhcmFtIGlucHV0IC0gRGF0YSB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gY29udGV4dCAtIEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxuICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcbiAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxuICovIGZ1bmN0aW9uIGd1KHQsIGUpIHtcbiAgICBpZiAocHUoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICB0ID0geSh0KSkpIHJldHVybiBFdShcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgeXUodCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBYYykgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBGaWVsZFZhbHVlLmRlbGV0ZSgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghc3UoZS5EYSkpIHRocm93IGUuRmEoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLkZhKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MueGEgJiYgNCAvKiBBcnJheUFyZ3VtZW50ICovICE9PSBlLkRhKSB0aHJvdyBlLkZhKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBndShpLCBlLk9hKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IHkodCkpKSByZXR1cm4ge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIERlKGUuTiwgdCk7XG4gICAgICAgIGlmIChcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHN0LmZyb21EYXRlKHQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogQm4oZS5OLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIHN0KSB7XG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBzdCh0LnNlY29uZHMsIDFlMyAqIE1hdGguZmxvb3IodC5uYW5vc2Vjb25kcyAvIDFlMykpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogQm4oZS5OLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFpjKSByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiB0LmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdC5sb25naXR1ZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBZYykgcmV0dXJuIHtcbiAgICAgICAgICAgIGJ5dGVzVmFsdWU6IFVuKGUuTiwgdC5fYnl0ZVN0cmluZylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBUYykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZGF0YWJhc2VJZCwgcyA9IHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xuICAgICAgICAgICAgaWYgKCFzLmlzRXF1YWwobikpIHRocm93IGUuRmEoYERvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSBidXQgc2hvdWxkIGJlIGZvciBkYXRhYmFzZSAke24ucHJvamVjdElkfS8ke24uZGF0YWJhc2V9YCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiBqbih0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCBlLmRhdGFiYXNlSWQsIHQuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlLkZhKGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtfYyh0KX1gKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiB5dSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHt9O1xuICAgIHJldHVybiBhdCh0KSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICBlLnBhdGggJiYgZS5wYXRoLmxlbmd0aCA+IDAgJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpIDogb3QodCwgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBndShzLCBlLk5hKHQpKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChuW3RdID0gaSk7XG4gICAgfSkpLCB7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHB1KHQpIHtcbiAgICByZXR1cm4gIShcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQgfHwgdCBpbnN0YW5jZW9mIEFycmF5IHx8IHQgaW5zdGFuY2VvZiBEYXRlIHx8IHQgaW5zdGFuY2VvZiBzdCB8fCB0IGluc3RhbmNlb2YgWmMgfHwgdCBpbnN0YW5jZW9mIFljIHx8IHQgaW5zdGFuY2VvZiBUYyB8fCB0IGluc3RhbmNlb2YgWGMpO1xufVxuXG5mdW5jdGlvbiBFdSh0LCBlLCBuKSB7XG4gICAgaWYgKCFwdShuKSB8fCAhZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpKTtcbiAgICB9KG4pKSB7XG4gICAgICAgIGNvbnN0IHMgPSBfYyhuKTtcbiAgICAgICAgdGhyb3cgXCJhbiBvYmplY3RcIiA9PT0gcyA/IGUuRmEodCArIFwiIGEgY3VzdG9tIG9iamVjdFwiKSA6IGUuRmEodCArIFwiIFwiICsgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBUdSh0LCBlLCBuKSB7XG4gICAgaWYgKChcbiAgICAvLyBJZiByZXF1aXJlZCwgcmVwbGFjZSB0aGUgRmllbGRQYXRoIENvbXBhdCBjbGFzcyB3aXRoIHdpdGggdGhlIGZpcmVzdG9yZS1leHBcbiAgICAvLyBGaWVsZFBhdGguXG4gICAgZSA9IHkoZSkpIGluc3RhbmNlb2YgSGMpIHJldHVybiBlLl9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBBdSh0LCBlKTtcbiAgICB0aHJvdyBSdShcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgRmllbGRQYXRoLlwiLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCBJdSA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIEF1KHQsIGUsIG4pIHtcbiAgICBpZiAoZS5zZWFyY2goSXUpID49IDApIHRocm93IFJ1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IEhjKC4uLmUuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgUnUoYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCB0LCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBSdSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgY29uc3QgciA9IHMgJiYgIXMuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCBhID0gYEZ1bmN0aW9uICR7ZX0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKGEgKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCBhICs9IFwiLiBcIjtcbiAgICBsZXQgYyA9IFwiXCI7XG4gICAgcmV0dXJuIChyIHx8IG8pICYmIChjICs9IFwiIChmb3VuZFwiLCByICYmIChjICs9IGAgaW4gZmllbGQgJHtzfWApLCBvICYmIChjICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBjICs9IFwiKVwiKSwgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBhICsgdCArIGMpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gUHUodCwgZSkge1xuICAgIHJldHVybiB0LnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgYnUge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gcywgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYyh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IHZ1KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoVnUoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIHZ1IGV4dGVuZHMgYnUge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gVnUodCwgZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gQXUodCwgZSkgOiBlIGluc3RhbmNlb2YgSGMgPyBlLl9pbnRlcm5hbFBhdGggOiBlLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgU3Uge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBEdSBleHRlbmRzIGJ1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBzaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhXG4gICAgICogZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBDdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNldCB0b1xuICAgICAqIGl0cyBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5XG4gICAgICogcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IHRoZSBmaWVsZCBpcyByZXRyaWV2ZWRcbiAgICAgKiBmcm9tIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQsIGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKFZ1KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUobiwgZS5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIEN1IGV4dGVuZHMgRHUge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBOdSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IFN1KHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3IEN1KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgU3UodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBuZXcgQ3UodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IFN1KHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlciksXG4gICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IGUrK1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gdC5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKHQgPT4gZSB8fCAzIC8qIE1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IEN1KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyBTdSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIEFkZGVkICovICE9PSBlLnR5cGUgJiYgKGkgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBSZW1vdmVkICovICE9PSBlLnR5cGUgJiYgKG4gPSBuLmFkZChlLmRvYyksIHIgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHh1KGUudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiByXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geHUodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTSgpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24ga3UodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgRHUgJiYgZSBpbnN0YW5jZW9mIER1ID8gdC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgdC5fa2V5LmlzRXF1YWwoZS5fa2V5KSAmJiAobnVsbCA9PT0gdC5fZG9jdW1lbnQgPyBudWxsID09PSBlLl9kb2N1bWVudCA6IHQuX2RvY3VtZW50LmlzRXF1YWwoZS5fZG9jdW1lbnQpKSAmJiB0Ll9jb252ZXJ0ZXIgPT09IGUuX2NvbnZlcnRlciA6IHQgaW5zdGFuY2VvZiBOdSAmJiBlIGluc3RhbmNlb2YgTnUgJiYgKHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIFZjKHQucXVlcnksIGUucXVlcnkpICYmIHQubWV0YWRhdGEuaXNFcXVhbChlLm1ldGFkYXRhKSAmJiB0Ll9zbmFwc2hvdC5pc0VxdWFsKGUuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uICR1KHQpIHtcbiAgICBpZiAoX2UodCkgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgSyhxLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogZW5kQmVmb3JlOjF9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSBvciB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayBxdWVyeX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBPdSB7fVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGluc3RhbmNlIG9mIHtAbGluayBRdWVyeX0gdGhhdCBpcyBleHRlbmRlZCB0byBhbHNvIGluY2x1ZGVcbiAqIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHtAbGluayBRdWVyeX0gaW5zdGFuY2UgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIG5ldyBjb25zdHJhaW50cy5cbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gVGhlIGxpc3Qgb2Yge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH1zIHRvIGFwcGx5LlxuICogQHRocm93cyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IGNvbnN0cmFpbnRzIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICogZXhpc3Rpbmcgb3IgbmV3IGNvbnN0cmFpbnRzLlxuICovIGZ1bmN0aW9uIEZ1KHQsIC4uLmUpIHtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IG4uX2FwcGx5KHQpO1xuICAgIHJldHVybiB0O1xufVxuXG5jbGFzcyBNdSBleHRlbmRzIE91IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuS2EgPSB0LCB0aGlzLmphID0gZSwgdGhpcy5RYSA9IG4sIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG91KHQuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGxldCBhO1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gciB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcikgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7cn0nIHF1ZXJpZXMgb24gRmllbGRQYXRoLmRvY3VtZW50SWQoKS5gKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKSB7XG4gICAgICAgICAgICAgICAgICAgIFp1KG8sIHIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBvKSBlLnB1c2goWHUocywgdCwgbikpO1xuICAgICAgICAgICAgICAgICAgICBhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBhID0gWHUocywgdCwgbyk7XG4gICAgICAgICAgICB9IGVsc2UgXCJpblwiIC8qIElOICovICE9PSByICYmIFwibm90LWluXCIgLyogTk9UX0lOICovICE9PSByICYmIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICE9PSByIHx8IFp1KG8sIHIpLCBcbiAgICAgICAgICAgIGEgPSBtdShuLCBlLCBvLCBcbiAgICAgICAgICAgIC8qIGFsbG93QXJyYXlzPSAqLyBcImluXCIgLyogSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHIpO1xuICAgICAgICAgICAgY29uc3QgYyA9IEh0LmNyZWF0ZShpLCByLCBhKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUudigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBnZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgIW4uaXNFcXVhbChlLmZpZWxkKSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJyR7bi50b1N0cmluZygpfScgYW5kICcke2UuZmllbGQudG9TdHJpbmcoKX0nYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBtZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiB0aCh0LCBlLmZpZWxkLCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZmlsdGVycykgaWYgKGUuaW5kZXhPZihuLm9wKSA+PSAwKSByZXR1cm4gbi5vcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSh0LCBcbiAgICAgICAgICAgICAgICAvKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm5zIHRoZSBzZXQgb2Ygb3BlcmF0b3JzIHRoYXQgY2Fubm90IGJlIHVzZWQgd2l0aCBpdC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGFycmF5IG9wZXJhdG9yIGlzIGFsbG93ZWQuXG4gKiAyLiBPbmx5IG9uZSBkaXNqdW5jdGl2ZSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMy4gYE5PVF9FUVVBTGAgY2Fubm90IGJlIHVzZWQgd2l0aCBhbm90aGVyIGBOT1RfRVFVQUxgIG9wZXJhdG9yLlxuICogNC4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqXG4gKiBBcnJheSBvcGVyYXRvcnM6IGBBUlJBWV9DT05UQUlOU2AsIGBBUlJBWV9DT05UQUlOU19BTllgXG4gKiBEaXNqdW5jdGl2ZSBvcGVyYXRvcnM6IGBJTmAsIGBBUlJBWV9DT05UQUlOU19BTllgLCBgTk9UX0lOYFxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBJTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KGUub3ApKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgICAgIHRocm93IG4gPT09IGUub3AgPyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xuICAgICAgICAgICAgfSh0LCBjKSwgYztcbiAgICAgICAgfSh0Ll9xdWVyeSwgXCJ3aGVyZVwiLCBlLCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdGhpcy5LYSwgdGhpcy5qYSwgdGhpcy5RYSk7XG4gICAgICAgIHJldHVybiBuZXcgSWModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWx0ZXJzLmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGxlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG4sIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IGVuZm9yY2VzIHRoYXQgZG9jdW1lbnRzIG11c3QgY29udGFpbiB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCBhbmQgdGhhdCB0aGUgdmFsdWUgc2hvdWxkIHNhdGlzZnkgdGhlIHJlbGF0aW9uIGNvbnN0cmFpbnRcbiAqIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCB0byBjb21wYXJlXG4gKiBAcGFyYW0gb3BTdHIgLSBUaGUgb3BlcmF0aW9uIHN0cmluZyAoZS5nIFwiJmx0O1wiLCBcIiZsdDs9XCIsIFwiPT1cIiwgXCImbHQ7XCIsXG4gKiAgIFwiJmx0Oz1cIiwgXCIhPVwiKS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBmb3IgY29tcGFyaXNvblxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBMdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGUsIGkgPSBWdShcIndoZXJlXCIsIHQpO1xuICAgIHJldHVybiBuZXcgTXUoaSwgcywgbik7XG59XG5cbmNsYXNzIEJ1IGV4dGVuZHMgT3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5LYSA9IHQsIHRoaXMuV2EgPSBlLCB0aGlzLnR5cGUgPSBcIm9yZGVyQnlcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LnN0YXJ0QXQpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5lbmRBdCkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgYWUoZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBtZSh0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGdlKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIHRoKHQsIG4sIGUuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0odCwgcyksIHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovICh0Ll9xdWVyeSwgdGhpcy5LYSwgdGhpcy5XYSk7XG4gICAgICAgIHJldHVybiBuZXcgSWModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBsZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBuLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgc29ydHMgdGhlIHF1ZXJ5IHJlc3VsdCBieSB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCwgb3B0aW9uYWxseSBpbiBkZXNjZW5kaW5nIG9yZGVyIGluc3RlYWQgb2YgYXNjZW5kaW5nLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBVdSh0LCBlID0gXCJhc2NcIikge1xuICAgIGNvbnN0IG4gPSBlLCBzID0gVnUoXCJvcmRlckJ5XCIsIHQpO1xuICAgIHJldHVybiBuZXcgQnUocywgbik7XG59XG5cbmNsYXNzIHF1IGV4dGVuZHMgT3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5HYSA9IGUsIHRoaXMuemEgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gbmV3IEljKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgVGUodC5fcXVlcnksIHRoaXMuR2EsIHRoaXMuemEpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gS3UodCkge1xuICAgIHJldHVybiBnYyhcImxpbWl0XCIsIHQpLCBuZXcgcXUoXCJsaW1pdFwiLCB0LCBcIkZcIiAvKiBGaXJzdCAqLyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBsYXN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqXG4gKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBgb3JkZXJCeWAgY2xhdXNlIGZvciBgbGltaXRUb0xhc3RgIHF1ZXJpZXMsXG4gKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24ganUodCkge1xuICAgIHJldHVybiBnYyhcImxpbWl0VG9MYXN0XCIsIHQpLCBuZXcgcXUoXCJsaW1pdFRvTGFzdFwiLCB0LCBcIkxcIiAvKiBMYXN0ICovKTtcbn1cblxuY2xhc3MgUXUgZXh0ZW5kcyBPdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLkhhID0gZSwgdGhpcy5KYSA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBZdSh0LCB0aGlzLnR5cGUsIHRoaXMuSGEsIHRoaXMuSmEpO1xuICAgICAgICByZXR1cm4gbmV3IEljKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBsZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIGUsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBRdShcInN0YXJ0QXRcIiwgdCwgLypiZWZvcmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBHdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBRdShcInN0YXJ0QWZ0ZXJcIiwgdCwgXG4gICAgLypiZWZvcmU9Ki8gITEpO1xufVxuXG5jbGFzcyB6dSBleHRlbmRzIE91IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuSGEgPSBlLCB0aGlzLkphID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFl1KHQsIHRoaXMudHlwZSwgdGhpcy5IYSwgdGhpcy5KYSk7XG4gICAgICAgIHJldHVybiBuZXcgSWModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGxlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCBlKTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSHUoLi4udCkge1xuICAgIHJldHVybiBuZXcgenUoXCJlbmRCZWZvcmVcIiwgdCwgLypiZWZvcmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBKdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyB6dShcImVuZEF0XCIsIHQsIC8qYmVmb3JlPSovICExKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIFl1KHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoblswXSA9IHkoblswXSksIG5bMF0gaW5zdGFuY2VvZiBidSkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgSyhxLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgcGUodCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKHh0KGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChwdCh0KSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgcmUociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gb3UodC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCBhID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGMpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBjfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXllKHQpICYmIC0xICE9PSBjLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7Y30nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQodXQuZnJvbVN0cmluZyhjKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghUHQuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFB0KG4pO1xuICAgICAgICAgICAgICAgICAgICBhLnB1c2goeHQoZSwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBtdShuLCBzLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgcmUoYSwgcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIGUsIG4sIHMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWHUodCwgZSwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IHkobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoIXllKGUpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgSyhxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtufScgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLmApO1xuICAgICAgICBjb25zdCBzID0gZS5wYXRoLmNoaWxkKHV0LmZyb21TdHJpbmcobikpO1xuICAgICAgICBpZiAoIVB0LmlzRG9jdW1lbnRLZXkocykpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtzfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7cy5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIHh0KHQsIG5ldyBQdChzKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgVGMpIHJldHVybiB4dCh0LCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7X2Mobil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gWnUodCwgZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSB8fCAwID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgaWYgKHQubGVuZ3RoID4gMTApIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMgc3VwcG9ydCBhIG1heGltdW0gb2YgMTAgZWxlbWVudHMgaW4gdGhlIHZhbHVlIGFycmF5LmApO1xufVxuXG5mdW5jdGlvbiB0aCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwoZSkpIHRocm93IG5ldyBLKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHtlLnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7ZS50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgZWgge1xuICAgIGNvbnZlcnRWYWx1ZSh0LCBlID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChidCh0KSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZ3QodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoeXQodC5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZSh0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludCh0Lmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KHQuYXJyYXlWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QodC5tYXBWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgTSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QodCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBvdCh0LmZpZWxkcywgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuW3RdID0gdGhpcy5jb252ZXJ0VmFsdWUocywgZSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBaYyhndCh0LmxhdGl0dWRlKSwgZ3QodC5sb25naXR1ZGUpKTtcbiAgICB9XG4gICAgY29udmVydEFycmF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICh0LnZhbHVlcyB8fCBbXSkubWFwKCh0ID0+IHRoaXMuY29udmVydFZhbHVlKHQsIGUpKSk7XG4gICAgfVxuICAgIGNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwicHJldmlvdXNcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBFdCh0KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5jb252ZXJ0VmFsdWUobiwgZSk7XG5cbiAgICAgICAgICBjYXNlIFwiZXN0aW1hdGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoVHQodCkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAodCkge1xuICAgICAgICBjb25zdCBlID0gbXQodCk7XG4gICAgICAgIHJldHVybiBuZXcgc3QoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHV0LmZyb21TdHJpbmcodCk7XG4gICAgICAgIEwocHMobikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IHVjKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgUHQobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiBzLmlzRXF1YWwoZSkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgICQoYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7ZS5wcm9qZWN0SWR9LyR7ZS5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIG5oKHQsIGUsIG4pIHtcbiAgICBsZXQgcztcbiAgICAvLyBDYXN0IHRvIGBhbnlgIGluIG9yZGVyIHRvIHNhdGlzZnkgdGhlIHVuaW9uIHR5cGUgY29uc3RyYWludCBvblxuICAgIC8vIHRvRmlyZXN0b3JlKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gcyA9IHQgPyBuICYmIChuLm1lcmdlIHx8IG4ubWVyZ2VGaWVsZHMpID8gdC50b0ZpcmVzdG9yZShlLCBuKSA6IHQudG9GaXJlc3RvcmUoZSkgOiBlLCBcbiAgICBzO1xufVxuXG5jbGFzcyBzaCBleHRlbmRzIGVoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZYyh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgVGModGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi8gY2xhc3MgaWgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9jb21taXRIYW5kbGVyID0gZSwgdGhpcy5fbXV0YXRpb25zID0gW10sIHRoaXMuX2NvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgdGhpcy5fZGF0YVJlYWRlciA9IG91KHQpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgcyA9IHJoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBuaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBhdSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2guc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKHMuX2tleSwgV2Uubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gcmgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0geShlKSkgfHwgZSBpbnN0YW5jZW9mIEhjID8gX3UodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogd3UodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKGkuX2tleSwgV2UuZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBlID0gcmgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IG9uKGUuX2tleSwgV2Uubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhpcyB3cml0ZSBiYXRjaCBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgdGhlc2Ugd3JpdGVzIHdpbGwgb25seSBiZSByZWZsZWN0ZWQgaW4gZG9jdW1lbnQgcmVhZHMgdGhhdFxuICAgICAqIG9jY3VyIGFmdGVyIHRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzLiBJZiB0aGUgY2xpZW50IGlzIG9mZmxpbmUsIHRoZVxuICAgICAqIHdyaXRlIGZhaWxzLiBJZiB5b3Ugd291bGQgbGlrZSB0byBzZWUgbG9jYWwgbW9kaWZpY2F0aW9ucyBvciBidWZmZXIgd3JpdGVzXG4gICAgICogdW50aWwgdGhlIGNsaWVudCBpcyBvbmxpbmUsIHVzZSB0aGUgZnVsbCBGaXJlc3RvcmUgU0RLLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGUgYmF0Y2ggaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgYXMgYW4gYXRvbWljIHVuaXQgKG5vdGUgdGhhdCBpdCB3b24ndFxuICAgICAqIHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICAgICAqLyAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKSwgdGhpcy5fY29tbWl0dGVkID0gITAsIHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF92ZXJpZnlOb3RDb21taXR0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHRocm93IG5ldyBLKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSBoYXMgYmVlbiBjYWxsZWQuXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmgodCwgZSkge1xuICAgIGlmICgodCA9IHkodCkpLmZpcmVzdG9yZSAhPT0gZSkgdGhyb3cgbmV3IEsocS5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovXG5mdW5jdGlvbiBvaCh0KSB7XG4gICAgdCA9IG1jKHQsIFRjKTtcbiAgICBjb25zdCBlID0gbWModC5maXJlc3RvcmUsIHhjKTtcbiAgICByZXR1cm4gZWMoT2MoZSksIHQuX2tleSkudGhlbigobiA9PiBFaChlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBhaCBleHRlbmRzIGVoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZYyh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgVGModGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gY2godCkge1xuICAgIHQgPSBtYyh0LCBUYyk7XG4gICAgY29uc3QgZSA9IG1jKHQuZmlyZXN0b3JlLCB4YyksIG4gPSBPYyhlKSwgcyA9IG5ldyBhaChlKTtcbiAgICByZXR1cm4gdGMobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyBEdShlLCBzLCB0Ll9rZXksIG4sIG5ldyBTdShudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIHVoKHQpIHtcbiAgICB0ID0gbWModCwgVGMpO1xuICAgIGNvbnN0IGUgPSBtYyh0LmZpcmVzdG9yZSwgeGMpO1xuICAgIHJldHVybiBlYyhPYyhlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gRWgoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBoaCh0KSB7XG4gICAgdCA9IG1jKHQsIEljKTtcbiAgICBjb25zdCBlID0gbWModC5maXJlc3RvcmUsIHhjKSwgbiA9IE9jKGUpLCBzID0gbmV3IGFoKGUpO1xuICAgIHJldHVybiAkdSh0Ll9xdWVyeSksIHNjKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBOdShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGxoKHQpIHtcbiAgICB0ID0gbWModCwgSWMpO1xuICAgIGNvbnN0IGUgPSBtYyh0LmZpcmVzdG9yZSwgeGMpLCBuID0gT2MoZSksIHMgPSBuZXcgYWgoZSk7XG4gICAgcmV0dXJuIG5jKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBOdShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGZoKHQpIHtcbiAgICB0ID0gbWModCwgSWMpO1xuICAgIGNvbnN0IGUgPSBtYyh0LmZpcmVzdG9yZSwgeGMpLCBuID0gT2MoZSksIHMgPSBuZXcgYWgoZSk7XG4gICAgcmV0dXJuIHNjKG4sIHQuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IE51KGUsIHMsIHQsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIGRoKHQsIGUsIG4pIHtcbiAgICB0ID0gbWModCwgVGMpO1xuICAgIGNvbnN0IHMgPSBtYyh0LmZpcmVzdG9yZSwgeGMpLCBpID0gbmgodC5jb252ZXJ0ZXIsIGUsIG4pO1xuICAgIHJldHVybiBwaChzLCBbIGF1KG91KHMpLCBcInNldERvY1wiLCB0Ll9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCBuKS50b011dGF0aW9uKHQuX2tleSwgV2Uubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gd2godCwgZSwgbiwgLi4ucykge1xuICAgIHQgPSBtYyh0LCBUYyk7XG4gICAgY29uc3QgaSA9IG1jKHQuZmlyZXN0b3JlLCB4YyksIHIgPSBvdShpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIGUgPSB5KGUpKSB8fCBlIGluc3RhbmNlb2YgSGMgPyBfdShyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUsIG4sIHMpIDogd3UociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlKTtcbiAgICByZXR1cm4gcGgoaSwgWyBvLnRvTXV0YXRpb24odC5fa2V5LCBXZS5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBfaCh0KSB7XG4gICAgcmV0dXJuIHBoKG1jKHQuZmlyZXN0b3JlLCB4YyksIFsgbmV3IG9uKHQuX2tleSwgV2Uubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gbWgodCwgZSkge1xuICAgIGNvbnN0IG4gPSBtYyh0LmZpcmVzdG9yZSwgeGMpLCBzID0gYmModCksIGkgPSBuaCh0LmNvbnZlcnRlciwgZSk7XG4gICAgcmV0dXJuIHBoKG4sIFsgYXUob3UodC5maXJlc3RvcmUpLCBcImFkZERvY1wiLCBzLl9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihzLl9rZXksIFdlLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHMpKTtcbn1cblxuZnVuY3Rpb24gZ2godCwgLi4uZSkge1xuICAgIHZhciBuLCBzLCBpO1xuICAgIHQgPSB5KHQpO1xuICAgIGxldCByID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMVxuICAgIH0sIG8gPSAwO1xuICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIGVbb10gfHwgRGMoZVtvXSkgfHwgKHIgPSBlW29dLCBvKyspO1xuICAgIGNvbnN0IGEgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHIuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xuICAgIH07XG4gICAgaWYgKERjKGVbb10pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlW29dO1xuICAgICAgICBlW29dID0gbnVsbCA9PT0gKG4gPSB0Lm5leHQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYmluZCh0KSwgZVtvICsgMV0gPSBudWxsID09PSAocyA9IHQuZXJyb3IpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuYmluZCh0KSwgXG4gICAgICAgIGVbbyArIDJdID0gbnVsbCA9PT0gKGkgPSB0LmNvbXBsZXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmJpbmQodCk7XG4gICAgfVxuICAgIGxldCBjLCB1LCBoO1xuICAgIGlmICh0IGluc3RhbmNlb2YgVGMpIHUgPSBtYyh0LmZpcmVzdG9yZSwgeGMpLCBoID0gZGUodC5fa2V5LnBhdGgpLCBjID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIGVbb10gJiYgZVtvXShFaCh1LCB0LCBuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBtYyh0LCBJYyk7XG4gICAgICAgIHUgPSBtYyhuLmZpcmVzdG9yZSwgeGMpLCBoID0gbi5fcXVlcnk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgYWgodSk7XG4gICAgICAgIGMgPSB7XG4gICAgICAgICAgICBuZXh0OiB0ID0+IHtcbiAgICAgICAgICAgICAgICBlW29dICYmIGVbb10obmV3IE51KHUsIHMsIG4sIHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICAgICAgfSwgJHUodC5fcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IE1hKHMpLCByID0gbmV3IGpvKGUsIGksIG4pO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IExvKGF3YWl0IFlhKHQpLCByKSkpLCAoKSA9PiB7XG4gICAgICAgICAgICBpLlhvKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBCbyhhd2FpdCBZYSh0KSwgcikpKTtcbiAgICAgICAgfTtcbiAgICB9KE9jKHUpLCBoLCBhLCBjKTtcbn1cblxuZnVuY3Rpb24geWgodCwgZSkge1xuICAgIHJldHVybiBpYyhPYyh0ID0gbWModCwgeGMpKSwgRGMoZSkgPyBlIDoge1xuICAgICAgICBuZXh0OiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogTG9jYWxseSB3cml0ZXMgYG11dGF0aW9uc2Agb24gdGhlIGFzeW5jIHF1ZXVlLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gcGgodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgajtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBpYShhd2FpdCBKYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xuICAgIH0oT2ModCksIGUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEge0BsaW5rIFZpZXdTbmFwc2hvdH0gdGhhdCBjb250YWlucyB0aGUgc2luZ2xlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcmVmYFxuICogdG8gYSB7QGxpbmsgRG9jdW1lbnRTbmFwc2hvdH0uXG4gKi8gZnVuY3Rpb24gRWgodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuLmRvY3MuZ2V0KGUuX2tleSksIGkgPSBuZXcgYWgodCk7XG4gICAgcmV0dXJuIG5ldyBEdSh0LCBpLCBlLl9rZXksIHMsIG5ldyBTdShuLmhhc1BlbmRpbmdXcml0ZXMsIG4uZnJvbUNhY2hlKSwgZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi8gY2xhc3MgVGggZXh0ZW5kcyBjbGFzcyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3RyYW5zYWN0aW9uID0gZSwgdGhpcy5fZGF0YVJlYWRlciA9IG91KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHJoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgc2godGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIGUuX2tleSBdKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCB8fCAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuIE0oKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0WzBdO1xuICAgICAgICAgICAgaWYgKHMuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgYnUodGhpcy5fZmlyZXN0b3JlLCBuLCBzLmtleSwgcywgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgaWYgKHMuaXNOb0RvY3VtZW50KCkpIHJldHVybiBuZXcgYnUodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIG51bGwsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIHRocm93IE0oKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcmgodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IG5oKHMuY29udmVydGVyLCBlLCBuKSwgciA9IGF1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24uc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHMuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIGNvbnN0IGkgPSByaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSB5KGUpKSB8fCBlIGluc3RhbmNlb2YgSGMgPyBfdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogd3UodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gcmgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShlLl9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLl9maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHJoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgYWgodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldCh0KS50aGVuKCh0ID0+IG5ldyBEdSh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgdC5fZG9jdW1lbnQsIG5ldyBTdShcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgZS5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBJaCh0LCBlKSB7XG4gICAgcmV0dXJuIHJjKE9jKHQpLCAobiA9PiBlKG5ldyBUaCh0LCBuKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gQWgoKSB7XG4gICAgcmV0dXJuIG5ldyBjdShcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBSaCgpIHtcbiAgICByZXR1cm4gbmV3IGh1KFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBQaCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IGx1KFwiYXJyYXlVbmlvblwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gYmgoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBmdShcImFycmF5UmVtb3ZlXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gdmgodCkge1xuICAgIHJldHVybiBuZXcgZHUoXCJpbmNyZW1lbnRcIiwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiBWaCh0KSB7XG4gICAgcmV0dXJuIE9jKHQgPSBtYyh0LCB4YykpLCBuZXcgaWgodCwgKGUgPT4gcGgodCwgZSkpKTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyB2YXIgU2g7XG5cbiFmdW5jdGlvbih0KSB7XG4gICAgRCA9IHQ7XG59KHIpLCBzKG5ldyBvKFwiZmlyZXN0b3JlXCIsICgodCwge29wdGlvbnM6IGV9KSA9PiB7XG4gICAgY29uc3QgbiA9IHQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIHMgPSBuZXcgeGMobiwgbmV3IHoodC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpKTtcbiAgICByZXR1cm4gZSA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICB1c2VGZXRjaFN0cmVhbXM6ICEwXG4gICAgfSwgZSksIHMuX3NldFNldHRpbmdzKGUpLCBzO1xufSksIFwiUFVCTElDXCIgLyogUFVCTElDICovKSksIGkoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIsIFwiMy4wLjFcIiwgU2gpO1xuXG5leHBvcnQgeyBlaCBhcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBZYyBhcyBCeXRlcywgTmMgYXMgQ0FDSEVfU0laRV9VTkxJTUlURUQsIEFjIGFzIENvbGxlY3Rpb25SZWZlcmVuY2UsIFRjIGFzIERvY3VtZW50UmVmZXJlbmNlLCBEdSBhcyBEb2N1bWVudFNuYXBzaG90LCBIYyBhcyBGaWVsZFBhdGgsIFhjIGFzIEZpZWxkVmFsdWUsIHhjIGFzIEZpcmVzdG9yZSwgSyBhcyBGaXJlc3RvcmVFcnJvciwgWmMgYXMgR2VvUG9pbnQsIENjIGFzIExvYWRCdW5kbGVUYXNrLCBJYyBhcyBRdWVyeSwgT3UgYXMgUXVlcnlDb25zdHJhaW50LCBDdSBhcyBRdWVyeURvY3VtZW50U25hcHNob3QsIE51IGFzIFF1ZXJ5U25hcHNob3QsIFN1IGFzIFNuYXBzaG90TWV0YWRhdGEsIHN0IGFzIFRpbWVzdGFtcCwgVGggYXMgVHJhbnNhY3Rpb24sIGloIGFzIFdyaXRlQmF0Y2gsIHVjIGFzIF9EYXRhYmFzZUlkLCBQdCBhcyBfRG9jdW1lbnRLZXksIGx0IGFzIF9GaWVsZFBhdGgsIG1jIGFzIF9jYXN0LCBCIGFzIF9kZWJ1Z0Fzc2VydCwgZHQgYXMgX2lzQmFzZTY0QXZhaWxhYmxlLCBPIGFzIF9sb2dXYXJuLCBmYyBhcyBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgbWggYXMgYWRkRG9jLCBiaCBhcyBhcnJheVJlbW92ZSwgUGggYXMgYXJyYXlVbmlvbiwgVWMgYXMgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgUmMgYXMgY29sbGVjdGlvbiwgUGMgYXMgY29sbGVjdGlvbkdyb3VwLCBFYyBhcyBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIF9oIGFzIGRlbGV0ZURvYywgQWggYXMgZGVsZXRlRmllbGQsIGpjIGFzIGRpc2FibGVOZXR3b3JrLCBiYyBhcyBkb2MsIEpjIGFzIGRvY3VtZW50SWQsIE1jIGFzIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBMYyBhcyBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBLYyBhcyBlbmFibGVOZXR3b3JrLCBKdSBhcyBlbmRBdCwgSHUgYXMgZW5kQmVmb3JlLCBPYyBhcyBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkLCBwaCBhcyBleGVjdXRlV3JpdGUsIG9oIGFzIGdldERvYywgY2ggYXMgZ2V0RG9jRnJvbUNhY2hlLCB1aCBhcyBnZXREb2NGcm9tU2VydmVyLCBoaCBhcyBnZXREb2NzLCBsaCBhcyBnZXREb2NzRnJvbUNhY2hlLCBmaCBhcyBnZXREb2NzRnJvbVNlcnZlciwgJGMgYXMgZ2V0RmlyZXN0b3JlLCB2aCBhcyBpbmNyZW1lbnQsIGtjIGFzIGluaXRpYWxpemVGaXJlc3RvcmUsIEt1IGFzIGxpbWl0LCBqdSBhcyBsaW1pdFRvTGFzdCwgV2MgYXMgbG9hZEJ1bmRsZSwgR2MgYXMgbmFtZWRRdWVyeSwgZ2ggYXMgb25TbmFwc2hvdCwgeWggYXMgb25TbmFwc2hvdHNJblN5bmMsIFV1IGFzIG9yZGVyQnksIEZ1IGFzIHF1ZXJ5LCBWYyBhcyBxdWVyeUVxdWFsLCB2YyBhcyByZWZFcXVhbCwgSWggYXMgcnVuVHJhbnNhY3Rpb24sIFJoIGFzIHNlcnZlclRpbWVzdGFtcCwgZGggYXMgc2V0RG9jLCB4IGFzIHNldExvZ0xldmVsLCBrdSBhcyBzbmFwc2hvdEVxdWFsLCBHdSBhcyBzdGFydEFmdGVyLCBXdSBhcyBzdGFydEF0LCBRYyBhcyB0ZXJtaW5hdGUsIHdoIGFzIHVwZGF0ZURvYywgcWMgYXMgd2FpdEZvclBlbmRpbmdXcml0ZXMsIEx1IGFzIHdoZXJlLCBWaCBhcyB3cml0ZUJhdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiOS4wLjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBwYXJzZURvY3VtZW50VG9CZUVkaXRlZCB9IGZyb20gXCIuL2VkaXRfZG9jdW1lbnRfcGFnZVwiO1xuaW1wb3J0IHsgZGIsIHN0b3JhZ2UgfSBmcm9tICcuL3NldHVwLmpzJztcbmltcG9ydCB7IHJlZiBhcyBzdG9yYWdlUmVmLCB1cGxvYWRCeXRlcywgZ2V0RG93bmxvYWRVUkwsIGRlbGV0ZU9iamVjdCB9IGZyb20gXCJmaXJlYmFzZS9zdG9yYWdlXCI7XG5pbXBvcnQgeyBkb2MgYXMgZmlyZXN0b3JlRG9jLCB1cGRhdGVEb2MsIHNlcnZlclRpbWVzdGFtcCwgZGVsZXRlRG9jIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5cbndpbmRvdy5vbmxvYWQgPSBwYXJzZURvY3VtZW50VG9CZUVkaXRlZDtcblxuXG5mdW5jdGlvbiBnZXRGaWxlUGF0aEZyb21VUkwodXJsKSB7XG4gICAgY29uc3QgYmFzZVVybCA9IFwiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi91cGxvYWQtMjVmMDEuYXBwc3BvdC5jb20vby9cIjtcbiAgICBjb25zdCBwYXRoV2l0aFRva2VuID0gdXJsLnJlcGxhY2UoYmFzZVVybCwgXCJcIik7XG4gICAgY29uc3QgcGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChwYXRoV2l0aFRva2VuLnNwbGl0KFwiP1wiKVswXSk7XG4gICAgcmV0dXJuIHBhdGg7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVEb2N1bWVudChkb2Mpe1xuICAgIC8vIGNvbnN0IGRvY3VtZW50VG9CZURlbGV0ZWRTdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZG9jdW1lbnRUb0JlRWRpdGVkJyk7XG4gICAgLy8gaWYgKCFkb2N1bWVudFRvQmVEZWxldGVkU3RyaW5nKSB7XG4gICAgLy8gICAgIGFsZXJ0KCdObyBkb2N1bWVudCB0byBlZGl0LicpO1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gfVxuICAgIC8vIGNvbnN0IGRvY3VtZW50VG9CZURlbGV0ZWQgPSBKU09OLnBhcnNlKGRvY3VtZW50VG9CZURlbGV0ZWRTdHJpbmcpO1xuICAgIC8vIGNvbnN0IGRvY3VtZW50VG9CZURlbGV0ZWRGaWxlID0gZG9jdW1lbnRUb0JlRGVsZXRlZC5maWxlVXJsO1xuICAgIGNvbnN0IGNvbmZpcm1EZWxldGUgPSBjb25maXJtKGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcGVybWFuZW50bHkgZGVsZXRlIFwiJHtkb2MuZG9jdW1lbnROYW1lfVwiP2ApO1xuICAgIFxuICAgIGlmICghY29uZmlybURlbGV0ZSkge1xuICAgICAgICByZXR1cm47IC8vIFVzZXIgY2FuY2VsZWQgZGVsZXRpb25cbiAgICB9XG4gICAgdHJ5e1xuICAgICAgICBpZihkb2MuZmlsZVVybCl7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudFRvQmVEZWxldGVkRmlsZVBhdGggPSBnZXRGaWxlUGF0aEZyb21VUkwoZG9jLmZpbGVVcmwpO1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRUb0JlRGVsZXRlZEZpbGVSZWYgPSBzdG9yYWdlUmVmKHN0b3JhZ2UsIGRvY3VtZW50VG9CZURlbGV0ZWRGaWxlUGF0aCk7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVPYmplY3QoZG9jdW1lbnRUb0JlRGVsZXRlZEZpbGVSZWYpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaWxlIGRlbGV0ZWQgZnJvbSBTdG9yYWdlIVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVuIGRlbGV0ZSBmcm9tIEZpcmVzdG9yZVxuICAgICAgICBjb25zdCBkb2N1bWVudFRvQmVEZWxldGVkUmVmID0gZmlyZXN0b3JlRG9jKGRiLCBcImRvY3VtZW50c1wiLCBkb2MuaWQpO1xuICAgICAgICBhd2FpdCBkZWxldGVEb2MoZG9jdW1lbnRUb0JlRGVsZXRlZFJlZik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRG9jdW1lbnQgbWV0YWRhdGEgZGVsZXRlZCBmcm9tIEZpcmVzdG9yZSFcIik7XG4gICAgXG4gICAgICAgIGFsZXJ0KFwiRG9jdW1lbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7ICAvLyBSZWxvYWQgdGhlIHBhZ2UgYWZ0ZXIgZGVsZXRpb25cbiAgICB9IGNhdGNoKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGRvY3VtZW50OlwiLCBlcnJvcik7XG4gICAgICAgIGFsZXJ0KFwiRmFpbGVkIHRvIGRlbGV0ZSBkb2N1bWVudCFcIik7XG4gICAgfVxuICAgXG59XG4iLCJpbXBvcnQgeyBkYiB9IGZyb20gJy4vc2V0dXAuanMnO1xuaW1wb3J0IHsgY29sbGVjdGlvbiwgZ2V0RG9jcyB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGRlbGV0ZURvY3VtZW50IH0gZnJvbSAnLi9kZWxldGVfZG9jdW1lbnQuanMnO1xuXG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoRG9jdW1lbnRzKCkge1xuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsIFwiZG9jdW1lbnRzXCIpKTtcbiAgICBjb25zdCBkb2N1bWVudHMgPSBbXTtcbiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuICAgICAgICBkb2N1bWVudHMucHVzaCh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvY3VtZW50cztcbn1cblxuZnVuY3Rpb24gb3BlbkVkaXRQYWdlKGRvY1N0cmluZykge1xuICAgIGNvbnN0IGRvY3VtZW50VG9CZUVkaXRlZCA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KGRvY1N0cmluZykpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkb2N1bWVudFRvQmVFZGl0ZWQnLCBKU09OLnN0cmluZ2lmeShkb2N1bWVudFRvQmVFZGl0ZWQpKTsgIC8vIFNhdmUgdGhlIGRvYyBvYmplY3RcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiZWRpdF9kb2N1bWVudF9wYWdlLmh0bWxcIjsgLy8gR28gdG8gbmV3IHBhZ2Vcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGlzcGxheURvY3VtZW50cygpIHtcbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBmZXRjaERvY3VtZW50cygpO1xuICAgIGNvbnN0IGRvY3VtZW50c0xpc3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9jdW1lbnRzLWxpc3QnKTtcblxuICAgIGRvY3VtZW50cy5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRUb0JlRWRpdGVkRGF0YSA9IGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkb2MpKTsgXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgcmVhbCBkaXYgZWxlbWVudFxuICAgICAgICBjb25zdCBkb2N1bWVudENhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZG9jdW1lbnRDYXJkLmNsYXNzTmFtZSA9ICdkb2N1bWVudC1jYXJkIG1iLTMnO1xuXG4gICAgICAgIGRvY3VtZW50Q2FyZC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMz4ke2RvYy5kb2N1bWVudE5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInZpZXctZG9jdW1lbnRzLWVkaXQtaWNvblwiIHNyYz1cImltYWdlcy9lZGl0X2ljb24ucG5nXCIgd2lkdGg9XCIxMCVcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjtcIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInZpZXctZG9jdW1lbnRzLXNoYXJlLWljb25cIiBkYXRhLXVybD1cIiR7ZG9jLmZpbGVVcmx9XCIgZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiIGRhdGEtYnMtdGFyZ2V0PVwiI3ZpZXctZG9jdW1lbnRzLXBhZ2Utc2hhcmUtbW9kYWxcIiBzcmM9XCJpbWFnZXMvc2hhcmVfaWNvbi5wbmdcIiB3aWR0aD1cIjEwJVwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyO1wiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwidmlldy1kb2N1bWVudHMtZGVsZXRlLWljb25cIiBzcmM9XCJpbWFnZXMvZGVsZXRlX2ljb24ucG5nXCIgd2lkdGg9XCIxMCVcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjtcIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHA+VHlwZTogJHtkb2MuZG9jdW1lbnRUeXBlfTwvcD5cbiAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtkb2MuZmlsZVVybH1cIiBhbHQ9XCIke2RvYy5kb2N1bWVudE5hbWV9XCIgd2lkdGg9XCIyMDBcIiAvPlxuICAgICAgICAgICAgPHA+VXBsb2FkZWQgQXQ6ICR7ZG9jLnVwbG9hZGVkQXQ/LnRvRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCkgfHwgXCJVbmtub3duXCJ9PC9wPlxuICAgICAgICAgICAgPHA+VXBkYXRlZCBBdDogJHtkb2MudXBkYXRlZEF0Py50b0RhdGUoKS50b0xvY2FsZVN0cmluZygpIHx8IFwiIC0gXCJ9PC9wPlxuICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgYDtcblxuICAgICAgICAvLyBGaW5kIHRoZSBlZGl0IGljb24gaW5zaWRlIHRoZSBkb2N1bWVudENhcmRcbiAgICAgICAgY29uc3QgZWRpdEljb24gPSBkb2N1bWVudENhcmQucXVlcnlTZWxlY3RvcignLnZpZXctZG9jdW1lbnRzLWVkaXQtaWNvbicpO1xuICAgICAgICBjb25zdCBkZWxldGVJY29uID0gZG9jdW1lbnRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy52aWV3LWRvY3VtZW50cy1kZWxldGUtaWNvbicpO1xuICAgICAgICBjb25zdCBzaGFyZUljb24gPSBkb2N1bWVudENhcmQucXVlcnlTZWxlY3RvcignLnZpZXctZG9jdW1lbnRzLXNoYXJlLWljb24nKTtcblxuICAgICAgICAvLyBBZGQgY2xpY2sgZXZlbnQgcHJvZ3JhbW1hdGljYWxseVxuICAgICAgICBlZGl0SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIG9wZW5FZGl0UGFnZShkb2N1bWVudFRvQmVFZGl0ZWREYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVsZXRlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgICAgICAgICAgZGVsZXRlRG9jdW1lbnQoZG9jKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2hhcmVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudFVybCA9IHNoYXJlSWNvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7XG4gICAgICAgICAgICBjb25zdCBpc01vYmlsZSA9IC9Nb2JpfEFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgICAgICAgICAvLyBTZXQgZHluYW1pYyBVUkxzXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1kb2N1bWVudHMtcGFnZS13aGF0c2FwcC1zaGFyZS1idXR0b24nKS5ocmVmID0gYGh0dHBzOi8vd2EubWUvP3RleHQ9JHtlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnRVcmwpfWA7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1kb2N1bWVudHMtcGFnZS1lbWFpbC1zaGFyZS1idXR0b24nKS5ocmVmID0gYG1haWx0bzo/c3ViamVjdD1TaGFyZWQgRG9jdW1lbnQmYm9keT0ke2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudFVybCl9YDtcblxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXctZG9jdW1lbnRzLXBhZ2UtY29weS1saW5rLWJ1dHRvbicpLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZG9jdW1lbnRVcmwpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvcGllZCB0byBjbGlwYm9hcmQhJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBpZihuYXZpZ2F0b3Iuc2hhcmUgJiYgaXNNb2JpbGUpe1xuICAgICAgICAgICAgLy8gICAgIG5hdmlnYXRvci5zaGFyZSh7XG4gICAgICAgICAgICAvLyAgICAgICAgIHRpdGxlOiAnU2VjdXJlIERvY3VtZW50JyxcbiAgICAgICAgICAgIC8vICAgICAgICAgdGV4dDogJ0hlcmUgaXMgdGhlIGRvY3VtZW50IHlvdSBhc2tlZCBmb3I6JyxcbiAgICAgICAgICAgIC8vICAgICAgICAgdXJsOiBkb2N1bWVudFVybFxuICAgICAgICAgICAgLy8gICAgIH0pLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJTaGFyZSBmYWlsZWQ6XCIsIGVycikpO1xuICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zdCB3aGF0c2FwcFVybCA9IGBodHRwczovL3dhLm1lLz90ZXh0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50VXJsKX1gO1xuICAgICAgICAgICAgLy8gICAgIGNvbnN0IG1haWxVcmwgPSBgbWFpbHRvOj9zdWJqZWN0PVNoYXJlZCBEb2N1bWVudCZib2R5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50VXJsKX1gO1xuXG4gICAgICAgICAgICAvLyAgICAgY29uc3Qgc2hhcmVPcHRpb25zID0gYFxuICAgICAgICAgICAgLy8gICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAxZW07XCI+XG4gICAgICAgICAgICAvLyAgICAgPGJ1dHRvbiBvbmNsaWNrPVwibmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoJyR7ZG9jdW1lbnRVcmx9Jyk7IGFsZXJ0KCdDb3BpZWQgdG8gY2xpcGJvYXJkIScpO1wiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkgbWItMlwiPvCfk44gQ29weSBMaW5rPC9idXR0b24+PGJyPlxuICAgICAgICAgICAgLy8gICAgIDxhIGhyZWY9XCIke3doYXRzYXBwVXJsfVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zdWNjZXNzIG1iLTJcIj7wn5KsIFdoYXRzQXBwPC9hPjxicj5cbiAgICAgICAgICAgIC8vICAgICA8YSBocmVmPVwiJHttYWlsVXJsfVwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1wcmltYXJ5XCI+8J+TpyBFbWFpbDwvYT5cbiAgICAgICAgICAgIC8vICAgICA8L2Rpdj5gO1xuXG4gICAgICAgICAgICAvLyAgICAgY29uc3Qgc2hhcmVXaW5kb3cgPSB3aW5kb3cub3BlbihcIlwiLCBcIl9ibGFua1wiLCBcIndpZHRoPTMwMCxoZWlnaHQ9MzAwXCIpO1xuICAgICAgICAgICAgLy8gLy8gICAgIHNoYXJlV2luZG93LmRvY3VtZW50LndyaXRlKGA8IURPQ1RZUEUgaHRtbD5cbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD48dGl0bGU+U2hhcmUgRG9jdW1lbnQ8L3RpdGxlPjwvaGVhZD5cbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5PlxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAxZW07IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1wiPlxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiY29weUJ0blwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tb3V0bGluZS1zZWNvbmRhcnkgbWItMlwiPvCfk44gQ29weSBMaW5rPC9idXR0b24+PGJyPlxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly93YS5tZS8/dGV4dD0ke2VuY29kZWRVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLXN1Y2Nlc3MgbWItMlwiPvCfkqwgV2hhdHNBcHA8L2E+PGJyPlxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwibWFpbHRvOj9zdWJqZWN0PVNoYXJlZCBEb2N1bWVudCZib2R5PSR7ZW5jb2RlZFVybH1cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLW91dGxpbmUtcHJpbWFyeVwiPvCfk6cgRW1haWw8L2E+XG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHlCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChcIiR7ZXNjYXBlZFVybH1cIilcbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGFsZXJ0KCdDb3BpZWQgdG8gY2xpcGJvYXJkIScpKVxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBhbGVydCgnRmFpbGVkIHRvIGNvcHk6ICcgKyBlcnIpKTtcbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2JvZHk+XG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaHRtbD4gICAgXG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGApO1xuXG4gICAgICAgICAgICAvLyAgICAgc2hhcmVXaW5kb3cuZG9jdW1lbnQud3JpdGUoYFxuICAgICAgICAgICAgLy8gICAgICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgICAgICAgIC8vICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICA8aGVhZD5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8dGl0bGU+U2hhcmUgRG9jdW1lbnQ8L3RpdGxlPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgcGFkZGluZzogMTBweDsgfVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAuYnRuIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBtYXJnaW4tdG9wOiA1cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDVweDsgfVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtc3VjY2VzcyB7IGNvbG9yOiBncmVlbjsgYm9yZGVyOiAxcHggc29saWQgZ3JlZW47IH1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLmJ0bi1vdXRsaW5lLXByaW1hcnkgeyBjb2xvcjogYmx1ZTsgYm9yZGVyOiAxcHggc29saWQgYmx1ZTsgfVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAuYnRuLW91dGxpbmUtc2Vjb25kYXJ5IHsgY29sb3I6IGdyZXk7IGJvcmRlcjogMXB4IHNvbGlkIGdyZXk7IH1cbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgPC9oZWFkPlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgPGJvZHk+XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgJHtzaGFyZU9wdGlvbnN9XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICA8L2JvZHk+XG4gICAgICAgICAgICAvLyAgICAgICAgIDwvaHRtbD5gKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGNhcmQgdG8gdGhlIHBhZ2VcbiAgICAgICAgZG9jdW1lbnRzTGlzdERpdi5hcHBlbmRDaGlsZChkb2N1bWVudENhcmQpO1xuICAgICAgICAvLyBkb2N1bWVudHNMaXN0RGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJykpO1xuXG4gICAgfSk7XG4gICAgXG59XG5cbmRpc3BsYXlEb2N1bWVudHMoKTsiXSwibmFtZXMiOlsiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfX3ZhbHVlcyIsIm8iLCJzIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJtIiwiaSIsImxlbmd0aCIsIm5leHQiLCJ2YWx1ZSIsImRvbmUiLCJUeXBlRXJyb3IiLCJrIiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwid2luZG93IiwiZyIsInNlbGYiLCJnb29nIiwibCIsImFhIiwiYmEiLCJhIiwiaXNBcnJheSIsImVhIiwiTWF0aCIsInJhbmRvbSIsImZhIiwiaGEiLCJjIiwiYXBwbHkiLCJiaW5kIiwiYXJndW1lbnRzIiwiaWEiLCJFcnJvciIsInNsaWNlIiwiZSIsInVuc2hpZnQiLCJxIiwiRnVuY3Rpb24iLCJ0b1N0cmluZyIsImluZGV4T2YiLCJqYSIsInB1c2giLCJ0aGlzIiwidCIsIloiLCJjb25zdHJ1Y3RvciIsIlZiIiwiZiIsImgiLCJuIiwidiIsImxhIiwibmEiLCJNIiwiZGEiLCJzaGlmdCIsIm1hIiwiZm9yRWFjaCIsInNwbGl0IiwicWEiLCJjb25jYXQiLCJyYSIsInNhIiwidGVzdCIsIngiLCJ0YSIsIlN0cmluZyIsInRyaW0iLCJleGVjIiwidyIsInVhIiwidmEiLCJuYXZpZ2F0b3IiLCJ3YSIsInVzZXJBZ2VudCIsInhhIiwieWEiLCJ6YSIsIkFhIiwiQ2EiLCJOYSIsIkhhIiwieSIsIklhIiwiSmEiLCJLYSIsInRvTG93ZXJDYXNlIiwiTGEiLCJNYSIsImRvY3VtZW50IiwiZG9jdW1lbnRNb2RlIiwiT2EiLCJQYSIsIlFhIiwicGFyc2VGbG9hdCIsIlNhIiwiR2EiLCJSYSIsIm1heCIsInBhcnNlSW50IiwiVWEiLCJWYSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ6IiwidHlwZSIsInRhcmdldCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJBIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJrZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiV2EiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiQiIsIlhhIiwiWWEiLCJsaXN0ZW5lciIsInByb3h5Iiwic3JjIiwiY2FwdHVyZSIsImNhIiwiWmEiLCIkYSIsImJiIiwic3BsaWNlIiwiYWIiLCJhZGQiLCJjYiIsImRiIiwiZmIiLCJvbmNlIiwiZ2IiLCJoYiIsIk4iLCJpYiIsImpiIiwibWIiLCJrYiIsImF0dGFjaEV2ZW50IiwibGIiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiTyIsIm5iIiwib2IiLCJkZXRhY2hFdmVudCIsInBiIiwiaGFuZGxlRXZlbnQiLCJDIiwiUCIsIkkiLCJEIiwicWIiLCJ1IiwicmIiLCJKU09OIiwic3RyaW5naWZ5Iiwic2IiLCJ0YiIsIkFiIiwidWIiLCJ2YiIsInNldCIsImNsYXNzXzIiLCJqIiwid2IiLCJyZXNldCIsInliIiwic2V0VGltZW91dCIsInpiIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiRGIiLCJCYiIsIkNiIiwiRWIiLCJEYXRlIiwibm93IiwiRmIiLCJTIiwiY2xlYXJUaW1lb3V0IiwiR2IiLCJOdW1iZXIiLCJIYiIsInN0YXJ0IiwiSWIiLCJfc3VwZXIiLCJfdGhpcyIsIl9fIiwiY3JlYXRlIiwiX19leHRlbmRzIiwiRSIsIkpiIiwiS2IiLCJMYiIsIk1iIiwiRiIsImluZm8iLCJwYXJzZSIsIlBiIiwiSCIsIlJiIiwiU2IiLCJUYiIsIlViIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJKIiwic2l6ZSIsIksiLCJXYiIsIk5PX0VSUk9SIiwieGIiLCJUSU1FT1VUIiwiWGIiLCJZYiIsIlpiIiwiJGIiLCJjYyIsIkwiLCJPUEVOIiwiYWMiLCJiYyIsImRjIiwiWCIsIlYiLCJlYyIsIlciLCJZIiwiJCIsIlUiLCJmYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZ2MiLCJoYyIsImljIiwiamMiLCJrYyIsImxjIiwibWMiLCJuYyIsInIiLCJHIiwiTmIiLCJxYyIsIkJhIiwidGMiLCJ2YyIsInNjIiwid2MiLCJyYyIsInN1YnN0cmluZyIsImlzTmFOIiwic3Vic3RyIiwieGMiLCJlYiIsInBjIiwidWMiLCJhYm9ydCIsInljIiwiemMiLCJBYyIsIkJjIiwiQ2MiLCJrYSIsIlEiLCJEYSIsIkVhIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJTZXQiLCJEYyIsIlIiLCJvYSIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiSWMiLCJLYyIsIlQiLCJKYyIsIkxjIiwiZ2EiLCJvYyIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwic3RyZWFtIiwiT2IiLCJjYW5jZWwiLCJRYiIsIk1jIiwiT2MiLCJQYyIsIlFjIiwiUmMiLCJTYyIsIm1hdGNoIiwiVGMiLCJyZXBsYWNlIiwiZGQiLCJaYyIsIlVjIiwiJGMiLCJmbG9vciIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsImNkIiwiY2hhckNvZGVBdCIsIlZjIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2hhckF0IiwiV2MiLCJYYyIsIlljIiwiam9pbiIsIk5jIiwiZWQiLCJmZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJpZCIsImhhcyIsImRlbGV0ZSIsImpkIiwiZV8yIiwiX2EiLCJfYiIsInZhbHVlcyIsIl9jIiwiZV8yXzEiLCJlcnJvciIsInJldHVybiIsImtkIiwibGQiLCJtZCIsIm9kIiwib25sb2FkIiwib25lcnJvciIsIm9uYWJvcnQiLCJvbnRpbWVvdXQiLCJwZCIsInFkIiwicmVhZHlTdGF0ZSIsInJkIiwic3RhdHVzIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiSGVhZGVycyIsImVfMSIsImVfMV8xIiwiY2xlYXIiLCJ1ZCIsInJlYWQiLCJjYXRjaCIsInRkIiwic2QiLCJvcGVuIiwic2VuZCIsImhlYWRlcnMiLCJtZXRob2QiLCJjcmVkZW50aWFscyIsImNhY2hlIiwiYm9keSIsImZldGNoIiwiUmVxdWVzdCIsImFycmF5QnVmZmVyIiwiVGEiLCJSZWFkYWJsZVN0cmVhbSIsImdldFJlYWRlciIsInRleHQiLCJVaW50OEFycmF5Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsImVudHJpZXMiLCJ2ZCIsIndkIiwieGQiLCJ5ZCIsInBhIiwiemQiLCJDZCIsIkRkIiwiRWQiLCJGYSIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJBZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJHZCIsIkZkIiwiSGQiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJJZCIsInhtbEh0dHBGYWN0b3J5Iiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiZm9yY2VMb25nUG9sbGluZyIsImRldGVjdEJ1ZmZlcmluZ1Byb3h5IiwiSmQiLCJLZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkxkIiwiTWQiLCJRZCIsIlBkIiwicm91bmQiLCJtaW4iLCJPZCIsIlJkIiwiTmQiLCJkXzEiLCJuZCIsImFkIiwiYmQiLCJob3N0bmFtZSIsInBvcnQiLCJTZCIsIlRkIiwibWVzc2FnZVVybFBhcmFtcyIsIm1lc3NhZ2VIZWFkZXJzIiwiY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCIsImluaXRNZXNzYWdlSGVhZGVycyIsIm1lc3NhZ2VDb250ZW50VHlwZSIsImh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0iLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlVkIiwiX19zbV9fIiwiZGF0YSIsIlZkIiwidG9VcHBlckNhc2UiLCJGb3JtRGF0YSIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJCZCIsIl9fZGF0YV9fIiwiY2xvc2UiLCJjcmVhdGVXZWJDaGFubmVsIiwiSFRUUF9FUlJPUiIsIkNPTVBMRVRFIiwiRXZlbnRUeXBlIiwiQ0xPU0UiLCJFUlJPUiIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsImNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQiLCJnZXRTdGF0RXZlbnRUYXJnZXQiLCJFcnJvckNvZGUiLCJFdmVudCIsIlN0YXQiLCJQUk9YWSIsIk5PUFJPWFkiLCJGZXRjaFhtbEh0dHBGYWN0b3J5IiwiV2ViQ2hhbm5lbCIsIlhocklvIiwiQ29tcG9uZW50IiwibmFtZSIsImluc3RhbmNlRmFjdG9yeSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsImNhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJkZWZlcnJlZCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsInByb21pc2UiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwib3B0aW9uYWwiLCJnZXRDb21wb25lbnQiLCJzZXRDb21wb25lbnQiLCJpc0NvbXBvbmVudEVhZ2VyIiwiX2QiLCJpbnN0YW5jZURlZmVycmVkIiwiY2xlYXJJbnN0YW5jZSIsInNlcnZpY2VzIiwibGFiZWwiLCJmcm9tIiwiYWxsIiwiZmlsdGVyIiwic2VydmljZSIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsInNlbnQiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib3B0cyIsIl9lIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiZV8zIiwiY2FsbGJhY2tzIiwiY2FsbGJhY2tzXzEiLCJjYWxsYmFja3NfMV8xIiwiZV8zXzEiLCJ1bmRlZmluZWQiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkiLCJsb2dDbGllbnQiLCJfbG9nRXJyb3IiLCJtc2ciLCJhcmdzIiwibG9nTGV2ZWwiLCJfZmFpbCIsImF1dGhPckNvZGUiLCJyZXN0IiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsImNvZGUiLCJmdWxsUGFyYW1zIiwiYXBwTmFtZSIsIl9lcnJvckZhY3RvcnkiLCJfYXNzZXJ0IiwiYXNzZXJ0aW9uIiwiZGVidWdGYWlsIiwiZmFpbHVyZSIsIm1lc3NhZ2UiLCJkZWJ1Z0Fzc2VydCIsImluc3RhbmNlQ2FjaGUiLCJfZ2V0SW5zdGFuY2UiLCJjbHMiLCJfZ2V0Q3VycmVudFVybCIsImhyZWYiLCJfZ2V0Q3VycmVudFNjaGVtZSIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiX2VtdWxhdG9yVXJsIiwiY29uZmlnIiwicGF0aCIsImVtdWxhdG9yIiwidXJsIiwic3RhcnRzV2l0aCIsIkZldGNoUHJvdmlkZXIiLCJmZXRjaEltcGwiLCJoZWFkZXJzSW1wbCIsInJlc3BvbnNlSW1wbCIsIlJlc3BvbnNlIiwiU0VSVkVSX0VSUk9SX01BUCIsIkRFRkFVTFRfQVBJX1RJTUVPVVRfTVMiLCJfYWRkVGlkSWZOZWNlc3NhcnkiLCJhdXRoIiwicmVxdWVzdCIsInRlbmFudElkIiwiYXNzaWduIiwiYXN5bmMiLCJfcGVyZm9ybUFwaVJlcXVlc3QiLCJjdXN0b21FcnJvck1hcCIsIl9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyIsInBhcmFtcyIsInF1ZXJ5IiwiYXBpS2V5IiwiX2dldFNka0NsaWVudFZlcnNpb24iLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsImVycm9yTWFwIiwibmV0d29ya1RpbWVvdXQiLCJOZXR3b3JrVGltZW91dCIsInJhY2UiLCJjbGVhck5ldHdvcmtUaW1lb3V0IiwianNvbiIsIl9tYWtlVGFnZ2VkRXJyb3IiLCJvayIsInNlcnZlckVycm9yQ29kZSIsImVycm9yTWVzc2FnZSIsIl9wZXJmb3JtU2lnbkluUmVxdWVzdCIsInNlcnZlclJlc3BvbnNlIiwiaG9zdCIsImJhc2UiLCJhcGlTY2hlbWUiLCJ0aW1lciIsIl8iLCJyZWplY3QiLCJlcnJvclBhcmFtcyIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJjdXN0b21EYXRhIiwiX3Rva2VuUmVzcG9uc2UiLCJ1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmciLCJ1dGNUaW1lc3RhbXAiLCJkYXRlIiwiZ2V0VGltZSIsInRvVVRDU3RyaW5nIiwic2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzIiwic2Vjb25kcyIsIl9wYXJzZVRva2VuIiwidG9rZW4iLCJhbGdvcml0aG0iLCJwYXlsb2FkIiwic2lnbmF0dXJlIiwiZGVjb2RlZCIsIl9sb2dvdXRJZkludmFsaWRhdGVkIiwidXNlciIsImJ5cGFzc0F1dGhTdGF0ZSIsImlzVXNlckludmFsaWRhdGVkIiwiY3VycmVudFVzZXIiLCJzaWduT3V0IiwiUHJvYWN0aXZlUmVmcmVzaCIsImlzUnVubmluZyIsInRpbWVySWQiLCJlcnJvckJhY2tvZmYiLCJfc3RhcnQiLCJzY2hlZHVsZSIsIl9zdG9wIiwiZ2V0SW50ZXJ2YWwiLCJ3YXNFcnJvciIsImludGVydmFsIiwic3RzVG9rZW5NYW5hZ2VyIiwiZXhwaXJhdGlvblRpbWUiLCJpdGVyYXRpb24iLCJnZXRJZFRva2VuIiwiVXNlck1ldGFkYXRhIiwiY3JlYXRlZEF0IiwibGFzdExvZ2luQXQiLCJfaW5pdGlhbGl6ZVRpbWUiLCJsYXN0U2lnbkluVGltZSIsImNyZWF0aW9uVGltZSIsIl9jb3B5IiwibWV0YWRhdGEiLCJ0b0pTT04iLCJfcmVsb2FkV2l0aG91dFNhdmluZyIsImlkVG9rZW4iLCJnZXRBY2NvdW50SW5mbyIsInVzZXJzIiwiY29yZUFjY291bnQiLCJfbm90aWZ5UmVsb2FkTGlzdGVuZXIiLCJuZXdQcm92aWRlckRhdGEiLCJwcm92aWRlclVzZXJJbmZvIiwicHJvdmlkZXJJZCIsInVpZCIsInJhd0lkIiwiZGlzcGxheU5hbWUiLCJwaG90b1VSTCIsInBob3RvVXJsIiwicHJvdmlkZXJEYXRhIiwib3JpZ2luYWwiLCJuZXdEYXRhIiwic29tZSIsIm9sZElzQW5vbnltb3VzIiwiaXNBbm9ueW1vdXMiLCJuZXdJc0Fub255bW91cyIsInBhc3N3b3JkSGFzaCIsInVwZGF0ZXMiLCJsb2NhbElkIiwiZW1haWxWZXJpZmllZCIsIlN0c1Rva2VuTWFuYWdlciIsInJlZnJlc2hUb2tlbiIsImFjY2Vzc1Rva2VuIiwiaXNFeHBpcmVkIiwidXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlIiwiZXhwaXJlc0luIiwicGFyc2VkVG9rZW4iLCJleHAiLCJpYXQiLCJfdG9rZW5FeHBpcmVzSW4iLCJ1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uIiwiZ2V0VG9rZW4iLCJmb3JjZVJlZnJlc2giLCJyZWZyZXNoIiwiY2xlYXJSZWZyZXNoVG9rZW4iLCJvbGRUb2tlbiIsInRva2VuQXBpSG9zdCIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJyZWZyZXNoX3Rva2VuIiwicmVxdWVzdFN0c1Rva2VuIiwiZXhwaXJlc0luU2VjIiwiZnJvbUpTT04iLCJvYmplY3QiLCJtYW5hZ2VyIiwiX2Fzc2lnbiIsIl9jbG9uZSIsIl9wZXJmb3JtUmVmcmVzaCIsImFzc2VydFN0cmluZ09yVW5kZWZpbmVkIiwiVXNlckltcGwiLCJvcHQiLCJwcm9hY3RpdmVSZWZyZXNoIiwicmVsb2FkVXNlckluZm8iLCJyZWxvYWRMaXN0ZW5lciIsIl9wZXJzaXN0VXNlcklmQ3VycmVudCIsIl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQiLCJnZXRJZFRva2VuUmVzdWx0IiwidXNlckludGVybmFsIiwiY2xhaW1zIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduSW5Qcm92aWRlciIsImF1dGhUaW1lIiwiaXNzdWVkQXRUaW1lIiwic2lnbkluU2Vjb25kRmFjdG9yIiwicmVsb2FkIiwidXNlckluZm8iLCJfb25SZWxvYWQiLCJfc3RhcnRQcm9hY3RpdmVSZWZyZXNoIiwiX3N0b3BQcm9hY3RpdmVSZWZyZXNoIiwiX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5IiwidG9rZW5zUmVmcmVzaGVkIiwiZGVsZXRlQWNjb3VudCIsIl9yZWRpcmVjdEV2ZW50SWQiLCJfZnJvbUpTT04iLCJfZiIsIl9nIiwiX2giLCJwbGFpbk9iamVjdFRva2VuTWFuYWdlciIsIl9mcm9tSWRUb2tlblJlc3BvbnNlIiwiaWRUb2tlblJlc3BvbnNlIiwiSW5NZW1vcnlQZXJzaXN0ZW5jZSIsInN0b3JhZ2UiLCJfaXNBdmFpbGFibGUiLCJfc2V0IiwiX2dldCIsIl9yZW1vdmUiLCJfYWRkTGlzdGVuZXIiLCJfa2V5IiwiX2xpc3RlbmVyIiwiX3JlbW92ZUxpc3RlbmVyIiwiaW5NZW1vcnlQZXJzaXN0ZW5jZSIsIl9wZXJzaXN0ZW5jZUtleU5hbWUiLCJQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIiwicGVyc2lzdGVuY2UiLCJ1c2VyS2V5IiwiZnVsbFVzZXJLZXkiLCJmdWxsUGVyc2lzdGVuY2VLZXkiLCJib3VuZEV2ZW50SGFuZGxlciIsIl9vblN0b3JhZ2VFdmVudCIsInNldEN1cnJlbnRVc2VyIiwiZ2V0Q3VycmVudFVzZXIiLCJibG9iIiwicmVtb3ZlQ3VycmVudFVzZXIiLCJzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCIsInNldFBlcnNpc3RlbmNlIiwibmV3UGVyc2lzdGVuY2UiLCJwZXJzaXN0ZW5jZUhpZXJhcmNoeSIsImF2YWlsYWJsZVBlcnNpc3RlbmNlcyIsInNlbGVjdGVkUGVyc2lzdGVuY2UiLCJ1c2VyVG9NaWdyYXRlIiwibWlncmF0aW9uSGllcmFyY2h5IiwiX3Nob3VsZEFsbG93TWlncmF0aW9uIiwiX2dldEJyb3dzZXJOYW1lIiwiaW5jbHVkZXMiLCJfaXNJRU1vYmlsZSIsIl9pc0ZpcmVmb3giLCJfaXNCbGFja0JlcnJ5IiwiX2lzV2ViT1MiLCJfaXNTYWZhcmkiLCJfaXNDaHJvbWVJT1MiLCJfaXNBbmRyb2lkIiwicmUiLCJtYXRjaGVzIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsInJlcG9ydGVkRnJhbWV3b3JrcyIsIkF1dGhJbXBsIiwiYXBwIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsInJlZGlyZWN0VXNlciIsImlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQiLCJfaXNJbml0aWFsaXplZCIsIl9kZWxldGVkIiwiX2luaXRpYWxpemF0aW9uUHJvbWlzZSIsIl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJsYXN0Tm90aWZpZWRVaWQiLCJzZXR0aW5ncyIsImFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZyIsImNsaWVudFZlcnNpb24iLCJzZGtDbGllbnRWZXJzaW9uIiwiX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UiLCJwb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJxdWV1ZSIsInBlcnNpc3RlbmNlTWFuYWdlciIsIl9zaG91bGRJbml0UHJvYWN0aXZlbHkiLCJfaW5pdGlhbGl6ZSIsImluaXRpYWxpemVDdXJyZW50VXNlciIsImFzc2VydGVkUGVyc2lzdGVuY2UiLCJfY3VycmVudFVzZXIiLCJfdXBkYXRlQ3VycmVudFVzZXIiLCJzdG9yZWRVc2VyIiwiYXV0aERvbWFpbiIsImdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwicmVkaXJlY3RVc2VyRXZlbnRJZCIsInN0b3JlZFVzZXJFdmVudElkIiwicmVzdWx0IiwidHJ5UmVkaXJlY3RTaWduSW4iLCJkaXJlY3RseVNldEN1cnJlbnRVc2VyIiwicmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyIiwicmVkaXJlY3RSZXNvbHZlciIsIl9jb21wbGV0ZVJlZGlyZWN0Rm4iLCJfc2V0UmVkaXJlY3RVc2VyIiwidXNlRGV2aWNlTGFuZ3VhZ2UiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVwZGF0ZUN1cnJlbnRVc2VyIiwidXNlckV4dGVybiIsIm5vdGlmeUF1dGhMaXN0ZW5lcnMiLCJyZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciIsIl9nZXRQZXJzaXN0ZW5jZSIsIl91cGRhdGVFcnJvck1hcCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsIm5leHRPck9ic2VydmVyIiwiY29tcGxldGVkIiwicmVnaXN0ZXJTdGF0ZUxpc3RlbmVyIiwib25JZFRva2VuQ2hhbmdlZCIsInJlZGlyZWN0TWFuYWdlciIsInJlc29sdmVyIiwiX3JlZGlyZWN0UGVyc2lzdGVuY2UiLCJfcmVkaXJlY3RVc2VyRm9ySWQiLCJjdXJyZW50VWlkIiwic3Vic2NyaXB0aW9uIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJfbG9nRnJhbWV3b3JrIiwiZnJhbWV3b3JrIiwic29ydCIsIl9nZXRGcmFtZXdvcmtzIiwiX2Nhc3RBdXRoIiwib2JzZXJ2ZXIiLCJBdXRoQ3JlZGVudGlhbCIsInNpZ25Jbk1ldGhvZCIsIl9nZXRJZFRva2VuUmVzcG9uc2UiLCJfYXV0aCIsIl9saW5rVG9JZFRva2VuIiwiX2lkVG9rZW4iLCJfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyIiwiRW1haWxBdXRoQ3JlZGVudGlhbCIsIl9lbWFpbCIsIl9wYXNzd29yZCIsIl90ZW5hbnRJZCIsInN1cGVyIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwicGFzc3dvcmQiLCJfZnJvbUVtYWlsQW5kQ29kZSIsIm9vYkNvZGUiLCJvYmoiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJyZXR1cm5TZWN1cmVUb2tlbiIsInNpZ25JbldpdGhFbWFpbExpbmskMSIsInVwZGF0ZUVtYWlsUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyIsInNpZ25JbldpdGhJZHAiLCJPQXV0aENyZWRlbnRpYWwiLCJwZW5kaW5nVG9rZW4iLCJfZnJvbVBhcmFtcyIsImNyZWQiLCJub25jZSIsIm9hdXRoVG9rZW4iLCJvYXV0aFRva2VuU2VjcmV0Iiwic2VjcmV0IiwiYnVpbGRSZXF1ZXN0IiwiYXV0b0NyZWF0ZSIsInJlcXVlc3RVcmkiLCJwb3N0Qm9keSIsIlZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8iLCJQaG9uZUF1dGhDcmVkZW50aWFsIiwiX2Zyb21WZXJpZmljYXRpb24iLCJ2ZXJpZmljYXRpb25JZCIsInZlcmlmaWNhdGlvbkNvZGUiLCJfZnJvbVRva2VuUmVzcG9uc2UiLCJ0ZW1wb3JhcnlQcm9vZiIsInNpZ25JbldpdGhQaG9uZU51bWJlciQxIiwiX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0IiwibGlua1dpdGhQaG9uZU51bWJlciQxIiwib3BlcmF0aW9uIiwidmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyIsInNlc3Npb25JbmZvIiwiQWN0aW9uQ29kZVVSTCIsImFjdGlvbkxpbmsiLCJzZWFyY2hQYXJhbXMiLCJwYXJzZU1vZGUiLCJjb250aW51ZVVybCIsInBhcnNlTGluayIsImxpbmsiLCJkb3VibGVEZWVwTGluayIsImlPU0RlZXBMaW5rIiwicGFyc2VEZWVwTGluayIsIkVtYWlsQXV0aFByb3ZpZGVyIiwiUFJPVklERVJfSUQiLCJjcmVkZW50aWFsIiwiY3JlZGVudGlhbFdpdGhMaW5rIiwiZW1haWxMaW5rIiwiYWN0aW9uQ29kZVVybCIsIkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EIiwiRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCIsIkZlZGVyYXRlZEF1dGhQcm92aWRlciIsImRlZmF1bHRMYW5ndWFnZUNvZGUiLCJjdXN0b21QYXJhbWV0ZXJzIiwic2V0RGVmYXVsdExhbmd1YWdlIiwic2V0Q3VzdG9tUGFyYW1ldGVycyIsImN1c3RvbU9BdXRoUGFyYW1ldGVycyIsImdldEN1c3RvbVBhcmFtZXRlcnMiLCJCYXNlT0F1dGhQcm92aWRlciIsInNjb3BlcyIsImFkZFNjb3BlIiwic2NvcGUiLCJnZXRTY29wZXMiLCJGYWNlYm9va0F1dGhQcm92aWRlciIsIkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EIiwiY3JlZGVudGlhbEZyb21SZXN1bHQiLCJ1c2VyQ3JlZGVudGlhbCIsImNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0IiwiY3JlZGVudGlhbEZyb21FcnJvciIsInRva2VuUmVzcG9uc2UiLCJvYXV0aEFjY2Vzc1Rva2VuIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwiR09PR0xFX1NJR05fSU5fTUVUSE9EIiwib2F1dGhJZFRva2VuIiwiR2l0aHViQXV0aFByb3ZpZGVyIiwiR0lUSFVCX1NJR05fSU5fTUVUSE9EIiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwicHJvdmlkZXJJZEZvclJlc3BvbnNlIiwiX2Zvck9wZXJhdGlvbiIsIk11bHRpRmFjdG9yRXJyb3IiLCJfZnJvbUVycm9yQW5kT3BlcmF0aW9uIiwiX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IiwiV2Vha01hcCIsIlNUT1JBR0VfQVZBSUxBQkxFX0tFWSIsIkJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwiQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJsb2NhbFN0b3JhZ2UiLCJsaXN0ZW5lcnMiLCJsb2NhbENhY2hlIiwicG9sbFRpbWVyIiwic2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkIiwiX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlIiwidG9wIiwiX2lzSWZyYW1lIiwiZmFsbGJhY2tUb1BvbGxpbmciLCJvblN0b3JhZ2VFdmVudCIsImZvckFsbENoYW5nZWRLZXlzIiwia2V5cyIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJldmVudCIsInBvbGwiLCJfb2xkVmFsdWUiLCJub3RpZnlMaXN0ZW5lcnMiLCJkZXRhY2hMaXN0ZW5lciIsInN0b3BQb2xsaW5nIiwic3RvcmVkVmFsdWUiLCJ0cmlnZ2VyTGlzdGVuZXJzIiwic3RhcnRQb2xsaW5nIiwic2V0SW50ZXJ2YWwiLCJTdG9yYWdlRXZlbnQiLCJjbGVhckludGVydmFsIiwiYXR0YWNoTGlzdGVuZXIiLCJicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsIkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJzZXNzaW9uU3RvcmFnZSIsImJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJSZWNlaXZlciIsImV2ZW50VGFyZ2V0IiwiaGFuZGxlcnNNYXAiLCJyZWNlaXZlcnMiLCJmaW5kIiwicmVjZWl2ZXIiLCJpc0xpc3RlbmluZ3RvIiwibmV3SW5zdGFuY2UiLCJtZXNzYWdlRXZlbnQiLCJldmVudElkIiwiZXZlbnRUeXBlIiwiaGFuZGxlcnMiLCJwb3J0cyIsInBvc3RNZXNzYWdlIiwicHJvbWlzZXMiLCJoYW5kbGVyIiwib3JpZ2luIiwiZnVsZmlsbGVkIiwicmVhc29uIiwiX2FsbFNldHRsZWQiLCJfc3Vic2NyaWJlIiwiZXZlbnRIYW5kbGVyIiwiX3Vuc3Vic2NyaWJlIiwiX2dlbmVyYXRlRXZlbnRJZCIsInByZWZpeCIsImRpZ2l0cyIsIlNlbmRlciIsInJlbW92ZU1lc3NhZ2VIYW5kbGVyIiwibWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIm9uTWVzc2FnZSIsIl9zZW5kIiwiTWVzc2FnZUNoYW5uZWwiLCJjb21wbGV0aW9uVGltZXIiLCJhY2tUaW1lciIsInBvcnQyIiwiZmluYWxseSIsIl93aW5kb3ciLCJfaXNXb3JrZXIiLCJEQl9OQU1FIiwiREJfT0JKRUNUU1RPUkVfTkFNRSIsIkRCX0RBVEFfS0VZUEFUSCIsIkRCUHJvbWlzZSIsInRvUHJvbWlzZSIsImdldE9iamVjdFN0b3JlIiwiaXNSZWFkV3JpdGUiLCJ0cmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlIiwiX29wZW5EYXRhYmFzZSIsImluZGV4ZWREQiIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImRlbGV0ZURhdGFiYXNlIiwiX2RlbGV0ZURhdGFiYXNlIiwiX3B1dE9iamVjdCIsInB1dCIsIl9kZWxldGVPYmplY3QiLCJJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwicGVuZGluZ1dyaXRlcyIsInNlbmRlciIsInNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSIsImFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJfd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmciLCJfb3BlbkRiIiwiX3dpdGhSZXRyaWVzIiwib3AiLCJudW1BdHRlbXB0cyIsImluaXRpYWxpemVSZWNlaXZlciIsImluaXRpYWxpemVTZW5kZXIiLCJfb3JpZ2luIiwia2V5UHJvY2Vzc2VkIiwiX3BvbGwiLCJfZGF0YSIsInNlcnZpY2VXb3JrZXIiLCJyZWFkeSIsImFjdGl2ZSIsIl9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyIiwicmVzdWx0cyIsIm5vdGlmeVNlcnZpY2VXb3JrZXIiLCJjb250cm9sbGVyIiwiX3dpdGhQZW5kaW5nV3JpdGUiLCJ3cml0ZSIsImdldE9iamVjdCIsImdldEFsbFJlcXVlc3QiLCJnZXRBbGwiLCJrZXlzSW5SZXN1bHQiLCJmYmFzZV9rZXkiLCJsb2NhbEtleSIsImluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJfZ2VuZXJhdGVDYWxsYmFja05hbWUiLCJQaG9uZUF1dGhQcm92aWRlciIsInZlcmlmeVBob25lTnVtYmVyIiwicGhvbmVPcHRpb25zIiwiYXBwbGljYXRpb25WZXJpZmllciIsInZlcmlmaWVyIiwicmVjYXB0Y2hhVG9rZW4iLCJ2ZXJpZnkiLCJwaG9uZUluZm9PcHRpb25zIiwic2Vzc2lvbiIsInN0YXJ0RW5yb2xsUGhvbmVNZmEiLCJwaG9uZUVucm9sbG1lbnRJbmZvIiwicGhvbmVTZXNzaW9uSW5mbyIsIm1mYUVucm9sbG1lbnRJZCIsIm11bHRpRmFjdG9ySGludCIsIm11bHRpRmFjdG9yVWlkIiwic3RhcnRTaWduSW5QaG9uZU1mYSIsIm1mYVBlbmRpbmdDcmVkZW50aWFsIiwicGhvbmVTaWduSW5JbmZvIiwicGhvbmVSZXNwb25zZUluZm8iLCJzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlIiwiX3Jlc2V0IiwiX3ZlcmlmeVBob25lTnVtYmVyIiwiUEhPTkVfU0lHTl9JTl9NRVRIT0QiLCJJZHBDcmVkZW50aWFsIiwiX2J1aWxkSWRwUmVxdWVzdCIsInNlc3Npb25JZCIsInJldHVybklkcENyZWRlbnRpYWwiLCJfc2lnbkluIiwiX3NpZ25JbldpdGhDcmVkZW50aWFsIiwiX3JlYXV0aCIsInBhcnNlZCIsInN1YiIsIl9yZWF1dGhlbnRpY2F0ZSIsIl9saW5rIiwiX2xpbmskMSIsIkFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiIsInBlbmRpbmdQcm9taXNlIiwiZXZlbnRNYW5hZ2VyIiwiZXhlY3V0ZSIsIm9uRXhlY3V0aW9uIiwicmVnaXN0ZXJDb25zdW1lciIsIm9uQXV0aEV2ZW50IiwidXJsUmVzcG9uc2UiLCJnZXRJZHBUYXNrIiwib25FcnJvciIsInVucmVnaXN0ZXJBbmRDbGVhblVwIiwidW5yZWdpc3RlckNvbnN1bWVyIiwiY2xlYW5VcCIsIl9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VUIiwiUG9wdXBPcGVyYXRpb24iLCJhdXRoV2luZG93IiwicG9sbElkIiwiY3VycmVudFBvcHVwQWN0aW9uIiwiZXhlY3V0ZU5vdE51bGwiLCJfb3BlblBvcHVwIiwiYXNzb2NpYXRlZEV2ZW50IiwiX29yaWdpblZhbGlkYXRpb24iLCJfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkIiwiaXNTdXBwb3J0ZWQiLCJwb2xsVXNlckNhbmNlbGxhdGlvbiIsImNsb3NlZCIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwicGVuZGluZ1JlZGlyZWN0S2V5IiwiaGFzUGVuZGluZ1JlZGlyZWN0IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIl9nZXRSZWRpcmVjdFJlc3VsdCIsInJlc29sdmVyRXh0ZXJuIiwiYXV0aEludGVybmFsIiwicmVzb2x2ZXJPdmVycmlkZSIsIl93aXRoRGVmYXVsdFJlc29sdmVyIiwiQXV0aEV2ZW50TWFuYWdlciIsImNhY2hlZEV2ZW50VWlkcyIsImNvbnN1bWVycyIsInF1ZXVlZFJlZGlyZWN0RXZlbnQiLCJoYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QiLCJsYXN0UHJvY2Vzc2VkRXZlbnRUaW1lIiwiYXV0aEV2ZW50Q29uc3VtZXIiLCJpc0V2ZW50Rm9yQ29uc3VtZXIiLCJzZW5kVG9Db25zdW1lciIsInNhdmVFdmVudFRvQ2FjaGUiLCJvbkV2ZW50IiwiaGFzRXZlbnRCZWVuSGFuZGxlZCIsImhhbmRsZWQiLCJjb25zdW1lciIsImlzTnVsbFJlZGlyZWN0RXZlbnQiLCJpc1JlZGlyZWN0RXZlbnQiLCJldmVudElkTWF0Y2hlcyIsImV2ZW50VWlkIiwiSVBfQUREUkVTU19SRUdFWCIsIkhUVFBfUkVHRVgiLCJtYXRjaERvbWFpbiIsImV4cGVjdGVkIiwiY3VycmVudFVybCIsIlVSTCIsImNlVXJsIiwiZXNjYXBlZERvbWFpblBhdHRlcm4iLCJSZWdFeHAiLCJORVRXT1JLX1RJTUVPVVQiLCJyZXNldFVubG9hZGVkR2FwaU1vZHVsZXMiLCJiZWFjb24iLCJfX19qc2wiLCJoaW50IiwiQ1AiLCJjYWNoZWRHQXBpTG9hZGVyIiwiX2xvYWRHYXBpIiwibG9hZEdhcGlJZnJhbWUiLCJnYXBpIiwibG9hZCIsImlmcmFtZXMiLCJnZXRDb250ZXh0IiwiSWZyYW1lIiwiY2JOYW1lIiwiZWwiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY2hhcnNldCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCJsb2FkR2FwaSIsIlBJTkdfVElNRU9VVCIsIklGUkFNRV9BVFRSSUJVVEVTIiwic3R5bGUiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiRUlEX0ZST01fQVBJSE9TVCIsImdldElmcmFtZVVybCIsImVpZCIsImZ3IiwiQkFTRV9QT1BVUF9PUFRJT05TIiwicmVzaXphYmxlIiwic3RhdHVzYmFyIiwidG9vbGJhciIsIkF1dGhQb3B1cCIsIl9nZXRSZWRpcmVjdFVybCIsImF1dGhUeXBlIiwicmVkaXJlY3RVcmwiLCJhZGRpdGlvbmFsUGFyYW1zIiwidGlkIiwicGFyYW1zRGljdCIsImdldEhhbmRsZXJCYXNlIiwiV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkiLCJicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIiwiZXZlbnRNYW5hZ2VycyIsIm9yaWdpblZhbGlkYXRpb25Qcm9taXNlcyIsInNjcmVlbiIsImF2YWlsSGVpZ2h0IiwibGVmdCIsImF2YWlsV2lkdGgiLCJzY3JvbGxiYXJzIiwib3B0aW9uc1N0cmluZyIsInJlZHVjZSIsImFjY3VtIiwic3RhbmRhbG9uZSIsIl9pc0lPU1N0YW5kYWxvbmUiLCJjbGljayIsImNyZWF0ZUV2ZW50IiwiaW5pdE1vdXNlRXZlbnQiLCJkaXNwYXRjaEV2ZW50Iiwib3BlbkFzTmV3V2luZG93SU9TIiwibmV3V2luIiwiZm9jdXMiLCJfb3BlbiIsIl9vcGVuUmVkaXJlY3QiLCJpbml0QW5kR2V0TWFuYWdlciIsImlmcmFtZSIsImNvbnRleHQiLCJ3aGVyZSIsIm1lc3NhZ2VIYW5kbGVyc0ZpbHRlciIsIkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUiIsImF0dHJpYnV0ZXMiLCJkb250Y2xlYXIiLCJyZXN0eWxlIiwic2V0SGlkZU9uTGVhdmUiLCJuZXR3b3JrRXJyb3IiLCJuZXR3b3JrRXJyb3JUaW1lciIsImNsZWFyVGltZXJBbmRSZXNvbHZlIiwicGluZyIsIl9vcGVuSWZyYW1lIiwicmVnaXN0ZXIiLCJpZnJhbWVFdmVudCIsImF1dGhFdmVudCIsImF1dGhvcml6ZWREb21haW5zIiwiX2dldFByb2plY3RDb25maWciLCJkb21haW4iLCJfdmFsaWRhdGVPcmlnaW4iLCJBdXRoSW50ZXJvcCIsImludGVybmFsTGlzdGVuZXJzIiwiZ2V0VWlkIiwiYXNzZXJ0QXV0aENvbmZpZ3VyZWQiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsInVuc3Vic2NyaWJlIiwidXBkYXRlUHJvYWN0aXZlUmVmcmVzaCIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwiZ2V0QXV0aCIsImRlcHMiLCJpbml0aWFsT3B0aW9ucyIsImluaXRpYWxpemVBdXRoIiwiYXV0aEluc3RhbmNlIiwiaGllcmFyY2h5IiwiX2luaXRpYWxpemVBdXRoSW5zdGFuY2UiLCJfaW5zdGFuY2VJZGVudGlmaWVyIiwiX2luc3RhbmNlIiwiZ2V0VmVyc2lvbkZvclBsYXRmb3JtIiwiZG9jU3RyaW5nIiwiZG9jIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJkb2N1bWVudE5hbWUiLCJmaWxlVXJsIiwic2VsZWN0RWxlbWVudCIsImVkaXREb2N1bWVudFBhZ2VGb3JtIiwiZG9jdW1lbnRUeXBlIiwic2VsZWN0ZWRJbmRleCIsImFsZXJ0IiwiZWRpdERvY3VtZW50UGFnZU5hbWVPZkRvY3VtZW50IiwiZWRpdERvY3VtZW50UGFnZVR5cGVPZkRvY3VtZW50T3B0aW9ucyIsImVkaXREb2N1bWVudFBhZ2VUeXBlT2ZEb2N1bWVudFNlbGVjdGVkIiwib2xkRG9jIiwibmV3RmlsZVVSTCIsImVkaXREb2N1bWVudFBhZ2VGaWxlSW5wdXQiLCJlZGl0RG9jdW1lbnRQYWdlRmlsZVVwbG9hZGVkIiwiZmlsZXMiLCJuZXdTdG9yYWdlUmVmIiwiZG9jUmVmIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsImZpbGVTaXplIiwidXBkYXRlZEF0IiwiZWRpdERvY3VtZW50IiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwiREVGQVVMVF9IT1NUIiwiQ09ORklHX1NUT1JBR0VfQlVDS0VUX0tFWSIsIlN0b3JhZ2VFcnJvciIsInByZXBlbmRDb2RlIiwiX2Jhc2VNZXNzYWdlIiwiX2NvZGVFcXVhbHMiLCJ1bmtub3duIiwiaW52YWxpZEFyZ3VtZW50IiwiYXBwRGVsZXRlZCIsImludmFsaWRGb3JtYXQiLCJmb3JtYXQiLCJpbnRlcm5hbEVycm9yIiwiWGhyQ29ubmVjdGlvbiIsInNlbnRfIiwieGhyXyIsImVycm9yQ29kZV8iLCJzZW5kUHJvbWlzZV8iLCJBQk9SVCIsIk5FVFdPUktfRVJST1IiLCJnZXRFcnJvckNvZGUiLCJoZWFkZXIiLCJhZGRVcGxvYWRQcm9ncmVzc0xpc3RlbmVyIiwidXBsb2FkIiwicmVtb3ZlVXBsb2FkUHJvZ3Jlc3NMaXN0ZW5lciIsIkNvbm5lY3Rpb25Qb29sIiwiY3JlYXRlQ29ubmVjdGlvbiIsIkxvY2F0aW9uIiwiYnVja2V0IiwicGF0aF8iLCJpc1Jvb3QiLCJmdWxsU2VydmVyVXJsIiwiZW5jb2RlIiwiYnVja2V0T25seVNlcnZlclVybCIsIm1ha2VGcm9tQnVja2V0U3BlYyIsImJ1Y2tldFN0cmluZyIsImJ1Y2tldExvY2F0aW9uIiwibWFrZUZyb21VcmwiLCJidWNrZXREb21haW4iLCJnc1JlZ2V4IiwiaHR0cE1vZGlmeSIsImxvYyIsImZpcmViYXNlU3RvcmFnZUhvc3QiLCJncm91cHMiLCJyZWdleCIsImluZGljZXMiLCJwb3N0TW9kaWZ5IiwiZ3JvdXAiLCJjYXB0dXJlcyIsImJ1Y2tldFZhbHVlIiwicGF0aFZhbHVlIiwiaW52YWxpZFVybCIsIkZhaWxSZXF1ZXN0IiwicHJvbWlzZV8iLCJnZXRQcm9taXNlIiwiX2FwcERlbGV0ZSIsImlzU3RyaW5nIiwiaXNOYXRpdmVCbG9iIiwiaXNOYXRpdmVCbG9iRGVmaW5lZCIsIkJsb2IiLCJ2YWxpZGF0ZU51bWJlciIsImFyZ3VtZW50IiwibWluVmFsdWUiLCJtYXhWYWx1ZSIsIm1ha2VVcmwiLCJ1cmxQYXJ0IiwicHJvdG9jb2xNYXRjaCIsIm1ha2VRdWVyeVN0cmluZyIsInF1ZXJ5UGFydCIsIk5ldHdvcmtSZXF1ZXN0Iiwic3VjY2Vzc0NvZGVzIiwiYWRkaXRpb25hbFJldHJ5Q29kZXMiLCJlcnJvckNhbGxiYWNrIiwicHJvZ3Jlc3NDYWxsYmFjayIsInBvb2wiLCJwZW5kaW5nQ29ubmVjdGlvbl8iLCJiYWNrb2ZmSWRfIiwiY2FuY2VsZWRfIiwiYXBwRGVsZXRlXyIsInVybF8iLCJtZXRob2RfIiwiaGVhZGVyc18iLCJib2R5XyIsInN1Y2Nlc3NDb2Rlc18iLCJhZGRpdGlvbmFsUmV0cnlDb2Rlc18iLCJjYWxsYmFja18iLCJlcnJvckNhbGxiYWNrXyIsInByb2dyZXNzQ2FsbGJhY2tfIiwidGltZW91dF8iLCJwb29sXyIsInJlc29sdmVfIiwicmVqZWN0XyIsInN0YXJ0XyIsImJhY2tvZmZEb25lIiwicmVxdWVzdFdlbnRUaHJvdWdoIiwiY29ubmVjdGlvbiIsIndhc1N1Y2Nlc3NDb2RlIiwiZXJyIiwiY2FuY2VsZWQiLCJSZXF1ZXN0RW5kU3RhdHVzIiwid2FpdFNlY29uZHMiLCJ0aW1lb3V0SWQiLCJoaXRUaW1lb3V0IiwiY2FuY2VsU3RhdGUiLCJ0cmlnZ2VyZWRDYWxsYmFjayIsInRyaWdnZXJDYWxsYmFjayIsImNhbGxXaXRoRGVsYXkiLCJtaWxsaXMiLCJiYWNrb2ZmQ2FsbGJhY2siLCJwcm9ncmVzc0xpc3RlbmVyIiwicHJvZ3Jlc3NFdmVudCIsImxvYWRlZCIsInRvdGFsIiwibGVuZ3RoQ29tcHV0YWJsZSIsImhpdFNlcnZlciIsImlzUmV0cnlTdGF0dXNDb2RlXyIsIndhc0NhbmNlbGVkIiwic3VjY2Vzc0NvZGUiLCJzdWNjZXNzIiwid2FpdE1pbGxpcyIsInN0b3BwZWQiLCJzdG9wIiwid2FzVGltZW91dCIsImFwcERlbGV0ZSIsImlzRml2ZUh1bmRyZWRDb2RlIiwiaXNFeHRyYVJldHJ5Q29kZSIsImlzUmVxdWVzdFNwZWNpZmljUmV0cnlDb2RlIiwiZ2V0QmxvYkJ1aWxkZXIiLCJCbG9iQnVpbGRlciIsIldlYktpdEJsb2JCdWlsZGVyIiwiZ2V0QmxvYiIsIlN0cmluZ0Zvcm1hdCIsIlN0cmluZ0RhdGEiLCJjb250ZW50VHlwZSIsInV0ZjhCeXRlc18iLCJiYXNlNjRCeXRlc18iLCJoYXNNaW51cyIsImhhc1VuZGVyIiwiaGFzUGx1cyIsImhhc1NsYXNoIiwiYnl0ZXMiLCJhdG9iIiwiYXJyYXkiLCJEYXRhVVJMUGFydHMiLCJkYXRhVVJMIiwiYmFzZTY0IiwibWlkZGxlIiwiZW5kIiwiRmJzQmxvYiIsImVsaWRlQ29weSIsImJsb2JUeXBlIiwiZGF0YV8iLCJBcnJheUJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJzaXplXyIsInR5cGVfIiwic3RhcnRCeXRlIiwiZW5kQnl0ZSIsInNsaWNlZCIsIndlYmtpdFNsaWNlIiwibW96U2xpY2UiLCJidWZmZXIiLCJibG9iYnkiLCJ2YWwiLCJ1aW50OEFycmF5cyIsInN0cmluZ0RhdGEiLCJkYXRhVXJsIiwicGFydHMiLCJwZXJjZW50RW5jb2RlZEJ5dGVzXyIsImRhdGFVUkxCeXRlc18iLCJkYXRhRnJvbVN0cmluZyIsImZpbmFsTGVuZ3RoIiwibWVyZ2VkIiwiaW5kZXgiLCJ1cGxvYWREYXRhIiwianNvbk9iamVjdE9yTnVsbCIsImxhc3RDb21wb25lbnQiLCJsYXN0SW5kZXhPZiIsIm5vWGZvcm1fIiwiTWFwcGluZyIsInNlcnZlciIsImxvY2FsIiwid3JpdGFibGUiLCJ4Zm9ybSIsIm1hcHBpbmdzXyIsImdldE1hcHBpbmdzIiwibWFwcGluZ3MiLCJuYW1lTWFwcGluZyIsIl9tZXRhZGF0YSIsImZ1bGxQYXRoIiwieGZvcm1QYXRoIiwic2l6ZU1hcHBpbmciLCJmcm9tUmVzb3VyY2VTdHJpbmciLCJyZXNvdXJjZVN0cmluZyIsInJlc291cmNlIiwibGVuIiwibWFwcGluZyIsIl9tYWtlU3RvcmFnZVJlZmVyZW5jZSIsImFkZFJlZiIsImZyb21SZXNvdXJjZSIsIlJlcXVlc3RJbmZvIiwidXJsUGFyYW1zIiwiZXJyb3JIYW5kbGVyIiwiaGFuZGxlckNoZWNrIiwiY25kbiIsInNoYXJlZEVycm9ySGFuZGxlciIsInhociIsIm5ld0VyciIsIm9iamVjdEVycm9ySGFuZGxlciIsInNoYXJlZCIsIm11bHRpcGFydFVwbG9hZCIsImJvdW5kYXJ5Iiwic3RyIiwiZ2VuQm91bmRhcnkiLCJtZXRhZGF0YV8iLCJtZXRhZGF0YUNsb25lIiwiZGV0ZXJtaW5lQ29udGVudFR5cGVfIiwibWV0YWRhdGFGb3JVcGxvYWRfIiwicHJlQmxvYlBhcnQiLCJ0b1Jlc291cmNlU3RyaW5nIiwicG9zdEJsb2JQYXJ0IiwibWF4VXBsb2FkUmV0cnlUaW1lIiwicmVxdWVzdEluZm8iLCJtZXRhZGF0YUhhbmRsZXIiLCJSZWZlcmVuY2UiLCJfc2VydmljZSIsIl9sb2NhdGlvbiIsIl9uZXdSZWYiLCJyb290IiwicGFyZW50IiwibmV3UGF0aCIsIl90aHJvd0lmUm9vdCIsImludmFsaWRSb290T3BlcmF0aW9uIiwiZ2V0RG93bmxvYWRVUkwkMSIsInJlZiIsIm1heE9wZXJhdGlvblJldHJ5VGltZSIsInRva2VucyIsImFsdCIsImRvd25sb2FkVXJsRnJvbVJlc291cmNlU3RyaW5nIiwiZG93bmxvYWRVcmxIYW5kbGVyIiwiZ2V0RG93bmxvYWRVcmwiLCJtYWtlUmVxdWVzdFdpdGhUb2tlbnMiLCJyZWZGcm9tUGF0aCIsIkZpcmViYXNlU3RvcmFnZUltcGwiLCJfYnVja2V0IiwicmVmZXJlbmNlIiwiY2hpbGRQYXRoIiwiY2Fub25pY2FsQ2hpbGRQYXRoIiwiY2hpbGQiLCJfZ2V0Q2hpbGQkMSIsImV4dHJhY3RCdWNrZXQiLCJfYXV0aFByb3ZpZGVyIiwiX2FwcENoZWNrUHJvdmlkZXIiLCJfcG9vbCIsIl91cmwiLCJfZmlyZWJhc2VWZXJzaW9uIiwiX2hvc3QiLCJfYXBwSWQiLCJfbWF4T3BlcmF0aW9uUmV0cnlUaW1lIiwiX21heFVwbG9hZFJldHJ5VGltZSIsIl9yZXF1ZXN0cyIsInRpbWUiLCJQT1NJVElWRV9JTkZJTklUWSIsIl9nZXRBdXRoVG9rZW4iLCJfb3ZlcnJpZGVBdXRoVG9rZW4iLCJ0b2tlbkRhdGEiLCJfZ2V0QXBwQ2hlY2tUb2tlbiIsImFwcENoZWNrIiwiX21ha2VSZXF1ZXN0IiwiYXV0aFRva2VuIiwiYXBwQ2hlY2tUb2tlbiIsImZpcmViYXNlVmVyc2lvbiIsImFkZEdtcGlkSGVhZGVyXyIsImFkZEF1dGhIZWFkZXJfIiwiYWRkVmVyc2lvbkhlYWRlcl8iLCJhZGRBcHBDaGVja0hlYWRlcl8iLCJtYWtlUmVxdWVzdCIsIlNUT1JBR0VfVFlQRSIsInVwbG9hZEJ5dGVzIiwiZmluYWxNZXRhZGF0YSIsInVwbG9hZEJ5dGVzJDEiLCJnZXREb3dubG9hZFVSTCIsImRlbGV0ZU9iamVjdCIsIl94aHIiLCJfdGV4dCIsImRlbGV0ZU9iamVjdCQyIiwiZGVsZXRlT2JqZWN0JDEiLCJzZXJ2aWNlT3JSZWYiLCJwYXRoT3JVcmwiLCJyZWYkMSIsImdldFN0b3JhZ2UiLCJidWNrZXRVcmwiLCJhdXRoUHJvdmlkZXIiLCJhcHBDaGVja1Byb3ZpZGVyIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJ2ZXJzaW9uIiwibG9nU3RyaW5nIiwibmFtZSRvIiwibG9nZ2VyIiwibmFtZSRuIiwibmFtZSRtIiwibmFtZSRsIiwibmFtZSRrIiwibmFtZSRqIiwibmFtZSRpIiwibmFtZSRoIiwibmFtZSRnIiwibmFtZSRmIiwibmFtZSRlIiwibmFtZSRkIiwibmFtZSRjIiwibmFtZSRiIiwibmFtZSRhIiwibmFtZSQ5IiwibmFtZSQ4IiwibmFtZSQ3IiwibmFtZSQ2IiwibmFtZSQ1IiwibmFtZSQ0IiwibmFtZSQzIiwibmFtZSQyIiwibmFtZSQxIiwiUExBVEZPUk1fTE9HX1NUUklORyIsIl9hcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiZGVidWciLCJfcmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiX2dldFByb3ZpZGVyIiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJpc0RlbGV0ZWQiLCJTREtfVkVSU0lPTiIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsImdldEFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIndhcm4iLCJfX3NwcmVhZEFycmF5cyIsImlsIiwiamwiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiX2kiLCJ0b0lTT1N0cmluZyIsImNvbnNvbGUiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJzZXRMb2dMZXZlbCIsImxvZyIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsIkVOQ09ERURfVkFMU19XRUJTQUZFIiwiSEFTX05BVElWRV9TVVBQT1JUIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJlbmNvZGVTdHJpbmciLCJidG9hIiwib3V0Iiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsImRlY29kZVN0cmluZyIsInBvcyIsImMxIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiYnl0ZTQiLCJiYXNlNjREZWNvZGUiLCJEZWZlcnJlZCIsIndyYXBDYWxsYmFjayIsImdldFVBIiwiaXNNb2JpbGVDb3Jkb3ZhIiwiaXNCcm93c2VyRXh0ZW5zaW9uIiwicnVudGltZSIsImNocm9tZSIsImJyb3dzZXIiLCJpc1JlYWN0TmF0aXZlIiwiaXNFbGVjdHJvbiIsImlzSUUiLCJpc1VXUCIsImlzU2FmYXJpIiwicHJvY2VzcyIsImlzTm9kZSIsIkZpcmViYXNlRXJyb3IiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImlzRW1wdHkiLCJkZWVwRXF1YWwiLCJhS2V5cyIsImJLZXlzIiwiYUtleXNfMSIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsImJLZXlzXzEiLCJ0aGluZyIsInF1ZXJ5c3RyaW5nIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJfbG9vcF8xIiwiYXJyYXlWYWwiLCJxdWVyeXN0cmluZ0RlY29kZSIsImV4dHJhY3RRdWVyeXN0cmluZyIsInF1ZXJ5U3RhcnQiLCJmcmFnbWVudFN0YXJ0IiwiY3JlYXRlU3Vic2NyaWJlIiwiZXhlY3V0b3IiLCJvbk5vT2JzZXJ2ZXJzIiwiT2JzZXJ2ZXJQcm94eSIsInN1YnNjcmliZSIsIlNoYTEiLCJjaGFpbl8iLCJidWZfIiwiV18iLCJwYWRfIiwiaW5idWZfIiwidG90YWxfIiwiYmxvY2tTaXplIiwiY29tcHJlc3NfIiwiYnVmIiwib2Zmc2V0IiwidXBkYXRlIiwibGVuZ3RoTWludXNCbG9jayIsImluYnVmIiwiZGlnZXN0IiwidG90YWxCaXRzIiwib2JzZXJ2ZXJzIiwidW5zdWJzY3JpYmVzIiwib2JzZXJ2ZXJDb3VudCIsInRhc2siLCJmaW5hbGl6ZWQiLCJmb3JFYWNoT2JzZXJ2ZXIiLCJjb21wbGV0ZSIsIm1ldGhvZHNfMSIsImltcGxlbWVudHNBbnlNZXRob2RzIiwibm9vcCIsInVuc3ViIiwidW5zdWJzY3JpYmVPbmUiLCJmaW5hbEVycm9yIiwiZm4iLCJzZW5kT25lIiwiZ2V0TW9kdWxhckluc3RhbmNlIiwiX2RlbGVnYXRlIiwiX19yZXN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsImdlbmVyYXRvciIsInN0ZXAiLCJyZWplY3RlZCIsIl9fZ2VuZXJhdG9yIiwidHJ5cyIsIm9wcyIsIkl0ZXJhdG9yIiwidmVyYiIsInBvcCIsIl9fcmVhZCIsImFyIiwiX19zcHJlYWRBcnJheSIsInRvIiwicGFjayIsIlN1cHByZXNzZWRFcnJvciIsImlzQXV0aGVudGljYXRlZCIsInRvS2V5IiwiaXNFcXVhbCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiYXV0aEhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiaW52YWxpZGF0ZVRva2VuIiwiZW5xdWV1ZVJldHJ5YWJsZSIsInNodXRkb3duIiwiZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJ0dCIsImV0IiwiZXZlcnkiLCJzdCIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsImZyb21EYXRlIiwidG9EYXRlIiwidG9NaWxsaXMiLCJfY29tcGFyZVRvIiwidmFsdWVPZiIsInBhZFN0YXJ0IiwiaXQiLCJ0aW1lc3RhbXAiLCJmcm9tVGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsInJ0Iiwib3QiLCJhdCIsImN0Iiwic2VnbWVudHMiLCJjb21wYXJhdG9yIiwibGltaXQiLCJjb25zdHJ1Y3QiLCJwb3BGaXJzdCIsInBvcExhc3QiLCJmaXJzdFNlZ21lbnQiLCJsYXN0U2VnbWVudCIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwidG9BcnJheSIsInV0IiwiY2Fub25pY2FsU3RyaW5nIiwiZnJvbVN0cmluZyIsImVtcHR5UGF0aCIsImh0IiwibHQiLCJpc1ZhbGlkSWRlbnRpZmllciIsImlzS2V5RmllbGQiLCJrZXlGaWVsZCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJmdCIsImZpZWxkcyIsImNvdmVycyIsInd0IiwiYmluYXJ5U3RyaW5nIiwiZnJvbUJhc2U2NFN0cmluZyIsImZyb21VaW50OEFycmF5IiwidG9CYXNlNjQiLCJ0b1VpbnQ4QXJyYXkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRU1QVFlfQllURV9TVFJJTkciLCJfdCIsIm10IiwibmFub3MiLCJndCIsInl0IiwicHQiLCJtYXBWYWx1ZSIsIl9fdHlwZV9fIiwic3RyaW5nVmFsdWUiLCJFdCIsIl9fcHJldmlvdXNfdmFsdWVfXyIsIlR0IiwiX19sb2NhbF93cml0ZV90aW1lX18iLCJ0aW1lc3RhbXBWYWx1ZSIsIkl0IiwiQXQiLCJQdCIsImZyb21QYXRoIiwiZnJvbU5hbWUiLCJoYXNDb2xsZWN0aW9uSWQiLCJpc0RvY3VtZW50S2V5IiwiZnJvbVNlZ21lbnRzIiwiYnQiLCJ2dCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsIlZ0IiwiU3QiLCJEdCIsIkN0IiwiTnQiLCJrdCIsIiR0IiwiT3QiLCJGdCIsIk10IiwiTHQiLCJCdCIsImVtcHR5IiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsIlV0IiwicXQiLCJkb2N1bWVudFN0YXRlIiwibmV3SW52YWxpZERvY3VtZW50IiwibmV3Rm91bmREb2N1bWVudCIsIm5ld05vRG9jdW1lbnQiLCJuZXdVbmtub3duRG9jdW1lbnQiLCJjb252ZXJ0VG9Gb3VuZERvY3VtZW50IiwiY29udmVydFRvTm9Eb2N1bWVudCIsImNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsInNldEhhc0xvY2FsTXV0YXRpb25zIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNQZW5kaW5nV3JpdGVzIiwiaXNWYWxpZERvY3VtZW50IiwiaXNGb3VuZERvY3VtZW50IiwiaXNOb0RvY3VtZW50IiwiaXNVbmtub3duRG9jdW1lbnQiLCJLdCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwianQiLCJRdCIsIkp0IiwiZGlyIiwib2UiLCJHdCIsImNlIiwiaGUiLCJ6dCIsIkh0IiwiWXQiLCJlZSIsIm5lIiwic2UiLCJpZSIsIlh0IiwiWnQiLCJ0ZSIsIm51bGxWYWx1ZSIsImJlZm9yZSIsImFlIiwidWUiLCJsZSIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsImRlIiwid2UiLCJwZSIsImdlIiwibWUiLCJFZSIsIkllIiwiQWUiLCJSZSIsIld0IiwiUGUiLCJiZSIsInZlIiwiVmUiLCJTZSIsIkRlIiwiaXNJbnRlZ2VyIiwiTUFYX1NBRkVfSU5URUdFUiIsIk1JTl9TQUZFX0lOVEVHRVIiLCJSdCIsIkNlIiwiTmUiLCIkZSIsIk9lIiwiRmUiLCJNZSIsIkxlIiwia2UiLCJVZSIsInhlIiwiQmUiLCJlbGVtZW50cyIsInFlIiwiS2UiLCJ0cmFuc2Zvcm0iLCJRZSIsInRyYW5zZm9ybVJlc3VsdHMiLCJXZSIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJub25lIiwiaXNOb25lIiwiR2UiLCJ6ZSIsIkhlIiwidG4iLCJzbiIsImZpZWxkVHJhbnNmb3JtcyIsImVuIiwicHJlY29uZGl0aW9uIiwibm4iLCJKZSIsInJuIiwiWmUiLCJZZSIsIlhlIiwiamUiLCJmaWVsZE1hc2siLCJvbiIsImFuIiwiY24iLCJjb3VudCIsInVuIiwiaG4iLCJkbiIsIl9uIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJyaWdodCIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwiZ2V0SXRlcmF0b3IiLCJ3biIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrTWF4RGVwdGgiLCJjaGVjayIsInBvdyIsIm1uIiwiZmlyc3QiLCJsYXN0IiwiZm9yRWFjaEluUmFuZ2UiLCJmb3JFYWNoV2hpbGUiLCJmaXJzdEFmdGVyT3JFcXVhbCIsImduIiwidW5pb25XaXRoIiwiaXRlciIsInluIiwicG4iLCJFbiIsIlRuIiwiSW4iLCJSbiIsIlBuIiwiYm4iLCJ2biIsIlZuIiwic25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q2hhbmdlcyIsInRhcmdldE1pc21hdGNoZXMiLCJkb2N1bWVudFVwZGF0ZXMiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwiY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UiLCJTbiIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiRG4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwiQ24iLCJ0YXJnZXRJZCIsIk5uIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJ4biIsIk9uIiwia24iLCJudCIsIiRuIiwiZm9yRWFjaFRhcmdldCIsInJlbW92ZVRhcmdldCIsImR0IiwicHVycG9zZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJGbiIsImFzYyIsImRlc2MiLCJNbiIsImluIiwiTG4iLCJkYXRhYmFzZUlkIiwiQm4iLCJVbiIsInFuIiwiS24iLCJqbiIsImRhdGFiYXNlIiwiUW4iLCJwcyIsIlduIiwiR24iLCJZbiIsInpuIiwiSm4iLCJYbiIsInJzIiwiZG9jdW1lbnRzIiwib3MiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsInVuYXJ5RmlsdGVyIiwid3MiLCJmaWVsZEZpbHRlciIsImRzIiwiY29tcG9zaXRlRmlsdGVyIiwiZGlyZWN0aW9uIiwiZnMiLCJocyIsImFzIiwiSG4iLCJ1cyIsIl9zIiwibHMiLCJmZSIsImdzIiwibXMiLCJmaWVsZFBhdGgiLCJOYU4iLCJ5cyIsImZpZWxkUGF0aHMiLCJFcyIsIklzIiwiVHMiLCJQcyIsIm93bmVySWQiLCJhbGxvd1RhYlN5bmNocm9uaXphdGlvbiIsImxlYXNlVGltZXN0YW1wTXMiLCJzdG9yZSIsImJzIiwidXNlcklkIiwibGFzdEFja25vd2xlZGdlZEJhdGNoSWQiLCJsYXN0U3RyZWFtVG9rZW4iLCJ2cyIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZU1zIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsInVzZXJNdXRhdGlvbnNJbmRleCIsInVzZXJNdXRhdGlvbnNLZXlQYXRoIiwiVnMiLCJwcmVmaXhGb3JVc2VyIiwicHJlZml4Rm9yUGF0aCIsIlBMQUNFSE9MREVSIiwiQ3MiLCJ1bmtub3duRG9jdW1lbnQiLCJub0RvY3VtZW50IiwicmVhZFRpbWUiLCJwYXJlbnRQYXRoIiwicmVhZFRpbWVJbmRleCIsInJlYWRUaW1lSW5kZXhQYXRoIiwiY29sbGVjdGlvblJlYWRUaW1lSW5kZXgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGgiLCJOcyIsImJ5dGVTaXplIiwieHMiLCJjYW5vbmljYWxJZCIsImxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciIsImxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJxdWVyeVRhcmdldHNJbmRleE5hbWUiLCJxdWVyeVRhcmdldHNLZXlQYXRoIiwia3MiLCJzZXF1ZW5jZU51bWJlciIsImRvY3VtZW50VGFyZ2V0c0luZGV4IiwiZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCIsIiRzIiwiaGlnaGVzdFRhcmdldElkIiwiaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsInRhcmdldENvdW50IiwiT3MiLCJGcyIsImNsaWVudElkIiwidXBkYXRlVGltZU1zIiwibmV0d29ya0VuYWJsZWQiLCJpbkZvcmVncm91bmQiLCJNcyIsImJ1bmRsZUlkIiwiY3JlYXRlVGltZSIsIkxzIiwiYnVuZGxlZFF1ZXJ5IiwiVXMiLCJxcyIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsInJhaXNlT25Db21taXR0ZWRFdmVudCIsIktzIiwibmV4dENhbGxiYWNrIiwiY2F0Y2hDYWxsYmFjayIsImlzRG9uZSIsImNhbGxiYWNrQXR0YWNoZWQiLCJ3cmFwRmFpbHVyZSIsIndyYXBTdWNjZXNzIiwid3JhcFVzZXJGdW5jdGlvbiIsIndhaXRGb3IiLCJvciIsInpzIiwiZWkiLCJsb2NhbFdyaXRlVGltZSIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIm11dGF0aW9uUmVzdWx0cyIsImFwcGx5VG9Mb2NhbFZpZXciLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsIm5pIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJzaSIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiaWkiLCJ3aSIsIlRlIiwieWkiLCJwaSIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiQWkiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJERUZBVUxUIiwiRElTQUJMRUQiLCJDaSIsIk9pIiwiS2kiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJqaSIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImdldFJlYWRUaW1lIiwiYWRkRW50cnkiLCJhc3NlcnROb3RBcHBsaWVkIiwicmVtb3ZlRW50cnkiLCJnZXRFbnRyeSIsImdldEZyb21DYWNoZSIsImdldEFsbEZyb21DYWNoZSIsImlyIiwiQW4iLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsImdldERvY3VtZW50c01hdGNoaW5nUXVlcnkiLCJ5ZSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicnIiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRUYXJnZXRDYWNoZSIsImdldEluZGV4TWFuYWdlciIsImdldEJ1bmRsZUNhY2hlIiwiY29sbGVjdEdhcmJhZ2UiLCJydW5UcmFuc2FjdGlvbiIsImNvbGxlY3QiLCJ1ciIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJsciIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJ3ciIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwibXIiLCJyZWZlcmVuY2VEZWxlZ2F0ZSIsImdyIiwiZ2V0VGFyZ2V0RGF0YSIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiQXIiLCJnZXRCdW5kbGVNZXRhZGF0YSIsInNhdmVCdW5kbGVNZXRhZGF0YSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsIlJyIiwiWm4iLCJQciIsInRzIiwiZXMiLCJucyIsImFkZFJlZmVyZW5jZSIsInNzIiwicmVtb3ZlUmVmZXJlbmNlIiwiY3MiLCJjb250YWluc0tleSIsImJyIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwidnIiLCJkb2NzIiwibmV3Q2hhbmdlQnVmZmVyIiwiVnIiLCJnZXRTaXplIiwiU3IiLCJBcyIsIlJzIiwiZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwiYWxsb2NhdGVUYXJnZXRJZCIsInNldFRhcmdldHNNZXRhZGF0YSIsImFkZFRhcmdldERhdGEiLCJ1cGRhdGVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsImdldFRhcmdldENvdW50IiwiYWRkTWF0Y2hpbmdLZXlzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwiRHIiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsIkNyIiwiU3MiLCJjdXJyZW50U2VxdWVuY2VOdW1iZXIiLCJOciIsIkRzIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIkJyIiwiYWN0aXZlVGFyZ2V0SWRzIiwicXIiLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsInVwZGF0ZVF1ZXJ5U3RhdGUiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNMb2NhbFF1ZXJ5VGFyZ2V0IiwiY2xlYXJRdWVyeVN0YXRlIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImhhbmRsZVVzZXJDaGFuZ2UiLCJzZXRPbmxpbmVTdGF0ZSIsIm5vdGlmeUJ1bmRsZUxvYWRlZCIsIktyIiwiRWkiLCJqciIsIlRpIiwiSWkiLCJSaSIsIlBpIiwiYmkiLCJRciIsIkJhdGNoR2V0RG9jdW1lbnRzIiwiQ29tbWl0IiwiUnVuUXVlcnkiLCJXciIsInZpIiwiVmkiLCJTaSIsIkRpIiwiTmkiLCJ4aSIsImtpIiwiJGkiLCJHciIsImRhdGFiYXNlSW5mbyIsInNzbCIsIkZpIiwiTWkiLCJMaSIsIkJpIiwiVWkiLCJxaSIsImF1dG9EZXRlY3RMb25nUG9sbGluZyIsInVzZUZldGNoU3RyZWFtcyIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsIkhyIiwiSnIiLCJZciIsIlFpIiwiV2kiLCJHaSIsInppIiwiSGkiLCJKaSIsIllpIiwiWGkiLCJaaSIsImVucXVldWVBZnRlckRlbGF5IiwidHIiLCJza2lwRGVsYXkiLCJYciIsImVyIiwibnIiLCJjcmVkZW50aWFsc1Byb3ZpZGVyIiwic3IiLCJjciIsImhyIiwiZHIiLCJfciIsInlyIiwicHIiLCJFciIsImVucXVldWVBbmRGb3JnZXQiLCJaciIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsImRvY3VtZW50RGVsZXRlIiwiZG9jdW1lbnRSZW1vdmUiLCJUciIsIklyIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwic3RyZWFtVG9rZW4iLCJpcyIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJ3cml0ZXMiLCJ1cGRhdGVNYXNrIiwidXBkYXRlVHJhbnNmb3JtcyIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJjdXJyZW50RG9jdW1lbnQiLCJlbyIsInRlcm1pbmF0ZSIsIm5vIiwiYXN5bmNRdWV1ZSIsImtyIiwiJHIiLCJPciIsIkZyIiwiTXIiLCJMciIsInNvIiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsIlVyIiwiZm8iLCJybyIsImlvIiwib28iLCJsbyIsImhvIiwiRG8iLCJjbyIsImFvIiwidW8iLCJ3byIsIl9vIiwibW8iLCJnbyIsInJlamVjdExpc3RlbiIsInlvIiwiYXBwbHlSZW1vdGVFdmVudCIsInBvIiwiRW8iLCJDbyIsIlRvIiwiSW8iLCJBbyIsIlJvIiwiUG8iLCJibyIsInZvIiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJWbyIsImxuIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJ6ciIsIk5vIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJ0aW1lckhhbmRsZSIsImhhbmRsZURlbGF5RWxhcHNlZCIsInhvIiwia28iLCJrZXllZE1hcCIsInNvcnRlZFNldCIsImVtcHR5U2V0IiwiJG8iLCJ0cmFjayIsIk9vIiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJGbyIsIk1vIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwiVW8iLCJLbyIsInFvIiwiam8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiSG8iLCJKbyIsIllvIiwic25hcHNob3QiLCJTbyIsIlhvIiwidmlldyIsIlpvIiwicmVtb3RlU3RvcmUiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiTG8iLCJCbyIsImlzUHJpbWFyeUNsaWVudCIsInRyYWNrUmVtb3ZhbHMiLCJmciIsInN5bmNocm9uaXplVGFicyIsIldvIiwiR28iLCJnY1NjaGVkdWxlciIsInpvIiwiaW5pdGlhbFVzZXIiLCJjcmVhdGVEYXRhc3RvcmUiLCJjcmVhdGVSZW1vdGVTdG9yZSIsImNyZWF0ZUV2ZW50TWFuYWdlciIsInN5bmNFbmdpbmUiLCJjcmVhdGVTeW5jRW5naW5lIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIm11dGVkIiwiY3JlZGVudGlhbExpc3RlbmVyIiwiZ2V0Q29uZmlndXJhdGlvbiIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIm9ubGluZUNvbXBvbmVudHMiLCJvZmZsaW5lQ29tcG9uZW50cyIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJvbkxpc3RlbiIsIm9uVW5saXN0ZW4iLCJzb3VyY2UiLCJwZXJzaXN0ZW5jZUtleSIsImlzRGVmYXVsdERhdGFiYXNlIiwiaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyIsImNhY2hlU2l6ZUJ5dGVzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsIl9jcmVkZW50aWFscyIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJjbGllbnQiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsIl9nZXRTZXR0aW5ncyIsIl9mcmVlemVTZXR0aW5ncyIsIl90ZXJtaW5hdGUiLCJjb252ZXJ0ZXIiLCJmaXJlc3RvcmUiLCJfcGF0aCIsIndpdGhDb252ZXJ0ZXIiLCJfcXVlcnkiLCJ2aXNpYmlsaXR5U3RhdGUiLCJlbnF1ZXVlIiwic3RhY2siLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2ludGVybmFsUGF0aCIsIl9ieXRlU3RyaW5nIiwiX21ldGhvZE5hbWUiLCJpc0Zpbml0ZSIsIl9sYXQiLCJfbG9uZyIsInR1IiwibnUiLCJ0b011dGF0aW9uIiwic3UiLCJpdSIsIlJ1IiwibWV0aG9kTmFtZSIsInJ1IiwiY3UiLCJfdG9GaWVsZFRyYW5zZm9ybSIsImh1IiwiZ3UiLCJwdSIsIkV1IiwieXUiLCJnZXRQcm90b3R5cGVPZiIsIlR1IiwiQXUiLCJJdSIsInNlYXJjaCIsIlB1IiwiYnUiLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInZ1IiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsIlZ1IiwiU3UiLCJEdSIsIl9maXJlc3RvcmVJbXBsIiwiQ3UiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwiTnUiLCJfc25hcHNob3QiLCJfY2FjaGVkQ2hhbmdlcyIsIl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJ4dSIsImVoIiwiY29udmVydFRpbWVzdGFtcCIsImNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAiLCJjb252ZXJ0Qnl0ZXMiLCJjb252ZXJ0UmVmZXJlbmNlIiwiY29udmVydEdlb1BvaW50IiwiY29udmVydEFycmF5IiwiY29udmVydE9iamVjdCIsImNvbnZlcnREb2N1bWVudEtleSIsImFoIiwiaGgiLCIkdSIsIndoIiwib3UiLCJfdSIsInd1IiwicGgiLCJSaCIsIlNoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwicHJvcCIsInF1ZXJ5U25hcHNob3QiLCJmZXRjaERvY3VtZW50cyIsImRvY3VtZW50c0xpc3REaXYiLCJkb2N1bWVudFRvQmVFZGl0ZWREYXRhIiwiZG9jdW1lbnRDYXJkIiwiY2xhc3NOYW1lIiwidXBsb2FkZWRBdCIsInRvTG9jYWxlU3RyaW5nIiwiZWRpdEljb24iLCJxdWVyeVNlbGVjdG9yIiwiZGVsZXRlSWNvbiIsInNoYXJlSWNvbiIsImRvY3VtZW50VG9CZUVkaXRlZCIsIm9wZW5FZGl0UGFnZSIsImNvbmZpcm0iLCJkb2N1bWVudFRvQmVEZWxldGVkRmlsZVBhdGgiLCJwYXRoV2l0aFRva2VuIiwiZ2V0RmlsZVBhdGhGcm9tVVJMIiwiZG9jdW1lbnRUb0JlRGVsZXRlZEZpbGVSZWYiLCJkb2N1bWVudFRvQmVEZWxldGVkUmVmIiwiZGVsZXRlRG9jdW1lbnQiLCJkb2N1bWVudFVybCIsImdldEF0dHJpYnV0ZSIsIm9uY2xpY2siLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJkaXNwbGF5RG9jdW1lbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==